(function(J){function q(a,b){function f(){}f.prototype=a;var c=new f,i;for(i in b)c[i]=b[i];b.toString!==Object.prototype.toString&&(c.toString=b.toString);return c}function ba(a){return a instanceof Array?function(){return w.iter(a)}:"function"==typeof a.iterator?r(a,a.iterator):a.iterator}function r(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=da++);var f;null==a.hx__closures__?a.hx__closures__={}:f=a.hx__closures__[b.__id__];null==f&&(f=function(){return f.method.apply(f.scope,arguments)},
f.scope=a,f.method=b,a.hx__closures__[b.__id__]=f);return f}J.openfl=J.openfl||{};var h={},u=function(){return s.Boot.__string_rec(this,"")},x=function(){};h.ApplicationMain=x;x.__name__=["ApplicationMain"];x.preloader=null;x.embed=J.openfl.embed=function(a,b,f,p){var i=null;null!=a&&(i=window.document.getElementById(a));a=null;null!=p&&(p=C.replace(p,"#",""),a=-1<p.indexOf("0x")?k.parseInt(p):k.parseInt("0x"+p));c.Lib.create(i,b,f,a);x.preloader=new Q;c.Lib.current.addChild(x.preloader);x.preloader.onInit();
b=[];f=m.io.Path.withoutExtension("assets/audio/wing_flap.ogg");w.remove(b,f)||x.total++;b.push(f);p=new Image;f="assets/textures/1x/atlas.png";x.images.set(f,p);p.onload=x.image_onLoad;p.src=f;x.total++;f=new c.net.URLLoader;f.set_dataFormat(c.net.URLLoaderDataFormat.BINARY);x.urlLoaders.set("assets/textures/1x/atlas.xml",f);x.total++;f=new c.net.URLLoader;f.set_dataFormat(c.net.URLLoaderDataFormat.BINARY);x.urlLoaders.set("assets/textures/1x/compressed_texture.atf",f);x.total++;f=new c.net.URLLoader;
f.set_dataFormat(c.net.URLLoaderDataFormat.BINARY);x.urlLoaders.set("assets/fonts/1x/desyrel.fnt",f);x.total++;p=new Image;f="assets/fonts/1x/desyrel.png";x.images.set(f,p);p.onload=x.image_onLoad;p.src=f;x.total++;f=new c.net.URLLoader;f.set_dataFormat(c.net.URLLoaderDataFormat.BINARY);x.urlLoaders.set("assets/fonts/Ubuntu-R.woff",f);x.total++;p=new Image;f="startup.jpg";x.images.set(f,p);p.onload=x.image_onLoad;p.src=f;x.total++;if(0==x.total)x.start();else{for(f=x.urlLoaders.keys();f.hasNext();)p=
f.next(),i=x.urlLoaders.get(p),i.addEventListener("complete",x.loader_onComplete),i.load(new c.net.URLRequest(p));for(f=0;f<b.length;)p=b[f],++f,i=new c.media.Sound,i.addEventListener(c.events.Event.COMPLETE,x.sound_onComplete),i.addEventListener(c.events.IOErrorEvent.IO_ERROR,x.sound_onIOError),i.load(new c.net.URLRequest(p+".ogg"))}};x.main=function(){};x.start=function(){x.preloader.addEventListener(c.events.Event.COMPLETE,x.preloader_onComplete);x.preloader.onLoaded()};x.image_onLoad=function(){x.assetsLoaded++;
x.preloader.onUpdate(x.assetsLoaded,x.total);x.assetsLoaded==x.total&&x.start()};x.loader_onComplete=function(){x.assetsLoaded++;x.preloader.onUpdate(x.assetsLoaded,x.total);x.assetsLoaded==x.total&&x.start()};x.preloader_onComplete=function(){x.preloader.removeEventListener(c.events.Event.COMPLETE,x.preloader_onComplete);c.Lib.current.removeChild(x.preloader);x.preloader=null;for(var a=!1,b=0,f=B.getClassFields(M);b<f.length;){var p=f[b];++b;if("main"==p){a=!0;break}}a?E.callMethod(M,E.field(M,"main"),
[]):(a=B.createInstance(R,[]),s.Boot.__instanceof(a,c.display.DisplayObject)?c.Lib.current.addChild(a):(m.Log.trace("Error: No entry point found",{fileName:"ApplicationMain.hx",lineNumber:249,className:"ApplicationMain",methodName:"preloader_onComplete"}),m.Log.trace("If you are using DCE with a static main, you may need to @:keep the function",{fileName:"ApplicationMain.hx",lineNumber:250,className:"ApplicationMain",methodName:"preloader_onComplete"})))};x.sound_onComplete=function(){x.assetsLoaded++;
x.preloader.onUpdate(x.assetsLoaded,x.total);x.assetsLoaded==x.total&&x.start()};x.sound_onIOError=function(){x.assetsLoaded++;x.preloader.onUpdate(x.assetsLoaded,x.total);x.assetsLoaded==x.total&&x.start()};var c={events:{}};c.events.IEventDispatcher=function(){};h["openfl.events.IEventDispatcher"]=c.events.IEventDispatcher;c.events.IEventDispatcher.__name__=["openfl","events","IEventDispatcher"];c.events.IEventDispatcher.prototype={__class__:c.events.IEventDispatcher};c.events.EventDispatcher=function(a){null!=
a&&(this.__targetDispatcher=a)};h["openfl.events.EventDispatcher"]=c.events.EventDispatcher;c.events.EventDispatcher.__name__=["openfl","events","EventDispatcher"];c.events.EventDispatcher.__interfaces__=[c.events.IEventDispatcher];c.events.EventDispatcher.__sortByPriority=function(a,b){return a.priority==b.priority?0:a.priority>b.priority?-1:1};c.events.EventDispatcher.prototype={addEventListener:function(a,b,f,p){null==p&&(p=0);null==f&&(f=!1);null==this.__eventMap&&(this.__eventMap=new m.ds.StringMap);
if(this.__eventMap.exists(a))a=this.__eventMap.get(a),a.push(new c.events._EventDispatcher.Listener(b,f,p)),a.sort(c.events.EventDispatcher.__sortByPriority);else{var i=[];i.push(new c.events._EventDispatcher.Listener(b,f,p));this.__eventMap.set(a,i)}},dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!1;var b=this.__eventMap.get(a.type);if(null==b)return!1;null==a.target&&(a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this);a.currentTarget=this;for(var f=0==a.eventPhase,
c=0,i;c<b.length;){i=b[c];if(i.useCapture==f&&(i.callback(a),a.__isCancelledNow))break;i==b[c]&&c++}return!0},hasEventListener:function(a){return null==this.__eventMap?!1:this.__eventMap.exists(a)},removeEventListener:function(a,b,f){null==f&&(f=!1);if(null!=this.__eventMap){var c=this.__eventMap.get(a);if(null!=c){for(var i=0,d=c.length;i<d;){var e=i++;if(c[e].match(b,f)){c.splice(e,1);break}}0==c.length&&this.__eventMap.remove(a);this.__eventMap.iterator().hasNext()||(this.__eventMap=null)}}},toString:function(){return"[object "+
B.getClassName(B.getClass(this)).split(".").pop()+"]"},willTrigger:function(a){return this.hasEventListener(a)},__class__:c.events.EventDispatcher};c.display={};c.display.IBitmapDrawable=function(){};h["openfl.display.IBitmapDrawable"]=c.display.IBitmapDrawable;c.display.IBitmapDrawable.__name__=["openfl","display","IBitmapDrawable"];c.display.IBitmapDrawable.prototype={__class__:c.display.IBitmapDrawable};c.display.DisplayObject=function(){c.events.EventDispatcher.call(this);this.set_alpha(1);this.set_rotation(0);
this.set_scaleX(1);this.set_scaleY(1);this.set_visible(!0);this.set_x(0);this.set_y(0);this.__worldAlpha=1;this.__worldTransform=new c.geom.Matrix;this.__worldVisible=!0;this.set_name("instance"+ ++c.display.DisplayObject.__instanceCount)};h["openfl.display.DisplayObject"]=c.display.DisplayObject;c.display.DisplayObject.__name__=["openfl","display","DisplayObject"];c.display.DisplayObject.__interfaces__=[c.display.IBitmapDrawable];c.display.DisplayObject.__super__=c.events.EventDispatcher;c.display.DisplayObject.prototype=
q(c.events.EventDispatcher.prototype,{dispatchEvent:function(a){var b=c.events.EventDispatcher.prototype.dispatchEvent.call(this,a);if(a.__isCancelled)return!0;a.bubbles&&(null!=this.parent&&this.parent!=this)&&(a.eventPhase=2,this.parent.dispatchEvent(a));return b},getBounds:function(a){var b=this.__getTransform();null!=a&&(b=new c.geom.Matrix(b.a,b.b,b.c,b.d,b.tx,b.ty),b.concat(a.__worldTransform.clone().invert()));a=new c.geom.Rectangle;this.__getBounds(a,b);return a},getRect:function(a){return this.getBounds(a)},
globalToLocal:function(a){return this.__getTransform().clone().invert().transformPoint(a)},hitTestObject:function(){return!1},hitTestPoint:function(a,b){return this.getBounds(null).contains(a,b)},localToGlobal:function(a){return this.__getTransform().transformPoint(a)},__applyStyle:function(a,b,f,c){b&&this.__worldTransformChanged&&(a.isWebkitDOM&&(this.__worldTransform.a=Math.round(1E3*this.__worldTransform.a)/1E3,this.__worldTransform.b=Math.round(1E3*this.__worldTransform.b)/1E3,this.__worldTransform.c=
Math.round(1E3*this.__worldTransform.c)/1E3,this.__worldTransform.d=Math.round(1E3*this.__worldTransform.d)/1E3,this.__worldTransform.tx=Math.round(10*this.__worldTransform.tx)/10,this.__worldTransform.ty=Math.round(10*this.__worldTransform.ty)/10),this.__style.setProperty(a.transformProperty,this.__worldTransform.to3DString(a.roundPixels),null));this.__worldZ!=++a.z&&(this.__worldZ=a.z,this.__style.setProperty("z-index",k.string(this.__worldZ),null));f&&this.__worldAlphaChanged&&(1>this.__worldAlpha?
this.__style.setProperty("opacity",k.string(this.__worldAlpha),null):this.__style.removeProperty("opacity"));c&&this.__worldClipChanged&&(null==this.__worldClip?this.__style.removeProperty("clip"):(a=this.__worldClip.transform(this.__worldTransform.clone().invert()),this.__style.setProperty("clip","rect("+a.y+"px, "+a.get_right()+"px, "+a.get_bottom()+"px, "+a.x+"px)",null)))},__broadcast:function(a){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var b=c.events.EventDispatcher.prototype.dispatchEvent.call(this,
a);return a.__isCancelled?!0:b}return!1},__getBounds:function(){},__getInteractive:function(){},__getLocalBounds:function(a){this.__getTransform();this.__getBounds(a,new c.geom.Matrix)},__getTransform:function(){if(0<c.display.DisplayObject.__worldTransformDirty){for(var a=[],b=this,f=this.__transformDirty;null!=b.parent;)a.push(b),b=b.parent,b.__transformDirty&&(f=!0);if(f)for(b=a.length;0<=--b;)a[b].__update(!0,!1)}return this.__worldTransform},__hitTest:function(){return!1},__initializeElement:function(a,
b){this.__style=a.style;this.__style.setProperty("position","absolute",null);this.__style.setProperty("top","0",null);this.__style.setProperty("left","0",null);this.__style.setProperty(b.transformOriginProperty,"0 0 0",null);b.element.appendChild(a);this.__worldVisibleChanged=this.__worldTransformChanged=this.__worldClipChanged=this.__worldAlphaChanged=!0;this.__worldZ=-1},__renderCanvas:function(){},__renderDOM:function(){},__renderGL:function(){},__renderMask:function(){},__setStageReference:function(a){this.stage!=
a&&(null!=this.stage&&this.dispatchEvent(new c.events.Event(c.events.Event.REMOVED_FROM_STAGE,!1,!1)),this.stage=a,null!=a&&this.dispatchEvent(new c.events.Event(c.events.Event.ADDED_TO_STAGE,!1,!1)))},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++)},__setTransformDirty:function(){this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++)},__update:function(a,b){this.__renderable=this.get_visible()&&
0!=this.get_scaleX()&&0!=this.get_scaleY()&&!this.__isMask;if(this.get_rotation()!=this.__rotationCache){this.__rotationCache=this.get_rotation();var f=this.get_rotation()*(Math.PI/180);this.__rotationSine=Math.sin(f);this.__rotationCosine=Math.cos(f)}if(null!=this.parent){var f=this.parent.__worldTransform,p=this.__rotationCosine*this.get_scaleX(),i=this.__rotationSine*this.get_scaleX(),d=-this.__rotationSine*this.get_scaleY(),e=this.__rotationCosine*this.get_scaleY(),o=f.a,z=f.b,A=f.c,n=f.d;this.__worldTransform.a=
p*o+i*A;this.__worldTransform.b=p*z+i*n;this.__worldTransform.c=d*o+e*A;this.__worldTransform.d=d*z+e*n;null==this.get_scrollRect()?(this.__worldTransform.tx=this.get_x()*o+this.get_y()*A+f.tx,this.__worldTransform.ty=this.get_x()*z+this.get_y()*n+f.ty):(this.__worldTransform.tx=(this.get_x()-this.get_scrollRect().x)*o+(this.get_y()-this.get_scrollRect().y)*A+f.tx,this.__worldTransform.ty=(this.get_x()-this.get_scrollRect().x)*z+(this.get_y()-this.get_scrollRect().y)*n+f.ty)}else this.__worldTransform.a=
this.__rotationCosine*this.get_scaleX(),this.__worldTransform.c=-this.__rotationSine*this.get_scaleY(),this.__worldTransform.b=this.__rotationSine*this.get_scaleX(),this.__worldTransform.d=this.__rotationCosine*this.get_scaleY(),null==this.get_scrollRect()?(this.__worldTransform.tx=this.get_x(),this.__worldTransform.ty=this.get_y()):(this.__worldTransform.tx=this.get_y()-this.get_scrollRect().x,this.__worldTransform.ty=this.get_y()-this.get_scrollRect().y);b&&this.__transformDirty&&(this.__transformDirty=
!1,c.display.DisplayObject.__worldTransformDirty--);if(!a&&(this.__worldTransformChanged=!this.__worldTransform.equals(this.__worldTransformCache),this.__worldTransformCache=this.__worldTransform.clone(),f=null,null!=this.parent?(p=this.parent.__worldVisible&&this.get_visible(),this.__worldVisibleChanged=this.__worldVisible!=p,this.__worldVisible=p,p=this.get_alpha()*this.parent.__worldAlpha,this.__worldAlphaChanged=this.__worldAlpha!=p,this.__worldAlpha=p,null!=this.parent.__worldClip&&(f=this.parent.__worldClip.clone()),
null!=this.get_scrollRect()&&(p=this.get_scrollRect().clone(),p=p.transform(this.__worldTransform),null!=f&&p.__contract(f.x-this.get_scrollRect().x,f.y-this.get_scrollRect().y,f.width,f.height),f=p)):(this.__worldAlpha=this.get_alpha(),this.__worldVisibleChanged=this.__worldVisible!=this.get_visible(),this.__worldVisible=this.get_visible(),this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha(),null!=this.get_scrollRect()&&(f=this.get_scrollRect().clone().transform(this.__worldTransform))),
this.__worldClipChanged=null==f&&null!=this.__worldClip||null!=f&&!f.equals(this.__worldClip),this.__worldClip=f,b&&this.__renderDirty))this.__renderDirty=!1},__updateChildren:function(){if((this.__renderable=this.get_visible()&&0!=this.get_scaleX()&&0!=this.get_scaleY()&&!this.__isMask)||this.__isMask)this.__worldAlpha=this.get_alpha(),this.__transformDirty&&(this.__transformDirty=!1,c.display.DisplayObject.__worldTransformDirty--)},get_alpha:function(){return this.__alpha},set_alpha:function(a){a!=
this.__alpha&&!this.__renderDirty&&(this.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++);return this.__alpha=a},get_filters:function(){return null==this.__filters?[]:this.__filters.slice()},set_filters:function(a){return a},get_height:function(){var a=new c.geom.Rectangle;this.__getTransform();this.__getBounds(a,new c.geom.Matrix);return a.height*this.get_scaleY()},set_height:function(a){var b=new c.geom.Rectangle;this.__getTransform();this.__getBounds(b,new c.geom.Matrix);a!=b.height?
this.set_scaleY(a/b.height):this.set_scaleY(1);return a},get_mask:function(){return this.__mask},set_mask:function(a){a!=this.__mask&&!this.__renderDirty&&(this.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++);null!=this.__mask&&(this.__mask.__isMask=!1);null!=a&&(a.__isMask=!0);return this.__mask=a},get_mouseX:function(){return null!=this.stage?this.globalToLocal(new c.geom.Point(this.stage.__mouseX,0)).x:0},get_mouseY:function(){return null!=this.stage?this.globalToLocal(new c.geom.Point(0,
this.stage.__mouseY)).y:0},get_name:function(){return this.__name},set_name:function(a){return this.__name=a},get_root:function(){return null!=this.stage?c.Lib.current:null},get_rotation:function(){return this.__rotation},set_rotation:function(a){a!=this.__rotation&&!this.__transformDirty&&(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++);return this.__rotation=a},get_scaleX:function(){return this.__scaleX},set_scaleX:function(a){a!=this.__scaleX&&!this.__transformDirty&&
(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++);return this.__scaleX=a},get_scaleY:function(){return this.__scaleY},set_scaleY:function(a){this.__scaleY!=a&&!this.__transformDirty&&(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++);return this.__scaleY=a},get_scrollRect:function(){return this.__scrollRect},set_scrollRect:function(a){if(a!=this.__scrollRect&&(this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),
!this.__renderDirty))this.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++;return this.__scrollRect=a},get_transform:function(){null==this.__transform&&(this.__transform=new c.geom.Transform(this));return this.__transform},set_transform:function(a){if(null==a)throw new c.errors.TypeError("Parameter transform must be non-null.");null==this.__transform&&(this.__transform=new c.geom.Transform(this));this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++);
this.__transform.set_matrix(a.get_matrix().clone());this.__transform.colorTransform=new c.geom.ColorTransform(a.colorTransform.redMultiplier,a.colorTransform.greenMultiplier,a.colorTransform.blueMultiplier,a.colorTransform.alphaMultiplier,a.colorTransform.redOffset,a.colorTransform.greenOffset,a.colorTransform.blueOffset,a.colorTransform.alphaOffset);return this.__transform},get_visible:function(){return this.__visible},set_visible:function(a){a!=this.__visible&&!this.__renderDirty&&(this.__renderDirty=
!0,c.display.DisplayObject.__worldRenderDirty++);return this.__visible=a},get_width:function(){var a=new c.geom.Rectangle;this.__getTransform();this.__getBounds(a,new c.geom.Matrix);return a.width*this.get_scaleX()},set_width:function(a){var b=new c.geom.Rectangle;this.__getTransform();this.__getBounds(b,new c.geom.Matrix);a!=b.width?this.set_scaleX(a/b.width):this.set_scaleX(1);return a},get_x:function(){return this.__x},set_x:function(a){a!=this.__x&&!this.__transformDirty&&(this.__transformDirty=
!0,c.display.DisplayObject.__worldTransformDirty++);return this.__x=a},get_y:function(){return this.__y},set_y:function(a){a!=this.__y&&!this.__transformDirty&&(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++);return this.__y=a},__class__:c.display.DisplayObject,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_width:"get_width",set_visible:"set_visible",get_visible:"get_visible",set_transform:"set_transform",get_transform:"get_transform",
set_scrollRect:"set_scrollRect",get_scrollRect:"get_scrollRect",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_rotation:"set_rotation",get_rotation:"get_rotation",get_root:"get_root",set_name:"set_name",get_name:"get_name",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",set_mask:"set_mask",get_mask:"get_mask",set_height:"set_height",get_height:"get_height",set_filters:"set_filters",get_filters:"get_filters",set_alpha:"set_alpha",get_alpha:"get_alpha"}});
c.display.InteractiveObject=function(){c.display.DisplayObject.call(this);this.doubleClickEnabled=!1;this.mouseEnabled=!0;this.needsSoftKeyboard=!1;this.tabEnabled=!0;this.tabIndex=-1};h["openfl.display.InteractiveObject"]=c.display.InteractiveObject;c.display.InteractiveObject.__name__=["openfl","display","InteractiveObject"];c.display.InteractiveObject.__super__=c.display.DisplayObject;c.display.InteractiveObject.prototype=q(c.display.DisplayObject.prototype,{requestSoftKeyboard:function(){c.Lib.notImplemented("InteractiveObject.requestSoftKeyboard");
return!1},__getInteractive:function(a){a.push(this);null!=this.parent&&this.parent.__getInteractive(a)},__class__:c.display.InteractiveObject});c.display.DisplayObjectContainer=function(){c.display.InteractiveObject.call(this);this.mouseChildren=!0;this.__children=[];this.__removedChildren=[]};h["openfl.display.DisplayObjectContainer"]=c.display.DisplayObjectContainer;c.display.DisplayObjectContainer.__name__=["openfl","display","DisplayObjectContainer"];c.display.DisplayObjectContainer.__super__=
c.display.InteractiveObject;c.display.DisplayObjectContainer.prototype=q(c.display.InteractiveObject.prototype,{addChild:function(a){null!=a&&(null!=a.parent&&a.parent.removeChild(a),this.__children.push(a),a.parent=this,null!=this.stage&&a.__setStageReference(this.stage),a.__transformDirty||(a.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),a.__renderDirty||(a.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++),a.dispatchEvent(new c.events.Event(c.events.Event.ADDED,
!0)));return a},addChildAt:function(a,b){if(b>this.__children.length||0>b)throw"Invalid index position "+b;a.parent==this?w.remove(this.__children,a):(null!=a.parent&&a.parent.removeChild(a),a.parent=this,null!=this.stage&&a.__setStageReference(this.stage),a.__transformDirty||(a.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),a.__renderDirty||(a.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++),a.dispatchEvent(new c.events.Event(c.events.Event.ADDED,!0)));this.__children.splice(b,
0,a);return a},areInaccessibleObjectsUnderPoint:function(){return!1},contains:function(a){return-1<w.indexOf(this.__children,a,0)},getChildAt:function(a){return 0<=a&&a<this.__children.length?this.__children[a]:null},getChildByName:function(a){for(var b=0,f=this.__children;b<f.length;){var c=f[b];++b;if(c.get_name()==a)return c}return null},getChildIndex:function(a){for(var b=0,f=this.__children.length;b<f;){var c=b++;if(this.__children[c]==a)return c}return-1},getObjectsUnderPoint:function(a){var a=
this.localToGlobal(a),b=[];this.__hitTest(a.x,a.y,!1,b,!1);b.shift();return b},removeChild:function(a){null!=a&&a.parent==this&&(null!=this.stage&&a.__setStageReference(null),a.parent=null,w.remove(this.__children,a),this.__removedChildren.push(a),a.__transformDirty||(a.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),a.__renderDirty||(a.__renderDirty=!0,c.display.DisplayObject.__worldRenderDirty++),a.dispatchEvent(new c.events.Event(c.events.Event.REMOVED,!0)));return a},removeChildAt:function(a){return 0<=
a&&a<this.__children.length?this.removeChild(this.__children[a]):null},removeChildren:function(a,b){null==b&&(b=2147483647);null==a&&(a=0);if(2147483647==b&&(b=this.__children.length-1,0>b))return;if(!(a>this.__children.length-1)){if(b<a||0>a||b>this.__children.length)throw new c.errors.RangeError("The supplied index is out of bounds.");for(var f=b-a;0<=f;)this.removeChildAt(a),f--}},setChildIndex:function(a,b){0<=b&&(b<=this.__children.length&&a.parent==this)&&(w.remove(this.__children,a),this.__children.splice(b,
0,a))},swapChildren:function(a,b){if(a.parent==this&&b.parent==this){var f=w.indexOf(this.__children,a,0),c=w.indexOf(this.__children,b,0);this.__children[f]=b;this.__children[c]=a}},swapChildrenAt:function(a,b){var f=this.__children[a];this.__children[a]=this.__children[b];this.__children[b]=f},__broadcast:function(a,b){null==a.target&&(a.target=this);if(b)for(var f=0,p=this.__children;f<p.length;){var i=p[f];++f;i.__broadcast(a,!0);if(a.__isCancelled)return!0}return c.display.InteractiveObject.prototype.__broadcast.call(this,
a,b)},__getBounds:function(a,b){if(0!=this.__children.length){var f=null;null!=b&&(f=this.__worldTransform,this.__worldTransform=b,this.__updateChildren(!0));for(var c=0,i=this.__children;c<i.length;){var d=i[c];++c;d.__renderable&&d.__getBounds(a,null)}null!=b&&(this.__worldTransform=f,this.__updateChildren(!0))}},__hitTest:function(a,b,f,c,i){if(!this.get_visible()||i&&!this.mouseEnabled)return!1;var d=this.__children.length;if(i&&(null==c||!this.mouseChildren))for(;0<=--d;){if(this.__children[d].__hitTest(a,
b,f,null,i))return null!=c&&c.push(this),!0}else if(null!=c)for(var e=c.length;0<=--d;)if(this.__children[d].__hitTest(a,b,f,c,i))return c.splice(e,0,this),!0;return!1},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){null!=this.get_scrollRect()&&a.maskManager.pushRect(this.get_scrollRect(),this.__worldTransform);null!=this.__mask&&a.maskManager.pushMask(this.__mask);for(var b=0,f=this.__children;b<f.length;){var c=f[b];++b;c.__renderCanvas(a)}this.__removedChildren=[];null!=
this.__mask&&a.maskManager.popMask();null!=this.get_scrollRect()&&a.maskManager.popMask()}},__renderDOM:function(a){for(var b=0,f=this.__children;b<f.length;){var c=f[b];++b;c.__renderDOM(a)}b=0;for(f=this.__removedChildren;b<f.length;)c=f[b],++b,null==c.stage&&c.__renderDOM(a);this.__removedChildren=[]},__renderGL:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){for(var b=0,f=this.__children;b<f.length;){var c=f[b];++b;c.__renderGL(a)}this.__removedChildren=[]}},__renderMask:function(a){var b=
new c.geom.Rectangle;this.__getTransform();this.__getBounds(b,new c.geom.Matrix);a.context.rect(0,0,b.width,b.height)},__setStageReference:function(a){if(this.stage!=a){null!=this.stage&&this.dispatchEvent(new c.events.Event(c.events.Event.REMOVED_FROM_STAGE,!1,!1));this.stage=a;null!=a&&this.dispatchEvent(new c.events.Event(c.events.Event.ADDED_TO_STAGE,!1,!1));for(var b=0,f=this.__children;b<f.length;){var p=f[b];++b;p.__setStageReference(a)}}},__update:function(a,b){c.display.InteractiveObject.prototype.__update.call(this,
a,b);if((this.__renderable||this.__worldAlphaChanged||this.__worldClipChanged||this.__worldTransformChanged||this.__worldVisibleChanged)&&b)for(var f=0,p=this.__children;f<p.length;){var i=p[f];++f;i.__update(a,!0)}},__updateChildren:function(a){c.display.InteractiveObject.prototype.__updateChildren.call(this,a);for(var b=0,f=this.__children;b<f.length;){var p=f[b];++b;p.__update(a,!0)}},get_numChildren:function(){return this.__children.length},__class__:c.display.DisplayObjectContainer,__properties__:q(c.display.InteractiveObject.prototype.__properties__,
{get_numChildren:"get_numChildren"})});c.display.Sprite=function(){c.display.DisplayObjectContainer.call(this);this.buttonMode=!1;this.useHandCursor=!0};h["openfl.display.Sprite"]=c.display.Sprite;c.display.Sprite.__name__=["openfl","display","Sprite"];c.display.Sprite.__super__=c.display.DisplayObjectContainer;c.display.Sprite.prototype=q(c.display.DisplayObjectContainer.prototype,{startDrag:function(a,b){null==a&&(a=!1);null!=this.stage&&this.stage.__startDrag(this,a,b)},stopDrag:function(){null!=
this.stage&&this.stage.__stopDrag(this)},__getBounds:function(a,b){c.display.DisplayObjectContainer.prototype.__getBounds.call(this,a,b);null!=this.__graphics&&this.__graphics.__getBounds(a,null!=b?b:this.__worldTransform)},__hitTest:function(a,b,f,p,i){if(!this.get_visible()||i&&!this.mouseEnabled)return!1;var d=0;null!=p&&(d=p.length);return c.display.DisplayObjectContainer.prototype.__hitTest.call(this,a,b,f,p,i)?!0:null!=this.__graphics&&this.__graphics.__hitTest(a,b,f,this.__worldTransform)?
(null!=p&&p.splice(d,0,this),!0):!1},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){if(null!=this.__graphics&&(this.__graphics.__render(),null!=this.__graphics.__canvas)){null!=this.__mask&&a.maskManager.pushMask(this.__mask);var b=a.context;b.globalAlpha=this.__worldAlpha;var f=this.__worldTransform;a.roundPixels?b.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):b.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty);null==this.get_scrollRect()?b.drawImage(this.__graphics.__canvas,this.__graphics.__bounds.x,
this.__graphics.__bounds.y):b.drawImage(this.__graphics.__canvas,this.get_scrollRect().x-this.__graphics.__bounds.x,this.get_scrollRect().y-this.__graphics.__bounds.y,this.get_scrollRect().width,this.get_scrollRect().height,this.__graphics.__bounds.x+this.get_scrollRect().x,this.__graphics.__bounds.y+this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height);null!=this.__mask&&a.maskManager.popMask()}c.display.DisplayObjectContainer.prototype.__renderCanvas.call(this,a)}},__renderDOM:function(a){if(null!=
this.stage&&this.__worldVisible&&this.__renderable&&null!=this.__graphics){if(this.__graphics.__dirty||this.__worldAlphaChanged||null==this.__canvas&&null!=this.__graphics.__canvas)this.__graphics.__render(),null!=this.__graphics.__canvas?(null==this.__canvas&&(this.__canvas=window.document.createElement("canvas"),this.__canvasContext=this.__canvas.getContext("2d"),this.__initializeElement(this.__canvas,a)),this.__canvas.width=this.__graphics.__canvas.width,this.__canvas.height=this.__graphics.__canvas.height,
this.__canvasContext.globalAlpha=this.__worldAlpha,this.__canvasContext.drawImage(this.__graphics.__canvas,0,0)):null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null);if(null!=this.__canvas){if(this.__worldTransformChanged){var b=new c.geom.Matrix;b.translate(this.__graphics.__bounds.x,this.__graphics.__bounds.y);b=b.mult(this.__worldTransform);a.isWebkitDOM&&(b.a=Math.round(1E3*b.a)/1E3,b.b=Math.round(1E3*b.b)/1E3,b.c=Math.round(1E3*b.c)/1E3,b.d=Math.round(1E3*
b.d)/1E3,b.tx=Math.round(10*b.tx)/10,b.ty=Math.round(10*b.ty)/10);this.__style.setProperty(a.transformProperty,a.roundPixels?"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+(b.tx|0)+", "+(b.ty|0)+", 0, 1)":"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+b.tx+", "+b.ty+", 0, 1)",null)}this.__applyStyle(a,!1,!1,!0)}}else null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null);c.display.DisplayObjectContainer.prototype.__renderDOM.call(this,
a)},__renderMask:function(a){null!=this.__graphics?this.__graphics.__renderMask(a):c.display.DisplayObjectContainer.prototype.__renderMask.call(this,a)},get_graphics:function(){null==this.__graphics&&(this.__graphics=new c.display.Graphics);return this.__graphics},__class__:c.display.Sprite,__properties__:q(c.display.DisplayObjectContainer.prototype.__properties__,{get_graphics:"get_graphics"})});var M=function(){c.display.Sprite.call(this);this.stage.scaleMode=c.display.StageScaleMode.NO_SCALE;this.stage.align=
c.display.StageAlign.TOP_LEFT;null!=this.stage?this.start():this.addEventListener("addedToStage",r(this,this.onAddedToStage))};h.Demo_Web=M;M.__name__=["Demo_Web"];M.__super__=c.display.Sprite;M.prototype=q(c.display.Sprite.prototype,{start:function(){var a=new c.geom.Rectangle(0,0,320,480);this._view=new e.containers.View2D(!1,"baselineConstrained",a.width/a.height);this.addChild(this._view);e.core.Starling.set_multitouchEnabled(!0);e.core.Starling.set_handleLostContext(!0);this.mStarling=new e.core.Starling(D,
this.stage,a,this._view.get_stage3DProxy().get_stage3D(),"auto","baselineConstrained");this.mStarling.set_simulateMultitouch(!0);this.mStarling.set_enableErrorChecking(!1);this.mStarling.start();this._view.set_starlingPtr(this.mStarling);this.mStarling.addEventListener("rootCreated",r(this,this.onRootCreated))},onAddedToStage:function(){this.removeEventListener("addedToStage",r(this,this.onAddedToStage));this.start()},onRootCreated:function(a){this._view.setRenderCallback(r(this,this._onEnterFrame));
var b=new e.utils.AssetManager;b.set_verbose(!0);var f=e.textures.Texture.fromBitmapData(c.Assets.getBitmapData("startup.jpg"),!1);s.Boot.__cast(a.get_data(),D).start(f,b)},_onEnterFrame:function(){this._view.render()},__class__:M});var R=function(){this.stage=c.Lib.current.stage;M.call(this);this.dispatchEvent(new c.events.Event(c.events.Event.ADDED_TO_STAGE,!1,!1))};h.DocumentClass=R;R.__name__=["DocumentClass"];R.__super__=M;R.prototype=q(M.prototype,{__class__:R});J=function(){};h.Constants=J;
J.__name__=["Constants"];c.AssetLibrary=function(){};h["openfl.AssetLibrary"]=c.AssetLibrary;c.AssetLibrary.__name__=["openfl","AssetLibrary"];c.AssetLibrary.prototype={exists:function(){return!1},getBitmapData:function(){return null},getBytes:function(){return null},getFont:function(){return null},getMovieClip:function(){return null},getMusic:function(a){return this.getSound(a)},getPath:function(){return null},getSound:function(){return null},getText:function(a){a=this.getBytes(a);return null==a?
null:a.readUTFBytes(a.length)},isLocal:function(){return!0},list:function(){return null},load:function(a){a(this)},loadBitmapData:function(a,b){b(this.getBitmapData(a))},loadBytes:function(a,b){b(this.getBytes(a))},loadFont:function(a,b){b(this.getFont(a))},loadMovieClip:function(a,b){b(this.getMovieClip(a))},loadMusic:function(a,b){b(this.getMusic(a))},loadSound:function(a,b){b(this.getSound(a))},loadText:function(a,b){this.loadBytes(a,function(a){null==a?b(null):b(a.readUTFBytes(a.length))})},__class__:c.AssetLibrary};
var S=function(){this.type=new m.ds.StringMap;this.path=new m.ds.StringMap;this.className=new m.ds.StringMap;c.AssetLibrary.call(this);var a;a="assets/audio/wing_flap.ogg";this.path.set(a,a);this.type.set(a,c.AssetType.SOUND);a="assets/textures/1x/atlas.png";this.path.set(a,a);this.type.set(a,c.AssetType.IMAGE);a="assets/textures/1x/atlas.xml";this.path.set(a,a);this.type.set(a,c.AssetType.TEXT);a="assets/textures/1x/compressed_texture.atf";this.path.set(a,a);this.type.set(a,c.AssetType.BINARY);a=
"assets/fonts/1x/desyrel.fnt";this.path.set(a,a);this.type.set(a,c.AssetType.TEXT);a="assets/fonts/1x/desyrel.png";this.path.set(a,a);this.type.set(a,c.AssetType.IMAGE);a="assets/fonts/Ubuntu-R.woff";this.path.set(a,a);this.type.set(a,c.AssetType.BINARY);a="startup.jpg";this.path.set(a,a);this.type.set(a,c.AssetType.IMAGE)};h.DefaultAssetLibrary=S;S.__name__=["DefaultAssetLibrary"];S.__super__=c.AssetLibrary;S.prototype=q(c.AssetLibrary.prototype,{exists:function(a,b){var f=this.type.get(a);return null!=
f&&(f==b||(b==c.AssetType.SOUND||b==c.AssetType.MUSIC)&&(f==c.AssetType.MUSIC||f==c.AssetType.SOUND)||b==c.AssetType.BINARY||null==b)?!0:!1},getBitmapData:function(a){return c.display.BitmapData.fromImage(function(b){b=b.path.get(a);return x.images.get(b)}(this))},getBytes:function(a){var b=null,b=this.path.get(a),a=x.urlLoaders.get(b).data;"string"==typeof a?(b=new c.utils.ByteArray,b.writeUTFBytes(a)):b=s.Boot.__instanceof(a,c.utils.ByteArray)?a:null;return null!=b?(b.position=0,b):null},getFont:function(a){return s.Boot.__cast(B.createInstance(this.className.get(a),
[]),c.text.Font)},getMusic:function(a){var b=new c.media.Sound;b.__buffer=!0;b.load(new c.net.URLRequest(this.path.get(a)));return b},getPath:function(a){return this.path.get(a)},getSound:function(a){return new c.media.Sound(new c.net.URLRequest(this.path.get(a)))},getText:function(a){var b=null,a=this.path.get(a),a=x.urlLoaders.get(a).data;if("string"==typeof a)return a;b=s.Boot.__instanceof(a,c.utils.ByteArray)?a:null;return null!=b?(b.position=0,b.readUTFBytes(b.length)):null},isLocal:function(){return!0},
list:function(a){for(var b=[],f=this.type.keys();f.hasNext();){var c=f.next();(null==a||this.exists(c,a))&&b.push(c)}return b},loadBitmapData:function(a,b){if(this.path.exists(a)){var f=new c.display.Loader;f.contentLoaderInfo.addEventListener(c.events.Event.COMPLETE,function(a){b(s.Boot.__cast(a.currentTarget.content,c.display.Bitmap).bitmapData)});f.load(new c.net.URLRequest(this.path.get(a)))}else b(this.getBitmapData(a))},loadBytes:function(a,b){if(this.path.exists(a)){var f=new c.net.URLLoader;
f.addEventListener(c.events.Event.COMPLETE,function(a){var f=new c.utils.ByteArray;f.writeUTFBytes(a.currentTarget.data);f.position=0;b(f)});f.load(new c.net.URLRequest(this.path.get(a)))}else b(this.getBytes(a))},loadFont:function(a,b){b(this.getFont(a))},loadMusic:function(a,b){b(this.getMusic(a))},loadSound:function(a,b){b(this.getSound(a))},loadText:function(a,b){if(this.path.exists(a)){var f=new c.net.URLLoader;f.addEventListener(c.events.Event.COMPLETE,function(a){b(a.currentTarget.data)});
f.load(new c.net.URLRequest(this.path.get(a)))}else b(this.getText(a))},__class__:S});var H=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};h.EReg=H;H.__name__=["EReg"];H.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedRight:function(){if(null==this.r.m)throw"No string matched";var a=this.r.m.index+this.r.m[0].length;
return this.r.s.substr(a,this.r.s.length-a)},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},replace:function(a,b){return a.replace(this.r,b)},__class__:H};var e={events:{}};e.events.EventDispatcher=function(){};h["starling.events.EventDispatcher"]=e.events.EventDispatcher;e.events.EventDispatcher.__name__=["starling","events","EventDispatcher"];e.events.EventDispatcher.prototype=
{addEventListener:function(a,b){null==this.mEventListeners&&(this.mEventListeners=new m.ds.StringMap);var f=this.mEventListeners.get(a);null==f?(f=[],this.mEventListeners.set(a,f),f,this.mEventListeners.get(a).push(b)):-1==w.indexOf(f,b,0)&&f.push(b)},removeEventListener:function(a,b){if(null!=this.mEventListeners){var f=this.mEventListeners.get(a),p;p=null!=f?f.length:0;if(0<p){for(var i=0,d=c._Vector.Vector_Impl_._new(p-1),e=0;e<p;){var o=e++,z=f[o];z!=b&&(o=k["int"](i++),o>=d.length&&!d.fixed&&
(d.length=o+1),d.data[o]=z)}f=[];p=0;for(i=d.data.length;p<i;)e=p++,f.push(d.data[e]);this.mEventListeners.set(a,f);f}}},removeEventListeners:function(a){null!=a&&null!=this.mEventListeners?this.mEventListeners.remove(a):this.mEventListeners=null},dispatchEvent:function(a){var b=a.get_bubbles(),f;if(f=!b)if(!(f=null==this.mEventListeners))f=a.get_type(),f=!this.mEventListeners.exists(f);f||(f=a.get_target(),a.setTarget(this),b&&s.Boot.__instanceof(this,e.display.DisplayObject)?this.bubbleEvent(a):
this.invokeEvent(a),null!=f&&a.setTarget(f))},invokeEvent:function(a){var b;null!=this.mEventListeners?(b=a.get_type(),b=this.mEventListeners.get(b)):b=null;var f;f=null==b?0:b.length;if(0!=f){a.setCurrentTarget(this);for(var c=0;c<f;){var i=c++;(0,b[i])(a);if(a.get_stopsImmediatePropagation())return!0}return a.get_stopsPropagation()}return!1},bubbleEvent:function(a){var b,f;f=s.Boot.__cast(this,e.display.DisplayObject);var c=1;0<e.events.EventDispatcher.sBubbleChains.length?(b=e.events.EventDispatcher.sBubbleChains.pop(),
b[0]=f):b=[f];for(;null!=(f=f.get_parent());)b[k["int"](c++)]=f;for(f=0;f<c;){var i=f++;if(b[i].invokeEvent(a))break}b=[];e.events.EventDispatcher.sBubbleChains.push(b)},dispatchEventWith:function(a,b,f){null==b&&(b=!1);if(b||this.hasEventListener(a))a=e.events.Event.fromPool(a,b,f),this.dispatchEvent(a),e.events.Event.toPool(a)},hasEventListener:function(a){a=null!=this.mEventListeners?this.mEventListeners.get(a):null;return null!=a?0!=a.length:!1},__class__:e.events.EventDispatcher};Math.__name__=
["Math"];c.geom={};c.geom.Matrix=function(a,b,f,c,i,d){null==d&&(d=0);null==i&&(i=0);null==c&&(c=1);null==f&&(f=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=f;this.d=c;this.tx=i;this.ty=d};h["openfl.geom.Matrix"]=c.geom.Matrix;c.geom.Matrix.__name__=["openfl","geom","Matrix"];c.geom.Matrix.prototype={clone:function(){return new c.geom.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(a){var b=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=b;b=this.c*a.a+
this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=b;b=this.tx*a.a+this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty;this.tx=b},copyColumnFrom:function(a,b){if(2<a)throw"Column "+a+" out of bounds (2)";0==a?(this.a=b.x,this.c=b.y):1==a?(this.b=b.x,this.d=b.y):(this.tx=b.x,this.ty=b.y)},copyColumnTo:function(a,b){if(2<a)throw"Column "+a+" out of bounds (2)";0==a?(b.x=this.a,b.y=this.c,b.z=0):1==a?(b.x=this.b,b.y=this.d,b.z=0):(b.x=this.tx,b.y=this.ty,b.z=1)},copyFrom:function(a){this.a=a.a;this.b=
a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty},copyRowFrom:function(a,b){if(2<a)throw"Row "+a+" out of bounds (2)";0==a?(this.a=b.x,this.c=b.y):1==a?(this.b=b.x,this.d=b.y):(this.tx=b.x,this.ty=b.y)},copyRowTo:function(a,b){if(2<a)throw"Row "+a+" out of bounds (2)";0==a?(b.x=this.a,b.y=this.b,b.z=this.tx):1==a?(b.x=this.c,b.y=this.d,b.z=this.ty):(b.x=0,b.y=0,b.z=1)},createBox:function(a,b,f,c,i){null==i&&(i=0);null==c&&(c=0);null==f&&(f=0);this.a=a;this.d=b;this.b=f;this.tx=c;this.ty=i},createGradientBox:function(a,
b,f,c,i){null==i&&(i=0);null==c&&(c=0);null==f&&(f=0);this.a=a/1638.4;this.d=b/1638.4;if(0!=f){var d=Math.cos(f),f=Math.sin(f);this.b=f*this.d;this.c=-f*this.a;this.a*=d;this.d*=d}else this.c=this.b=0;this.tx=c+a/2;this.ty=i+b/2},equals:function(a){return null!=a&&this.tx==a.tx&&this.ty==a.ty&&this.a==a.a&&this.b==a.b&&this.c==a.c&&this.d==a.d},deltaTransformPoint:function(a){return new c.geom.Point(a.x*this.a+a.y*this.c,a.x*this.b+a.y*this.d)},identity:function(){this.a=1;this.c=this.b=0;this.d=
1;this.ty=this.tx=0},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{var a=1/a,b=this.d*a;this.d=this.a*a;this.a=b;this.b*=-a;this.c*=-a;a=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=a}return this},mult:function(a){var b=new c.geom.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty);b.concat(a);return b},rotate:function(a){var b=Math.cos(a),a=Math.sin(a),f=this.a*b-this.b*a;this.b=this.a*
a+this.b*b;this.a=f;f=this.c*b-this.d*a;this.d=this.c*a+this.d*b;this.c=f;f=this.tx*b-this.ty*a;this.ty=this.tx*a+this.ty*b;this.tx=f},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.tx*=a;this.ty*=b},setRotation:function(a,b){null==b&&(b=1);this.a=Math.cos(a)*b;this.c=Math.sin(a)*b;this.b=-this.c;this.d=this.a},setTo:function(a,b,f,c,i,d){this.a=a;this.b=b;this.c=f;this.d=c;this.tx=i;this.ty=d},to3DString:function(a){null==a&&(a=!1);return a?"matrix3d("+this.a+", "+this.b+", 0, 0, "+
this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+(this.tx|0)+", "+(this.ty|0)+", 0, 1)":"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+", 0, 1)"},toMozString:function(){return"matrix("+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+"px, "+this.ty+"px)"},toString:function(){return"matrix("+this.a+", "+this.b+", "+this.c+", "+this.d+", "+this.tx+", "+this.ty+")"},transformPoint:function(a){return new c.geom.Point(a.x*this.a+a.y*this.c+this.tx,
a.x*this.b+a.y*this.d+this.ty)},translate:function(a,b){var f=new c.geom.Matrix;f.tx=a;f.ty=b;this.concat(f)},__cleanValues:function(){this.a=Math.round(1E3*this.a)/1E3;this.b=Math.round(1E3*this.b)/1E3;this.c=Math.round(1E3*this.c)/1E3;this.d=Math.round(1E3*this.d)/1E3;this.tx=Math.round(10*this.tx)/10;this.ty=Math.round(10*this.ty)/10},__transformX:function(a){return a.x*this.a+a.y*this.c+this.tx},__transformY:function(a){return a.x*this.b+a.y*this.d+this.ty},__translateTransformed:function(a){this.tx=
a.x*this.a+a.y*this.c+this.tx;this.ty=a.x*this.b+a.y*this.d+this.ty},__class__:c.geom.Matrix};c.geom.Rectangle=function(a,b,f,c){null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=f;this.height=c};h["openfl.geom.Rectangle"]=c.geom.Rectangle;c.geom.Rectangle.__name__=["openfl","geom","Rectangle"];c.geom.Rectangle.prototype={clone:function(){return new c.geom.Rectangle(this.x,this.y,this.width,this.height)},contains:function(a,b){return a>=this.x&&b>=this.y&&a<
this.get_right()&&b<this.get_bottom()},containsPoint:function(a){return this.contains(a.x,a.y)},containsRect:function(a){return 0>=a.width||0>=a.height?a.x>this.x&&a.y>this.y&&a.get_right()<this.get_right()&&a.get_bottom()<this.get_bottom():a.x>=this.x&&a.y>=this.y&&a.get_right()<=this.get_right()&&a.get_bottom()<=this.get_bottom()},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},equals:function(a){return null!=a&&this.x==a.x&&this.y==a.y&&this.width==a.width&&
this.height==a.height},inflate:function(a,b){this.x-=a;this.width+=2*a;this.y-=b;this.height+=2*b},inflatePoint:function(a){this.inflate(a.x,a.y)},intersection:function(a){var b;b=this.x<a.x?a.x:this.x;var f;f=this.get_right()>a.get_right()?a.get_right():this.get_right();if(f<=b)return new c.geom.Rectangle;var p;p=this.y<a.y?a.y:this.y;a=this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom();return a<=p?new c.geom.Rectangle:new c.geom.Rectangle(b,p,f-b,a-p)},intersects:function(a){var b;
b=this.x<a.x?a.x:this.x;if((this.get_right()>a.get_right()?a.get_right():this.get_right())<=b)return!1;b=this.y<a.y?a.y:this.y;return(this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom())>b},isEmpty:function(){return 0>=this.width||0>=this.height},offset:function(a,b){this.x+=a;this.y+=b},offsetPoint:function(a){this.x+=a.x;this.y+=a.y},setEmpty:function(){this.x=this.y=this.width=this.height=0},setTo:function(a,b,f,c){this.x=a;this.y=b;this.width=f;this.height=c},toString:function(){return"(x="+
this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},transform:function(a){var b=a.a*this.x+a.c*this.y,f=b,p=a.b*this.x+a.d*this.y,i=b,d=a.a*(this.x+this.width)+a.c*this.y,e=a.b*(this.x+this.width)+a.d*this.y;d<b&&(b=d);e<p&&(p=e);d>f&&(f=d);e>i&&(i=e);d=a.a*(this.x+this.width)+a.c*(this.y+this.height);e=a.b*(this.x+this.width)+a.d*(this.y+this.height);d<b&&(b=d);e<p&&(p=e);d>f&&(f=d);e>i&&(i=e);d=a.a*this.x+a.c*(this.y+this.height);e=a.b*this.x+a.d*(this.y+this.height);d<b&&(b=
d);e<p&&(p=e);d>f&&(f=d);e>i&&(i=e);return new c.geom.Rectangle(b+a.tx,p+a.ty,f-b,i-p)},union:function(a){if(0==this.width||0==this.height)return a.clone();if(0==a.width||0==a.height)return this.clone();var b;b=this.x>a.x?a.x:this.x;var f;f=this.get_right()<a.get_right()?a.get_right():this.get_right();var p;p=this.y>a.y?a.y:this.y;a=this.get_bottom()<a.get_bottom()?a.get_bottom():this.get_bottom();return new c.geom.Rectangle(b,p,f-b,a-p)},__contract:function(a,b,f,c){if(!(0==this.width&&0==this.height)&&
(this.get_right(),this.get_bottom(),this.x<a&&(this.x=a),this.y<b&&(this.y=b),this.get_right()>a+f&&(this.width=a+f-this.x),this.get_bottom()>b+c))this.height=b+c-this.y},__expand:function(a,b,f,c){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=f,this.height=c;else{var i=this.get_right(),d=this.get_bottom();this.x>a&&(this.x=a);this.y>b&&(this.y=b);i<a+f&&(this.width=a+f-this.x);d<b+c&&(this.height=b+c-this.y)}},get_bottom:function(){return this.y+this.height},set_bottom:function(a){this.height=
a-this.y;return a},get_bottomRight:function(){return new c.geom.Point(this.x+this.width,this.y+this.height)},set_bottomRight:function(a){this.width=a.x-this.x;this.height=a.y-this.y;return a.clone()},get_left:function(){return this.x},set_left:function(a){this.width-=a-this.x;return this.x=a},get_right:function(){return this.x+this.width},set_right:function(a){this.width=a-this.x;return a},get_size:function(){return new c.geom.Point(this.width,this.height)},set_size:function(a){this.width=a.x;this.height=
a.y;return a.clone()},get_top:function(){return this.y},set_top:function(a){this.height-=a-this.y;return this.y=a},get_topLeft:function(){return new c.geom.Point(this.x,this.y)},set_topLeft:function(a){this.x=a.x;this.y=a.y;return a.clone()},__class__:c.geom.Rectangle,__properties__:{set_topLeft:"set_topLeft",get_topLeft:"get_topLeft",set_top:"set_top",get_top:"get_top",set_size:"set_size",get_size:"get_size",set_right:"set_right",get_right:"get_right",set_left:"set_left",get_left:"get_left",set_bottomRight:"set_bottomRight",
get_bottomRight:"get_bottomRight",set_bottom:"set_bottom",get_bottom:"get_bottom"}};e.display={};e.display.DisplayObject=function(){this.mX=this.mY=this.mPivotX=this.mPivotY=this.mRotation=this.mSkewX=this.mSkewY=0;this.mScaleX=this.mScaleY=this.mAlpha=1;this.mVisible=this.mTouchable=!0;this.mBlendMode="auto";this.mTransformationMatrix=new c.geom.Matrix;this.mOrientationChanged=this.mUseHandCursor=!1};h["starling.display.DisplayObject"]=e.display.DisplayObject;e.display.DisplayObject.__name__=["starling",
"display","DisplayObject"];e.display.DisplayObject.__super__=e.events.EventDispatcher;e.display.DisplayObject.prototype=q(e.events.EventDispatcher.prototype,{dispose:function(){null!=this.mFilter&&this.mFilter.dispose();this.removeEventListeners()},removeFromParent:function(a){null==a&&(a=!1);null!=this.mParent?this.mParent.removeChild(this,a):a&&this.dispose()},getTransformationMatrix:function(a,b){var f,p;null!=b?b.identity():b=new c.geom.Matrix;if(a==this)return b;if(a==this.mParent||null==a&&
null==this.mParent)return b.copyFrom(this.get_transformationMatrix()),b;if(null==a||a==this.get_base()){for(p=this;p!=a;)b.concat(p.get_transformationMatrix()),p=p.mParent;return b}if(a.mParent==this)return a.getTransformationMatrix(this,b),b.invert(),b;for(p=this;null!=p;)e.display.DisplayObject.sAncestors[e.display.DisplayObject.sAncestors.length]=p,p=p.mParent;for(p=a;null!=p&&-1==w.indexOf(e.display.DisplayObject.sAncestors,p,0);)p=p.mParent;e.display.DisplayObject.sAncestors=[];if(null!=p)f=
p;else throw new c.errors.ArgumentError("Object not connected to target");for(p=this;p!=f;)b.concat(p.get_transformationMatrix()),p=p.mParent;if(f==a)return b;e.display.DisplayObject.sHelperMatrix.identity();for(p=a;p!=f;)e.display.DisplayObject.sHelperMatrix.concat(p.get_transformationMatrix()),p=p.mParent;e.display.DisplayObject.sHelperMatrix.invert();b.concat(e.display.DisplayObject.sHelperMatrix);return b},getBounds:function(){throw new e.errors.AbstractMethodError;},hitTest:function(a,b){null==
b&&(b=!1);return(!b||this.mVisible&&this.mTouchable)&&this.getBounds(this,e.display.DisplayObject.sHelperRect).containsPoint(a)?this:null},localToGlobal:function(a,b){this.getTransformationMatrix(this.get_base(),e.display.DisplayObject.sHelperMatrix);return e.utils.MatrixUtil.transformCoords(e.display.DisplayObject.sHelperMatrix,a.x,a.y,b)},globalToLocal:function(a,b){this.getTransformationMatrix(this.get_base(),e.display.DisplayObject.sHelperMatrix);e.display.DisplayObject.sHelperMatrix.invert();
return e.utils.MatrixUtil.transformCoords(e.display.DisplayObject.sHelperMatrix,a.x,a.y,b)},render:function(){throw new e.errors.AbstractMethodError;},get_hasVisibleArea:function(){return 0!=this.mAlpha&&this.mVisible&&0!=this.mScaleX&&0!=this.mScaleY},alignPivot:function(a,b){null==b&&(b="center");null==a&&(a="center");var f=this.getBounds(this);this.mOrientationChanged=!0;if("left"==a)this.mPivotX=f.x;else if("center"==a)this.mPivotX=f.x+f.width/2;else if("right"==a)this.mPivotX=f.x+f.width;else throw new c.errors.ArgumentError("Invalid horizontal alignment: "+
a);if("top"==b)this.mPivotY=f.y;else if("center"==b)this.mPivotY=f.y+f.height/2;else if("bottom"==b)this.mPivotY=f.y+f.height;else throw new c.errors.ArgumentError("Invalid vertical alignment: "+b);},setParent:function(a){for(var b=a;b!=this&&null!=b;)b=b.mParent;if(b==this)throw new c.errors.ArgumentError("An object cannot be added as a child to itself or one of its children (or children's children, etc.)");this.mParent=a},isEquivalent:function(a,b,f){null==f&&(f=1E-4);return a-f<b&&a+f>b},normalizeAngle:function(a){a%=
e.display.DisplayObject.TWO_PI;a<-Math.PI&&(a+=e.display.DisplayObject.TWO_PI);a>Math.PI&&(a-=e.display.DisplayObject.TWO_PI);return a},dispatchEvent:function(a){"removedFromStage"==a.get_type()&&null==this.get_stage()||e.events.EventDispatcher.prototype.dispatchEvent.call(this,a)},addEventListener:function(a,b){"enterFrame"==a&&!this.hasEventListener(a)&&(this.addEventListener("addedToStage",r(this,this.addEnterFrameListenerToStage)),this.addEventListener("removedFromStage",r(this,this.removeEnterFrameListenerFromStage)),
null!=this.get_stage()&&this.addEnterFrameListenerToStage());e.events.EventDispatcher.prototype.addEventListener.call(this,a,b)},removeEventListener:function(a,b){e.events.EventDispatcher.prototype.removeEventListener.call(this,a,b);"enterFrame"==a&&!this.hasEventListener(a)&&(this.removeEventListener("addedToStage",r(this,this.addEnterFrameListenerToStage)),this.removeEventListener("removedFromStage",r(this,this.removeEnterFrameListenerFromStage)),this.removeEnterFrameListenerFromStage())},removeEventListeners:function(a){e.events.EventDispatcher.prototype.removeEventListeners.call(this,
a);if(null==a||"enterFrame"==a)this.removeEventListener("addedToStage",r(this,this.addEnterFrameListenerToStage)),this.removeEventListener("removedFromStage",r(this,this.removeEnterFrameListenerFromStage)),this.removeEnterFrameListenerFromStage()},addEnterFrameListenerToStage:function(){e.core.Starling.get_current().get_stage().addEnterFrameListener(this)},removeEnterFrameListenerFromStage:function(){e.core.Starling.get_current().get_stage().removeEnterFrameListener(this)},get_transformationMatrix:function(){if(this.mOrientationChanged)if(this.mOrientationChanged=
!1,0==this.mSkewX&&0==this.mSkewY)if(0==this.mRotation)this.mTransformationMatrix.setTo(this.mScaleX,0,0,this.mScaleY,this.mX-this.mPivotX*this.mScaleX,this.mY-this.mPivotY*this.mScaleY);else{var a=Math.cos(this.mRotation),b=Math.sin(this.mRotation),f=this.mScaleX*a,c=this.mScaleX*b,b=this.mScaleY*-b,a=this.mScaleY*a;this.mTransformationMatrix.setTo(f,c,b,a,this.mX-this.mPivotX*f-this.mPivotY*b,this.mY-this.mPivotX*c-this.mPivotY*a)}else if(this.mTransformationMatrix.identity(),this.mTransformationMatrix.scale(this.mScaleX,
this.mScaleY),e.utils.MatrixUtil.skew(this.mTransformationMatrix,this.mSkewX,this.mSkewY),this.mTransformationMatrix.rotate(this.mRotation),this.mTransformationMatrix.translate(this.mX,this.mY),0!=this.mPivotX||0!=this.mPivotY)this.mTransformationMatrix.tx=this.mX-this.mTransformationMatrix.a*this.mPivotX-this.mTransformationMatrix.c*this.mPivotY,this.mTransformationMatrix.ty=this.mY-this.mTransformationMatrix.b*this.mPivotX-this.mTransformationMatrix.d*this.mPivotY;return this.mTransformationMatrix},
set_transformationMatrix:function(a){var b=Math.PI/4;this.mOrientationChanged=!1;this.mTransformationMatrix.copyFrom(a);this.mPivotX=this.mPivotY=0;this.mX=a.tx;this.mY=a.ty;this.mSkewX=Math.atan(-a.c/a.d);this.mSkewY=Math.atan(a.b/a.a);this.mSkewX!=this.mSkewX&&(this.mSkewX=0);this.mSkewY!=this.mSkewY&&(this.mSkewY=0);this.mScaleY=this.mSkewX>-b&&this.mSkewX<b?a.d/Math.cos(this.mSkewX):-a.c/Math.sin(this.mSkewX);this.mScaleX=this.mSkewY>-b&&this.mSkewY<b?a.a/Math.cos(this.mSkewY):a.b/Math.sin(this.mSkewY);
this.isEquivalent(this.mSkewX,this.mSkewY)?(this.mRotation=this.mSkewX,this.mSkewX=this.mSkewY=0):this.mRotation=0;return this.mTransformationMatrix},get_useHandCursor:function(){return this.mUseHandCursor},set_useHandCursor:function(a){if(a==this.mUseHandCursor)return this.mUseHandCursor;(this.mUseHandCursor=a)?this.addEventListener("touch",r(this,this.onTouch)):this.removeEventListener("touch",r(this,this.onTouch));return this.mUseHandCursor},onTouch:function(a){a.interactsWith(this)},get_bounds:function(){return this.getBounds(this.mParent)},
get_width:function(){return this.getBounds(this.mParent,e.display.DisplayObject.sHelperRect).width},set_width:function(a){this.set_scaleX(1);var b=this.get_width();0!=b&&this.set_scaleX(a/b);return this.getBounds(this.mParent,e.display.DisplayObject.sHelperRect).width},get_height:function(){return this.getBounds(this.mParent,e.display.DisplayObject.sHelperRect).height},set_height:function(a){this.set_scaleY(1);var b=this.get_height();0!=b&&this.set_scaleY(a/b);return this.getBounds(this.mParent,e.display.DisplayObject.sHelperRect).height},
get_x:function(){return this.mX},set_x:function(a){this.mX!=a&&(this.mX=a,this.mOrientationChanged=!0);return this.mX},get_y:function(){return this.mY},set_y:function(a){this.mY!=a&&(this.mY=a,this.mOrientationChanged=!0);return this.mY},get_pivotX:function(){return this.mPivotX},set_pivotX:function(a){this.mPivotX!=a&&(this.mPivotX=a,this.mOrientationChanged=!0);return this.mPivotX},get_pivotY:function(){return this.mPivotY},set_pivotY:function(a){this.mPivotY!=a&&(this.mPivotY=a,this.mOrientationChanged=
!0);return this.mPivotY},get_scaleX:function(){return this.mScaleX},set_scaleX:function(a){this.mScaleX!=a&&(this.mScaleX=a,this.mOrientationChanged=!0);return this.mScaleX},get_scaleY:function(){return this.mScaleY},set_scaleY:function(a){this.mScaleY!=a&&(this.mScaleY=a,this.mOrientationChanged=!0);return this.mScaleY},get_skewX:function(){return this.mSkewX},set_skewX:function(a){a=this.normalizeAngle(a);this.mSkewX!=a&&(this.mSkewX=a,this.mOrientationChanged=!0);return this.mSkewX},get_skewY:function(){return this.mSkewY},
set_skewY:function(a){a=this.normalizeAngle(a);this.mSkewY!=a&&(this.mSkewY=a,this.mOrientationChanged=!0);return this.mSkewY},get_rotation:function(){return this.mRotation},set_rotation:function(a){a=this.normalizeAngle(a);this.mRotation!=a&&(this.mRotation=a,this.mOrientationChanged=!0);return this.mRotation},get_alpha:function(){return this.mAlpha},set_alpha:function(a){return this.mAlpha=0>a?0:1<a?1:a},get_visible:function(){return this.mVisible},set_visible:function(a){return this.mVisible=a},
get_touchable:function(){return this.mTouchable},set_touchable:function(a){return this.mTouchable=a},get_blendMode:function(){return this.mBlendMode},set_blendMode:function(a){return this.mBlendMode=a},get_name:function(){return this.mName},set_name:function(a){return this.mName=a},get_filter:function(){return this.mFilter},set_filter:function(a){return this.mFilter=a},get_parent:function(){return this.mParent},get_base:function(){for(var a=this;null!=a.mParent;)a=a.mParent;return a},get_root:function(){for(var a=
this;null!=a.mParent;){if(s.Boot.__instanceof(a.mParent,e.display.Stage))return a;a=a.get_parent()}return null},get_stage:function(){return k.is(this.get_base(),e.display.Stage)?s.Boot.__cast(this.get_base(),e.display.Stage):null},__class__:e.display.DisplayObject,__properties__:{get_stage:"get_stage",get_root:"get_root",get_base:"get_base",get_parent:"get_parent",set_filter:"set_filter",get_filter:"get_filter",set_name:"set_name",get_name:"get_name",set_blendMode:"set_blendMode",get_blendMode:"get_blendMode",
set_touchable:"set_touchable",get_touchable:"get_touchable",set_visible:"set_visible",get_visible:"get_visible",set_alpha:"set_alpha",get_alpha:"get_alpha",set_rotation:"set_rotation",get_rotation:"get_rotation",set_skewY:"set_skewY",get_skewY:"get_skewY",set_skewX:"set_skewX",get_skewX:"get_skewX",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_pivotY:"set_pivotY",get_pivotY:"get_pivotY",set_pivotX:"set_pivotX",get_pivotX:"get_pivotX",set_y:"set_y",
get_y:"get_y",set_x:"set_x",get_x:"get_x",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",get_bounds:"get_bounds",set_useHandCursor:"set_useHandCursor",get_useHandCursor:"get_useHandCursor",set_transformationMatrix:"set_transformationMatrix",get_transformationMatrix:"get_transformationMatrix",get_hasVisibleArea:"get_hasVisibleArea"}});c.geom.Point=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};h["openfl.geom.Point"]=c.geom.Point;c.geom.Point.__name__=
["openfl","geom","Point"];c.geom.Point.distance=function(a,b){var f=a.x-b.x,c=a.y-b.y;return Math.sqrt(f*f+c*c)};c.geom.Point.interpolate=function(a,b,f){return new c.geom.Point(b.x+f*(a.x-b.x),b.y+f*(a.y-b.y))};c.geom.Point.polar=function(a,b){return new c.geom.Point(a*Math.cos(b),a*Math.sin(b))};c.geom.Point.prototype={add:function(a){return new c.geom.Point(a.x+this.x,a.y+this.y)},clone:function(){return new c.geom.Point(this.x,this.y)},equals:function(a){return null!=a&&a.x==this.x&&a.y==this.y},
normalize:function(a){0==this.x&&0==this.y||(a/=Math.sqrt(this.x*this.x+this.y*this.y),this.x*=a,this.y*=a)},offset:function(a,b){this.x+=a;this.y+=b},setTo:function(a,b){this.x=a;this.y=b},subtract:function(a){return new c.geom.Point(this.x-a.x,this.y-a.y)},toString:function(){return"("+this.x+", "+this.y+")"},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},__class__:c.geom.Point,__properties__:{get_length:"get_length"}};e.display.DisplayObjectContainer=function(){e.display.DisplayObject.call(this);
this.mChildren=[]};h["starling.display.DisplayObjectContainer"]=e.display.DisplayObjectContainer;e.display.DisplayObjectContainer.__name__=["starling","display","DisplayObjectContainer"];e.display.DisplayObjectContainer.mergeSort=function(a,b,f,c,i){if(!(1>=c)){var d=f+c,g=c/2|0,o=f,z=f+g;e.display.DisplayObjectContainer.mergeSort(a,b,f,g,i);e.display.DisplayObjectContainer.mergeSort(a,b,f+g,c-g,i);for(var A=0;A<c;){var n=A++;o<f+g&&(z==d||0>=b(a[o],a[z]))?(i[n]=a[o],o++):(i[n]=a[z],z++)}for(b=f;b<
d;)c=b++,a[c]=i[c-f|0]}};e.display.DisplayObjectContainer.__super__=e.display.DisplayObject;e.display.DisplayObjectContainer.prototype=q(e.display.DisplayObject.prototype,{dispose:function(){for(var a=this.mChildren.length-1;0<=a;)this.mChildren[a].dispose(),--a;e.display.DisplayObject.prototype.dispose.call(this)},addChild:function(a){this.addChildAt(a,this.get_numChildren());return a},addChildAt:function(a,b){var f=this.mChildren.length;if(0<=b&&b<=f)return a.get_parent()==this?this.setChildIndex(a,
b):(a.removeFromParent(),b==f?this.mChildren[f]=a:this.mChildren.splice(b,0,a),a.setParent(this),a.dispatchEventWith("added",!0),null!=this.get_stage()&&(s.Boot.__instanceof(a,e.display.DisplayObjectContainer)?s.Boot.__cast(a,e.display.DisplayObjectContainer).broadcastEventWith("addedToStage"):a.dispatchEventWith("addedToStage"))),a;throw new c.errors.RangeError("Invalid child index");},removeChild:function(a,b){null==b&&(b=!1);var f=this.getChildIndex(a);-1!=f&&this.removeChildAt(f,b);return a},
removeChildAt:function(a,b){null==b&&(b=!1);if(0<=a&&a<this.get_numChildren()){var f=this.mChildren[a];f.dispatchEventWith("removed",!0);if(null!=this.get_stage()){var p;p=s.Boot.__instanceof(f,e.display.DisplayObjectContainer)?s.Boot.__cast(f,e.display.DisplayObjectContainer):null;null!=p?p.broadcastEventWith("removedFromStage"):f.dispatchEventWith("removedFromStage")}f.setParent(null);a=w.indexOf(this.mChildren,f,0);0<=a&&this.mChildren.splice(a,1);b&&f.dispose();return f}throw new c.errors.RangeError("Invalid child index");
},removeChildren:function(a,b,f){null==f&&(f=!1);null==b&&(b=-1);null==a&&(a=0);if(0>b||b>=this.get_numChildren())b=this.get_numChildren()-1;for(var c=a;c<=b;)this.removeChildAt(a,f),++c},getChildAt:function(a){if(0<=a&&a<this.get_numChildren())return this.mChildren[a];throw new c.errors.RangeError("Invalid child index");},getChildByName:function(a){for(var b=this.mChildren.length,f=0;f<b;){var c=f++;if(this.mChildren[c].get_name()==a)return this.mChildren[c]}return null},getChildIndex:function(a){return w.indexOf(this.mChildren,
a,0)},setChildIndex:function(a,b){var f=this.getChildIndex(a);if(f!=b){if(-1==f)throw new c.errors.ArgumentError("Not a child of this container");this.mChildren.splice(f,1);this.mChildren.splice(b,0,a)}},swapChildren:function(a,b){var f=this.getChildIndex(a),p=this.getChildIndex(b);if(-1==f||-1==p)throw new c.errors.ArgumentError("Not a child of this container");this.swapChildrenAt(f,p)},swapChildrenAt:function(a,b){var f=this.getChildAt(a),c=this.getChildAt(b);this.mChildren[a]=c;this.mChildren[b]=
f},sortChildren:function(a){e.display.DisplayObjectContainer.sSortBuffer=e.display.DisplayObjectContainer.sSortBuffer.slice(0,this.mChildren.length);e.display.DisplayObjectContainer.mergeSort(this.mChildren,a,0,this.mChildren.length,e.display.DisplayObjectContainer.sSortBuffer);e.display.DisplayObjectContainer.sSortBuffer=[]},contains:function(a){for(;null!=a;){if(a==this)return!0;a=a.get_parent()}return!1},getBounds:function(a,b){null==b&&(b=new c.geom.Rectangle);var f=this.mChildren.length;if(0==
f)this.getTransformationMatrix(a,e.display.DisplayObjectContainer.sHelperMatrix),e.utils.MatrixUtil.transformCoords(e.display.DisplayObjectContainer.sHelperMatrix,0,0,e.display.DisplayObjectContainer.sHelperPoint),b.setTo(e.display.DisplayObjectContainer.sHelperPoint.x,e.display.DisplayObjectContainer.sHelperPoint.y,0,0);else if(1==f)b=this.mChildren[0].getBounds(a,b);else{for(var p=1.79E308,i=-1.79E308,d=1.79E308,g=-1.79E308,o=0;o<f;){var z=o++;this.mChildren[z].getBounds(a,b);p<b.x||(p=b.x);i>b.get_right()||
(i=b.get_right());d<b.y||(d=b.y);g>b.get_bottom()||(g=b.get_bottom())}b.setTo(p,d,i-p,g-d)}return b},hitTest:function(a,b){null==b&&(b=!1);if(b&&(!this.get_visible()||!this.get_touchable()))return null;for(var f=null,c=a.x,i=a.y,d=this.mChildren.length-1;0<=d;){f=this.mChildren[d];this.getTransformationMatrix(f,e.display.DisplayObjectContainer.sHelperMatrix);e.utils.MatrixUtil.transformCoords(e.display.DisplayObjectContainer.sHelperMatrix,c,i,e.display.DisplayObjectContainer.sHelperPoint);f=f.hitTest(e.display.DisplayObjectContainer.sHelperPoint,
b);if(null!=f)return b&&this.mTouchGroup?this:f;--d}return null},render:function(a,b){for(var f=b*this.get_alpha(),c=this.mChildren.length,i=a.get_blendMode(),d=0;d<c;){var e=d++,e=this.mChildren[e];if(e.get_hasVisibleArea()){var o=e.get_filter();a.pushMatrix();a.transformMatrix(e);a.set_blendMode(e.get_blendMode());null!=o?o.render(e,a,f):e.render(a,f);a.set_blendMode(i);a.popMatrix()}}},broadcastEvent:function(a){if(a.get_bubbles())throw new c.errors.ArgumentError("Broadcast of bubbling events is prohibited");
var b=e.display.DisplayObjectContainer.sBroadcastListeners.length;this.getChildEventListeners(this,a.get_type(),e.display.DisplayObjectContainer.sBroadcastListeners);for(var f=e.display.DisplayObjectContainer.sBroadcastListeners.length,p=b;p<f;){var i=p++;e.display.DisplayObjectContainer.sBroadcastListeners[i].dispatchEvent(a)}e.display.DisplayObjectContainer.sBroadcastListeners=e.display.DisplayObjectContainer.sBroadcastListeners.slice(0,b)},broadcastEventWith:function(a,b){var f=e.events.Event.fromPool(a,
!1,b);this.broadcastEvent(f);e.events.Event.toPool(f)},get_numChildren:function(){return this.mChildren.length},get_touchGroup:function(){return this.mTouchGroup},set_touchGroup:function(a){return this.mTouchGroup=a},getChildEventListeners:function(a,b,f){var c;c=s.Boot.__instanceof(a,e.display.DisplayObjectContainer)?s.Boot.__cast(a,e.display.DisplayObjectContainer):null;a.hasEventListener(b)&&(f[f.length]=a);if(null!=c){a=c.mChildren;c=a.length;for(var i=0;i<c;){var d=i++;this.getChildEventListeners(a[d],
b,f)}}},__class__:e.display.DisplayObjectContainer,__properties__:q(e.display.DisplayObject.prototype.__properties__,{set_touchGroup:"set_touchGroup",get_touchGroup:"get_touchGroup",get_numChildren:"get_numChildren"})});e.display.Sprite=function(){e.display.DisplayObjectContainer.call(this)};h["starling.display.Sprite"]=e.display.Sprite;e.display.Sprite.__name__=["starling","display","Sprite"];e.display.Sprite.__super__=e.display.DisplayObjectContainer;e.display.Sprite.prototype=q(e.display.DisplayObjectContainer.prototype,
{dispose:function(){this.disposeFlattenedContents();e.display.DisplayObjectContainer.prototype.dispose.call(this)},disposeFlattenedContents:function(){if(null!=this.mFlattenedContents){for(var a=this.mFlattenedContents.length,b=0;b<a;){var f=b++;this.mFlattenedContents[f].dispose()}this.mFlattenedContents=null}},flatten:function(){this.mFlattenRequested=!0;this.broadcastEventWith("flatten")},unflatten:function(){this.mFlattenRequested=!1;this.disposeFlattenedContents()},get_isFlattened:function(){return null!=
this.mFlattenedContents||this.mFlattenRequested},get_clipRect:function(){return this.mClipRect},set_clipRect:function(a){null!=this.mClipRect&&null!=a?this.mClipRect.copyFrom(a):this.mClipRect=null!=a?a.clone():null;return this.mClipRect},getClipRect:function(a,b){if(null==this.mClipRect)return null;null==b&&(b=new c.geom.Rectangle);for(var f=0,p=0,i=1.79E308,d=-1.79E308,g=1.79E308,o=-1.79E308,z=this.getTransformationMatrix(a,e.display.Sprite.sHelperMatrix),A=0;4>A;){switch(A++){case 0:f=this.mClipRect.get_left();
p=this.mClipRect.get_top();break;case 1:f=this.mClipRect.get_left();p=this.mClipRect.get_bottom();break;case 2:f=this.mClipRect.get_right();p=this.mClipRect.get_top();break;case 3:f=this.mClipRect.get_right(),p=this.mClipRect.get_bottom()}var n=e.utils.MatrixUtil.transformCoords(z,f,p,e.display.Sprite.sHelperPoint);i>n.x&&(i=n.x);d<n.x&&(d=n.x);g>n.y&&(g=n.y);o<n.y&&(o=n.y)}b.setTo(i,g,d-i,o-g);return b},getBounds:function(a,b){var f=e.display.DisplayObjectContainer.prototype.getBounds.call(this,
a,b);null!=this.mClipRect&&e.utils.RectangleUtil.intersect(f,this.getClipRect(a,e.display.Sprite.sHelperRect),f);return f},hitTest:function(a,b){null==b&&(b=!1);return null!=this.mClipRect&&!this.mClipRect.containsPoint(a)?null:e.display.DisplayObjectContainer.prototype.hitTest.call(this,a,b)},render:function(a,b){if(null!=this.mClipRect&&a.pushClipRect(this.getClipRect(this.get_stage(),e.display.Sprite.sHelperRect)).isEmpty())a.popClipRect();else{if(null!=this.mFlattenedContents||this.mFlattenRequested){null==
this.mFlattenedContents&&(this.mFlattenedContents=[]);this.mFlattenRequested&&(e.display.QuadBatch.compile(this,this.mFlattenedContents),a.applyClipRect(),this.mFlattenRequested=!1);var f=b*this.get_alpha(),c=this.mFlattenedContents.length,i=a.get_mvpMatrix();a.finishQuadBatch();a.raiseDrawCount(c);for(var d=0;d<c;){var g=d++,g=this.mFlattenedContents[g],o;o="auto"==g.get_blendMode()?a.get_blendMode():g.get_blendMode();g.renderCustom(i,f,o)}}else e.display.DisplayObjectContainer.prototype.render.call(this,
a,b);null!=this.mClipRect&&a.popClipRect()}},__class__:e.display.Sprite,__properties__:q(e.display.DisplayObjectContainer.prototype.__properties__,{set_clipRect:"set_clipRect",get_clipRect:"get_clipRect",get_isFlattened:"get_isFlattened"})});var D=function(){e.display.Sprite.call(this)};h.Game=D;D.__name__=["Game"];D.__properties__={get_assets:"get_assets"};D.UbuntuRegular=null;D.sAssets=null;D.get_assets=function(){return D.sAssets};D.__super__=e.display.Sprite;D.prototype=q(e.display.Sprite.prototype,
{start:function(a,b){D.sAssets=b;this.addChild(new e.display.Image(a));for(var f=e.textures.Texture.fromBitmapData(c.Assets.getBitmapData("assets/textures/1x/atlas.png"),!1),p=null,i=y.parse(c.Assets.getText("assets/textures/1x/atlas.xml")).elementsNamed("TextureAtlas");i.hasNext();){var d=i.next();if("atlas.png"==d.get("imagePath")){p=d;break}}b.addTexture("atlas",f);b.addTextureAtlas("atlas_xml",new e.textures.TextureAtlas(f,p));f=e.textures.Texture.fromBitmapData(c.Assets.getBitmapData("assets/fonts/1x/desyrel.png"),
!1);p=y.parse(c.Assets.getText("assets/fonts/1x/desyrel.fnt")).firstElement();e.text.TextField.registerBitmapFont(new e.text.BitmapFont(f,p),"Desyrel");this.addEventListener("triggered",r(this,this.onButtonTriggered));this.get_stage().addEventListener("keyDown",r(this,this.onKey));this.showMainMenu()},showMainMenu:function(){c.system.System.gc();null==this.mMainMenu&&(this.mMainMenu=new T);this.addChild(this.mMainMenu)},onKey:function(a){var b=a.get_keyCode();32==(0>b?4294967296+b:b+0)?e.core.Starling.get_current().set_showStats(!e.core.Starling.get_current().get_showStats()):
(a=a.get_keyCode(),88==(0>a?4294967296+a:a+0)&&e.core.Starling.get_current().get_context().dispose())},onButtonTriggered:function(a){a=s.Boot.__cast(a.get_target(),e.display.Button);"backButton"==a.get_name()?this.closeScene():this.showScene(a.get_name())},closeScene:function(){this.mCurrentScene.removeFromParent(!0);this.mCurrentScene=null;this.showMainMenu()},showScene:function(a){null==this.mCurrentScene&&(a=B.resolveClass(a),this.mCurrentScene=B.createInstance(a,[]),this.mMainMenu.removeFromParent(),
this.addChild(this.mCurrentScene))},__class__:D});var w=function(){};h.HxOverrides=w;w.__name__=["HxOverrides"];w.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};w.cca=function(a,
b){var f=a.charCodeAt(b);return f!=f?void 0:f};w.substr=function(a,b,f){if(null!=b&&0!=b&&null!=f&&0>f)return"";null==f&&(f=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>f&&(f=a.length+f-b);return a.substr(b,f)};w.indexOf=function(a,b,f){var c=a.length;0>f&&(f+=c,0>f&&(f=0));for(;f<c;){if(a[f]===b)return f;f++}return-1};w.remove=function(a,b){var f=w.indexOf(a,b,0);if(-1==f)return!1;a.splice(f,1);return!0};w.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var N=function(){};h.Lambda=N;N.__name__=["Lambda"];N.foreach=function(a,b){for(var f=ba(a)();f.hasNext();){var c=f.next();if(!b(c))return!1}return!0};N.indexOf=function(a,b){for(var f=0,c=ba(a)();c.hasNext();){var i=c.next();if(b==i)return f;f++}return-1};var X=function(){this.length=0};h.List=X;X.__name__=["List"];X.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:X};var T=function(){e.display.Sprite.call(this);this.init()};h.MainMenu=T;T.__name__=
["MainMenu"];T.__super__=e.display.Sprite;T.prototype=q(e.display.Sprite.prototype,{init:function(){var a=new e.display.Image(D.get_assets().getTexture("logo"));this.addChild(a);for(var a=[["Textures",t.TextureScene],["Multitouch",t.TouchScene],["TextFields",t.TextScene],["Animations",t.AnimationScene],["Custom hit-test",t.CustomHitTestScene],["Movie Clip",t.MovieScene],["Filters",t.FilterScene],["Blend Modes",t.BlendModeScene],["Render Texture",t.RenderTextureScene],["Benchmark",t.BenchmarkScene],
["Clipping",t.MaskScene]],b=D.get_assets().getTexture("button_medium"),f=0,c=0;c<a.length;){var i=a[c];++c;var d=i[1],i=new e.display.Button(b,i[0]);i.set_fontName("assets/fonts/Ubuntu-R.woff");i.set_x(0==f%2?28:167);i.set_y(155+46*(f/2|0));i.set_name(B.getClassName(d));this.addChild(i);0!=a.length%2&&1==f%2&&(d=i,d.set_y(d.get_y()+24));++f}a=new e.text.TextField(310,64,"No driver info available","Verdana",10);a.set_x(5);a.set_y(475-a.get_height());a.set_vAlign("bottom");a.addEventListener("touch",
r(this,this.onInfoTextTouched));this.addChildAt(a,0)},onInfoTextTouched:function(a){null!=a.getTouch(this,"ended")&&e.core.Starling.get_current().set_showStats(!e.core.Starling.get_current().get_showStats())},__class__:T});var F=function(){};h.IMap=F;F.__name__=["IMap"];F.prototype={__class__:F};var Q=function(){c.display.Sprite.call(this);var a=this.getBackgroundColor(),b=0;70>0.299*(a>>16&255)+0.587*(a>>8&255)+0.114*(a&255)&&(b=16777215);var a=this.getHeight()/2-4.5,f=this.getWidth()-60;this.outline=
new c.display.Sprite;this.outline.get_graphics().lineStyle(1,b,0.15,!0);this.outline.get_graphics().drawRoundRect(0,0,f,9,6,6);this.outline.set_x(30);this.outline.set_y(a);this.addChild(this.outline);this.progress=new c.display.Sprite;this.progress.get_graphics().beginFill(b,0.35);this.progress.get_graphics().drawRect(0,0,f-6,3);this.progress.set_x(33);this.progress.set_y(a+3);this.progress.set_scaleX(0);this.addChild(this.progress)};h.NMEPreloader=Q;Q.__name__=["NMEPreloader"];Q.__super__=c.display.Sprite;
Q.prototype=q(c.display.Sprite.prototype,{getBackgroundColor:function(){return 16777215},getHeight:function(){return 480},getWidth:function(){return 320},onInit:function(){},onLoaded:function(){this.dispatchEvent(new c.events.Event(c.events.Event.COMPLETE))},onUpdate:function(a,b){var f=a/b;1<f&&1==f;this.progress.set_scaleX(f)},__class__:Q});var E=function(){};h.Reflect=E;E.__name__=["Reflect"];E.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};E.field=function(a,b){try{return a[b]}catch(f){return null}};
E.setField=function(a,b,f){a[b]=f};E.getProperty=function(a,b){var f;return null==a?null:a.__properties__&&(f=a.__properties__["get_"+b])?a[f]():a[b]};E.setProperty=function(a,b,f){var c;if(a.__properties__&&(c=a.__properties__["set_"+b]))a[c](f);else a[b]=f};E.callMethod=function(a,b,f){return b.apply(a,f)};E.fields=function(a){var b=[];if(null!=a){var f=Object.prototype.hasOwnProperty,c;for(c in a)"__id__"!=c&&("hx__closures__"!=c&&f.call(a,c))&&b.push(c)}return b};E.isFunction=function(a){return"function"==
typeof a&&!(a.__name__||a.__ename__)};E.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var k=function(){};h.Std=k;k.__name__=["Std"];k.is=function(a,b){return s.Boot.__instanceof(a,b)};k.string=function(a){return s.Boot.__string_rec(a,"")};k["int"]=function(a){return a|0};k.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==w.cca(a,1)||88==w.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};k.parseFloat=function(a){return parseFloat(a)};
var P=function(){this.b=""};h.StringBuf=P;P.__name__=["StringBuf"];P.prototype={add:function(a){this.b+=k.string(a)},addSub:function(a,b,f){this.b=null==f?this.b+w.substr(a,b,null):this.b+w.substr(a,b,f)},__class__:P};var C=function(){};h.StringTools=C;C.__name__=["StringTools"];C.urlEncode=function(a){return encodeURIComponent(a)};C.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};C.startsWith=function(a,b){return a.length>=b.length&&w.substr(a,0,b.length)==b};C.replace=function(a,
b,f){return a.split(b).join(f)};C.hex=function(a,b){var f="";do f="0123456789ABCDEF".charAt(a&15)+f,a>>>=4;while(0<a);if(null!=b)for(;f.length<b;)f="0"+f;return f};C.fastCodeAt=function(a,b){return a.charCodeAt(b)};var B=function(){};h.Type=B;B.__name__=["Type"];B.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};B.getClassName=function(a){return a.__name__.join(".")};B.resolveClass=function(a){a=h[a];return null==a||!a.__name__?null:a};B.resolveEnum=
function(a){a=h[a];return null==a||!a.__ename__?null:a};B.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";
}};B.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};B.createEnum=function(a,b,f){var c=E.field(a,b);if(null==c)throw"No such constructor "+b;if(E.isFunction(c)){if(null==f)throw"Constructor "+b+" need parameters";return c.apply(a,f)}if(null!=f&&0!=f.length)throw"Constructor "+b+" does not need parameters";return c};B.getClassFields=function(a){a=E.fields(a);w.remove(a,"__name__");w.remove(a,"__interfaces__");w.remove(a,"__properties__");w.remove(a,"__super__");
w.remove(a,"prototype");return a};B.getEnumConstructs=function(a){return a.__constructs__.slice()};B.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var f=2,c=a.length;f<c;){var i=f++;if(!B.enumEq(a[i],b[i]))return!1}var d=a.__enum__;if(d!=b.__enum__||null==d)return!1}catch(e){return!1}return!0};h.XmlType={__ename__:!0,__constructs__:[]};var y=function(){};h.Xml=y;y.__name__=["Xml"];y.Element=null;y.PCData=null;y.CData=null;y.Comment=null;y.DocType=null;y.ProcessingInstruction=
null;y.Document=null;y.parse=function(a){return m.xml.Parser.parse(a)};y.createElement=function(a){var b=new y;b.nodeType=y.Element;b._children=[];b._attributes=new m.ds.StringMap;b.set_nodeName(a);return b};y.createPCData=function(a){var b=new y;b.nodeType=y.PCData;b.set_nodeValue(a);return b};y.createCData=function(a){var b=new y;b.nodeType=y.CData;b.set_nodeValue(a);return b};y.createComment=function(a){var b=new y;b.nodeType=y.Comment;b.set_nodeValue(a);return b};y.createDocType=function(a){var b=
new y;b.nodeType=y.DocType;b.set_nodeValue(a);return b};y.createProcessingInstruction=function(a){var b=new y;b.nodeType=y.ProcessingInstruction;b.set_nodeValue(a);return b};y.createDocument=function(){var a=new y;a.nodeType=y.Document;a._children=[];return a};y.prototype={get_nodeName:function(){if(this.nodeType!=y.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=y.Element)throw"bad nodeType";return this._nodeName=a},set_nodeValue:function(a){if(this.nodeType==
y.Element||this.nodeType==y.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=y.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=y.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=y.Element)throw"bad nodeType";return this._attributes.exists(a)},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=
this.cur,f=this.x.length;b<f;){var c=this.x[b];if(c.nodeType==y.Element&&c._nodeName==a)break;b++}this.cur=b;return b<f},next:function(){for(var b=this.cur,f=this.x.length;b<f;){var c=this.x[b];b++;if(c.nodeType==y.Element&&c._nodeName==a)return this.cur=b,c}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var f=this._children[a];if(f.nodeType==y.Element)return f;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";
null!=a._parent&&w.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:y,__properties__:{set_nodeValue:"set_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var l={AGALTokenizer:function(){}};h["aglsl.AGALTokenizer"]=l.AGALTokenizer;l.AGALTokenizer.__name__=["aglsl","AGALTokenizer"];l.AGALTokenizer.prototype={decribeAGALByteArray:function(a){var b=new l.Header;if(160!=a.readUnsignedByte())throw"Bad AGAL : Missing 0xa0 magic byte.";b.version=a.readUnsignedInt();
16<=b.version&&(a.readUnsignedByte(),b.version>>=1);if(161!=a.readUnsignedByte())throw"Bad AGAL : Missing 0xa1 magic byte.";b.progid=a.readUnsignedByte();switch(b.progid){case 1:b.type="fragment";break;case 0:b.type="vertex";break;case 2:b.type="cpu";break;default:b.type=""}var f=new l.Description,c=[];for(l.Mapping.get_agal2glsllut();a.position<a.length;){var i=new l.Token;i.opcode=a.readUnsignedInt();var d=l.Mapping.get_agal2glsllut()[i.opcode];if(null==d)throw"Opcode not valid or not implemented yet :  "+
i.opcode;0==d.matrixheight&&(f.hasmatrix=!0);d.dest?(i.dest.regnum=a.readUnsignedShort(),i.dest.mask=a.readUnsignedByte(),i.dest.regtype=a.readUnsignedByte(),f.regwrite[i.dest.regtype][i.dest.regnum]=null==f.regwrite[i.dest.regtype][i.dest.regnum]?i.dest.mask:f.regwrite[i.dest.regtype][i.dest.regnum]|i.dest.mask):(i.dest=null,a.readUnsignedInt());d.a?this.readReg(i.a,1,f,a):(i.a=null,a.readUnsignedInt(),a.readUnsignedInt());d.b?this.readReg(i.b,d.matrixheight|0,f,a):(i.b=null,a.readUnsignedInt(),
a.readUnsignedInt());c.push(i)}f.header=b;f.tokens=c;return f},readReg:function(a,b,f,c){a.regnum=c.readUnsignedShort();a.indexoffset=c.readByte();a.swizzle=c.readUnsignedByte();a.regtype=c.readUnsignedByte();f.regread[a.regtype][a.regnum]=15;var i=a.regtype;5==(0>i?4294967296+i:i+0)?(a.lodbiad=a.indexoffset,a.indexoffset=0,a.swizzle=0,a.readmode=c.readUnsignedByte(),a.dim=a.readmode>>4,a.readmode&=15,a.special=c.readUnsignedByte(),a.wrap=a.special>>4,a.special&=15,a.mipmap=c.readUnsignedByte(),a.filter=
a.mipmap>>4,a.mipmap&=15,f.samplers[a.regnum]=a):(a.indexregtype=c.readUnsignedByte(),a.indexselect=c.readUnsignedByte(),a.indirectflag=c.readUnsignedByte());1==a.indirectflag&&(f.hasindirect=!0);if(0==a.indirectflag&&0<b)for(c=0;c<b;)f.regread[a.regtype][a.regnum+c]=f.regread[a.regtype][a.regnum],c++},__class__:l.AGALTokenizer};l.AGLSLCompiler=function(){};h["aglsl.AGLSLCompiler"]=l.AGLSLCompiler;l.AGLSLCompiler.__name__=["aglsl","AGLSLCompiler"];l.AGLSLCompiler.prototype={compile:function(a,b){var f=
new l.assembler.AGALMiniAssembler,c=new l.AGALTokenizer;switch(a){case "vertex":f.assemble("part vertex 1 \n"+b+"endpart");f=f.r.get("vertex").data;break;case "fragment":f.assemble("part fragment 1 \n"+b+"endpart");f=f.r.get("fragment").data;break;default:throw"Unknown Context3DProgramType";}f.position=0;c=c.decribeAGALByteArray(f);return this.glsl=(new l.AGLSLParser).parse(c)},__class__:l.AGLSLCompiler};l.AGLSLParser=function(){};h["aglsl.AGLSLParser"]=l.AGLSLParser;l.AGLSLParser.__name__=["aglsl",
"AGLSLParser"];l.AGLSLParser.prototype={parse:function(a){var b,f="",c=0;b="precision highp float;\n";var i=a.header.type.charAt(0);"vertex"==a.header.type&&(b+="uniform float yflip;\n");if(a.hasindirect)b+="uniform vec4 "+i+"carrr["+l.Context3D.maxvertexconstants+"];\n";else for(c=0;c<a.regread[1].length;)0<a.regread[1][c]&&(b+="uniform vec4 "+i+"c"+c+";\n"),c++;for(c=0;c<a.regread[2].length||c<a.regwrite[2].length;){if(0<a.regread[2][c]||0<a.regwrite[2][c])b+="vec4 "+i+"t"+c+";\n";c++}for(c=0;c<
a.regread[0].length;)0<a.regread[0][c]&&(b+="attribute vec4 va"+c+";\n"),c++;for(c=0;c<a.regread[4].length||c<a.regwrite[4].length;){if(0<a.regread[4][c]||0<a.regwrite[4][c])b+="varying vec4 vi"+c+";\n";c++}for(var d=["2D","Cube","3D",""],c=0;c<a.samplers.length;)null!=a.samplers[c]&&(b+="uniform sampler"+d[a.samplers[c].dim&3]+" fs"+c+";\n"),c++;"fragment"==a.header.type&&(b+="vec4 yFlipVec4(in vec4 value) {return vec4(value.x, 1.0 - value.y, value.z, value.w);}\n");"vertex"==a.header.type&&(b+=
"vec4 outpos;\n");a.writedepth&&(b+="vec4 tmp_FragDepth;\n");f+="void main() {\n";for(c=0;c<a.tokens.length;){d=l.Mapping.get_agal2glsllut()[a.tokens[c].opcode];if(null==d)throw"Opcode not valid or not implemented yet: ";for(var e=k["int"](Math.max(d.matrixheight,1)),o=0;o<e;){var z=o++,A="  "+d.s,n,h,m;if(null!=a.tokens[c].dest){if(0<d.matrixheight){if(1!=(a.tokens[c].dest.mask>>z&1))continue;n=this.regtostring(a.tokens[c].dest.regtype,a.tokens[c].dest.regnum,a,i);h="float";m=["x","y","z","w"][z];
n+="."+m}else if(n=this.regtostring(a.tokens[c].dest.regtype,a.tokens[c].dest.regnum,a,i),15!=a.tokens[c].dest.mask)switch(h=0,m="",0!=(a.tokens[c].dest.mask&1)&&(h++,m+="x"),0!=(a.tokens[c].dest.mask&2)&&(h++,m+="y"),0!=(a.tokens[c].dest.mask&4)&&(h++,m+="z"),0!=(a.tokens[c].dest.mask&8)&&(h++,m+="w"),n+="."+m,h){case 1:h="float";break;case 2:h="vec2";break;case 3:h="vec3";break;default:throw"Unexpected destination mask"+a.tokens[c].dest.mask;}else h="vec4",m="xyzw";A=C.replace(A,"%dest",n);A=C.replace(A,
"%cast",h);A=C.replace(A,"%dm",m)}n=15;!d.ndwm&&(d.dest&&null!=a.tokens[c].dest)&&(n=a.tokens[c].dest.mask);null!=a.tokens[c].a&&(A=C.replace(A,"%a",this.sourcetostring(a.tokens[c].a,0,n,d.scalar,a,i)));null!=a.tokens[c].b&&(A=C.replace(A,"%b",this.sourcetostring(a.tokens[c].b,z,n,d.scalar,a,i)),5==a.tokens[c].b.regtype&&(z=["2D","Cube","3D"][a.tokens[c].b.dim],n=["vec2","vec3","vec4"][a.tokens[c].b.dim],A=C.replace(A,"%flipFunc","yFlipVec4"),A=C.replace(A,"%texdim",z),A=C.replace(A,"%texsize",n),
A=C.replace(A,"%lod","")));f+=A}c++}"vertex"==a.header.type&&(f+="  gl_Position = vec4(outpos.x, yflip*outpos.y, outpos.z*2.0 - outpos.w, outpos.w);\n");a.writedepth&&(f+="  gl_FragDepth = clamp(tmp_FragDepth,0.0,1.0);\n");return b+(f+"}\n")},regtostring:function(a,b,f,c){switch(a){case 0:case 1:case 2:case 3:case 4:case 5:case 6:switch(a){case 0:return"va"+b}switch(a){case 1:return f.hasindirect&&"vertex"==f.header.type?"vcarrr["+b+"]":c+"c"+b}switch(a){case 2:return c+"t"+b}switch(a){case 3:return"vertex"==
f.header.type?"outpos":"gl_FragColor"}switch(a){case 4:return"vi"+b}switch(a){case 5:return"fs"+b}return"tmp_FragDepth";throw"Unknown register type";default:throw"Unknown register type";}},sourcetostring:function(a,b,f,c,i,d){var e=["x","y","z","w"];1==a.indirectflag?(i="vcarrr[int("+this.regtostring(a.indexregtype,a.regnum,i,d)+"."+e[a.indexselect]+")",b+=a.indexoffset,0>b&&(i=null==b?i+"null":i+(""+b)),0<b&&(i+="+"+(null==b?"null":""+b)),i+="]"):i=this.regtostring(a.regtype,a.regnum+b,i,d);b=a.regtype;
if(5==(0>b?4294967296+b:b+0))return i;if(c)return i+"."+e[a.swizzle&3];if(228==a.swizzle&&15==f)return i;i+=".";0!=(f&1)&&(i+=e[a.swizzle&3]);0!=(f&2)&&(i+=e[a.swizzle>>2&3]);0!=(f&4)&&(i+=e[a.swizzle>>4&3]);0!=(f&8)&&(i+=e[a.swizzle>>6&3]);return i},__class__:l.AGLSLParser};l.Sampler=function(){this.filter=this.mipmap=this.wrap=this.special=this.readmode=this.dim=this.lodbias=0};h["aglsl.Sampler"]=l.Sampler;l.Sampler.__name__=["aglsl","Sampler"];l.Sampler.prototype={__class__:l.Sampler};l.Context3D=
function(){};h["aglsl.Context3D"]=l.Context3D;l.Context3D.__name__=["aglsl","Context3D"];l.Context3D.prototype={__class__:l.Context3D};l.Description=function(){this.regread=[[],[],[],[],[],[],[]];this.regwrite=[[],[],[],[],[],[],[]];this.hasmatrix=this.writedepth=this.hasindirect=!1;this.samplers=[];this.tokens=[];this.header=new l.Header};h["aglsl.Description"]=l.Description;l.Description.__name__=["aglsl","Description"];l.Description.prototype={__class__:l.Description};l.Destination=function(){this.dim=
this.regtype=this.regnum=this.mask=0};h["aglsl.Destination"]=l.Destination;l.Destination.__name__=["aglsl","Destination"];l.Destination.prototype={__class__:l.Destination};l.Header=function(){this.version=this.progid=0;this.type=""};h["aglsl.Header"]=l.Header;l.Header.__name__=["aglsl","Header"];l.Header.prototype={__class__:l.Header};l.Mapping=function(){};h["aglsl.Mapping"]=l.Mapping;l.Mapping.__name__=["aglsl","Mapping"];l.Mapping.__properties__={get_agal2glsllut:"get_agal2glsllut"};l.Mapping._agal2glsllut=
null;l.Mapping.get_agal2glsllut=function(){null==l.Mapping._agal2glsllut&&(l.Mapping._agal2glsllut=[new l.OpLUT("%dest = %cast(%a);\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(%a + %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(%a - %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(%a * %b);\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(%a / %b);\n",0,!0,!0,!0,null,null,null,null,null,null),
new l.OpLUT("%dest = %cast(1.0) / %a;\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(min(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(max(%a,%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(fract(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(sqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(inversesqrt(abs(%a)));\n",0,!0,!0,!1,null,null,null,
null,null,null),new l.OpLUT("%dest = %cast(pow(abs(%a),%b));\n",0,!0,!0,!0,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(log2(abs(%a)));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(exp2(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(normalize(vec3( %a ) ));\n",0,!0,!0,!1,null,null,!0,null,null,null),new l.OpLUT("%dest = %cast(sin(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(cos(%a));\n",0,!0,!0,
!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(cross(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new l.OpLUT("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new l.OpLUT("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",0,!0,!0,!0,null,null,!0,null,null,null),new l.OpLUT("%dest = %cast(abs(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(%a * -1.0);\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(clamp(%a,0.0,1.0));\n",
0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(dot(vec3(%a),vec3(%b)));\n",null,!0,!0,!0,3,3,!0,null,null,null),new l.OpLUT("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,!0,!0,!0,4,4,!0,null,null,null),new l.OpLUT("%dest = %cast(dot(vec4(%a),vec4(%b)));\n",null,!0,!0,!0,4,3,!0,null,null,null),new l.OpLUT("%dest = %cast(dFdx(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(dFdx(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("if (float(%a)==float(%b)) {;\n",
0,!1,!0,!0,null,null,null,!0,null,null),new l.OpLUT("if (float(%a)!=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new l.OpLUT("if (float(%a)>=float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new l.OpLUT("if (float(%a)<float(%b)) {;\n",0,!1,!0,!0,null,null,null,!0,null,null),new l.OpLUT("} else {;\n",0,!1,!1,!1,null,null,null,null,null,null),new l.OpLUT("};\n",0,!1,!1,!1,null,null,null,null,null,null),new l.OpLUT(null,null,null,null,!1,null,null,null,null,null,null),new l.OpLUT(null,
null,null,null,!1,null,null,null,null,null,null),new l.OpLUT(null,null,null,null,!1,null,null,null,null,null,null),new l.OpLUT(null,null,null,null,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(texture%texdimLod(%b,%texsize(%a)).%dm);\n",null,!0,!0,!0,null,null,null,null,!0,null),new l.OpLUT("if ( float(%a)<0.0 ) discard;\n",null,!1,!0,!1,null,null,null,!0,null,null),new l.OpLUT("%dest = %cast(texture%texdim(%b,%texsize(%flipFunc(%a))%lod).%dm);\n",null,!0,!0,!0,null,null,!0,null,!0,
!0),new l.OpLUT("%dest = %cast(greaterThanEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new l.OpLUT("%dest = %cast(lessThan(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new l.OpLUT("%dest = %cast(sign(%a));\n",0,!0,!0,!1,null,null,null,null,null,null),new l.OpLUT("%dest = %cast(equal(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null),new l.OpLUT("%dest = %cast(notEqual(%a,%b).%dm);\n",0,!0,!0,!0,null,null,!0,null,!0,null)]);return l.Mapping._agal2glsllut};l.OpLUT=function(a,
b,f,c,i,d,e,o,z,A,n){null==n&&(n=!1);null==A&&(A=!1);null==z&&(z=!1);null==o&&(o=!1);null==e&&(e=0);null==d&&(d=0);null==i&&(i=!1);null==c&&(c=!1);null==f&&(f=!1);null==b&&(b=0);this.s=a;this.flags=b;this.dest=f;this.a=c;this.b=i;this.matrixwidth=d;this.matrixheight=e;this.ndwm=o;this.scalar=z;this.dm=A;this.lod=n};h["aglsl.OpLUT"]=l.OpLUT;l.OpLUT.__name__=["aglsl","OpLUT"];l.OpLUT.prototype={__class__:l.OpLUT};l.Token=function(){this.dest=new l.Destination;this.opcode=0;this.a=new l.Destination;
this.b=new l.Destination};h["aglsl.Token"]=l.Token;l.Token.__name__=["aglsl","Token"];l.Token.prototype={__class__:l.Token};l.assembler={};l.assembler.AGALMiniAssembler=function(){this.r=new m.ds.StringMap;this.cur=new l.assembler.Part};h["aglsl.assembler.AGALMiniAssembler"]=l.assembler.AGALMiniAssembler;l.assembler.AGALMiniAssembler.__name__=["aglsl","assembler","AGALMiniAssembler"];l.assembler.AGALMiniAssembler.prototype={assemble:function(a,b,f){0==f&&(f=1);null!=b&&this.addHeader(b,f);a=(new H("[\n\r]+",
"g")).split(a);b=0;for(f=a.length;b<f;){var c=b++;this.processLine(a[c],c)}return this.r},processLine:function(a,b){var f=a.indexOf("//");-1!=f&&(a=a.substring(0,f));var c=new H("^\\s+|\\s+$","g"),a=c.replace(a,"");if(0<a.length)if(c=new H("<.*>","g"),f=null,c.match(a)&&(c=c.matchedPos().pos,f=this.getMatches(new H("([\\w\\.\\-\\+]+)","gi"),a.substring(c)),a=a.substring(0,c)),c=this.getMatches(new H("([\\w\\.\\+\\[\\]]+)","gi"),a),0==c.length)3<=a.length&&m.Log.trace("Warning: bad line "+k.string(0>
b?4294967296+b:b+0)+": "+a,{fileName:"AGALMiniAssembler.hx",lineNumber:75,className:"aglsl.assembler.AGALMiniAssembler",methodName:"processLine"});else switch(c[0]){case "part":this.addHeader(c[1],k.parseInt(c[2]));break;case "endpart":if(null==this.cur)throw"Unexpected endpart";this.cur.data.position=0;this.cur=null;break;default:if(null==this.cur){m.Log.trace("Warning: bad line "+k.string(0>b?4294967296+b:b+0)+": "+a+" (Outside of any part definition)",{fileName:"AGALMiniAssembler.hx",lineNumber:96,
className:"aglsl.assembler.AGALMiniAssembler",methodName:"processLine"});break}if("comment"==this.cur.name)break;var i=l.assembler.OpcodeMap.get_map().get(c[0]);if(null==i)throw"Bad opcode "+c[0]+" "+k.string(0>b?4294967296+b:b+0)+": "+a;this.emitOpcode(this.cur,i.opcode);var d=1;if(null!=i.dest&&"none"!=i.dest){if(!this.emitDest(this.cur,c[d++],i.dest))throw"Bad destination register "+c[d-1]+" "+k.string(0>b?4294967296+b:b+0)+": "+a;}else this.emitZeroDword(this.cur);if(null!=i.a&&"none"!=i.a.format){if(!this.emitSource(this.cur,
c[d++],i.a))throw"Bad source register "+c[d-1]+" "+k.string(0>b?4294967296+b:b+0)+": "+a;}else this.emitZeroQword(this.cur);if(null!=i.b&&"none"!=i.b.format)if("sampler"==i.b.format){if(!this.emitSampler(this.cur,c[d++],i.b,f))throw"Bad sampler register "+c[d-1]+" "+k.string(0>b?4294967296+b:b+0)+": "+a;}else{if(!this.emitSource(this.cur,c[d++],i.b))throw"Bad source register "+c[d-1]+" "+k.string(0>b?4294967296+b:b+0)+": "+a;}else this.emitZeroQword(this.cur)}},getMatches:function(a,b){for(var f=
[];a.match(b);){var c=a.matched(1);f.push(c);b=a.matchedRight()}return f},getGroupMatches:function(a,b,f){null==f&&(f=0);var c=[];if(!a.match(b))return c;for(var b=0,i,d=!1;!d&&null!=(i=a.matched(b++));){c.push(i);var e;e=void 0;e=f;e=0>e?4294967296+e:e+0;if(e=0!=e)e=void 0,e=0>b,e=e!=0>f?e:b>f;e&&(d=!0)}return c},emitHeader:function(a){a.data.writeByte(160);a.data.writeUnsignedInt(a.version);16<=a.version&&a.data.writeByte(0);a.data.writeByte(161);switch(a.name){case "fragment":a.data.writeByte(1);
break;case "vertex":a.data.writeByte(0);break;case "cpu":a.data.writeByte(2);break;default:a.data.writeByte(255)}},emitOpcode:function(a,b){a.data.writeUnsignedInt(b)},emitZeroDword:function(a){a.data.writeUnsignedInt(0)},emitZeroQword:function(a){a.data.writeUnsignedInt(0);a.data.writeUnsignedInt(0)},emitDest:function(a,b){var f=this.getGroupMatches(new H("([fov]?[tpocidavs])(\\d*)(\\.[xyzw]{1,4})?","i"),b,3);if(null==l.assembler.RegMap.get_map().get(f[1]))return!1;null==k.parseInt(f[2])&&(f[2]=
"0");var c;c=null!=f[2]?f[2]:"0";var i=l.assembler.RegMap.get_map().get(f[1]).code,f=this.stringToMask(f[3]);a.data.writeShort(k.parseInt(c));a.data.writeByte(f);a.data.writeByte(i);return!0},stringToMask:function(a){if(null==a)return 15;var b=0;-1!=a.indexOf("x")&&(b|=1);-1!=a.indexOf("y")&&(b|=2);-1!=a.indexOf("z")&&(b|=4);-1!=a.indexOf("w")&&(b|=8);return b},stringToSwizzle:function(a){if(""==a)return 228;var b={x:0,y:1,z:2,w:3},f=0;if("."!=a.charAt(0))throw"Missing . for swizzle";1<a.length&&
(f|=E.field(b,a.charAt(1)));f=2<a.length?f|E.field(b,a.charAt(2))<<2:f|(f&3)<<2;f=3<a.length?f|E.field(b,a.charAt(3))<<4:f|(f&12)<<2;return f=4<a.length?f|E.field(b,a.charAt(4))<<6:f|(f&48)<<2},emitSampler:function(a,b,f,c){b=this.getGroupMatches(new H("fs(\\d*)","i"),b,1);if(1>b.length)return!1;a.data.writeShort(k.parseInt(b[1]));a.data.writeByte(0);a.data.writeByte(0);for(var b=5,i=f=0,d=c.length;i<d;){var e=i++,e=l.assembler.SamplerMap.get_map().get(c[e].toLowerCase());if(null!=e){var o=void 0,
o=f>>e.shift&e.mask,o=0>o?4294967296+o:o+0;0!=o&&m.Log.trace("Warning, duplicate sampler option",{fileName:"AGALMiniAssembler.hx",lineNumber:315,className:"aglsl.assembler.AGALMiniAssembler",methodName:"emitSampler"});f|=e.mask<<e.shift;b&=~(e.mask<<e.shift);b|=e.value<<e.shift}}a.data.writeUnsignedInt(b);return!0},emitSource:function(a,b){var f=this.getGroupMatches(new H("vc\\[(v[tcai])(\\d+)\\.([xyzw])([\\+\\-]\\d+)?\\](\\.[xyzw]{1,4})?","i"),b,5),c;if(0<f.length){if(null==l.assembler.RegMap.get_map().get(f[1]))return!1;
var i=k.parseInt(f[2])|0,d=l.assembler.RegMap.get_map().get(f[1]).code;c=this.stringToSwizzle(f[5]);var e=E.getProperty({x:0,y:1,z:2,w:3},f[3]),f=k.parseInt(f[4])|0;a.data.writeShort(i);a.data.writeByte(f);a.data.writeByte(c);a.data.writeByte(1);a.data.writeByte(d);a.data.writeByte(e);a.data.writeByte(128)}else{c=this.getGroupMatches(new H("([fov]?[tpocidavs])(\\d*)(\\.[xyzw]{1,4})?","i"),b,3);if(null==l.assembler.RegMap.get_map().get(c[1]))return!1;4>c.length&&c.push("");i=k.parseInt(c[2])|0;d=l.assembler.RegMap.get_map().get(c[1]).code;
c=this.stringToSwizzle(c[3]);a.data.writeShort(i);a.data.writeByte(0);a.data.writeByte(c);a.data.writeByte(d);a.data.writeByte(0);a.data.writeByte(0);a.data.writeByte(0)}return!0},addHeader:function(a,b){0==b&&(b=1);if(this.r.exists(a)){if(this.r.get(a).version!=(b|0))throw"Multiple versions for part "+a;}else this.r.set(a,new l.assembler.Part(a,b)),this.emitHeader(this.r.get(a));this.cur=this.r.get(a)},__class__:l.assembler.AGALMiniAssembler};l.assembler.FS=function(){};h["aglsl.assembler.FS"]=l.assembler.FS;
l.assembler.FS.__name__=["aglsl","assembler","FS"];l.assembler.FS.prototype={__class__:l.assembler.FS};l.assembler.Flags=function(){};h["aglsl.assembler.Flags"]=l.assembler.Flags;l.assembler.Flags.__name__=["aglsl","assembler","Flags"];l.assembler.Flags.prototype={__class__:l.assembler.Flags};l.assembler.Opcode=function(a,b,f,c,i,d,e,o,z,A){null==A&&(A=!1);null==z&&(z=!1);null==o&&(o=!1);this.a=new l.assembler.FS;this.b=new l.assembler.FS;this.flags=new l.assembler.Flags;this.dest=a;this.a.format=
b;this.a.size=f;this.b.format=c;this.b.size=i;this.opcode=d;this.flags.simple=e;this.flags.horizontal=o;this.flags.fragonly=z;this.flags.matrix=A};h["aglsl.assembler.Opcode"]=l.assembler.Opcode;l.assembler.Opcode.__name__=["aglsl","assembler","Opcode"];l.assembler.Opcode.prototype={__class__:l.assembler.Opcode};l.assembler.OpcodeMap=function(){};h["aglsl.assembler.OpcodeMap"]=l.assembler.OpcodeMap;l.assembler.OpcodeMap.__name__=["aglsl","assembler","OpcodeMap"];l.assembler.OpcodeMap.__properties__=
{get_map:"get_map"};l.assembler.OpcodeMap._map=null;l.assembler.OpcodeMap.get_map=function(){null==l.assembler.OpcodeMap._map&&(l.assembler.OpcodeMap._map=new m.ds.StringMap,l.assembler.OpcodeMap._map.set("mov",new l.assembler.Opcode("vector","vector",4,"none",0,0,!0,null,null,null)),l.assembler.OpcodeMap._map.set("add",new l.assembler.Opcode("vector","vector",4,"vector",4,1,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sub",new l.assembler.Opcode("vector","vector",4,"vector",4,2,!0,null,null,
null)),l.assembler.OpcodeMap._map.set("mul",new l.assembler.Opcode("vector","vector",4,"vector",4,3,!0,null,null,null)),l.assembler.OpcodeMap._map.set("div",new l.assembler.Opcode("vector","vector",4,"vector",4,4,!0,null,null,null)),l.assembler.OpcodeMap._map.set("rcp",new l.assembler.Opcode("vector","vector",4,"none",0,5,!0,null,null,null)),l.assembler.OpcodeMap._map.set("min",new l.assembler.Opcode("vector","vector",4,"vector",4,6,!0,null,null,null)),l.assembler.OpcodeMap._map.set("max",new l.assembler.Opcode("vector",
"vector",4,"vector",4,7,!0,null,null,null)),l.assembler.OpcodeMap._map.set("frc",new l.assembler.Opcode("vector","vector",4,"none",0,8,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sqt",new l.assembler.Opcode("vector","vector",4,"none",0,9,!0,null,null,null)),l.assembler.OpcodeMap._map.set("rsq",new l.assembler.Opcode("vector","vector",4,"none",0,10,!0,null,null,null)),l.assembler.OpcodeMap._map.set("pow",new l.assembler.Opcode("vector","vector",4,"vector",4,11,!0,null,null,null)),l.assembler.OpcodeMap._map.set("log",
new l.assembler.Opcode("vector","vector",4,"none",0,12,!0,null,null,null)),l.assembler.OpcodeMap._map.set("exp",new l.assembler.Opcode("vector","vector",4,"none",0,13,!0,null,null,null)),l.assembler.OpcodeMap._map.set("nrm",new l.assembler.Opcode("vector","vector",4,"none",0,14,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sin",new l.assembler.Opcode("vector","vector",4,"none",0,15,!0,null,null,null)),l.assembler.OpcodeMap._map.set("cos",new l.assembler.Opcode("vector","vector",4,"none",0,16,
!0,null,null,null)),l.assembler.OpcodeMap._map.set("crs",new l.assembler.Opcode("vector","vector",4,"vector",4,17,!0,!0,null,null)),l.assembler.OpcodeMap._map.set("dp3",new l.assembler.Opcode("vector","vector",4,"vector",4,18,!0,!0,null,null)),l.assembler.OpcodeMap._map.set("dp4",new l.assembler.Opcode("vector","vector",4,"vector",4,19,!0,!0,null,null)),l.assembler.OpcodeMap._map.set("abs",new l.assembler.Opcode("vector","vector",4,"none",0,20,!0,null,null,null)),l.assembler.OpcodeMap._map.set("neg",
new l.assembler.Opcode("vector","vector",4,"none",0,21,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sat",new l.assembler.Opcode("vector","vector",4,"none",0,22,!0,null,null,null)),l.assembler.OpcodeMap._map.set("ted",new l.assembler.Opcode("vector","vector",4,"sampler",1,38,!0,null,!0,null)),l.assembler.OpcodeMap._map.set("kil",new l.assembler.Opcode("none","scalar",1,"none",0,39,!0,null,!0,null)),l.assembler.OpcodeMap._map.set("tex",new l.assembler.Opcode("vector","vector",4,"sampler",1,40,
!0,null,!0,null)),l.assembler.OpcodeMap._map.set("m33",new l.assembler.Opcode("vector","matrix",3,"vector",3,23,!0,null,null,!0)),l.assembler.OpcodeMap._map.set("m44",new l.assembler.Opcode("vector","matrix",4,"vector",4,24,!0,null,null,!0)),l.assembler.OpcodeMap._map.set("m43",new l.assembler.Opcode("vector","matrix",3,"vector",4,25,!0,null,null,!0)),l.assembler.OpcodeMap._map.set("sge",new l.assembler.Opcode("vector","vector",4,"vector",4,41,!0,null,null,null)),l.assembler.OpcodeMap._map.set("slt",
new l.assembler.Opcode("vector","vector",4,"vector",4,42,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sgn",new l.assembler.Opcode("vector","vector",4,"vector",4,43,!0,null,null,null)),l.assembler.OpcodeMap._map.set("seq",new l.assembler.Opcode("vector","vector",4,"vector",4,44,!0,null,null,null)),l.assembler.OpcodeMap._map.set("sne",new l.assembler.Opcode("vector","vector",4,"vector",4,45,!0,null,null,null)));return l.assembler.OpcodeMap._map};l.assembler.OpcodeMap.prototype={__class__:l.assembler.OpcodeMap};
l.assembler.Part=function(a,b){null==b&&(b=0);null==a&&(a="");this.name=a;this.version=b;this.data=new c.utils.ByteArray;this.data.littleEndian=!0;"littleEndian"};h["aglsl.assembler.Part"]=l.assembler.Part;l.assembler.Part.__name__=["aglsl","assembler","Part"];l.assembler.Part.prototype={__class__:l.assembler.Part};l.assembler.Reg=function(a,b){this.code=a;this.desc=b};h["aglsl.assembler.Reg"]=l.assembler.Reg;l.assembler.Reg.__name__=["aglsl","assembler","Reg"];l.assembler.Reg.prototype={__class__:l.assembler.Reg};
l.assembler.RegMap=function(){};h["aglsl.assembler.RegMap"]=l.assembler.RegMap;l.assembler.RegMap.__name__=["aglsl","assembler","RegMap"];l.assembler.RegMap.__properties__={get_map:"get_map"};l.assembler.RegMap._map=null;l.assembler.RegMap.get_map=function(){null==l.assembler.RegMap._map&&(l.assembler.RegMap._map=new m.ds.StringMap,l.assembler.RegMap._map.set("va",new l.assembler.Reg(0,"vertex attribute")),l.assembler.RegMap._map.set("fc",new l.assembler.Reg(1,"fragment constant")),l.assembler.RegMap._map.set("vc",
new l.assembler.Reg(1,"vertex constant")),l.assembler.RegMap._map.set("ft",new l.assembler.Reg(2,"fragment temporary")),l.assembler.RegMap._map.set("vt",new l.assembler.Reg(2,"vertex temporary")),l.assembler.RegMap._map.set("vo",new l.assembler.Reg(3,"vertex output")),l.assembler.RegMap._map.set("op",new l.assembler.Reg(3,"vertex output")),l.assembler.RegMap._map.set("fd",new l.assembler.Reg(3,"fragment depth output")),l.assembler.RegMap._map.set("fo",new l.assembler.Reg(3,"fragment output")),l.assembler.RegMap._map.set("oc",
new l.assembler.Reg(3,"fragment output")),l.assembler.RegMap._map.set("v",new l.assembler.Reg(4,"varying")),l.assembler.RegMap._map.set("vi",new l.assembler.Reg(4,"varying output")),l.assembler.RegMap._map.set("fi",new l.assembler.Reg(4,"varying input")),l.assembler.RegMap._map.set("fs",new l.assembler.Reg(5,"sampler")));return l.assembler.RegMap._map};l.assembler.RegMap.prototype={__class__:l.assembler.RegMap};l.assembler.Sampler=function(a,b,f){this.shift=a;this.mask=b;this.value=f};h["aglsl.assembler.Sampler"]=
l.assembler.Sampler;l.assembler.Sampler.__name__=["aglsl","assembler","Sampler"];l.assembler.Sampler.prototype={__class__:l.assembler.Sampler};l.assembler.SamplerMap=function(){};h["aglsl.assembler.SamplerMap"]=l.assembler.SamplerMap;l.assembler.SamplerMap.__name__=["aglsl","assembler","SamplerMap"];l.assembler.SamplerMap.__properties__={get_map:"get_map"};l.assembler.SamplerMap._map=null;l.assembler.SamplerMap.get_map=function(){null==l.assembler.SamplerMap._map&&(l.assembler.SamplerMap._map=new m.ds.StringMap,
l.assembler.SamplerMap._map.set("rgba",new l.assembler.Sampler(8,15,0)),l.assembler.SamplerMap._map.set("rg",new l.assembler.Sampler(8,15,5)),l.assembler.SamplerMap._map.set("r",new l.assembler.Sampler(8,15,4)),l.assembler.SamplerMap._map.set("compressed",new l.assembler.Sampler(8,15,1)),l.assembler.SamplerMap._map.set("compressed_alpha",new l.assembler.Sampler(8,15,2)),l.assembler.SamplerMap._map.set("dxt1",new l.assembler.Sampler(8,15,1)),l.assembler.SamplerMap._map.set("dxt5",new l.assembler.Sampler(8,
15,2)),l.assembler.SamplerMap._map.set("2d",new l.assembler.Sampler(12,15,0)),l.assembler.SamplerMap._map.set("cube",new l.assembler.Sampler(12,15,1)),l.assembler.SamplerMap._map.set("3d",new l.assembler.Sampler(12,15,2)),l.assembler.SamplerMap._map.set("centroid",new l.assembler.Sampler(16,1,1)),l.assembler.SamplerMap._map.set("ignoresampler",new l.assembler.Sampler(16,4,4)),l.assembler.SamplerMap._map.set("clamp",new l.assembler.Sampler(20,15,0)),l.assembler.SamplerMap._map.set("repeat",new l.assembler.Sampler(20,
15,1)),l.assembler.SamplerMap._map.set("wrap",new l.assembler.Sampler(20,15,1)),l.assembler.SamplerMap._map.set("nomip",new l.assembler.Sampler(24,15,0)),l.assembler.SamplerMap._map.set("mipnone",new l.assembler.Sampler(24,15,0)),l.assembler.SamplerMap._map.set("mipnearest",new l.assembler.Sampler(24,15,1)),l.assembler.SamplerMap._map.set("miplinear",new l.assembler.Sampler(24,15,2)),l.assembler.SamplerMap._map.set("nearest",new l.assembler.Sampler(28,15,0)),l.assembler.SamplerMap._map.set("linear",
new l.assembler.Sampler(28,15,1)));return l.assembler.SamplerMap._map};l.assembler.SamplerMap.prototype={__class__:l.assembler.SamplerMap};var d={Away3D:function(){}};h["away3d.Away3D"]=d.Away3D;d.Away3D.__name__=["away3d","Away3D"];d.animators={};d.animators.IAnimationSet=function(){};h["away3d.animators.IAnimationSet"]=d.animators.IAnimationSet;d.animators.IAnimationSet.__name__=["away3d","animators","IAnimationSet"];d.animators.IAnimationSet.prototype={__class__:d.animators.IAnimationSet,__properties__:{get_usesCPU:"get_usesCPU"}};
d.animators.IAnimator=function(){};h["away3d.animators.IAnimator"]=d.animators.IAnimator;d.animators.IAnimator.__name__=["away3d","animators","IAnimator"];d.animators.IAnimator.prototype={__class__:d.animators.IAnimator,__properties__:{get_animationSet:"get_animationSet"}};d.materials={};d.materials.compilation={};d.materials.compilation.ShaderRegisterCache=function(a){this._profile=a};h["away3d.materials.compilation.ShaderRegisterCache"]=d.materials.compilation.ShaderRegisterCache;d.materials.compilation.ShaderRegisterCache.__name__=
["away3d","materials","compilation","ShaderRegisterCache"];d.materials.compilation.ShaderRegisterCache.prototype={reset:function(){this._fragmentTempCache=new d.materials.compilation.RegisterPool("ft",8,!1);this._vertexTempCache=new d.materials.compilation.RegisterPool("vt",8,!1);this._varyingCache=new d.materials.compilation.RegisterPool("v",8);this._textureCache=new d.materials.compilation.RegisterPool("fs",8);this._vertexAttributesCache=new d.materials.compilation.RegisterPool("va",8);this._fragmentConstantsCache=
new d.materials.compilation.RegisterPool("fc",28);this._vertexConstantsCache=new d.materials.compilation.RegisterPool("vc",128);this._fragmentOutputRegister=new d.materials.compilation.ShaderRegisterElement("oc",-1);this._vertexOutputRegister=new d.materials.compilation.ShaderRegisterElement("op",-1);this._numUsedFragmentConstants=this._numUsedVaryings=this._numUsedTextures=this._numUsedStreams=this._numUsedVertexConstants=0;var a;for(a=0;a<this._vertexAttributesOffset;)this.getFreeVertexAttribute(),
++a;for(a=0;a<this._vertexConstantOffset;)this.getFreeVertexConstant(),++a;for(a=0;a<this._varyingsOffset;)this.getFreeVarying(),++a;for(a=0;a<this._fragmentConstantOffset;)this.getFreeFragmentConstant(),++a},dispose:function(){this._fragmentTempCache.dispose();this._vertexTempCache.dispose();this._varyingCache.dispose();this._fragmentConstantsCache.dispose();this._vertexAttributesCache.dispose();this._vertexOutputRegister=this._fragmentOutputRegister=this._vertexAttributesCache=this._fragmentConstantsCache=
this._varyingCache=this._vertexTempCache=this._fragmentTempCache=null},addFragmentTempUsages:function(a,b){this._fragmentTempCache.addUsage(a,b)},removeFragmentTempUsage:function(a){this._fragmentTempCache.removeUsage(a)},addVertexTempUsages:function(a,b){this._vertexTempCache.addUsage(a,b)},removeVertexTempUsage:function(a){this._vertexTempCache.removeUsage(a)},getFreeFragmentVectorTemp:function(){return this._fragmentTempCache.requestFreeVectorReg()},getFreeFragmentSingleTemp:function(){return this._fragmentTempCache.requestFreeRegComponent()},
getFreeVarying:function(){++this._numUsedVaryings;return this._varyingCache.requestFreeVectorReg()},getFreeFragmentConstant:function(){++this._numUsedFragmentConstants;return this._fragmentConstantsCache.requestFreeVectorReg()},getFreeVertexConstant:function(){++this._numUsedVertexConstants;return this._vertexConstantsCache.requestFreeVectorReg()},getFreeVertexVectorTemp:function(){return this._vertexTempCache.requestFreeVectorReg()},getFreeVertexSingleTemp:function(){return this._vertexTempCache.requestFreeRegComponent()},
getFreeVertexAttribute:function(){++this._numUsedStreams;return this._vertexAttributesCache.requestFreeVectorReg()},getFreeTextureReg:function(){++this._numUsedTextures;return this._textureCache.requestFreeVectorReg()},get_vertexConstantOffset:function(){return this._vertexConstantOffset},set_vertexConstantOffset:function(a){return this._vertexConstantOffset=a},get_vertexAttributesOffset:function(){return this._vertexAttributesOffset},set_vertexAttributesOffset:function(a){return this._vertexAttributesOffset=
a},get_varyingsOffset:function(){return this._varyingsOffset},set_varyingsOffset:function(a){return this._varyingsOffset=a},get_fragmentConstantOffset:function(){return this._fragmentConstantOffset},set_fragmentConstantOffset:function(a){return this._fragmentConstantOffset=a},get_fragmentOutputRegister:function(){return this._fragmentOutputRegister},get_numUsedVertexConstants:function(){return this._numUsedVertexConstants},get_numUsedFragmentConstants:function(){return this._numUsedFragmentConstants},
get_numUsedStreams:function(){return this._numUsedStreams},get_numUsedTextures:function(){return this._numUsedTextures},get_numUsedVaryings:function(){return this._numUsedVaryings},__class__:d.materials.compilation.ShaderRegisterCache,__properties__:{get_numUsedVaryings:"get_numUsedVaryings",get_numUsedTextures:"get_numUsedTextures",get_numUsedStreams:"get_numUsedStreams",get_numUsedFragmentConstants:"get_numUsedFragmentConstants",get_numUsedVertexConstants:"get_numUsedVertexConstants",get_fragmentOutputRegister:"get_fragmentOutputRegister",
set_fragmentConstantOffset:"set_fragmentConstantOffset",get_fragmentConstantOffset:"get_fragmentConstantOffset",set_varyingsOffset:"set_varyingsOffset",get_varyingsOffset:"get_varyingsOffset",set_vertexAttributesOffset:"set_vertexAttributesOffset",get_vertexAttributesOffset:"get_vertexAttributesOffset",set_vertexConstantOffset:"set_vertexConstantOffset",get_vertexConstantOffset:"get_vertexConstantOffset"}};d.animators.data={};d.animators.data.AnimationRegisterCache=function(a){d.materials.compilation.ShaderRegisterCache.call(this,
a);this.indexDictionary=new m.ds.ObjectMap;this.vertexConstantData=c._Vector.Vector_Impl_._new();this.fragmentConstantData=c._Vector.Vector_Impl_._new()};h["away3d.animators.data.AnimationRegisterCache"]=d.animators.data.AnimationRegisterCache;d.animators.data.AnimationRegisterCache.__name__=["away3d","animators","data","AnimationRegisterCache"];d.animators.data.AnimationRegisterCache.__super__=d.materials.compilation.ShaderRegisterCache;d.animators.data.AnimationRegisterCache.prototype=q(d.materials.compilation.ShaderRegisterCache.prototype,
{reset:function(){d.materials.compilation.ShaderRegisterCache.prototype.reset.call(this);this.rotationRegisters=[];this.positionAttribute=this.getRegisterFromString(this.sourceRegisters[0]);this.scaleAndRotateTarget=this.getRegisterFromString(this.targetRegisters[0]);this.addVertexTempUsages(this.scaleAndRotateTarget,1);for(var a=1;a<this.targetRegisters.length;)this.rotationRegisters.push(this.getRegisterFromString(this.targetRegisters[a])),this.addVertexTempUsages(this.rotationRegisters[a-1],1),
a++;this.scaleAndRotateTarget=new d.materials.compilation.ShaderRegisterElement(this.scaleAndRotateTarget.get_regName(),this.scaleAndRotateTarget.get_index());this.vertexZeroConst=this.getFreeVertexConstant();this.vertexZeroConst=new d.materials.compilation.ShaderRegisterElement(this.vertexZeroConst.get_regName(),this.vertexZeroConst.get_index(),0);this.vertexOneConst=new d.materials.compilation.ShaderRegisterElement(this.vertexZeroConst.get_regName(),this.vertexZeroConst.get_index(),1);this.vertexTwoConst=
new d.materials.compilation.ShaderRegisterElement(this.vertexZeroConst.get_regName(),this.vertexZeroConst.get_index(),2);this.positionTarget=this.getFreeVertexVectorTemp();this.addVertexTempUsages(this.positionTarget,1);this.positionTarget=new d.materials.compilation.ShaderRegisterElement(this.positionTarget.get_regName(),this.positionTarget.get_index());this.needVelocity?(this.velocityTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.velocityTarget,1),this.velocityTarget=new d.materials.compilation.ShaderRegisterElement(this.velocityTarget.get_regName(),
this.velocityTarget.get_index()),this.vertexTime=new d.materials.compilation.ShaderRegisterElement(this.velocityTarget.get_regName(),this.velocityTarget.get_index(),3),this.vertexLife=new d.materials.compilation.ShaderRegisterElement(this.positionTarget.get_regName(),this.positionTarget.get_index(),3)):(a=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(a,1),this.vertexTime=new d.materials.compilation.ShaderRegisterElement(a.get_regName(),a.get_index(),0),this.vertexLife=new d.materials.compilation.ShaderRegisterElement(a.get_regName(),
a.get_index(),1))},setUVSourceAndTarget:function(a,b){this.uvVar=this.getRegisterFromString(b);this.uvAttribute=this.getRegisterFromString(a);this.uvTarget=new d.materials.compilation.ShaderRegisterElement(this.positionTarget.get_regName(),this.positionTarget.get_index())},setRegisterIndex:function(a,b,f){var c;c=null!=this.indexDictionary.h.__keys__[a.__id__]?this.indexDictionary.h[a.__id__]:d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8,0);c[b]=f;this.indexDictionary.set(a,
c)},getRegisterIndex:function(a,b){return this.indexDictionary.h[a.__id__][b]},getInitCode:function(){for(var a=this.sourceRegisters.length,b="",f=0;f<a;)b+="mov "+this.targetRegisters[f]+","+this.sourceRegisters[f]+"\n",f++;b+="mov "+k.string(this.positionTarget)+".xyz,"+this.vertexZeroConst.toString()+"\n";this.needVelocity&&(b+="mov "+k.string(this.velocityTarget)+".xyz,"+this.vertexZeroConst.toString()+"\n");return b},getCombinationCode:function(){return"add "+k.string(this.scaleAndRotateTarget)+
".xyz,"+k.string(this.scaleAndRotateTarget)+".xyz,"+k.string(this.positionTarget)+".xyz\n"},initColorRegisters:function(){var a="";this.hasColorMulNode&&(this.colorMulTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.colorMulTarget,1),this.colorMulVary=this.getFreeVarying(),a+="mov "+k.string(this.colorMulTarget)+","+k.string(this.vertexOneConst)+"\n");this.hasColorAddNode&&(this.colorAddTarget=this.getFreeVertexVectorTemp(),this.addVertexTempUsages(this.colorAddTarget,1),this.colorAddVary=
this.getFreeVarying(),a+="mov "+k.string(this.colorAddTarget)+","+k.string(this.vertexZeroConst)+"\n");return a},getColorPassCode:function(){var a="";if(this.needFragmentAnimation&&(this.hasColorAddNode||this.hasColorMulNode))this.hasColorMulNode&&(a+="mov "+k.string(this.colorMulVary)+","+k.string(this.colorMulTarget)+"\n"),this.hasColorAddNode&&(a+="mov "+k.string(this.colorAddVary)+","+k.string(this.colorAddTarget)+"\n");return a},getColorCombinationCode:function(a){var b="";if(this.needFragmentAnimation&&
(this.hasColorAddNode||this.hasColorMulNode))a=this.getRegisterFromString(a),this.addFragmentTempUsages(a,1),this.hasColorMulNode&&(b+="mul "+k.string(a)+","+k.string(a)+","+k.string(this.colorMulVary)+"\n"),this.hasColorAddNode&&(b+="add "+k.string(a)+","+k.string(a)+","+k.string(this.colorAddVary)+"\n");return b},getRegisterFromString:function(a){var b=new H("([a-z]+)([\\d]+)","");b.match(a);return new d.materials.compilation.ShaderRegisterElement(b.matched(1),k.parseInt(b.matched(2)))},get_numVertexConstant:function(){return this._numVertexConstant},
get_numFragmentConstant:function(){return this._numFragmentConstant},setDataLength:function(){this._numVertexConstant=this._numUsedVertexConstants-this._vertexConstantOffset;this._numFragmentConstant=this._numUsedFragmentConstants-this._fragmentConstantOffset;d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(this.vertexConstantData),4*this._numVertexConstant);d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(this.fragmentConstantData),4*this._numFragmentConstant)},
setVertexConst:function(a,b,f,c,i){null==i&&(i=0);null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);var a=4*(a-this._vertexConstantOffset),d=this.vertexConstantData,e=a++;e>=d.length&&!d.fixed&&(d.length=e+1);d.data[e]=b;b=this.vertexConstantData;d=a++;d>=b.length&&!b.fixed&&(b.length=d+1);b.data[d]=f;f=this.vertexConstantData;b=a++;b>=f.length&&!f.fixed&&(f.length=b+1);f.data[b]=c;c=this.vertexConstantData;a>=c.length&&!c.fixed&&(c.length=a+1);c.data[a]=i},setVertexConstFromVector:function(a,b){for(var f=
4*(a-this._vertexConstantOffset),c=0;c<b.length;){var i=this.vertexConstantData,d=f++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=b[c];c++}},setVertexConstFromMatrix:function(a,b){var f=b.rawData,c=4*(a-this._vertexConstantOffset),i=this.vertexConstantData,d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[0];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[4];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[8];
i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[12];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[1];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[5];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[9];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[13];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&
(i.length=d+1);i.data[d]=f.data[2];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[6];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[10];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[14];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[3];i=this.vertexConstantData;d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[7];i=this.vertexConstantData;
d=c++;d>=i.length&&!i.fixed&&(i.length=d+1);i.data[d]=f.data[11];i=this.vertexConstantData;c>=i.length&&!i.fixed&&(i.length=c+1);i.data[c]=f.data[15]},setFragmentConst:function(a,b,f,c,d){null==d&&(d=0);null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);var a=4*(a-this._fragmentConstantOffset),e=this.fragmentConstantData,g=a++;g>=e.length&&!e.fixed&&(e.length=g+1);e.data[g]=b;b=this.fragmentConstantData;e=a++;e>=b.length&&!b.fixed&&(b.length=e+1);b.data[e]=f;f=this.fragmentConstantData;b=a++;b>=f.length&&
!f.fixed&&(f.length=b+1);f.data[b]=c;c=this.fragmentConstantData;a>=c.length&&!c.fixed&&(c.length=a+1);c.data[a]=d},__class__:d.animators.data.AnimationRegisterCache,__properties__:q(d.materials.compilation.ShaderRegisterCache.prototype.__properties__,{get_numFragmentConstant:"get_numFragmentConstant",get_numVertexConstant:"get_numVertexConstant"})});d.animators.data.AnimationSubGeometry=function(){this._vertexBuffer=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._bufferContext=
d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._bufferDirty=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this.numProcessedVertices=0;this.previousTime=Math.NEGATIVE_INFINITY;this.animationParticles=[];for(var a=0;8>a;)this._bufferDirty[a]=!0,a++};h["away3d.animators.data.AnimationSubGeometry"]=d.animators.data.AnimationSubGeometry;d.animators.data.AnimationSubGeometry.__name__=["away3d","animators","data","AnimationSubGeometry"];
d.animators.data.AnimationSubGeometry.prototype={createVertexData:function(a,b){this._numVertices=a;this._totalLenOfOneVertex=b;this._vertexData=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),a*b,0)},activateVertexBuffer:function(a,b,f,c){var d=f.get_stage3DIndex(),f=f.get_context3D(),e=this._vertexBuffer[d];if(null==e||this._bufferContext[d]!=f)e=this._vertexBuffer[d]=f.createVertexBuffer(this._numVertices,this._totalLenOfOneVertex),this._bufferContext[d]=f,this._bufferDirty[d]=
!0;this._bufferDirty[d]&&(e.uploadFromVector(this._vertexData,0,this._numVertices),this._bufferDirty[d]=!1);f.setVertexBufferAt(a,e,b,c)},dispose:function(){for(;0<this._vertexBuffer.length;){var a=this._vertexBuffer.pop();null!=a&&a.dispose()}},invalidateBuffer:function(){for(var a=0;8>a;)this._bufferDirty[a]=!0,a++},get_vertexData:function(){return this._vertexData},get_numVertices:function(){return this._numVertices},get_totalLenOfOneVertex:function(){return this._totalLenOfOneVertex},__class__:d.animators.data.AnimationSubGeometry,
__properties__:{get_totalLenOfOneVertex:"get_totalLenOfOneVertex",get_numVertices:"get_numVertices",get_vertexData:"get_vertexData"}};d.animators.data.ParticleAnimationData=function(a,b,f,c,d){this.index=a;this.startTime=b;this.totalTime=f+c;this.duration=f;this.delay=c;this.startVertexIndex=d.startVertexIndex;this.numVertices=d.numVertices};h["away3d.animators.data.ParticleAnimationData"]=d.animators.data.ParticleAnimationData;d.animators.data.ParticleAnimationData.__name__=["away3d","animators",
"data","ParticleAnimationData"];d.animators.data.ParticleAnimationData.prototype={__class__:d.animators.data.ParticleAnimationData};d.library={};d.library.assets={};d.library.assets.NamedAssetBase=function(a){null==a&&(a="null");this._originalName=this._name=a;this.updateFullPath();c.events.EventDispatcher.call(this)};h["away3d.library.assets.NamedAssetBase"]=d.library.assets.NamedAssetBase;d.library.assets.NamedAssetBase.__name__=["away3d","library","assets","NamedAssetBase"];d.library.assets.NamedAssetBase.__super__=
c.events.EventDispatcher;d.library.assets.NamedAssetBase.prototype=q(c.events.EventDispatcher.prototype,{get_originalName:function(){return this._originalName},get_id:function(){return this._id},set_id:function(a){return this._id=a},get_name:function(){return this._name},set_name:function(a){var b;b=this._name;this._name=a;null==this._name&&(this._name="null");this.updateFullPath();this.hasEventListener(d.events.Asset3DEvent.ASSET_RENAME)&&this.dispatchEvent(new d.events.Asset3DEvent(d.events.Asset3DEvent.ASSET_RENAME,
s.Boot.__cast(this,d.library.assets.IAsset),b));return a},get_assetNamespace:function(){return this._namespace},get_assetFullPath:function(){return this._full_path},assetPathEquals:function(a,b){return this._name==a&&(null==b||this._namespace==b)},resetAssetPath:function(a,b,f){null==f&&(f=!0);this._name=null!=a?a:"null";this._namespace=null!=b?b:d.library.assets.NamedAssetBase.DEFAULT_NAMESPACE;f&&(this._originalName=this._name);this.updateFullPath()},updateFullPath:function(){this._full_path=[this._namespace,
this._name]},__class__:d.library.assets.NamedAssetBase,__properties__:{get_assetFullPath:"get_assetFullPath",get_assetNamespace:"get_assetNamespace",set_name:"set_name",get_name:"get_name",set_id:"set_id",get_id:"get_id",get_originalName:"get_originalName"}});d.library.assets.IAsset=function(){};h["away3d.library.assets.IAsset"]=d.library.assets.IAsset;d.library.assets.IAsset.__name__=["away3d","library","assets","IAsset"];d.library.assets.IAsset.__interfaces__=[c.events.IEventDispatcher];d.library.assets.IAsset.prototype=
{__class__:d.library.assets.IAsset,__properties__:{get_assetFullPath:"get_assetFullPath",get_assetType:"get_assetType",get_assetNamespace:"get_assetNamespace",set_id:"set_id",get_id:"get_id",set_name:"set_name",get_name:"get_name"}};d.animators.nodes={};d.animators.nodes.AnimationNodeBase=function(){d.library.assets.NamedAssetBase.call(this)};h["away3d.animators.nodes.AnimationNodeBase"]=d.animators.nodes.AnimationNodeBase;d.animators.nodes.AnimationNodeBase.__name__=["away3d","animators","nodes",
"AnimationNodeBase"];d.animators.nodes.AnimationNodeBase.__interfaces__=[d.library.assets.IAsset];d.animators.nodes.AnimationNodeBase.__super__=d.library.assets.NamedAssetBase;d.animators.nodes.AnimationNodeBase.prototype=q(d.library.assets.NamedAssetBase.prototype,{get_stateClass:function(){return this._stateClass},dispose:function(){},get_assetType:function(){return d.library.assets.Asset3DType.ANIMATION_NODE},__class__:d.animators.nodes.AnimationNodeBase,__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,
{get_assetType:"get_assetType",get_stateClass:"get_stateClass"})});d.animators.states={};d.animators.states.IAnimationState=function(){};h["away3d.animators.states.IAnimationState"]=d.animators.states.IAnimationState;d.animators.states.IAnimationState.__name__=["away3d","animators","states","IAnimationState"];d.animators.states.IAnimationState.prototype={__class__:d.animators.states.IAnimationState,__properties__:{get_positionDelta:"get_positionDelta"}};d.animators.states.AnimationStateBase=function(a,
b){this._time=this._startTime=0;this._rootDelta=new c.geom.Vector3D;this._positionDeltaDirty=!0;this._animator=a;this._animationNode=b};h["away3d.animators.states.AnimationStateBase"]=d.animators.states.AnimationStateBase;d.animators.states.AnimationStateBase.__name__=["away3d","animators","states","AnimationStateBase"];d.animators.states.AnimationStateBase.__interfaces__=[d.animators.states.IAnimationState];d.animators.states.AnimationStateBase.prototype={get_positionDelta:function(){this._positionDeltaDirty&&
this.updatePositionDelta();return this._rootDelta},offset:function(a){this._startTime=a;this._positionDeltaDirty=!0},update:function(a){this._time!=a-this._startTime&&this.updateTime(a)},phase:function(){},updateTime:function(a){this._time=a-this._startTime;this._positionDeltaDirty=!0},updatePositionDelta:function(){},__class__:d.animators.states.AnimationStateBase,__properties__:{get_positionDelta:"get_positionDelta"}};d.bounds={};d.bounds.BoundingVolumeBase=function(){var a=[],b=new c.VectorData;
b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var p=0,d=a.length;p<d;){var e=p++;f[e]=a[e]}b.data=f;this._aabbPoints=b;this._aabbPointsDirty=!0;this._min=new c.geom.Vector3D;this._max=new c.geom.Vector3D};h["away3d.bounds.BoundingVolumeBase"]=d.bounds.BoundingVolumeBase;d.bounds.BoundingVolumeBase.__name__=["away3d","bounds","BoundingVolumeBase"];d.bounds.BoundingVolumeBase.prototype={get_max:function(){return this._max},get_min:function(){return this._min},get_aabbPoints:function(){this._aabbPointsDirty&&
this.updateAABBPoints();for(var a=this._aabbPoints,b=[],f=0,c=a.data.length;f<c;){var d=f++;b.push(a.data[d])}return b},get_boundingRenderable:function(){null==this._boundingRenderable&&(this._boundingRenderable=this.createBoundingRenderable(),this.updateBoundingRenderable());return this._boundingRenderable},nullify:function(){this._min.x=this._min.y=this._min.z=0;this._max.x=this._max.y=this._max.z=0;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&this.updateBoundingRenderable()},disposeRenderable:function(){null!=
this._boundingRenderable&&this._boundingRenderable.dispose();this._boundingRenderable=null},fromVertices:function(a){var b=0,f=a.length,c,d,e,g,o,z;if(0==f)this.nullify();else{var A;c=g=a[b++];d=o=a[b++];for(e=z=a[b++];b<f;)A=a[b++],A<c?c=A:A>g&&(g=A),A=a[b++],A<d?d=A:A>o&&(o=A),A=a[b++],A<e?e=A:A>z&&(z=A);this.fromExtremes(c,d,e,g,o,z)}},fromGeometry:function(a){var a=a.get_subGeometries(),b=a.length,f,c,d,e,g,o;if(0<b){var z=0;f=c=d=Math.POSITIVE_INFINITY;for(e=g=o=Math.NEGATIVE_INFINITY;z<b;)for(var A=
a[z++],n=A.get_vertexData(),h=n.length,k=A.get_vertexOffset(),A=A.get_vertexStride();k<h;){var l=n[k];l<f?f=l:l>e&&(e=l);l=n[k+1];l<c?c=l:l>g&&(g=l);l=n[k+2];l<d?d=l:l>o&&(o=l);k+=A}this.fromExtremes(f,c,d,e,g,o)}else this.fromExtremes(0,0,0,0,0,0)},fromSphere:function(a,b){this.fromExtremes(a.x-b,a.y-b,a.z-b,a.x+b,a.y+b,a.z+b)},fromExtremes:function(a,b,f,c,d,e){this._min.x=a;this._min.y=b;this._min.z=f;this._max.x=c;this._max.y=d;this._max.z=e;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&
this.updateBoundingRenderable()},isInFrustum:function(){throw new d.errors.AbstractMethodError;},overlaps:function(a){var b=a._min,a=a._max;return this._max.x>b.x&&this._min.x<a.x&&this._max.y>b.y&&this._min.y<a.y&&this._max.z>b.z&&this._min.z<a.z},clone:function(){throw new d.errors.AbstractMethodError;},rayIntersection:function(){return-1},containsPoint:function(){return!1},updateAABBPoints:function(){var a=this._max.x,b=this._max.y,f=this._max.z,c=this._min.x,d=this._min.y,e=this._min.z,g=this._aabbPoints;
0>=g.length&&!g.fixed&&(g.length=1);g.data[0]=c;g=this._aabbPoints;1>=g.length&&!g.fixed&&(g.length=2);g.data[1]=d;g=this._aabbPoints;2>=g.length&&!g.fixed&&(g.length=3);g.data[2]=e;g=this._aabbPoints;3>=g.length&&!g.fixed&&(g.length=4);g.data[3]=a;g=this._aabbPoints;4>=g.length&&!g.fixed&&(g.length=5);g.data[4]=d;g=this._aabbPoints;5>=g.length&&!g.fixed&&(g.length=6);g.data[5]=e;g=this._aabbPoints;6>=g.length&&!g.fixed&&(g.length=7);g.data[6]=c;g=this._aabbPoints;7>=g.length&&!g.fixed&&(g.length=
8);g.data[7]=b;g=this._aabbPoints;8>=g.length&&!g.fixed&&(g.length=9);g.data[8]=e;g=this._aabbPoints;9>=g.length&&!g.fixed&&(g.length=10);g.data[9]=a;g=this._aabbPoints;10>=g.length&&!g.fixed&&(g.length=11);g.data[10]=b;g=this._aabbPoints;11>=g.length&&!g.fixed&&(g.length=12);g.data[11]=e;e=this._aabbPoints;12>=e.length&&!e.fixed&&(e.length=13);e.data[12]=c;e=this._aabbPoints;13>=e.length&&!e.fixed&&(e.length=14);e.data[13]=d;e=this._aabbPoints;14>=e.length&&!e.fixed&&(e.length=15);e.data[14]=f;e=
this._aabbPoints;15>=e.length&&!e.fixed&&(e.length=16);e.data[15]=a;e=this._aabbPoints;16>=e.length&&!e.fixed&&(e.length=17);e.data[16]=d;d=this._aabbPoints;17>=d.length&&!d.fixed&&(d.length=18);d.data[17]=f;d=this._aabbPoints;18>=d.length&&!d.fixed&&(d.length=19);d.data[18]=c;c=this._aabbPoints;19>=c.length&&!c.fixed&&(c.length=20);c.data[19]=b;c=this._aabbPoints;20>=c.length&&!c.fixed&&(c.length=21);c.data[20]=f;c=this._aabbPoints;21>=c.length&&!c.fixed&&(c.length=22);c.data[21]=a;a=this._aabbPoints;
22>=a.length&&!a.fixed&&(a.length=23);a.data[22]=b;b=this._aabbPoints;23>=b.length&&!b.fixed&&(b.length=24);b.data[23]=f;this._aabbPointsDirty=!1},updateBoundingRenderable:function(){throw new d.errors.AbstractMethodError;},createBoundingRenderable:function(){throw new d.errors.AbstractMethodError;},classifyToPlane:function(){throw new d.errors.AbstractMethodError;},transformFrom:function(){throw new d.errors.AbstractMethodError;},__class__:d.bounds.BoundingVolumeBase,__properties__:{get_boundingRenderable:"get_boundingRenderable",
get_aabbPoints:"get_aabbPoints",get_min:"get_min",get_max:"get_max"}};d.bounds.AxisAlignedBoundingBox=function(){this._halfExtentsZ=this._halfExtentsY=this._halfExtentsX=this._centerZ=this._centerY=this._centerX=0;d.bounds.BoundingVolumeBase.call(this)};h["away3d.bounds.AxisAlignedBoundingBox"]=d.bounds.AxisAlignedBoundingBox;d.bounds.AxisAlignedBoundingBox.__name__=["away3d","bounds","AxisAlignedBoundingBox"];d.bounds.AxisAlignedBoundingBox.__super__=d.bounds.BoundingVolumeBase;d.bounds.AxisAlignedBoundingBox.prototype=
q(d.bounds.BoundingVolumeBase.prototype,{nullify:function(){d.bounds.BoundingVolumeBase.prototype.nullify.call(this);this._halfExtentsX=this._halfExtentsY=this._halfExtentsZ=this._centerX=this._centerY=this._centerZ=0},isInFrustum:function(a,b){for(var f=0;f<b;){var c=a[f],d=c.a,e=c.b,g=c.c;if(0>d*(this._centerX+(0>d?-this._halfExtentsX:this._halfExtentsX))+e*(this._centerY+(0>e?-this._halfExtentsY:this._halfExtentsY))+g*(this._centerZ+(0>g?-this._halfExtentsZ:this._halfExtentsZ))-c.d)return!1;++f}return!0},
rayIntersection:function(a,b,f){if(this.containsPoint(a))return 0;var c=a.x-this._centerX,d=a.y-this._centerY,a=a.z-this._centerZ,e=b.x,g=b.y,b=b.z,o,z,A,n=0,h=!1;0>e&&(n=(this._halfExtentsX-c)/e,0<n&&(z=d+n*g,A=a+n*b,z>-this._halfExtentsY&&(z<this._halfExtentsY&&A>-this._halfExtentsZ&&A<this._halfExtentsZ)&&(f.x=1,f.y=0,f.z=0,h=!0)));!h&&0<e&&(n=(-this._halfExtentsX-c)/e,0<n&&(z=d+n*g,A=a+n*b,z>-this._halfExtentsY&&(z<this._halfExtentsY&&A>-this._halfExtentsZ&&A<this._halfExtentsZ)&&(f.x=-1,f.y=
0,f.z=0,h=!0)));!h&&0>g&&(n=(this._halfExtentsY-d)/g,0<n&&(o=c+n*e,A=a+n*b,o>-this._halfExtentsX&&(o<this._halfExtentsX&&A>-this._halfExtentsZ&&A<this._halfExtentsZ)&&(f.x=0,f.y=1,f.z=0,h=!0)));!h&&0<g&&(n=(-this._halfExtentsY-d)/g,0<n&&(o=c+n*e,A=a+n*b,o>-this._halfExtentsX&&(o<this._halfExtentsX&&A>-this._halfExtentsZ&&A<this._halfExtentsZ)&&(f.x=0,f.y=-1,f.z=0,h=!0)));!h&&0>b&&(n=(this._halfExtentsZ-a)/b,0<n&&(o=c+n*e,z=d+n*g,z>-this._halfExtentsY&&(z<this._halfExtentsY&&o>-this._halfExtentsX&&
o<this._halfExtentsX)&&(f.x=0,f.y=0,f.z=1,h=!0)));!h&&0<b&&(n=(-this._halfExtentsZ-a)/b,0<n&&(o=c+n*e,z=d+n*g,z>-this._halfExtentsY&&(z<this._halfExtentsY&&o>-this._halfExtentsX&&o<this._halfExtentsX)&&(f.x=0,f.y=0,f.z=-1,h=!0)));return h?n:-1},containsPoint:function(a){var b=a.x-this._centerX,f=a.y-this._centerY,a=a.z-this._centerZ;return b<=this._halfExtentsX&&b>=-this._halfExtentsX&&f<=this._halfExtentsY&&f>=-this._halfExtentsY&&a<=this._halfExtentsZ&&a>=-this._halfExtentsZ},fromExtremes:function(a,
b,f,c,i,e){this._centerX=0.5*(c+a);this._centerY=0.5*(i+b);this._centerZ=0.5*(e+f);this._halfExtentsX=0.5*(c-a);this._halfExtentsY=0.5*(i-b);this._halfExtentsZ=0.5*(e-f);d.bounds.BoundingVolumeBase.prototype.fromExtremes.call(this,a,b,f,c,i,e)},clone:function(){var a=new d.bounds.AxisAlignedBoundingBox;a.fromExtremes(this._min.x,this._min.y,this._min.z,this._max.x,this._max.y,this._max.z);return a},get_halfExtentsX:function(){return this._halfExtentsX},get_halfExtentsY:function(){return this._halfExtentsY},
get_halfExtentsZ:function(){return this._halfExtentsZ},closestPointToPoint:function(a,b){var f;null==b&&(b=new c.geom.Vector3D);f=a.x;f<this._min.x&&(f=this._min.x);f>this._max.x&&(f=this._max.x);b.x=f;f=a.y;f<this._min.y&&(f=this._min.y);f>this._max.y&&(f=this._max.y);b.y=f;f=a.z;f<this._min.z&&(f=this._min.z);f>this._max.z&&(f=this._max.z);b.z=f;return b},updateBoundingRenderable:function(){this._boundingRenderable.set_scaleX(Math.max(2*this._halfExtentsX,0.001));this._boundingRenderable.set_scaleY(Math.max(2*
this._halfExtentsY,0.001));this._boundingRenderable.set_scaleZ(Math.max(2*this._halfExtentsZ,0.001));this._boundingRenderable.set_x(this._centerX);this._boundingRenderable.set_y(this._centerY);this._boundingRenderable.set_z(this._centerZ)},createBoundingRenderable:function(){return new d.primitives.WireframeCube(1,1,1,16777215,0.5)},classifyToPlane:function(a){var b=a.a,f=a.b,c=a.c,a=b*this._centerX+f*this._centerY+c*this._centerZ-a.d;0>b&&(b=-b);0>f&&(f=-f);0>c&&(c=-c);b=b*this._halfExtentsX+f*this._halfExtentsY+
c*this._halfExtentsZ;return a>b?d.core.math.PlaneClassification.FRONT:a<-b?d.core.math.PlaneClassification.BACK:d.core.math.PlaneClassification.INTERSECT},transformFrom:function(a,b){var f;f=s.Boot.__cast(a,d.bounds.AxisAlignedBoundingBox);var c=f._centerX,i=f._centerY,e=f._centerZ,g=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();b.copyRawDataTo(g);var o=g.data[0],z=g.data[4],A=g.data[8],n=g.data[1],h=g.data[5],k=g.data[9],l=g.data[13],m=g.data[2],q=g.data[6],r=g.data[10],u=g.data[14];this._centerX=
c*o+i*z+e*A+g.data[12];this._centerY=c*n+i*h+e*k+l;this._centerZ=c*m+i*q+e*r+u;0>o&&(o=-o);0>z&&(z=-z);0>A&&(A=-A);0>n&&(n=-n);0>h&&(h=-h);0>k&&(k=-k);0>m&&(m=-m);0>q&&(q=-q);0>r&&(r=-r);c=f._halfExtentsX;i=f._halfExtentsY;f=f._halfExtentsZ;this._halfExtentsX=c*o+i*z+f*A;this._halfExtentsY=c*n+i*h+f*k;this._halfExtentsZ=c*m+i*q+f*r;this._min.x=this._centerX-this._halfExtentsX;this._min.y=this._centerY-this._halfExtentsY;this._min.z=this._centerZ-this._halfExtentsZ;this._max.x=this._centerX+this._halfExtentsX;
this._max.y=this._centerY+this._halfExtentsY;this._max.z=this._centerZ+this._halfExtentsZ},__class__:d.bounds.AxisAlignedBoundingBox,__properties__:q(d.bounds.BoundingVolumeBase.prototype.__properties__,{get_halfExtentsZ:"get_halfExtentsZ",get_halfExtentsY:"get_halfExtentsY",get_halfExtentsX:"get_halfExtentsX"})});d.bounds.BoundingSphere=function(){this._centerZ=this._centerY=this._centerX=this._radius=0;d.bounds.BoundingVolumeBase.call(this)};h["away3d.bounds.BoundingSphere"]=d.bounds.BoundingSphere;
d.bounds.BoundingSphere.__name__=["away3d","bounds","BoundingSphere"];d.bounds.BoundingSphere.__super__=d.bounds.BoundingVolumeBase;d.bounds.BoundingSphere.prototype=q(d.bounds.BoundingVolumeBase.prototype,{get_radius:function(){return this._radius},nullify:function(){d.bounds.BoundingVolumeBase.prototype.nullify.call(this);this._radius=this._centerX=this._centerY=this._centerZ=0},isInFrustum:function(a,b){for(var f=0;f<b;){var c=a[f];if(0>c.a*(this._centerX+(0>c.a?-this._radius:this._radius))+c.b*
(this._centerY+(0>c.b?-this._radius:this._radius))+c.c*(this._centerZ+(0>c.c?-this._radius:this._radius))-c.d)return!1;++f}return!0},fromSphere:function(a,b){this._centerX=a.x;this._centerY=a.y;this._centerZ=a.z;this._radius=b;this._max.x=this._centerX+b;this._max.y=this._centerY+b;this._max.z=this._centerZ+b;this._min.x=this._centerX-b;this._min.y=this._centerY-b;this._min.z=this._centerZ-b;this._aabbPointsDirty=!0;null!=this._boundingRenderable&&this.updateBoundingRenderable()},fromExtremes:function(a,
b,f,c,i,e){this._centerX=0.5*(c+a);this._centerY=0.5*(i+b);this._centerZ=0.5*(e+f);var g=c-a,o=i-b,z=e-f;o>g&&(g=o);z>g&&(g=z);this._radius=g*Math.sqrt(0.5);d.bounds.BoundingVolumeBase.prototype.fromExtremes.call(this,a,b,f,c,i,e)},clone:function(){var a=new d.bounds.BoundingSphere;a.fromSphere(new c.geom.Vector3D(this._centerX,this._centerY,this._centerZ),this._radius);return a},rayIntersection:function(a,b,f){if(this.containsPoint(a))return 0;var c=a.x-this._centerX,d=a.y-this._centerY,a=a.z-this._centerZ,
e=b.x,g=b.y,b=b.z,o;o=e*e+g*g+b*b;var z=2*(c*e+d*g+a*b),A=z*z-4*o*(c*c+d*d+a*a-this._radius*this._radius);return 0<=A&&(A=Math.sqrt(A),o=(-z-A)/(2*o),0<=o)?(f.x=c+o*e,f.y=d+o*g,f.z=a+o*b,f.normalize(),o):-1},containsPoint:function(a){var b=a.x-this._centerX,f=a.y-this._centerY,a=a.z-this._centerZ;return Math.sqrt(b*b+f*f+a*a)<=this._radius},updateBoundingRenderable:function(){var a=this._radius;0==a&&(a=0.001);this._boundingRenderable.set_scaleX(a);this._boundingRenderable.set_scaleY(a);this._boundingRenderable.set_scaleZ(a);
this._boundingRenderable.set_x(this._centerX);this._boundingRenderable.set_y(this._centerY);this._boundingRenderable.set_z(this._centerZ)},createBoundingRenderable:function(){return new d.primitives.WireframeSphere(1,16,12,16777215,0.5)},classifyToPlane:function(a){var b=a.a,f=a.b,c=a.c,a=b*this._centerX+f*this._centerY+c*this._centerZ-a.d;0>b&&(b=-b);0>f&&(f=-f);0>c&&(c=-c);b=(b+f+c)*this._radius;return a>b?d.core.math.PlaneClassification.FRONT:a<-b?d.core.math.PlaneClassification.BACK:d.core.math.PlaneClassification.INTERSECT},
transformFrom:function(a,b){var f;f=s.Boot.__cast(a,d.bounds.BoundingSphere);var c=f._centerX,i=f._centerY,e=f._centerZ,g=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();b.copyRawDataTo(g);var o=g.data[0],z=g.data[4],A=g.data[8],n=g.data[1],h=g.data[5],k=g.data[9],l=g.data[13],m=g.data[2],q=g.data[6],r=g.data[10],u=g.data[14];this._centerX=c*o+i*z+e*A+g.data[12];this._centerY=c*n+i*h+e*k+l;this._centerZ=c*m+i*q+e*r+u;0>o&&(o=-o);0>z&&(z=-z);0>A&&(A=-A);0>n&&(n=-n);0>h&&(h=-h);0>k&&(k=-k);0>m&&
(m=-m);0>q&&(q=-q);0>r&&(r=-r);c=o+z+A;n=n+h+k;m=m+q+r;this._radius=f._radius*Math.sqrt(c*c+n*n+m*m);this._min.x=this._centerX-this._radius;this._min.y=this._centerY-this._radius;this._min.z=this._centerZ-this._radius;this._max.x=this._centerX+this._radius;this._max.y=this._centerY+this._radius;this._max.z=this._centerZ+this._radius},__class__:d.bounds.BoundingSphere,__properties__:q(d.bounds.BoundingVolumeBase.prototype.__properties__,{get_radius:"get_radius"})});d.bounds.NullBounds=function(a,b){null==
a&&(a=!0);d.bounds.BoundingVolumeBase.call(this);this._alwaysIn=a;this._renderable=b;this._max.x=this._max.y=this._max.z=Math.POSITIVE_INFINITY;this._min.x=this._min.y=this._alwaysIn?this._min.z=Math.NEGATIVE_INFINITY:this._min.z=Math.POSITIVE_INFINITY};h["away3d.bounds.NullBounds"]=d.bounds.NullBounds;d.bounds.NullBounds.__name__=["away3d","bounds","NullBounds"];d.bounds.NullBounds.__super__=d.bounds.BoundingVolumeBase;d.bounds.NullBounds.prototype=q(d.bounds.BoundingVolumeBase.prototype,{clone:function(){return new d.bounds.NullBounds(this._alwaysIn)},
createBoundingRenderable:function(){return null!=this._renderable?this._renderable:new d.primitives.WireframeSphere(100,16,12,16777215,0.5)},isInFrustum:function(){return this._alwaysIn},fromGeometry:function(){},fromSphere:function(){},fromExtremes:function(){},classifyToPlane:function(){return d.core.math.PlaneClassification.INTERSECT},transformFrom:function(a){this._alwaysIn=s.Boot.__cast(a,d.bounds.NullBounds)._alwaysIn},__class__:d.bounds.NullBounds});d.core={};d.core.base={};d.core.base.Object3D=
function(){this._smallestNumber=1E-22;this._transformDirty=!0;this._rotationZ=this._rotationY=this._rotationX=0;this._eulers=new c.geom.Vector3D;this._flipY=new c.geom.Matrix3D;this._zOffset=0;this._transform=new c.geom.Matrix3D;this._scaleZ=this._scaleY=this._scaleX=1;this._z=this._y=this._x=0;this._pivotPoint=new c.geom.Vector3D;this._pivotZero=!0;this._pos=new c.geom.Vector3D;this._rot=new c.geom.Vector3D;this._sca=new c.geom.Vector3D;var a=this._transformComponents=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(c._Vector.Vector_Impl_._new(3)),
3);0>=a.length&&!a.fixed&&(a.length=1);a.data[0]=this._pos;a=this._transformComponents;1>=a.length&&!a.fixed&&(a.length=2);a.data[1]=this._rot;a=this._transformComponents;2>=a.length&&!a.fixed&&(a.length=3);a.data[2]=this._sca;this._transform.identity();this._flipY.appendScale(1,-1,1);d.library.assets.NamedAssetBase.call(this)};h["away3d.core.base.Object3D"]=d.core.base.Object3D;d.core.base.Object3D.__name__=["away3d","core","base","Object3D"];d.core.base.Object3D.__super__=d.library.assets.NamedAssetBase;
d.core.base.Object3D.prototype=q(d.library.assets.NamedAssetBase.prototype,{invalidatePivot:function(){this._pivotZero=0==this._pivotPoint.x&&0==this._pivotPoint.y&&0==this._pivotPoint.z;this.invalidateTransform()},invalidatePosition:function(){this._positionDirty||(this._positionDirty=!0,this.invalidateTransform(),this._listenToPositionChanged&&this.notifyPositionChanged())},notifyPositionChanged:function(){null==this._positionChanged&&(this._positionChanged=new d.events.Object3DEvent(d.events.Object3DEvent.POSITION_CHANGED,
this));this.dispatchEvent(this._positionChanged)},addEventListener:function(a,b,f,c,i){null==i&&(i=!1);null==c&&(c=0);null==f&&(f=!1);d.library.assets.NamedAssetBase.prototype.addEventListener.call(this,a,b,f,c,i);switch(a){case d.events.Object3DEvent.POSITION_CHANGED:this._listenToPositionChanged=!0;break;case d.events.Object3DEvent.ROTATION_CHANGED:this._listenToRotationChanged=!0;break;case d.events.Object3DEvent.SCALE_CHANGED:this._listenToRotationChanged=!0}},removeEventListener:function(a,b,
f){null==f&&(f=!1);d.library.assets.NamedAssetBase.prototype.removeEventListener.call(this,a,b,f);if(!this.hasEventListener(a))switch(a){case d.events.Object3DEvent.POSITION_CHANGED:this._listenToPositionChanged=!1;break;case d.events.Object3DEvent.ROTATION_CHANGED:this._listenToRotationChanged=!1;break;case d.events.Object3DEvent.SCALE_CHANGED:this._listenToScaleChanged=!1}},invalidateRotation:function(){this._rotationDirty||(this._rotationDirty=!0,this.invalidateTransform(),this._listenToRotationChanged&&
this.notifyRotationChanged())},notifyRotationChanged:function(){null==this._rotationChanged&&(this._rotationChanged=new d.events.Object3DEvent(d.events.Object3DEvent.ROTATION_CHANGED,this));this.dispatchEvent(this._rotationChanged)},invalidateScale:function(){this._scaleDirty||(this._scaleDirty=!0,this.invalidateTransform(),this._listenToScaleChanged&&this.notifyScaleChanged())},notifyScaleChanged:function(){null==this._scaleChanged&&(this._scaleChanged=new d.events.Object3DEvent(d.events.Object3DEvent.SCALE_CHANGED,
this));this.dispatchEvent(this._scaleChanged)},get_x:function(){return this._x},set_x:function(a){Math.isNaN(a)&&(a=0);if(this._x==a)return a;this._x=a;this.invalidatePosition();return a},get_y:function(){return this._y},set_y:function(a){Math.isNaN(a)&&(a=0);if(this._y==a)return a;this._y=a;this.invalidatePosition();return a},get_z:function(){return this._z},set_z:function(a){Math.isNaN(a)&&(a=0);if(this._z==a)return a;this._z=a;this.invalidatePosition();return a},get_rotationX:function(){return this._rotationX*
d.core.math.MathConsts.RADIANS_TO_DEGREES},set_rotationX:function(a){Math.isNaN(a)&&(a=0);if(this.get_rotationX()==a)return a;this._rotationX=a*d.core.math.MathConsts.DEGREES_TO_RADIANS;this.invalidateRotation();return a},get_rotationY:function(){return this._rotationY*d.core.math.MathConsts.RADIANS_TO_DEGREES},set_rotationY:function(a){Math.isNaN(a)&&(a=0);if(this.get_rotationY()==a)return a;this._rotationY=a*d.core.math.MathConsts.DEGREES_TO_RADIANS;this.invalidateRotation();return a},get_rotationZ:function(){return this._rotationZ*
d.core.math.MathConsts.RADIANS_TO_DEGREES},set_rotationZ:function(a){Math.isNaN(a)&&(a=0);if(this.get_rotationZ()==a)return a;this._rotationZ=a*d.core.math.MathConsts.DEGREES_TO_RADIANS;this.invalidateRotation();return a},get_scaleX:function(){return this._scaleX},set_scaleX:function(a){Math.isNaN(a)&&(a=0);if(this._scaleX==a)return a;this._scaleX=a;this.invalidateScale();return a},get_scaleY:function(){return this._scaleY},set_scaleY:function(a){Math.isNaN(a)&&(a=0);if(this._scaleY==a)return a;this._scaleY=
a;this.invalidateScale();return a},get_scaleZ:function(){return this._scaleZ},set_scaleZ:function(a){Math.isNaN(a)&&(a=0);if(this._scaleZ==a)return a;this._scaleZ=a;this.invalidateScale();return a},get_eulers:function(){this._eulers.x=this._rotationX*d.core.math.MathConsts.RADIANS_TO_DEGREES;this._eulers.y=this._rotationY*d.core.math.MathConsts.RADIANS_TO_DEGREES;this._eulers.z=this._rotationZ*d.core.math.MathConsts.RADIANS_TO_DEGREES;return this._eulers},set_eulers:function(a){this._rotationX=a.x*
d.core.math.MathConsts.DEGREES_TO_RADIANS;this._rotationY=a.y*d.core.math.MathConsts.DEGREES_TO_RADIANS;this._rotationZ=a.z*d.core.math.MathConsts.DEGREES_TO_RADIANS;this.invalidateRotation();return a},get_transform:function(){this._transformDirty&&this.updateTransform();return this._transform},set_transform:function(a){if(0==a.rawData.data[0]){var b=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();a.copyRawDataTo(b);0>=b.length&&!b.fixed&&(b.length=1);b.data[0]=this._smallestNumber;a.copyRawDataFrom(b)}var b=
a.decompose(),f;f=b.data[0];if(this._x!=f.x||this._y!=f.y||this._z!=f.z)this._x=f.x,this._y=f.y,this._z=f.z,this.invalidatePosition();f=b.data[1];if(this._rotationX!=f.x||this._rotationY!=f.y||this._rotationZ!=f.z)this._rotationX=f.x,this._rotationY=f.y,this._rotationZ=f.z,this.invalidateRotation();f=b.data[2];if(this._scaleX!=f.x||this._scaleY!=f.y||this._scaleZ!=f.z)this._scaleX=f.x,this._scaleY=f.y,this._scaleZ=f.z,this.invalidateScale();return a},get_pivotPoint:function(){return this._pivotPoint},
set_pivotPoint:function(a){this._pivotPoint=new c.geom.Vector3D(a.x,a.y,a.z,a.w);this.invalidatePivot();return a},get_position:function(){this.get_transform().copyColumnTo(3,this._pos);return this._pos.clone()},set_position:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this.invalidatePosition();return a},get_forwardVector:function(){return d.core.math.Matrix3DUtils.getForward(this.get_transform())},get_rightVector:function(){return d.core.math.Matrix3DUtils.getRight(this.get_transform())},get_upVector:function(){return d.core.math.Matrix3DUtils.getUp(this.get_transform())},
get_backVector:function(){var a=d.core.math.Matrix3DUtils.getForward(this.get_transform());a.x*=-1;a.y*=-1;a.z*=-1;return a},get_leftVector:function(){var a=d.core.math.Matrix3DUtils.getRight(this.get_transform());a.x*=-1;a.y*=-1;a.z*=-1;return a},get_downVector:function(){var a=d.core.math.Matrix3DUtils.getUp(this.get_transform());a.x*=-1;a.y*=-1;a.z*=-1;return a},scale:function(a){this._scaleX*=a;this._scaleY*=a;this._scaleZ*=a;this.invalidateScale()},moveForward:function(a){this.translateLocal(new c.geom.Vector3D(0,
0,1),a)},moveBackward:function(a){this.translateLocal(new c.geom.Vector3D(0,0,1),-a)},moveLeft:function(a){this.translateLocal(new c.geom.Vector3D(1,0,0),-a)},moveRight:function(a){this.translateLocal(new c.geom.Vector3D(1,0,0),a)},moveUp:function(a){this.translateLocal(new c.geom.Vector3D(0,1,0),a)},moveDown:function(a){this.translateLocal(new c.geom.Vector3D(0,1,0),-a)},moveTo:function(a,b,f){this._x==a&&this._y==b&&this._z==f||(this._x=a,this._y=b,this._z=f,this.invalidatePosition())},movePivot:function(a,
b,f){null==this._pivotPoint&&(this._pivotPoint=new c.geom.Vector3D);this._pivotPoint.x+=a;this._pivotPoint.y+=b;this._pivotPoint.z+=f;this.invalidatePivot()},translate:function(a,b){var f=a.x,c=a.y,d=a.z,e=b/Math.sqrt(f*f+c*c+d*d);this._x+=f*e;this._y+=c*e;this._z+=d*e;this.invalidatePosition()},translateLocal:function(a,b){var f=a.x,c=a.y,d=a.z,e=b/Math.sqrt(f*f+c*c+d*d);this.get_transform().prependTranslation(f*e,c*e,d*e);this._transform.copyColumnTo(3,this._pos);this._x=this._pos.x;this._y=this._pos.y;
this._z=this._pos.z;this.invalidatePosition()},pitch:function(a){this.rotate(new c.geom.Vector3D(1,0,0),a)},yaw:function(a){this.rotate(new c.geom.Vector3D(0,1,0),a)},roll:function(a){this.rotate(new c.geom.Vector3D(0,0,1),a)},clone:function(){var a=new d.core.base.Object3D;a.set_pivotPoint(this.get_pivotPoint());a.set_transform(this.get_transform());a.set_name(this.get_name());return a},rotateTo:function(a,b,f){this._rotationX=a*d.core.math.MathConsts.DEGREES_TO_RADIANS;this._rotationY=b*d.core.math.MathConsts.DEGREES_TO_RADIANS;
this._rotationZ=f*d.core.math.MathConsts.DEGREES_TO_RADIANS;this.invalidateRotation()},rotate:function(a,b){var f=new c.geom.Matrix3D;f.prependRotation(b,a,null);f=f.decompose().data[1];this._rotationX+=f.x;this._rotationY+=f.y;this._rotationZ+=f.z;this.invalidateRotation()},lookAt:function(a,b){var f,p,i,e;null==b&&(b=new c.geom.Vector3D(0,1,0));p=a.subtract(this.get_position());p.normalize();i=new c.geom.Vector3D(b.y*p.z-b.z*p.y,b.z*p.x-b.x*p.z,b.x*p.y-b.y*p.x,1);i.normalize();0.05>Math.sqrt(i.x*
i.x+i.y*i.y+i.z*i.z)&&(i=b.crossProduct(new c.geom.Vector3D(0,0,1)));f=new c.geom.Vector3D(p.y*i.z-p.z*i.y,p.z*i.x-p.x*i.z,p.x*i.y-p.y*i.x,1);e=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();0>=e.length&&!e.fixed&&(e.length=1);e.data[0]=this._scaleX*i.x;1>=e.length&&!e.fixed&&(e.length=2);e.data[1]=this._scaleX*i.y;2>=e.length&&!e.fixed&&(e.length=3);e.data[2]=this._scaleX*i.z;3>=e.length&&!e.fixed&&(e.length=4);e.data[3]=0;4>=e.length&&!e.fixed&&(e.length=5);e.data[4]=this._scaleY*f.x;5>=e.length&&
!e.fixed&&(e.length=6);e.data[5]=this._scaleY*f.y;6>=e.length&&!e.fixed&&(e.length=7);e.data[6]=this._scaleY*f.z;7>=e.length&&!e.fixed&&(e.length=8);e.data[7]=0;8>=e.length&&!e.fixed&&(e.length=9);e.data[8]=this._scaleZ*p.x;9>=e.length&&!e.fixed&&(e.length=10);e.data[9]=this._scaleZ*p.y;10>=e.length&&!e.fixed&&(e.length=11);e.data[10]=this._scaleZ*p.z;11>=e.length&&!e.fixed&&(e.length=12);e.data[11]=0;12>=e.length&&!e.fixed&&(e.length=13);e.data[12]=this._x;13>=e.length&&!e.fixed&&(e.length=14);e.data[13]=
this._y;14>=e.length&&!e.fixed&&(e.length=15);e.data[14]=this._z;15>=e.length&&!e.fixed&&(e.length=16);e.data[15]=1;this._transform.copyRawDataFrom(e);this.set_transform(this.get_transform());0>p.z&&(this.set_rotationY(180-this.get_rotationY()),this.set_rotationX(this.get_rotationX()-180),this.set_rotationZ(this.get_rotationZ()-180))},dispose:function(){},disposeAsset:function(){this.dispose()},invalidateTransform:function(){this._transformDirty=!0},updateTransform:function(){this._pos.x=this._x;
this._pos.y=this._y;this._pos.z=this._z;this._rot.x=this._rotationX;this._rot.y=this._rotationY;this._rot.z=this._rotationZ;this._sca.x=this._scaleX;this._sca.y=this._scaleY;this._sca.z=this._scaleZ;this._transform.recompose(this._transformComponents);this._pivotZero||(this._transform.prependTranslation(-this._pivotPoint.x,-this._pivotPoint.y,-this._pivotPoint.z),this._transform.appendTranslation(this._pivotPoint.x,this._pivotPoint.y,this._pivotPoint.z));this._scaleDirty=this._rotationDirty=this._positionDirty=
this._transformDirty=!1},get_zOffset:function(){return this._zOffset},set_zOffset:function(a){return this._zOffset=a},__class__:d.core.base.Object3D,__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,{set_zOffset:"set_zOffset",get_zOffset:"get_zOffset",get_downVector:"get_downVector",get_leftVector:"get_leftVector",get_backVector:"get_backVector",get_upVector:"get_upVector",get_rightVector:"get_rightVector",get_forwardVector:"get_forwardVector",set_position:"set_position",get_position:"get_position",
set_pivotPoint:"set_pivotPoint",get_pivotPoint:"get_pivotPoint",set_transform:"set_transform",get_transform:"get_transform",set_eulers:"set_eulers",get_eulers:"get_eulers",set_scaleZ:"set_scaleZ",get_scaleZ:"get_scaleZ",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_rotationZ:"set_rotationZ",get_rotationZ:"get_rotationZ",set_rotationY:"set_rotationY",get_rotationY:"get_rotationY",set_rotationX:"set_rotationX",get_rotationX:"get_rotationX",set_z:"set_z",
get_z:"get_z",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"})});d.containers={};d.containers.ObjectContainer3D=function(){this._sceneTransform=new c.geom.Matrix3D;this._sceneTransformDirty=!0;this._children=[];this._mouseChildren=!0;this._inverseSceneTransform=new c.geom.Matrix3D;this._inverseSceneTransformDirty=!0;this._scenePosition=new c.geom.Vector3D;this._implicitVisibility=this._explicitVisibility=this._scenePositionDirty=!0;this._ignoreTransform=!1;d.core.base.Object3D.call(this)};
h["away3d.containers.ObjectContainer3D"]=d.containers.ObjectContainer3D;d.containers.ObjectContainer3D.__name__=["away3d","containers","ObjectContainer3D"];d.containers.ObjectContainer3D.__interfaces__=[d.library.assets.IAsset];d.containers.ObjectContainer3D.__super__=d.core.base.Object3D;d.containers.ObjectContainer3D.prototype=q(d.core.base.Object3D.prototype,{get_ignoreTransform:function(){return this._ignoreTransform},set_ignoreTransform:function(a){this._ignoreTransform=a;this._sceneTransformDirty=
!a;this._inverseSceneTransformDirty=!a;this._scenePositionDirty=!a;a||(this._sceneTransform.identity(),this._scenePosition.x=0,this._scenePosition.y=0,this._scenePosition.z=0);return a},get_implicitPartition:function(){return this._implicitPartition},set_implicitPartition:function(a){if(a==this._implicitPartition)return a;var b=0,f=this._children.length,c;for(this._implicitPartition=a;b<f;)c=this._children[b++],null==c._explicitPartition&&c.set_implicitPartition(a);return a},get_isVisible:function(){return this._implicitVisibility&&
this._explicitVisibility},setParent:function(a){this._parent=a;this.updateMouseChildren();null==a?this.set_scene(null):(this.notifySceneTransformChange(),this.notifySceneChange())},notifySceneTransformChange:function(){if(!this._sceneTransformDirty&&!this._ignoreTransform){this.invalidateSceneTransform();for(var a=0,b=this._children.length;a<b;)this._children[a++].notifySceneTransformChange();this._listenToSceneTransformChanged&&(null==this._sceneTransformChanged&&(this._sceneTransformChanged=new d.events.Object3DEvent(d.events.Object3DEvent.SCENETRANSFORM_CHANGED,
this)),this.dispatchEvent(this._sceneTransformChanged))}},notifySceneChange:function(){this.notifySceneTransformChange();for(var a=0,b=this._children.length;a<b;)this._children[a++].notifySceneChange();this._listenToSceneChanged&&(null==this._scenechanged&&(this._scenechanged=new d.events.Object3DEvent(d.events.Object3DEvent.SCENE_CHANGED,this)),this.dispatchEvent(this._scenechanged))},updateMouseChildren:function(){this._ancestorsAllowMouseEnabled=null!=this._parent&&!this._parent._isRoot?this.get_parent()._ancestorsAllowMouseEnabled&&
this._parent.get_mouseChildren():this.get_mouseChildren();for(var a=this._children.length,b=0;b<a;)this._children[b].updateMouseChildren(),++b},get_mouseEnabled:function(){return this._mouseEnabled},set_mouseEnabled:function(a){this._mouseEnabled=a;this.updateMouseChildren();return a},invalidateTransform:function(){d.core.base.Object3D.prototype.invalidateTransform.call(this);this.notifySceneTransformChange()},invalidateSceneTransform:function(){this._sceneTransformDirty=!this._ignoreTransform;this._inverseSceneTransformDirty=
!this._ignoreTransform;this._scenePositionDirty=!this._ignoreTransform},updateSceneTransform:function(){null!=this._parent&&!this._parent._isRoot?(this._sceneTransform.copyFrom(this._parent.get_sceneTransform()),this._sceneTransform.prepend(this.get_transform())):this._sceneTransform.copyFrom(this.get_transform());this._sceneTransformDirty=!1},get_mouseChildren:function(){return this._mouseChildren},set_mouseChildren:function(a){this._mouseChildren=a;this.updateMouseChildren();return a},get_visible:function(){return this._explicitVisibility},
set_visible:function(a){var b=this._children.length;this._explicitVisibility=a;for(var f=0;f<b;)this._children[f].updateImplicitVisibility(),++f;return a},get_assetType:function(){return d.library.assets.Asset3DType.CONTAINER},get_scenePosition:function(){this._scenePositionDirty&&(this.get_sceneTransform().copyColumnTo(3,this._scenePosition),this._scenePositionDirty=!1);return this._scenePosition},get_minX:function(){for(var a=0,b=this._children.length,f=Math.POSITIVE_INFINITY,c;a<b;)c=this._children[a++],
c=c.get_minX()+c.get_x(),c<f&&(f=c);return f},get_minY:function(){for(var a=0,b=this._children.length,f=Math.POSITIVE_INFINITY,c;a<b;)c=this._children[a++],c=c.get_minY()+c.get_y(),c<f&&(f=c);return f},get_minZ:function(){for(var a=0,b=this._children.length,f=Math.POSITIVE_INFINITY,c;a<b;)c=this._children[a++],c=c.get_minZ()+c.get_z(),c<f&&(f=c);return f},get_maxX:function(){for(var a=0,b=this._children.length,f=Math.NEGATIVE_INFINITY,c;a<b;)c=this._children[a++],c=c.get_maxX()+c.get_x(),c>f&&(f=
c);return f},get_maxY:function(){for(var a=0,b=this._children.length,f=Math.NEGATIVE_INFINITY,c;a<b;)c=this._children[a++],c=c.get_maxY()+c.get_y(),c>f&&(f=c);return f},get_maxZ:function(){for(var a=0,b=this._children.length,f=Math.NEGATIVE_INFINITY,c;a<b;)c=this._children[a++],c=c.get_maxZ()+c.get_z(),c>f&&(f=c);return f},get_partition:function(){return this._explicitPartition},set_partition:function(a){this._explicitPartition=a;this.set_implicitPartition(null!=a?a:null!=this._parent?this._parent.get_implicitPartition():
null);return a},get_sceneTransform:function(){this._sceneTransformDirty&&this.updateSceneTransform();return this._sceneTransform},get_scene:function(){return this._scene},set_scene:function(a){for(var b=0,f=this._children.length;b<f;)this._children[b++].set_scene(a);if(this._scene==a)return a;null==a&&(this._oldScene=this._scene);null!=this._explicitPartition&&(null!=this._oldScene&&this._oldScene!=this._scene)&&this.set_partition(null);null!=a&&(this._oldScene=null);this._scene=a;null!=this._scene?
this._scene.dispatchEvent(new d.events.Scene3DEvent(d.events.Scene3DEvent.ADDED_TO_SCENE,this)):null!=this._oldScene&&this._oldScene.dispatchEvent(new d.events.Scene3DEvent(d.events.Scene3DEvent.REMOVED_FROM_SCENE,this));return a},get_inverseSceneTransform:function(){this._inverseSceneTransformDirty&&(this._inverseSceneTransform.copyFrom(this.get_sceneTransform()),this._inverseSceneTransform.invert(),this._inverseSceneTransformDirty=!1);return this._inverseSceneTransform},get_parent:function(){return this._parent},
contains:function(a){return 0<=w.indexOf(this._children,a,0)},addChild:function(a){if(null==a)throw new c.errors.Error("Parameter child cannot be null.");null!=a._parent&&a._parent.removeChild(a);null==a._explicitPartition&&a.set_implicitPartition(this._implicitPartition);a.setParent(this);a.set_scene(this._scene);a.notifySceneTransformChange();a.updateMouseChildren();a.updateImplicitVisibility();this._children.push(a);return a},addChildren:function(a){for(var b=0;b<a.length;){var f=a[b];++b;this.addChild(f)}},
removeChild:function(a){if(null==a)throw new c.errors.Error("Parameter child cannot be null");var b=w.indexOf(this._children,a,0);if(-1==b)throw new c.errors.Error("Parameter is not a child of the caller");this.removeChildInternal(b,a)},removeChildAt:function(a){this.removeChildInternal(a,this._children[a])},removeChildInternal:function(a,b){this._children.splice(a,1);b.setParent(null);null==b._explicitPartition&&b.set_implicitPartition(null)},getChildAt:function(a){return this._children[a]},get_numChildren:function(){return this._children.length},
lookAt:function(a,b){d.core.base.Object3D.prototype.lookAt.call(this,a,b);this.notifySceneTransformChange()},translateLocal:function(a,b){d.core.base.Object3D.prototype.translateLocal.call(this,a,b);this.notifySceneTransformChange()},dispose:function(){null!=this.get_parent()&&this.get_parent().removeChild(this)},disposeWithChildren:function(){for(this.dispose();0<this.get_numChildren();)this.getChildAt(0).dispose()},clone:function(){var a=new d.containers.ObjectContainer3D;a.set_pivotPoint(this.get_pivotPoint());
a.set_transform(this.get_transform());a.set_partition(this.get_partition());a.set_name(this.get_name());for(var b=this._children.length,f=0;f<b;)a.addChild(s.Boot.__cast(this._children[f].clone(),d.containers.ObjectContainer3D)),++f;return a},rotate:function(a,b){d.core.base.Object3D.prototype.rotate.call(this,a,b);this.notifySceneTransformChange()},dispatchEvent:function(a){var b=d.core.base.Object3D.prototype.dispatchEvent.call(this,a);a.bubbles&&(null!=this._parent?this._parent.dispatchEvent(a):
null!=this._scene&&this._scene.dispatchEvent(a));return b},updateImplicitVisibility:function(){var a=this._children.length;this._implicitVisibility=this._parent._explicitVisibility&&this._parent._implicitVisibility;for(var b=0;b<a;)this._children[b].updateImplicitVisibility(),++b},addEventListener:function(a,b,f,c,i){null==i&&(i=!1);null==c&&(c=0);null==f&&(f=!1);d.core.base.Object3D.prototype.addEventListener.call(this,a,b,f,c,i);switch(a){case d.events.Object3DEvent.SCENETRANSFORM_CHANGED:this._listenToSceneTransformChanged=
!0;break;case d.events.Object3DEvent.SCENE_CHANGED:this._listenToSceneChanged=!0}},removeEventListener:function(a,b,f){null==f&&(f=!1);d.core.base.Object3D.prototype.removeEventListener.call(this,a,b,f);if(!this.hasEventListener(a))switch(a){case d.events.Object3DEvent.SCENETRANSFORM_CHANGED:this._listenToSceneTransformChanged=!1;break;case d.events.Object3DEvent.SCENE_CHANGED:this._listenToSceneChanged=!1}},__class__:d.containers.ObjectContainer3D,__properties__:q(d.core.base.Object3D.prototype.__properties__,
{get_numChildren:"get_numChildren",get_parent:"get_parent",get_inverseSceneTransform:"get_inverseSceneTransform",set_scene:"set_scene",get_scene:"get_scene",get_sceneTransform:"get_sceneTransform",set_partition:"set_partition",get_partition:"get_partition",get_maxZ:"get_maxZ",get_maxY:"get_maxY",get_maxX:"get_maxX",get_minZ:"get_minZ",get_minY:"get_minY",get_minX:"get_minX",get_scenePosition:"get_scenePosition",get_assetType:"get_assetType",set_visible:"set_visible",get_visible:"get_visible",set_mouseChildren:"set_mouseChildren",
get_mouseChildren:"get_mouseChildren",set_mouseEnabled:"set_mouseEnabled",get_mouseEnabled:"get_mouseEnabled",get_isVisible:"get_isVisible",set_implicitPartition:"set_implicitPartition",get_implicitPartition:"get_implicitPartition",set_ignoreTransform:"set_ignoreTransform",get_ignoreTransform:"get_ignoreTransform"})});d.entities={};d.entities.Entity=function(){this._boundsIsShown=!1;this._worldBoundsInvalid=this._boundsInvalid=!0;d.containers.ObjectContainer3D.call(this);this._bounds=this.getDefaultBoundingVolume();
this._worldBounds=this.getDefaultBoundingVolume()};h["away3d.entities.Entity"]=d.entities.Entity;d.entities.Entity.__name__=["away3d","entities","Entity"];d.entities.Entity.__super__=d.containers.ObjectContainer3D;d.entities.Entity.prototype=q(d.containers.ObjectContainer3D.prototype,{set_ignoreTransform:function(a){null!=this._scene&&this._scene.invalidateEntityBounds(this);d.containers.ObjectContainer3D.prototype.set_ignoreTransform.call(this,a);return a},get_shaderPickingDetails:function(){return this._shaderPickingDetails},
set_shaderPickingDetails:function(a){return this._shaderPickingDetails=a},get_staticNode:function(){return this._staticNode},set_staticNode:function(a){return this._staticNode=a},get_pickingCollisionVO:function(){null==this._pickingCollisionVO&&(this._pickingCollisionVO=new d.core.pick.PickingCollisionVO(this));return this._pickingCollisionVO},collidesBefore:function(){return!0},get_showBounds:function(){return this._showBounds},set_showBounds:function(a){if(a==this._showBounds)return a;(this._showBounds=
a)?this.addBounds():this.removeBounds();return a},get_minX:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_min().x},get_minY:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_min().y},get_minZ:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_min().z},get_maxX:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_max().x},get_maxY:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_max().y},
get_maxZ:function(){this._boundsInvalid&&this.updateBounds();return this._bounds.get_max().z},get_bounds:function(){this._boundsInvalid&&this.updateBounds();return this._bounds},set_bounds:function(a){this.removeBounds();this._bounds=a;this._worldBounds=a.clone();this.invalidateBounds();this._showBounds&&this.addBounds();return a},get_worldBounds:function(){this._worldBoundsInvalid&&this.updateWorldBounds();return this._worldBounds},updateWorldBounds:function(){this._worldBounds.transformFrom(this.get_bounds(),
this.get_sceneTransform());this._worldBoundsInvalid=!1},set_implicitPartition:function(a){if(a==this._implicitPartition)return a;null!=this._implicitPartition&&this.notifyPartitionUnassigned();d.containers.ObjectContainer3D.prototype.set_implicitPartition.call(this,a);this.notifyPartitionAssigned();return a},set_scene:function(a){if(a==this._scene)return a;null!=this._scene&&this._scene.unregisterEntity(this);null!=a&&a.registerEntity(this);d.containers.ObjectContainer3D.prototype.set_scene.call(this,
a);return a},get_assetType:function(){return d.library.assets.Asset3DType.ENTITY},get_pickingCollider:function(){return this._pickingCollider},set_pickingCollider:function(a){return this._pickingCollider=a},getEntityPartitionNode:function(){null==this._partitionNode&&(this._partitionNode=this.createEntityPartitionNode());return this._partitionNode},isIntersectingRay:function(a,b){var f=this.get_inverseSceneTransform().transformVector(a),p=this.get_inverseSceneTransform().deltaTransformVector(b);null==
this.get_pickingCollisionVO().localNormal&&(this.get_pickingCollisionVO().localNormal=new c.geom.Vector3D);var d=this.get_bounds().rayIntersection(f,p,this.get_pickingCollisionVO().localNormal);if(0>d)return!1;this.get_pickingCollisionVO().rayEntryDistance=d;this.get_pickingCollisionVO().localRayPosition=f;this.get_pickingCollisionVO().localRayDirection=p;this.get_pickingCollisionVO().rayPosition=a;this.get_pickingCollisionVO().rayDirection=b;this.get_pickingCollisionVO().rayOriginIsInsideBounds=
0==d;return!0},createEntityPartitionNode:function(){throw new d.errors.AbstractMethodError;},getDefaultBoundingVolume:function(){return new d.bounds.AxisAlignedBoundingBox},updateBounds:function(){throw new d.errors.AbstractMethodError;},invalidateSceneTransform:function(){this._ignoreTransform||(d.containers.ObjectContainer3D.prototype.invalidateSceneTransform.call(this),this._worldBoundsInvalid=!0,this.notifySceneBoundsInvalid())},invalidateBounds:function(){this._worldBoundsInvalid=this._boundsInvalid=
!0;this.notifySceneBoundsInvalid()},updateMouseChildren:function(){if(null==this._parent&&null!=this.get_pickingCollider()&&s.Boot.__instanceof(this._parent,d.entities.Entity)){var a=s.Boot.__cast(this._parent,d.entities.Entity).get_pickingCollider();null!=a&&this.set_pickingCollider(a)}d.containers.ObjectContainer3D.prototype.updateMouseChildren.call(this)},notifySceneBoundsInvalid:function(){null!=this._scene&&this._scene.invalidateEntityBounds(this)},notifyPartitionAssigned:function(){null!=this._scene&&
this._scene.registerPartition(this)},notifyPartitionUnassigned:function(){null!=this._scene&&this._scene.unregisterPartition(this)},addBounds:function(){this._boundsIsShown||(this._boundsIsShown=!0,this.addChild(this._bounds.get_boundingRenderable()))},removeBounds:function(){this._boundsIsShown&&(this._boundsIsShown=!1,this.removeChild(this._bounds.get_boundingRenderable()),this._bounds.disposeRenderable())},internalUpdate:function(){null!=this._controller&&this._controller.update()},__class__:d.entities.Entity,
__properties__:q(d.containers.ObjectContainer3D.prototype.__properties__,{set_pickingCollider:"set_pickingCollider",get_pickingCollider:"get_pickingCollider",get_worldBounds:"get_worldBounds",set_bounds:"set_bounds",get_bounds:"get_bounds",set_showBounds:"set_showBounds",get_showBounds:"get_showBounds",get_pickingCollisionVO:"get_pickingCollisionVO",set_staticNode:"set_staticNode",get_staticNode:"get_staticNode",set_shaderPickingDetails:"set_shaderPickingDetails",get_shaderPickingDetails:"get_shaderPickingDetails"})});
d.cameras={};d.cameras.Camera3D=function(a){this._viewProjection=new c.geom.Matrix3D;this._frustumPlanesDirty=this._viewProjectionDirty=!0;d.entities.Entity.call(this);this._lens=a;null==this._lens&&(this._lens=new d.cameras.lenses.PerspectiveLens);this._lens.addEventListener(d.events.LensEvent.MATRIX_CHANGED,r(this,this.onLensMatrixChanged));this._frustumPlanes=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),6);for(a=0;6>a;)this._frustumPlanes[a]=new d.core.math.Plane3D,
++a;this.set_z(-1E3)};h["away3d.cameras.Camera3D"]=d.cameras.Camera3D;d.cameras.Camera3D.__name__=["away3d","cameras","Camera3D"];d.cameras.Camera3D.__super__=d.entities.Entity;d.cameras.Camera3D.prototype=q(d.entities.Entity.prototype,{getDefaultBoundingVolume:function(){return new d.bounds.NullBounds},get_assetType:function(){return d.library.assets.Asset3DType.CAMERA},onLensMatrixChanged:function(a){this._frustumPlanesDirty=this._viewProjectionDirty=!0;this.dispatchEvent(a)},get_frustumPlanes:function(){this._frustumPlanesDirty&&
this.updateFrustum();return this._frustumPlanes},updateFrustum:function(){var a,b,f,c,i,e,g,o,z,A,n,h,k,l,m,q,s,r,u,t;a=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();var v;this.get_viewProjection().copyRawDataTo(a);c=a.data[0];i=a.data[4];e=a.data[8];g=a.data[12];o=a.data[1];z=a.data[5];A=a.data[9];n=a.data[13];h=a.data[2];k=a.data[6];l=a.data[10];m=a.data[14];q=a.data[3];s=a.data[7];r=a.data[11];u=a.data[15];t=this._frustumPlanes[0];a=q+c;b=s+i;f=r+e;v=1/Math.sqrt(a*a+b*b+f*f);t.a=a*v;t.b=b*
v;t.c=f*v;t.d=-(u+g)*v;t=this._frustumPlanes[1];a=q-c;b=s-i;f=r-e;v=1/Math.sqrt(a*a+b*b+f*f);t.a=a*v;t.b=b*v;t.c=f*v;t.d=(g-u)*v;t=this._frustumPlanes[2];a=q+o;b=s+z;f=r+A;v=1/Math.sqrt(a*a+b*b+f*f);t.a=a*v;t.b=b*v;t.c=f*v;t.d=-(u+n)*v;t=this._frustumPlanes[3];a=q-o;b=s-z;f=r-A;v=1/Math.sqrt(a*a+b*b+f*f);t.a=a*v;t.b=b*v;t.c=f*v;t.d=(n-u)*v;t=this._frustumPlanes[4];a=h;b=k;f=l;v=1/Math.sqrt(a*a+b*b+f*f);t.a=a*v;t.b=b*v;t.c=f*v;t.d=-m*v;t=this._frustumPlanes[5];a=q-h;b=s-k;f=r-l;v=1/Math.sqrt(a*a+b*
b+f*f);t.a=a*v;t.b=b*v;t.c=f*v;t.d=(m-u)*v;this._frustumPlanesDirty=!1},invalidateSceneTransform:function(){d.entities.Entity.prototype.invalidateSceneTransform.call(this);this._frustumPlanesDirty=this._viewProjectionDirty=!0},updateBounds:function(){this._bounds.nullify();this._boundsInvalid=!1},createEntityPartitionNode:function(){return new d.core.partition.CameraNode(this)},get_lens:function(){return this._lens},set_lens:function(a){if(this._lens==a)return a;if(null==a)throw new c.errors.Error("Lens cannot be null!");
this._lens.removeEventListener(d.events.LensEvent.MATRIX_CHANGED,r(this,this.onLensMatrixChanged));this._lens=a;this._lens.addEventListener(d.events.LensEvent.MATRIX_CHANGED,r(this,this.onLensMatrixChanged));this.dispatchEvent(new d.events.CameraEvent(d.events.CameraEvent.LENS_CHANGED,this));return a},get_viewProjection:function(){this._viewProjectionDirty&&(this._viewProjection.copyFrom(this.get_inverseSceneTransform()),this._viewProjection.append(this._lens.get_matrix()),this._viewProjectionDirty=
!1);return this._viewProjection},unproject:function(a,b,f){return this.get_sceneTransform().transformVector(this.get_lens().unproject(a,b,f))},getRay:function(a,b,f){return this.get_sceneTransform().deltaTransformVector(this.get_lens().unproject(a,b,f))},project:function(a){return this.get_lens().project(this.get_inverseSceneTransform().transformVector(a))},__class__:d.cameras.Camera3D,__properties__:q(d.entities.Entity.prototype.__properties__,{get_viewProjection:"get_viewProjection",set_lens:"set_lens",
get_lens:"get_lens",get_frustumPlanes:"get_frustumPlanes"})});d.cameras.lenses={};d.cameras.lenses.LensBase=function(){c.events.EventDispatcher.call(this);this._scissorRect=new c.geom.Rectangle;this._viewPort=new c.geom.Rectangle;this._near=20;this._far=3E3;this._aspectRatio=1;this._matrixInvalid=!0;this._frustumCorners=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),24,0);this._unprojectionInvalid=!0;this._matrix=new c.geom.Matrix3D};h["away3d.cameras.lenses.LensBase"]=
d.cameras.lenses.LensBase;d.cameras.lenses.LensBase.__name__=["away3d","cameras","lenses","LensBase"];d.cameras.lenses.LensBase.__super__=c.events.EventDispatcher;d.cameras.lenses.LensBase.prototype=q(c.events.EventDispatcher.prototype,{get_frustumCorners:function(){return this._frustumCorners},set_frustumCorners:function(a){return this._frustumCorners=a},get_matrix:function(){this._matrixInvalid&&(this.updateMatrix(),this._matrixInvalid=!1);return this._matrix},set_matrix:function(a){this._matrix=
a;this.invalidateMatrix();return a},get_near:function(){return this._near},set_near:function(a){if(a==this._near)return a;this._near=a;this.invalidateMatrix();return a},get_far:function(){return this._far},set_far:function(a){if(a==this._far)return a;this._far=a;this.invalidateMatrix();return a},project:function(a){var b=this.get_matrix().transformVector(a);b.x/=b.w;b.y=-b.y/b.w;b.z=a.z;return b},get_unprojectionMatrix:function(){this._unprojectionInvalid&&(null==this._unprojection&&(this._unprojection=
new c.geom.Matrix3D),this._unprojection.copyFrom(this.get_matrix()),this._unprojection.invert(),this._unprojectionInvalid=!1);return this._unprojection},unproject:function(){throw new d.errors.AbstractMethodError;},clone:function(){throw new d.errors.AbstractMethodError;},get_aspectRatio:function(){return this._aspectRatio},set_aspectRatio:function(a){if(this._aspectRatio==a||0!=0*a)return a;this._aspectRatio=a;this.invalidateMatrix();return a},invalidateMatrix:function(){this._unprojectionInvalid=
this._matrixInvalid=!0;this.dispatchEvent(new d.events.LensEvent(d.events.LensEvent.MATRIX_CHANGED,this))},updateMatrix:function(){throw new d.errors.AbstractMethodError;},updateScissorRect:function(a,b,f,c){this._scissorRect.x=a;this._scissorRect.y=b;this._scissorRect.width=f;this._scissorRect.height=c;this.invalidateMatrix()},updateViewport:function(a,b,f,c){this._viewPort.x=a;this._viewPort.y=b;this._viewPort.width=f;this._viewPort.height=c;this.invalidateMatrix()},__class__:d.cameras.lenses.LensBase,
__properties__:{set_aspectRatio:"set_aspectRatio",get_aspectRatio:"get_aspectRatio",get_unprojectionMatrix:"get_unprojectionMatrix",set_far:"set_far",get_far:"get_far",set_near:"set_near",get_near:"get_near",set_matrix:"set_matrix",get_matrix:"get_matrix",set_frustumCorners:"set_frustumCorners",get_frustumCorners:"get_frustumCorners"}});d.cameras.lenses.FreeMatrixLens=function(){d.cameras.lenses.LensBase.call(this);this._matrix.copyFrom((new d.cameras.lenses.PerspectiveLens).get_matrix())};h["away3d.cameras.lenses.FreeMatrixLens"]=
d.cameras.lenses.FreeMatrixLens;d.cameras.lenses.FreeMatrixLens.__name__=["away3d","cameras","lenses","FreeMatrixLens"];d.cameras.lenses.FreeMatrixLens.__super__=d.cameras.lenses.LensBase;d.cameras.lenses.FreeMatrixLens.prototype=q(d.cameras.lenses.LensBase.prototype,{set_near:function(a){return this._near=a},set_far:function(a){return this._far=a},set_aspectRatio:function(a){return this._aspectRatio=a},clone:function(){var a=new d.cameras.lenses.FreeMatrixLens;a._matrix.copyFrom(this._matrix);a._near=
this._near;a._far=this._far;a._aspectRatio=this._aspectRatio;a.invalidateMatrix();return a},updateMatrix:function(){this._matrixInvalid=!1},__class__:d.cameras.lenses.FreeMatrixLens});d.cameras.lenses.PerspectiveLens=function(a){null==a&&(a=60);d.cameras.lenses.LensBase.call(this);this.set_fieldOfView(a)};h["away3d.cameras.lenses.PerspectiveLens"]=d.cameras.lenses.PerspectiveLens;d.cameras.lenses.PerspectiveLens.__name__=["away3d","cameras","lenses","PerspectiveLens"];d.cameras.lenses.PerspectiveLens.__super__=
d.cameras.lenses.LensBase;d.cameras.lenses.PerspectiveLens.prototype=q(d.cameras.lenses.LensBase.prototype,{get_fieldOfView:function(){return this._fieldOfView},set_fieldOfView:function(a){if(a==this._fieldOfView)return a;this._fieldOfView=a;this._focalLengthInv=Math.tan(this._fieldOfView*Math.PI/360);this._focalLength=1/this._focalLengthInv;this.invalidateMatrix();return a},get_focalLength:function(){return this._focalLength},set_focalLength:function(a){if(a==this._focalLength)return a;this._focalLength=
a;this._focalLengthInv=1/this._focalLength;this._fieldOfView=360*Math.atan(this._focalLengthInv)/Math.PI;this.invalidateMatrix();return a},unproject:function(a,b,f){a=new c.geom.Vector3D(a,-b,f,1);a.x*=f;a.y*=f;a=this.get_unprojectionMatrix().transformVector(a);a.z=f;return a},clone:function(){var a=new d.cameras.lenses.PerspectiveLens(this._fieldOfView);a._near=this._near;a._far=this._far;a._aspectRatio=this._aspectRatio;return a},updateMatrix:function(){var a=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();
this._yMax=this._near*this._focalLengthInv;this._xMax=this._yMax*this._aspectRatio;var b,f,c,i;if(0==this._scissorRect.x&&0==this._scissorRect.y&&this._scissorRect.width==this._viewPort.width&&this._scissorRect.height==this._viewPort.height){b=-this._xMax;f=this._xMax;c=-this._yMax;i=this._yMax;0>=a.length&&!a.fixed&&(a.length=1);a.data[0]=this._near/this._xMax;5>=a.length&&!a.fixed&&(a.length=6);a.data[5]=this._near/this._yMax;10>=a.length&&!a.fixed&&(a.length=11);a.data[10]=this._far/(this._far-
this._near);11>=a.length&&!a.fixed&&(a.length=12);a.data[11]=1;var e;15>=a.length&&!a.fixed&&(a.length=16);e=a.data[15]=0;13>=a.length&&!a.fixed&&(a.length=14);e=a.data[13]=e;12>=a.length&&!a.fixed&&(a.length=13);e=a.data[12]=e;9>=a.length&&!a.fixed&&(a.length=10);e=a.data[9]=e;8>=a.length&&!a.fixed&&(a.length=9);e=a.data[8]=e;7>=a.length&&!a.fixed&&(a.length=8);e=a.data[7]=e;6>=a.length&&!a.fixed&&(a.length=7);e=a.data[6]=e;4>=a.length&&!a.fixed&&(a.length=5);e=a.data[4]=e;3>=a.length&&!a.fixed&&
(a.length=4);e=a.data[3]=e;2>=a.length&&!a.fixed&&(a.length=3);e=a.data[2]=e;1>=a.length&&!a.fixed&&(a.length=2);a.data[1]=e;14>=a.length&&!a.fixed&&(a.length=15);a.data[14]=-this._near*a.data[10]}else f=this._xMax*(this._viewPort.width/this._scissorRect.width),i=this._yMax*(this._viewPort.height/this._scissorRect.height),c=this._xMax*(2*this._scissorRect.x-this._viewPort.width)/this._scissorRect.width+this._xMax,e=-this._yMax*(2*this._scissorRect.y-this._viewPort.height)/this._scissorRect.height-
this._yMax,b=c-f,f=c+f,c=e-i,i=e+i,0>=a.length&&!a.fixed&&(a.length=1),a.data[0]=2*this._near/(f-b),5>=a.length&&!a.fixed&&(a.length=6),a.data[5]=2*this._near/(i-c),8>=a.length&&!a.fixed&&(a.length=9),a.data[8]=(f+b)/(f-b),9>=a.length&&!a.fixed&&(a.length=10),a.data[9]=(i+c)/(i-c),10>=a.length&&!a.fixed&&(a.length=11),a.data[10]=(this._far+this._near)/(this._far-this._near),11>=a.length&&!a.fixed&&(a.length=12),a.data[11]=1,15>=a.length&&!a.fixed&&(a.length=16),e=a.data[15]=0,13>=a.length&&!a.fixed&&
(a.length=14),e=a.data[13]=e,12>=a.length&&!a.fixed&&(a.length=13),e=a.data[12]=e,7>=a.length&&!a.fixed&&(a.length=8),e=a.data[7]=e,6>=a.length&&!a.fixed&&(a.length=7),e=a.data[6]=e,4>=a.length&&!a.fixed&&(a.length=5),e=a.data[4]=e,3>=a.length&&!a.fixed&&(a.length=4),e=a.data[3]=e,2>=a.length&&!a.fixed&&(a.length=3),e=a.data[2]=e,1>=a.length&&!a.fixed&&(a.length=2),a.data[1]=e,14>=a.length&&!a.fixed&&(a.length=15),a.data[14]=-2*this._far*this._near/(this._far-this._near);this._matrix.copyRawDataFrom(a);
a=this._far*this._focalLengthInv;e=a*this._aspectRatio;this._frustumCorners[0]=this._frustumCorners[9]=b;this._frustumCorners[3]=this._frustumCorners[6]=f;this._frustumCorners[1]=this._frustumCorners[4]=c;this._frustumCorners[7]=this._frustumCorners[10]=i;this._frustumCorners[12]=this._frustumCorners[21]=-e;this._frustumCorners[15]=this._frustumCorners[18]=e;this._frustumCorners[13]=this._frustumCorners[16]=-a;this._frustumCorners[19]=this._frustumCorners[22]=a;this._frustumCorners[2]=this._frustumCorners[5]=
this._frustumCorners[8]=this._frustumCorners[11]=this._near;this._frustumCorners[14]=this._frustumCorners[17]=this._frustumCorners[20]=this._frustumCorners[23]=this._far;this._matrixInvalid=!1},__class__:d.cameras.lenses.PerspectiveLens,__properties__:q(d.cameras.lenses.LensBase.prototype.__properties__,{set_focalLength:"set_focalLength",get_focalLength:"get_focalLength",set_fieldOfView:"set_fieldOfView",get_fieldOfView:"get_fieldOfView"})});d.containers.Scene3D=function(){this._partitions=[];this._sceneGraphRoot=
new d.containers.ObjectContainer3D;this._sceneGraphRoot.set_scene(this);this._sceneGraphRoot._isRoot=!0;this._sceneGraphRoot.set_partition(new d.core.partition.Partition3D(new d.core.partition.NodeBase));c.events.EventDispatcher.call(this)};h["away3d.containers.Scene3D"]=d.containers.Scene3D;d.containers.Scene3D.__name__=["away3d","containers","Scene3D"];d.containers.Scene3D.__super__=c.events.EventDispatcher;d.containers.Scene3D.prototype=q(c.events.EventDispatcher.prototype,{traversePartitions:function(a){var b=
0,f=this._partitions.length;for(a.scene=this;b<f;)this._partitions[b++].traverse(a)},get_partition:function(){return this._sceneGraphRoot.get_partition()},set_partition:function(a){this._sceneGraphRoot.set_partition(a);this.dispatchEvent(new d.events.Scene3DEvent(d.events.Scene3DEvent.PARTITION_CHANGED,this._sceneGraphRoot));return a},contains:function(a){return this._sceneGraphRoot.contains(a)},addChild:function(a){return this._sceneGraphRoot.addChild(a)},removeChild:function(a){this._sceneGraphRoot.removeChild(a)},
removeChildAt:function(a){this._sceneGraphRoot.removeChildAt(a)},getChildAt:function(a){return this._sceneGraphRoot.getChildAt(a)},get_numChildren:function(){return this._sceneGraphRoot.get_numChildren()},registerEntity:function(a){var b=a.get_implicitPartition();this.addPartitionUnique(b);b.markForUpdate(a)},unregisterEntity:function(a){a.get_implicitPartition().removeEntity(a)},invalidateEntityBounds:function(a){a.get_implicitPartition().markForUpdate(a)},registerPartition:function(a){this.addPartitionUnique(a.get_implicitPartition())},
unregisterPartition:function(a){a.get_implicitPartition().removeEntity(a)},addPartitionUnique:function(a){-1==w.indexOf(this._partitions,a,0)&&this._partitions.push(a)},__class__:d.containers.Scene3D,__properties__:{get_numChildren:"get_numChildren",set_partition:"set_partition",get_partition:"get_partition"}});d.containers.View3D=function(a,b,f,p,i){null==i&&(i="baseline");null==p&&(p=!1);this._layeredView=!1;this._height=this._width=0;this._localPos=new c.geom.Point;this._globalPos=new c.geom.Point;
c.display.Sprite.call(this);this._backgroundColor=this._time=0;this._backgroundAlpha=1;this._rightClickMenuEnabled=this._backBufferInvalid=this._depthTextureInvalid=!0;this._shareContext=!1;this._viewportDirty=this._scissorRectDirty=!0;this._layeredView=!1;this._profile=i;this._scene=null!=a?a:new d.containers.Scene3D;this._scene.addEventListener(d.events.Scene3DEvent.PARTITION_CHANGED,r(this,this.onScenePartitionChanged));this._camera=null!=b?b:new d.cameras.Camera3D;this._renderer=null!=f?f:new d.core.render.DefaultRenderer;
this._depthRenderer=new d.core.render.DepthRenderer;this._forceSoftware=p;this._entityCollector=this._renderer.createEntityCollector();this._entityCollector.set_camera(this._camera);this._scissorRect=new c.geom.Rectangle;this.initHitField();this._mouse3DManager=new d.core.managers.Mouse3DManager;this._mouse3DManager.enableMouseListeners(this);this._touch3DManager=new d.core.managers.Touch3DManager;this.addEventListener(c.events.Event.ADDED_TO_STAGE,r(this,this.onAddedToStage),!1,0,!0);this.addEventListener(c.events.Event.ADDED,
r(this,this.onAdded),!1,0,!0);this._camera.addEventListener(d.events.CameraEvent.LENS_CHANGED,r(this,this.onLensChanged));this._camera.set_partition(this._scene.get_partition())};h["away3d.containers.View3D"]=d.containers.View3D;d.containers.View3D.__name__=["away3d","containers","View3D"];d.containers.View3D.__super__=c.display.Sprite;d.containers.View3D.prototype=q(c.display.Sprite.prototype,{get_depthPrepass:function(){return this._depthPrepass},set_depthPrepass:function(a){return this._depthPrepass=
a},onScenePartitionChanged:function(){null!=this._camera&&this._camera.set_partition(this.get_scene().get_partition())},get_stage3DProxy:function(){return this._stage3DProxy},set_stage3DProxy:function(a){null!=this._stage3DProxy&&this._stage3DProxy.removeEventListener(d.events.Stage3DEvent.VIEWPORT_UPDATED,r(this,this.onViewportUpdated));this._stage3DProxy=a;this._stage3DProxy.addEventListener(d.events.Stage3DEvent.VIEWPORT_UPDATED,r(this,this.onViewportUpdated));this._renderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(this._stage3DProxy));
this._backBufferInvalid=this._globalPosDirty=!0;return this._stage3DProxy},get_forceMouseMove:function(){return this._mouse3DManager.get_forceMouseMove()},set_forceMouseMove:function(a){this._mouse3DManager.set_forceMouseMove(a);return a},get_background:function(){return this._background},set_background:function(a){this._background=a;this._renderer.set_background(this._background);return this._background},get_layeredView:function(){return this._layeredView},set_layeredView:function(a){return this._layeredView=
a},initHitField:function(){this._hitField=new c.display.Sprite;this._hitField.set_alpha(0);this._hitField.doubleClickEnabled=!0;this._hitField.get_graphics().beginFill(0);this._hitField.get_graphics().drawRect(0,0,100,100);this.addChild(this._hitField)},get_filters3d:function(){return null!=this._filter3DRenderer?this._filter3DRenderer.get_filters():null},set_filters3d:function(a){null!=a&&0==a.length&&(a=null);null!=this._filter3DRenderer&&null==a?(this._filter3DRenderer.dispose(),this._filter3DRenderer=
null):null==this._filter3DRenderer&&null!=a&&(this._filter3DRenderer=new d.core.render.Filter3DRenderer(this.get_stage3DProxy()),this._filter3DRenderer.set_filters(a));null!=this._filter3DRenderer?(this._filter3DRenderer.set_filters(a),this._requireDepthRender=this._filter3DRenderer.get_requireDepthRender()):(this._requireDepthRender=!1,null!=this._depthRender&&(this._depthRender.dispose(),this._depthRender=null));return a},get_renderer:function(){return this._renderer},set_renderer:function(a){this._renderer.dispose();
this._renderer=a;this._entityCollector=this._renderer.createEntityCollector();this._entityCollector.set_camera(this._camera);this._renderer.set_stage3DProxy(this._stage3DProxy);this._renderer.set_antiAlias(this._antiAlias);this._renderer.set_backgroundR(function(a){a=a._backgroundColor>>16&255;return 0>a?4294967296+a:a+0}(this)/255);this._renderer.set_backgroundG(function(a){a=a._backgroundColor>>8&255;return 0>a?4294967296+a:a+0}(this)/255);this._renderer.set_backgroundB(function(a){a=a._backgroundColor&
255;return 0>a?4294967296+a:a+0}(this)/255);this._renderer.set_backgroundAlpha(this._backgroundAlpha);this._renderer.set_viewWidth(this._width);this._renderer.set_viewHeight(this._height);this._backBufferInvalid=!0;return this._renderer},get_backgroundColor:function(){return this._backgroundColor},set_backgroundColor:function(a){this._backgroundColor=a;this._renderer.set_backgroundR(function(){var b=a>>16&255;return 0>b?4294967296+b:b+0}(this)/255);this._renderer.set_backgroundG(function(){var b=
a>>8&255;return 0>b?4294967296+b:b+0}(this)/255);this._renderer.set_backgroundB(function(){var b=a&255;return 0>b?4294967296+b:b+0}(this)/255);return a},get_backgroundAlpha:function(){return this._backgroundAlpha},set_backgroundAlpha:function(a){1<a?a=1:0>a&&(a=0);this._renderer.set_backgroundAlpha(a);return this._backgroundAlpha=a},get_camera:function(){return this._camera},set_camera:function(a){this._camera.removeEventListener(d.events.CameraEvent.LENS_CHANGED,r(this,this.onLensChanged));this._camera=
a;this._entityCollector.set_camera(this._camera);null!=this._scene&&this._camera.set_partition(this._scene.get_partition());this._camera.addEventListener(d.events.CameraEvent.LENS_CHANGED,r(this,this.onLensChanged));this._viewportDirty=this._scissorRectDirty=!0;return a},get_scene:function(){return this._scene},set_scene:function(a){this._scene.removeEventListener(d.events.Scene3DEvent.PARTITION_CHANGED,r(this,this.onScenePartitionChanged));this._scene=a;this._scene.addEventListener(d.events.Scene3DEvent.PARTITION_CHANGED,
r(this,this.onScenePartitionChanged));null!=this._camera&&this._camera.set_partition(this._scene.get_partition());return this._scene},get_deltaTime:function(){return this._deltaTime},get_width:function(){return this._width},set_width:function(a){null!=this._stage3DProxy&&(this._stage3DProxy.get_usesSoftwareRendering()&&2048<a)&&(a=2048);if(this._width==a)return a;null!=this._rttBufferManager&&this._rttBufferManager.set_viewWidth(a|0);this._hitField.set_width(a);this._width=a;this._aspectRatio=this._width/
this._height;this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._depthTextureInvalid=!0;this._renderer.set_viewWidth(a);this._scissorRect.width=a;this._scissorRectDirty=this._backBufferInvalid=!0;return a},get_height:function(){return this._height},set_height:function(a){null!=this._stage3DProxy&&(this._stage3DProxy.get_usesSoftwareRendering()&&2048<a)&&(a=2048);if(this._height==a)return a;null!=this._rttBufferManager&&this._rttBufferManager.set_viewHeight(a|0);this._hitField.set_height(a);
this._height=a;this._aspectRatio=this._width/this._height;this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._depthTextureInvalid=!0;this._renderer.set_viewHeight(a);this._scissorRect.height=a;this._scissorRectDirty=this._backBufferInvalid=!0;return a},set_x:function(a){if(this.get_x()==a)return this.get_x();this._localPos.x=c.display.Sprite.prototype.set_x.call(this,a);this._globalPos.x=null!=this.parent?this.parent.localToGlobal(this._localPos).x:a;this._globalPosDirty=!0;return this.get_x()},
set_y:function(a){if(this.get_y()==a)return this.get_y();this._localPos.y=c.display.Sprite.prototype.set_y.call(this,a);this._globalPos.y=null!=this.parent?this.parent.localToGlobal(this._localPos).y:a;this._globalPosDirty=!0;return this.get_y()},set_visible:function(a){c.display.Sprite.prototype.set_visible.call(this,a);null!=this._stage3DProxy&&!this._shareContext&&this._stage3DProxy.set_visible(a);return a},get_antiAlias:function(){return this._antiAlias},set_antiAlias:function(a){this._antiAlias=
a;this._renderer.set_antiAlias(a);this._backBufferInvalid=!0;return this._antiAlias},get_renderedFacesCount:function(){return this._entityCollector.get_numTriangles()},get_shareContext:function(){return this._shareContext},set_shareContext:function(a){if(this._shareContext==a)return a;this._shareContext=a;this._globalPosDirty=!0;return a},updateBackBuffer:function(){if(null!=this._stage3DProxy.get_context3D()&&!this._shareContext)if(0<this._width&&0<this._height){if(this._stage3DProxy.get_usesSoftwareRendering()&&
(2048<this._width&&(this._width=2048),2048<this._height))this._height=2048;this._stage3DProxy.configureBackBuffer(this._width|0,this._height|0,this._antiAlias,!0);this._backBufferInvalid=!1}else this.set_width(this.stage.stageWidth),this.set_height(this.stage.stageHeight)},setRenderCallback:function(a){null!=this._stage3DProxy&&this._stage3DProxy.setRenderCallback(a);this._callbackMethod=a},render:function(){if(this.get_stage3DProxy().recoverFromDisposal()){this._backBufferInvalid&&this.updateBackBuffer();
this._shareContext&&this._layeredView&&this.get_stage3DProxy().clearDepthBuffer();if(!this._parentIsStage){var a=this.parent.localToGlobal(this._localPos);if(this._globalPos.x!=a.x||this._globalPos.y!=a.y)this._globalPos=a,this._globalPosDirty=!0}this._globalPosDirty&&this.updateGlobalPos();this.updateTime();this.updateViewSizeData();this._entityCollector.clear();this._scene.traversePartitions(this._entityCollector);this._mouse3DManager.updateCollider(this);this._requireDepthRender&&this.renderSceneDepthToTexture(this._entityCollector);
this._depthPrepass&&this.renderDepthPrepass(this._entityCollector);this._renderer.set_clearOnRender(!this._depthPrepass);null!=this._filter3DRenderer&&null!=this._stage3DProxy._context3D?(this._renderer.render(this._entityCollector,this._filter3DRenderer.getMainInputTexture(this._stage3DProxy),this._rttBufferManager.get_renderToTextureRect()),this._filter3DRenderer.render(this._stage3DProxy,this.get_camera(),this._depthRender)):(this._renderer.set_shareContext(this._shareContext),this._shareContext?
this._renderer.render(this._entityCollector,null,this._scissorRect):this._renderer.render(this._entityCollector));this._shareContext||(this.get_stage3DProxy().present(),this._mouse3DManager.fireMouseEvents());this._entityCollector.cleanUp();this.get_stage3DProxy().set_bufferClear(!1)}else this._backBufferInvalid=!0},updateGlobalPos:function(){this._globalPosDirty=!1;null!=this._stage3DProxy&&(this._shareContext?(this._scissorRect.x=this._globalPos.x-this._stage3DProxy.get_x(),this._scissorRect.y=
this._globalPos.y-this._stage3DProxy.get_y()):(this._scissorRect.x=0,this._scissorRect.y=0,this._stage3DProxy.set_x(this._globalPos.x),this._stage3DProxy.set_y(this._globalPos.y)),this._scissorRectDirty=!0)},updateTime:function(){var a=c.Lib.getTimer(),b=this._time;if(0==(0>b?4294967296+b:b+0))this._time=a;this._deltaTime=a-this._time;this._time=a},updateViewSizeData:function(){this._camera.get_lens().set_aspectRatio(this._aspectRatio);this._scissorRectDirty&&(this._scissorRectDirty=!1,this._camera.get_lens().updateScissorRect(this._scissorRect.x,
this._scissorRect.y,this._scissorRect.width,this._scissorRect.height));this._viewportDirty&&(this._viewportDirty=!1,this._camera.get_lens().updateViewport(this._stage3DProxy.get_viewPort().x,this._stage3DProxy.get_viewPort().y,this._stage3DProxy.get_viewPort().width,this._stage3DProxy.get_viewPort().height));null!=this._filter3DRenderer||this._renderer.get_renderToTexture()?(this._renderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()),this._renderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY())):
(this._renderer.set_textureRatioX(1),this._renderer.set_textureRatioY(1))},renderDepthPrepass:function(a){this._depthRenderer.set_disableColor(!0);null!=this._filter3DRenderer||this._renderer.get_renderToTexture()?(this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX()),this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY()),this._depthRenderer.render(a,this._filter3DRenderer.getMainInputTexture(this._stage3DProxy),this._rttBufferManager.get_renderToTextureRect())):
(this._depthRenderer.set_textureRatioX(1),this._depthRenderer.set_textureRatioY(1),this._depthRenderer.render(a));this._depthRenderer.set_disableColor(!1)},renderSceneDepthToTexture:function(a){(this._depthTextureInvalid||null==this._depthRender)&&this.initDepthTexture(this._stage3DProxy._context3D);this._depthRenderer.set_textureRatioX(this._rttBufferManager.get_textureRatioX());this._depthRenderer.set_textureRatioY(this._rttBufferManager.get_textureRatioY());this._depthRenderer.render(a,this._depthRender)},
initDepthTexture:function(a){this._depthTextureInvalid=!1;null!=this._depthRender&&this._depthRender.dispose();this._depthRender=a.createTexture(this._rttBufferManager.get_textureWidth(),this._rttBufferManager.get_textureHeight(),c.display3D.Context3DTextureFormat.BGRA,!0)},dispose:function(){this._stage3DProxy.removeEventListener(d.events.Stage3DEvent.VIEWPORT_UPDATED,r(this,this.onViewportUpdated));this.get_shareContext()||this._stage3DProxy.dispose();this._renderer.dispose();null!=this._depthRender&&
this._depthRender.dispose();null!=this._rttBufferManager&&this._rttBufferManager.dispose();this._mouse3DManager.disableMouseListeners(this);this._mouse3DManager.dispose();this._entityCollector=this._renderer=this._stage3DProxy=this._depthRenderer=this._mouse3DManager=this._depthRender=this._rttBufferManager=null},project:function(a){a=this._camera.project(a);a.x=(a.x+1)*this._width/2;a.y=(a.y+1)*this._height/2;return a},unproject:function(a,b,f){return this._camera.unproject((2*a-this._width)/this._stage3DProxy.get_width(),
(2*b-this._height)/this._stage3DProxy.get_height(),f)},getRay:function(a,b,f){return this._camera.getRay((2*a-this._width)/this._width,(2*b-this._height)/this._height,f)},get_mousePicker:function(){return this._mouse3DManager.get_mousePicker()},set_mousePicker:function(a){this._mouse3DManager.set_mousePicker(a);return a},get_touchPicker:function(){return this._touch3DManager.get_touchPicker()},set_touchPicker:function(a){this._touch3DManager.set_touchPicker(a);return a},get_entityCollector:function(){return this._entityCollector},
onLensChanged:function(){this._viewportDirty=this._scissorRectDirty=!0},onAddedToStage:function(){this._addedToStage||(this._addedToStage=!0,null==this._stage3DProxy&&(this._stage3DProxy=d.core.managers.Stage3DManager.getInstance(this.stage).getFreeStage3DProxy(this._forceSoftware,this._profile),this._stage3DProxy.addEventListener(d.events.Stage3DEvent.VIEWPORT_UPDATED,r(this,this.onViewportUpdated)),null!=this._callbackMethod&&this._stage3DProxy.setRenderCallback(this._callbackMethod)),this._globalPosDirty=
!0,this._rttBufferManager=d.core.managers.RTTBufferManager.getInstance(this._stage3DProxy),this._renderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(this._stage3DProxy)),0==this._width?this.set_width(this.stage.stageWidth):this._rttBufferManager.set_viewWidth(this._width|0),0==this._height?this.set_height(this.stage.stageHeight):this._rttBufferManager.set_viewHeight(this._height|0),this._shareContext&&this._mouse3DManager.addViewLayer(this))},onAdded:function(){this._parentIsStage=this.parent==
this.stage;this._globalPos=this.parent.localToGlobal(this._localPos);this._globalPosDirty=!0},onViewportUpdated:function(){this._shareContext&&(this._scissorRect.x=this._globalPos.x-this._stage3DProxy.get_x(),this._scissorRect.y=this._globalPos.y-this._stage3DProxy.get_y(),this._scissorRectDirty=!0);this._viewportDirty=!0},__class__:d.containers.View3D,__properties__:q(c.display.Sprite.prototype.__properties__,{get_entityCollector:"get_entityCollector",set_touchPicker:"set_touchPicker",get_touchPicker:"get_touchPicker",
set_mousePicker:"set_mousePicker",get_mousePicker:"get_mousePicker",set_shareContext:"set_shareContext",get_shareContext:"get_shareContext",get_renderedFacesCount:"get_renderedFacesCount",set_antiAlias:"set_antiAlias",get_antiAlias:"get_antiAlias",get_deltaTime:"get_deltaTime",set_scene:"set_scene",get_scene:"get_scene",set_camera:"set_camera",get_camera:"get_camera",set_backgroundAlpha:"set_backgroundAlpha",get_backgroundAlpha:"get_backgroundAlpha",set_backgroundColor:"set_backgroundColor",get_backgroundColor:"get_backgroundColor",
set_renderer:"set_renderer",get_renderer:"get_renderer",set_filters3d:"set_filters3d",get_filters3d:"get_filters3d",set_layeredView:"set_layeredView",get_layeredView:"get_layeredView",set_background:"set_background",get_background:"get_background",set_forceMouseMove:"set_forceMouseMove",get_forceMouseMove:"get_forceMouseMove",set_stage3DProxy:"set_stage3DProxy",get_stage3DProxy:"get_stage3DProxy",set_depthPrepass:"set_depthPrepass",get_depthPrepass:"get_depthPrepass"})});d.controllers={};d.controllers.ControllerBase=
function(a){this._autoUpdate=!0;this.set_targetObject(a)};h["away3d.controllers.ControllerBase"]=d.controllers.ControllerBase;d.controllers.ControllerBase.__name__=["away3d","controllers","ControllerBase"];d.controllers.ControllerBase.prototype={notifyUpdate:function(){null!=this._targetObject&&(null!=this._targetObject.get_implicitPartition()&&this._autoUpdate)&&this._targetObject.get_implicitPartition().markForUpdate(this._targetObject)},get_targetObject:function(){return this._targetObject},set_targetObject:function(a){if(this._targetObject==
a)return a;null!=this._targetObject&&this._autoUpdate&&(this._targetObject._controller=null);this._targetObject=a;null!=this._targetObject&&this._autoUpdate&&(this._targetObject._controller=this);this.notifyUpdate();return a},get_autoUpdate:function(){return this._autoUpdate},set_autoUpdate:function(a){if(this._autoUpdate==a)return a;this._autoUpdate=a;null!=this._targetObject&&(this._targetObject._controller=this._autoUpdate?this:null);return a},update:function(){throw new d.errors.AbstractMethodError;
},__class__:d.controllers.ControllerBase,__properties__:{set_autoUpdate:"set_autoUpdate",get_autoUpdate:"get_autoUpdate",set_targetObject:"set_targetObject",get_targetObject:"get_targetObject"}};d.core.base.SubGeometryBase=function(){this._faceTangentsDirty=this._faceNormalsDirty=!0;this._indexBuffer=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._indexBufferContext=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._indicesInvalid=
d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._autoDeriveVertexTangents=this._autoDeriveVertexNormals=!0;this._useFaceWeights=this._autoGenerateUVs=!1;this._vertexTangentsDirty=this._vertexNormalsDirty=!0;this._scaleV=this._scaleU=1;this._uvsDirty=!0};h["away3d.core.base.SubGeometryBase"]=d.core.base.SubGeometryBase;d.core.base.SubGeometryBase.__name__=["away3d","core","base","SubGeometryBase"];d.core.base.SubGeometryBase.prototype={get_autoGenerateDummyUVs:function(){return this._autoGenerateUVs},
set_autoGenerateDummyUVs:function(a){return this._uvsDirty=this._autoGenerateUVs=a},get_autoDeriveVertexNormals:function(){return this._autoDeriveVertexNormals},set_autoDeriveVertexNormals:function(a){return this._vertexNormalsDirty=this._autoDeriveVertexNormals=a},get_useFaceWeights:function(){return this._useFaceWeights},set_useFaceWeights:function(a){this._useFaceWeights=a;this._autoDeriveVertexNormals&&(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0);
this._faceNormalsDirty=!0;return a},get_numTriangles:function(){return this._numTriangles},getIndexBuffer:function(a){var b=a._stage3DIndex,a=a._context3D;if(null==this._indexBuffer[b]||this._indexBufferContext[b]!=a)this._indexBuffer[b]=a.createIndexBuffer(this._numIndices),this._indexBufferContext[b]=a,this._indicesInvalid[b]=!0;this._indicesInvalid[b]&&(this._indexBuffer[b].uploadFromVector(function(a){var a=a._indices,b=new c.VectorData;b.length=a.length;b.fixed=!0;var d;d=Array(a.length);for(var e=
0,g=a.length;e<g;){var o=e++;d[o]=a[o]}b.data=d;return b}(this),0,this._numIndices),this._indicesInvalid[b]=!1);return this._indexBuffer[b]},updateFaceTangents:function(){var a=0,b,f,c,i=this._indices.length,e,g,o,z,A,n,h,k=this._vertexData,l=this.get_UVData(),m=this.get_vertexStride(),q=this.get_vertexOffset(),s=this.get_UVStride(),r=this.get_UVOffset();null==this._faceTangents&&(this._faceTangents=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),this._indices.length));
for(;a<i;)b=this._indices[a],f=this._indices[a+1],c=this._indices[a+2],e=r+b*s+1,g=l[e],e=r+f*s+1,o=l[e]-g,e=r+c*s+1,e=l[e]-g,g=q+b*m,z=k[g],A=k[g+1],n=k[g+2],g=q+f*m,h=k[g]-z,b=k[g+1]-A,f=k[g+2]-n,g=q+c*m,c=k[g]-z,A=k[g+1]-A,g=k[g+2]-n,c=e*h-o*c,b=e*b-o*A,e=e*f-o*g,o=1/Math.sqrt(c*c+b*b+e*e),this._faceTangents[a++]=o*c,this._faceTangents[a++]=o*b,this._faceTangents[a++]=o*e;this._faceTangentsDirty=!1},updateFaceNormals:function(){var a=0,b=0,f=0,c,i=this._indices.length,e,g,o,z,A,n,h,k,l=this._vertexData,
m=this.get_vertexStride(),q=this.get_vertexOffset();null==this._faceNormals&&(this._faceNormals=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),i));null==this._faceWeights&&(this._faceWeights=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),i/3|0));for(;a<i;)h=this._indices[a++],c=q+h*m,e=l[c],z=l[c+1],h=l[c+2],k=this._indices[a++],c=q+k*m,g=l[c],A=l[c+1],k=l[c+2],o=this._indices[a++],c=q+o*m,o=l[c],n=l[c+1],c=l[c+2],o-=e,n-=z,c-=h,e=g-e,z=A-
z,k-=h,h=c*z-n*k,k=o*k-c*e,z=n*e-o*z,o=Math.sqrt(h*h+k*k+z*z),this._useFaceWeights&&(e=1E4*o,1>e&&(e=1),this._faceWeights[f++]=e),o=1/o,this._faceNormals[b++]=h*o,this._faceNormals[b++]=k*o,this._faceNormals[b++]=z*o;this._faceNormalsDirty=!1},updateVertexNormals:function(a){this._faceNormalsDirty&&this.updateFaceNormals();var b,f=0,c=1,i=2,e=this._vertexData.length,g=this.get_vertexNormalStride(),o=this.get_vertexNormalOffset();null==a&&(a=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
e,0));for(b=o;b<e;)a[b]=0,a[b+1]=0,a[b+2]=0,b+=g;for(var z=b=0,h=this._indices.length,n,k;b<h;)k=this._useFaceWeights?this._faceWeights[z++]:1,n=this._indices[b++],n=o+n*g,a[n++]+=this._faceNormals[f]*k,a[n++]+=this._faceNormals[c]*k,a[n]+=this._faceNormals[i]*k,n=this._indices[b++],n=o+n*g,a[n++]+=this._faceNormals[f]*k,a[n++]+=this._faceNormals[c]*k,a[n]+=this._faceNormals[i]*k,n=this._indices[b++],n=o+n*g,a[n++]+=this._faceNormals[f]*k,a[n++]+=this._faceNormals[c]*k,a[n]+=this._faceNormals[i]*
k,f+=3,c+=3,i+=3;for(b=o;b<e;)f=a[b],c=a[b+1],i=a[b+2],o=1/Math.sqrt(f*f+c*c+i*i),a[b]=f*o,a[b+1]=c*o,a[b+2]=i*o,b+=g;this._vertexNormalsDirty=!1;return a},updateVertexTangents:function(a){this._faceTangentsDirty&&this.updateFaceTangents();var b=0,f=this._vertexData.length,c=this.get_vertexTangentStride(),i=this.get_vertexTangentOffset();null==a&&(a=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),f));for(b=i;b<f;)a[b]=0,a[b+1]=0,a[b+2]=0,b+=c;for(var e=0,g=this._indices.length,
o,z,h=0,n=1,k=2,b=0;b<g;)z=this._useFaceWeights?this._faceWeights[e++]:1,o=this._indices[b++],o=i+o*c,a[o++]+=this._faceTangents[h]*z,a[o++]+=this._faceTangents[n]*z,a[o]+=this._faceTangents[k]*z,o=this._indices[b++],o=i+o*c,a[o++]+=this._faceTangents[h]*z,a[o++]+=this._faceTangents[n]*z,a[o]+=this._faceTangents[k]*z,o=this._indices[b++],o=i+o*c,a[o++]+=this._faceTangents[h]*z,a[o++]+=this._faceTangents[n]*z,a[o]+=this._faceTangents[k]*z,h+=3,n+=3,k+=3;for(b=i;b<f;)i=a[b],e=a[b+1],g=a[b+2],z=1/Math.sqrt(i*
i+e*e+g*g),a[b]=i*z,a[b+1]=e*z,a[b+2]=g*z,b+=c;this._vertexTangentsDirty=!1;return a},dispose:function(){this.disposeIndexBuffers(this._indexBuffer);this._vertexData=this._faceTangents=this._faceWeights=this._faceNormals=this._indexBufferContext=this._indices=null},get_indexData:function(){return this._indices},updateIndexData:function(a){this._indices=a;this._numIndices=a.length;a=this._numIndices/3|0;this._numTriangles!=a&&this.disposeIndexBuffers(this._indexBuffer);this._numTriangles=a;this.invalidateBuffers(this._indicesInvalid);
this._faceNormalsDirty=!0;this._autoDeriveVertexNormals&&(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0)},disposeIndexBuffers:function(a){for(var b=0;8>b;)null!=a[b]&&(a[b].dispose(),a[b]=null),++b},disposeVertexBuffers:function(a){for(var b=0;8>b;)null!=a[b]&&(a[b].dispose(),a[b]=null),++b},get_autoDeriveVertexTangents:function(){return this._autoDeriveVertexTangents},set_autoDeriveVertexTangents:function(a){return this._vertexTangentsDirty=this._autoDeriveVertexTangents=
a},get_faceNormals:function(){this._faceNormalsDirty&&this.updateFaceNormals();return this._faceNormals},invalidateBuffers:function(a){for(var b=0;8>b;)a[b]=!0,++b},get_UVStride:function(){throw new d.errors.AbstractMethodError;},get_vertexData:function(){throw new d.errors.AbstractMethodError;},get_vertexPositionData:function(){throw new d.errors.AbstractMethodError;},get_vertexNormalData:function(){throw new d.errors.AbstractMethodError;},get_vertexTangentData:function(){throw new d.errors.AbstractMethodError;
},get_UVData:function(){throw new d.errors.AbstractMethodError;},get_vertexStride:function(){throw new d.errors.AbstractMethodError;},get_vertexNormalStride:function(){throw new d.errors.AbstractMethodError;},get_vertexTangentStride:function(){throw new d.errors.AbstractMethodError;},get_vertexOffset:function(){throw new d.errors.AbstractMethodError;},get_vertexNormalOffset:function(){throw new d.errors.AbstractMethodError;},get_vertexTangentOffset:function(){throw new d.errors.AbstractMethodError;
},get_UVOffset:function(){throw new d.errors.AbstractMethodError;},invalidateBounds:function(){null!=this._parentGeometry&&this._parentGeometry.invalidateBounds(s.Boot.__cast(this,d.core.base.ISubGeometry))},get_parentGeometry:function(){return this._parentGeometry},set_parentGeometry:function(a){return this._parentGeometry=a},get_scaleU:function(){return this._scaleU},get_scaleV:function(){return this._scaleV},scaleUV:function(a,b){null==b&&(b=1);null==a&&(a=1);for(var f=this.get_UVOffset(),c=this.get_UVStride(),
d=this.get_UVData(),e=d.length,g=a/this._scaleU,o=b/this._scaleV;f<e;)d[f]*=g,d[f+1]*=o,f+=c;this._scaleU=a;this._scaleV=b},scale:function(a){for(var b=this.get_UVData(),f=b.length,c=this.get_vertexOffset(),d=this.get_vertexStride();c<f;)b[c]*=a,b[c+1]*=a,b[c+2]*=a,c+=d},applyTransformation:function(a){var b=this._vertexData,f=this.get_vertexNormalData(),p=this.get_vertexTangentData(),d=this.get_vertexStride(),e=this.get_vertexNormalStride(),g=this.get_vertexTangentStride(),o=this.get_vertexOffset(),
z=this.get_vertexNormalOffset(),h=this.get_vertexTangentOffset(),n=b.length/d|0,k=0,l,m=new c.geom.Vector3D,q=null!=f,s=null!=p,r=null;if(q||s)r=new c.geom.Matrix3D(c._Vector.Vector_Impl_.copy(a.rawData)),r.invert(),r.transpose();for(var u=h,k=0;k<n;)h=o+1,l=o+2,m.x=b[o],m.y=b[h],m.z=b[l],m=a.transformVector(m),b[o]=m.x,b[h]=m.y,b[l]=m.z,o+=d,q&&(h=z+1,l=z+2,m.x=f[z],m.y=f[h],m.z=f[l],m=r.deltaTransformVector(m),m.normalize(),f[z]=m.x,f[h]=m.y,f[l]=m.z,z+=e),s&&(h=u+1,l=u+2,m.x=p[u],m.y=p[h],m.z=
p[l],m=r.deltaTransformVector(m),m.normalize(),p[u]=m.x,p[h]=m.y,p[l]=m.z,u+=g),++k},updateDummyUVs:function(a){this._uvsDirty=!1;var b,f;b=this.get_UVStride();var c=b-2,i=k["int"](this._vertexData.length/this.get_vertexStride()*b);null==a&&(a=[]);d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(a),i);b=this.get_UVOffset();for(f=0;b<i;)a[b++]=0.5*f,a[b++]=1-(f&1),b+=c,3==++f&&(f=0);return a},__class__:d.core.base.SubGeometryBase,__properties__:{get_scaleV:"get_scaleV",get_scaleU:"get_scaleU",
set_parentGeometry:"set_parentGeometry",get_parentGeometry:"get_parentGeometry",get_UVOffset:"get_UVOffset",get_vertexTangentOffset:"get_vertexTangentOffset",get_vertexNormalOffset:"get_vertexNormalOffset",get_vertexOffset:"get_vertexOffset",get_vertexTangentStride:"get_vertexTangentStride",get_vertexNormalStride:"get_vertexNormalStride",get_vertexStride:"get_vertexStride",get_UVData:"get_UVData",get_vertexTangentData:"get_vertexTangentData",get_vertexNormalData:"get_vertexNormalData",get_vertexPositionData:"get_vertexPositionData",
get_vertexData:"get_vertexData",get_UVStride:"get_UVStride",get_faceNormals:"get_faceNormals",set_autoDeriveVertexTangents:"set_autoDeriveVertexTangents",get_autoDeriveVertexTangents:"get_autoDeriveVertexTangents",get_indexData:"get_indexData",get_numTriangles:"get_numTriangles",set_useFaceWeights:"set_useFaceWeights",get_useFaceWeights:"get_useFaceWeights",set_autoDeriveVertexNormals:"set_autoDeriveVertexNormals",get_autoDeriveVertexNormals:"get_autoDeriveVertexNormals",set_autoGenerateDummyUVs:"set_autoGenerateDummyUVs",
get_autoGenerateDummyUVs:"get_autoGenerateDummyUVs"}};d.core.base.ISubGeometry=function(){};h["away3d.core.base.ISubGeometry"]=d.core.base.ISubGeometry;d.core.base.ISubGeometry.__name__=["away3d","core","base","ISubGeometry"];d.core.base.ISubGeometry.prototype={__class__:d.core.base.ISubGeometry,__properties__:{get_vertexPositionData:"get_vertexPositionData",set_autoDeriveVertexTangents:"set_autoDeriveVertexTangents",get_autoDeriveVertexTangents:"get_autoDeriveVertexTangents",set_autoDeriveVertexNormals:"set_autoDeriveVertexNormals",
get_autoDeriveVertexNormals:"get_autoDeriveVertexNormals",get_faceNormals:"get_faceNormals",set_parentGeometry:"set_parentGeometry",get_parentGeometry:"get_parentGeometry",get_scaleV:"get_scaleV",get_scaleU:"get_scaleU",get_UVData:"get_UVData",get_indexData:"get_indexData",get_secondaryUVOffset:"get_secondaryUVOffset",get_UVOffset:"get_UVOffset",get_vertexTangentOffset:"get_vertexTangentOffset",get_vertexNormalOffset:"get_vertexNormalOffset",get_vertexOffset:"get_vertexOffset",get_vertexTangentData:"get_vertexTangentData",
get_vertexNormalData:"get_vertexNormalData",get_vertexData:"get_vertexData",get_secondaryUVStride:"get_secondaryUVStride",get_UVStride:"get_UVStride",get_vertexTangentStride:"get_vertexTangentStride",get_vertexNormalStride:"get_vertexNormalStride",get_vertexStride:"get_vertexStride",get_numTriangles:"get_numTriangles",get_numVertices:"get_numVertices"}};d.core.base.CompactSubGeometry=function(){d.core.base.SubGeometryBase.call(this);this._vertexDataInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8);this._vertexBuffer=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._bufferContext=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._autoDeriveVertexTangents=this._autoDeriveVertexNormals=!1};h["away3d.core.base.CompactSubGeometry"]=d.core.base.CompactSubGeometry;d.core.base.CompactSubGeometry.__name__=["away3d","core","base","CompactSubGeometry"];d.core.base.CompactSubGeometry.__interfaces__=[d.core.base.ISubGeometry];d.core.base.CompactSubGeometry.__super__=
d.core.base.SubGeometryBase;d.core.base.CompactSubGeometry.prototype=q(d.core.base.SubGeometryBase.prototype,{get_numVertices:function(){return this._numVertices},updateData:function(a){this._autoDeriveVertexNormals&&(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0);this._isolatedVertexPositionDataDirty=this._faceTangentsDirty=this._faceNormalsDirty=!0;this._vertexData=a;a=this._vertexData.length/13|0;a!=this._numVertices&&this.disposeVertexBuffers(this._vertexBuffer);
this._numVertices=a;if(0==this._numVertices)throw new c.errors.Error("Bad data: geometry can't have zero triangles");this.invalidateBuffers(this._vertexDataInvalid);this.invalidateBounds()},activateVertexBuffer:function(a,b){var f=b._stage3DIndex,p=b._context3D;f!=this._contextIndex&&this.updateActiveBuffer(f);(null==this._activeBuffer||this._activeContext!=p)&&this.createBuffer(f,p);this._activeDataInvalid&&this.uploadData(f);p.setVertexBufferAt(a,this._activeBuffer,0,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},
activateUVBuffer:function(a,b){var f=b._stage3DIndex,p=b._context3D;this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData),this.invalidateBuffers(this._vertexDataInvalid));f!=this._contextIndex&&this.updateActiveBuffer(f);(null==this._activeBuffer||this._activeContext!=p)&&this.createBuffer(f,p);this._activeDataInvalid&&this.uploadData(f);p.setVertexBufferAt(a,this._activeBuffer,9,c.display3D.Context3DVertexBufferFormat.FLOAT_2)},activateSecondaryUVBuffer:function(a,
b){var f=b._stage3DIndex,p=b._context3D;f!=this._contextIndex&&this.updateActiveBuffer(f);(null==this._activeBuffer||this._activeContext!=p)&&this.createBuffer(f,p);this._activeDataInvalid&&this.uploadData(f);p.setVertexBufferAt(a,this._activeBuffer,11,c.display3D.Context3DVertexBufferFormat.FLOAT_2)},uploadData:function(a){this._activeBuffer.uploadFromVector(this._vertexData,0,this._numVertices);this._vertexDataInvalid[a]=this._activeDataInvalid=!1},activateVertexNormalBuffer:function(a,b){var f=
b._stage3DIndex,p=b._context3D;f!=this._contextIndex&&this.updateActiveBuffer(f);(null==this._activeBuffer||this._activeContext!=p)&&this.createBuffer(f,p);this._activeDataInvalid&&this.uploadData(f);p.setVertexBufferAt(a,this._activeBuffer,3,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},activateVertexTangentBuffer:function(a,b){var f=b._stage3DIndex,p=b._context3D;f!=this._contextIndex&&this.updateActiveBuffer(f);(null==this._activeBuffer||this._activeContext!=p)&&this.createBuffer(f,p);this._activeDataInvalid&&
this.uploadData(f);p.setVertexBufferAt(a,this._activeBuffer,6,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},createBuffer:function(a,b){this._vertexBuffer[a]=this._activeBuffer=b.createVertexBuffer(this._numVertices,13);this._bufferContext[a]=this._activeContext=b;this._vertexDataInvalid[a]=this._activeDataInvalid=!0},updateActiveBuffer:function(a){this._contextIndex=a;this._activeDataInvalid=this._vertexDataInvalid[a];this._activeBuffer=this._vertexBuffer[a];this._activeContext=this._bufferContext[a]},
get_vertexData:function(){this._autoDeriveVertexNormals&&this._vertexNormalsDirty&&(this._vertexData=this.updateVertexNormals(this._vertexData));this._autoDeriveVertexTangents&&this._vertexTangentsDirty&&(this._vertexData=this.updateVertexTangents(this._vertexData));this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData));return this._vertexData},updateVertexNormals:function(a){this.invalidateBuffers(this._vertexDataInvalid);return d.core.base.SubGeometryBase.prototype.updateVertexNormals.call(this,
a)},updateVertexTangents:function(a){this._vertexNormalsDirty&&(this._vertexData=this.updateVertexNormals(this._vertexData));this.invalidateBuffers(this._vertexDataInvalid);return d.core.base.SubGeometryBase.prototype.updateVertexTangents.call(this,a)},get_vertexNormalData:function(){this._autoDeriveVertexNormals&&this._vertexNormalsDirty&&(this._vertexData=this.updateVertexNormals(this._vertexData));return this._vertexData},get_vertexTangentData:function(){this._autoDeriveVertexTangents&&this._vertexTangentsDirty&&
(this._vertexData=this.updateVertexTangents(this._vertexData));return this._vertexData},get_UVData:function(){this._uvsDirty&&this._autoGenerateUVs&&(this._vertexData=this.updateDummyUVs(this._vertexData),this.invalidateBuffers(this._vertexDataInvalid));return this._vertexData},applyTransformation:function(a){d.core.base.SubGeometryBase.prototype.applyTransformation.call(this,a);this.invalidateBuffers(this._vertexDataInvalid)},scale:function(a){d.core.base.SubGeometryBase.prototype.scale.call(this,
a);this.invalidateBuffers(this._vertexDataInvalid)},clone:function(){var a=new d.core.base.CompactSubGeometry;a._autoDeriveVertexNormals=this._autoDeriveVertexNormals;a._autoDeriveVertexTangents=this._autoDeriveVertexTangents;a.updateData(this._vertexData.slice());a.updateIndexData(this._indices.slice());return a},scaleUV:function(a,b){null==b&&(b=1);null==a&&(a=1);d.core.base.SubGeometryBase.prototype.scaleUV.call(this,a,b);this.invalidateBuffers(this._vertexDataInvalid)},get_vertexStride:function(){return 13},
get_vertexNormalStride:function(){return 13},get_vertexTangentStride:function(){return 13},get_UVStride:function(){return 13},get_secondaryUVStride:function(){return 13},get_vertexOffset:function(){return 0},get_vertexNormalOffset:function(){return 3},get_vertexTangentOffset:function(){return 6},get_UVOffset:function(){return 9},get_secondaryUVOffset:function(){return 11},dispose:function(){d.core.base.SubGeometryBase.prototype.dispose.call(this);this.disposeVertexBuffers(this._vertexBuffer);this._vertexBuffer=
null},disposeVertexBuffers:function(a){d.core.base.SubGeometryBase.prototype.disposeVertexBuffers.call(this,a);this._activeBuffer=null},invalidateBuffers:function(a){d.core.base.SubGeometryBase.prototype.invalidateBuffers.call(this,a);this._activeDataInvalid=!0},cloneWithSeperateBuffers:function(){var a=new d.core.base.SubGeometry;a.updateVertexData(null!=this._isolatedVertexPositionData?this._isolatedVertexPositionData:this._isolatedVertexPositionData=this.stripBuffer(0,3));a.set_autoDeriveVertexNormals(this._autoDeriveVertexNormals);
a.set_autoDeriveVertexTangents(this._autoDeriveVertexTangents);this._autoDeriveVertexNormals||a.updateVertexNormalData(this.stripBuffer(3,3));this._autoDeriveVertexTangents||a.updateVertexTangentData(this.stripBuffer(6,3));a.updateUVData(this.stripBuffer(9,2));a.updateSecondaryUVData(this.stripBuffer(11,2));a.updateIndexData(this.get_indexData().slice());return a},get_vertexPositionData:function(){if(this._isolatedVertexPositionDataDirty||null==this._isolatedVertexPositionData)this._isolatedVertexPositionData=
this.stripBuffer(0,3),this._isolatedVertexPositionDataDirty=!1;return this._isolatedVertexPositionData},stripBuffer:function(a,b){for(var f=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),this._numVertices*b),c=0,i=a,e=13-b,g=0;g<this._numVertices;){for(var o=0;o<b;)f[c++]=this._vertexData[i++],++o;i+=e;++g}return f},fromVectors:function(a,b,f,c){for(var i=13*(a.length/3)|0,e=0,g=0,o=0,h=0,A=0,n=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
i,0);e<i;)(n[e++]=a[g++],n[e++]=a[g++],n[e++]=a[g++],null!=f&&0<f.length?(n[e++]=f[o++],n[e++]=f[o++],n[e++]=f[o++]):(n[e++]=0,n[e++]=0,n[e++]=0),null!=c&&0<c.length?(n[e++]=c[h++],n[e++]=c[h++],n[e++]=c[h++]):(n[e++]=0,n[e++]=0,n[e++]=0),null!=b&&0<b.length)?(n[e++]=b[A],n[e++]=b[A+1],n[e++]=b[A++],n[e++]=b[A++]):(n[e++]=0,n[e++]=0,n[e++]=0,n[e++]=0);this.set_autoDeriveVertexNormals(!(null!=f&&0<f.length));this.set_autoDeriveVertexTangents(!(null!=c&&0<c.length));this.set_autoGenerateDummyUVs(!(null!=
b&&0<b.length));this.updateData(n)},__class__:d.core.base.CompactSubGeometry,__properties__:q(d.core.base.SubGeometryBase.prototype.__properties__,{get_secondaryUVOffset:"get_secondaryUVOffset",get_secondaryUVStride:"get_secondaryUVStride",get_numVertices:"get_numVertices"})});d.core.base.Geometry=function(){d.library.assets.NamedAssetBase.call(this);this._subGeometries=[]};h["away3d.core.base.Geometry"]=d.core.base.Geometry;d.core.base.Geometry.__name__=["away3d","core","base","Geometry"];d.core.base.Geometry.__interfaces__=
[d.library.assets.IAsset];d.core.base.Geometry.__super__=d.library.assets.NamedAssetBase;d.core.base.Geometry.prototype=q(d.library.assets.NamedAssetBase.prototype,{get_assetType:function(){return d.library.assets.Asset3DType.GEOMETRY},get_subGeometries:function(){return this._subGeometries},applyTransformation:function(a){for(var b=this._subGeometries.length,f=0;f<b;)this._subGeometries[f].applyTransformation(a),++f},addSubGeometry:function(a){this._subGeometries.push(a);a.set_parentGeometry(this);
this.hasEventListener(d.events.GeometryEvent.SUB_GEOMETRY_ADDED)&&this.dispatchEvent(new d.events.GeometryEvent(d.events.GeometryEvent.SUB_GEOMETRY_ADDED,a));this.invalidateBounds(a)},removeSubGeometry:function(a){this._subGeometries.splice(w.indexOf(this._subGeometries,a,0),1);a.set_parentGeometry(null);this.hasEventListener(d.events.GeometryEvent.SUB_GEOMETRY_REMOVED)&&this.dispatchEvent(new d.events.GeometryEvent(d.events.GeometryEvent.SUB_GEOMETRY_REMOVED,a));this.invalidateBounds(a)},clone:function(){for(var a=
new d.core.base.Geometry,b=this._subGeometries.length,f=0;f<b;)a.addSubGeometry(this._subGeometries[f].clone()),++f;return a},scale:function(a){for(var b=this._subGeometries.length,f=0;f<b;)this._subGeometries[f].scale(a),++f},dispose:function(){for(var a=this._subGeometries.length,b=0;b<a;){var f=this._subGeometries[0];this.removeSubGeometry(f);f.dispose();++b}},scaleUV:function(a,b){null==b&&(b=1);null==a&&(a=1);for(var f=this._subGeometries.length,c=0;c<f;)this._subGeometries[c].scaleUV(a,b),++c},
convertToSeparateBuffers:function(){for(var a,b=this._subGeometries.length,f=[],c=0;c<b;)a=this._subGeometries[c],s.Boot.__instanceof(a,d.core.base.SubGeometry)||(f.push(a),this.addSubGeometry(a.cloneWithSeperateBuffers())),++c;for(a=0;a<f.length;)b=f[a],++a,this.removeSubGeometry(b),b.dispose()},validate:function(){},invalidateBounds:function(a){this.hasEventListener(d.events.GeometryEvent.BOUNDS_INVALID)&&this.dispatchEvent(new d.events.GeometryEvent(d.events.GeometryEvent.BOUNDS_INVALID,a))},__class__:d.core.base.Geometry,
__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,{get_subGeometries:"get_subGeometries",get_assetType:"get_assetType"})});d.core.base.IMaterialOwner=function(){};h["away3d.core.base.IMaterialOwner"]=d.core.base.IMaterialOwner;d.core.base.IMaterialOwner.__name__=["away3d","core","base","IMaterialOwner"];d.core.base.IMaterialOwner.prototype={__class__:d.core.base.IMaterialOwner,__properties__:{get_animator:"get_animator",set_material:"set_material",get_material:"get_material"}};
d.core.base.IRenderable=function(){};h["away3d.core.base.IRenderable"]=d.core.base.IRenderable;d.core.base.IRenderable.__name__=["away3d","core","base","IRenderable"];d.core.base.IRenderable.__interfaces__=[d.core.base.IMaterialOwner];d.core.base.IRenderable.prototype={__class__:d.core.base.IRenderable,__properties__:{get_UVData:"get_UVData",get_indexData:"get_indexData",get_vertexTangentData:"get_vertexTangentData",get_vertexNormalData:"get_vertexNormalData",get_vertexData:"get_vertexData",get_vertexStride:"get_vertexStride",
get_numTriangles:"get_numTriangles",get_numVertices:"get_numVertices",get_shaderPickingDetails:"get_shaderPickingDetails",get_uvTransform:"get_uvTransform",get_castsShadows:"get_castsShadows",get_sourceEntity:"get_sourceEntity",get_mouseEnabled:"get_mouseEnabled",get_inverseSceneTransform:"get_inverseSceneTransform",get_sceneTransform:"get_sceneTransform"}};d.core.base.SkinnedSubGeometry=function(a){this._jointWeightsBuffer=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8);this._jointIndexBuffer=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._jointWeightsInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8,!1);this._jointIndicesInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8,!1);this._jointWeightContext=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._jointIndexContext=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8);d.core.base.CompactSubGeometry.call(this);this._jointsPerVertex=a;this._bufferFormat=this.getVertexBufferFormat(this._jointsPerVertex)};h["away3d.core.base.SkinnedSubGeometry"]=d.core.base.SkinnedSubGeometry;d.core.base.SkinnedSubGeometry.__name__=["away3d","core","base","SkinnedSubGeometry"];d.core.base.SkinnedSubGeometry.__super__=d.core.base.CompactSubGeometry;d.core.base.SkinnedSubGeometry.prototype=q(d.core.base.CompactSubGeometry.prototype,{getVertexBufferFormat:function(a){switch(a){case 1:return c.display3D.Context3DVertexBufferFormat.FLOAT_1;
case 2:return c.display3D.Context3DVertexBufferFormat.FLOAT_2;case 3:return c.display3D.Context3DVertexBufferFormat.FLOAT_3;case 4:return c.display3D.Context3DVertexBufferFormat.FLOAT_3;default:return null}},get_condensedIndexLookUp:function(){return this._condensedIndexLookUp},get_numCondensedJoints:function(){return this._numCondensedJoints},get_animatedData:function(){return null!=this._animatedData?this._animatedData:this._vertexData.slice()},updateAnimatedData:function(a){this._animatedData=
a;this.invalidateBuffers(this._vertexDataInvalid)},activateJointWeightsBuffer:function(a,b){var f=b._stage3DIndex,c=b._context3D;if(this._jointWeightContext[f]!=c||null==this._jointWeightsBuffer[f])this._jointWeightsBuffer[f]=c.createVertexBuffer(this._numVertices,this._jointsPerVertex),this._jointWeightContext[f]=c,this._jointWeightsInvalid[f]=!0;this._jointWeightsInvalid[f]&&(this._jointWeightsBuffer[f].uploadFromVector(this._jointWeightsData,0,this._jointWeightsData.length/this._jointsPerVertex|
0),this._jointWeightsInvalid[f]=!1);c.setVertexBufferAt(a,this._jointWeightsBuffer[f],0,this._bufferFormat)},activateJointIndexBuffer:function(a,b){var f=b._stage3DIndex,c=b._context3D;if(this._jointIndexContext[f]!=c||null==this._jointIndexBuffer[f])this._jointIndexBuffer[f]=c.createVertexBuffer(this._numVertices,this._jointsPerVertex),this._jointIndexContext[f]=c,this._jointIndicesInvalid[f]=!0;this._jointIndicesInvalid[f]&&(this._jointIndexBuffer[f].uploadFromVector(0<this._numCondensedJoints?
this._condensedJointIndexData:this._jointIndexData,0,this._jointIndexData.length/this._jointsPerVertex|0),this._jointIndicesInvalid[f]=!1);c.setVertexBufferAt(a,this._jointIndexBuffer[f],0,this._bufferFormat)},uploadData:function(a){null!=this._animatedData?(this._activeBuffer.uploadFromVector(this._animatedData,0,this._numVertices),this._vertexDataInvalid[a]=this._activeDataInvalid=!1):d.core.base.CompactSubGeometry.prototype.uploadData.call(this,a)},clone:function(){var a=new d.core.base.SkinnedSubGeometry(this._jointsPerVertex);
a.updateData(this._vertexData.slice());a.updateIndexData(this._indices.slice());a.updateJointIndexData(this._jointIndexData.slice());a.updateJointWeightsData(this._jointWeightsData.slice());a._autoDeriveVertexNormals=this._autoDeriveVertexNormals;a._autoDeriveVertexTangents=this._autoDeriveVertexTangents;a._numCondensedJoints=this._numCondensedJoints;a._condensedIndexLookUp=this._condensedIndexLookUp;a._condensedJointIndexData=this._condensedJointIndexData;return a},dispose:function(){d.core.base.CompactSubGeometry.prototype.dispose.call(this);
this.disposeVertexBuffers(this._jointWeightsBuffer);this.disposeVertexBuffers(this._jointIndexBuffer)},condenseIndexData:function(){var a=this._jointIndexData.length,b,f=0,c=new m.ds.IntMap;this._condensedJointIndexData=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),a,0);this._condensedIndexLookUp=[];for(var i=0;i<a;)b=this._jointIndexData[i],c.exists(b)||(c.set(b,f),this._condensedIndexLookUp[f++]=b,this._condensedIndexLookUp[f++]=b+1,this._condensedIndexLookUp[f++]=
b+2),this._condensedJointIndexData[i]=c.get(b),++i;this._numCondensedJoints=f/3|0;this.invalidateBuffers(this._jointIndicesInvalid)},get_jointWeightsData:function(){return this._jointWeightsData},updateJointWeightsData:function(a){this._numCondensedJoints=0;this._condensedJointIndexData=this._condensedIndexLookUp=null;this._jointWeightsData=a;this.invalidateBuffers(this._jointWeightsInvalid)},get_jointIndexData:function(){return this._jointIndexData},updateJointIndexData:function(a){this._jointIndexData=
a;this.invalidateBuffers(this._jointIndicesInvalid)},__class__:d.core.base.SkinnedSubGeometry,__properties__:q(d.core.base.CompactSubGeometry.prototype.__properties__,{get_jointIndexData:"get_jointIndexData",get_jointWeightsData:"get_jointWeightsData",get_animatedData:"get_animatedData",get_numCondensedJoints:"get_numCondensedJoints",get_condensedIndexLookUp:"get_condensedIndexLookUp"})});d.core.base.SubGeometry=function(){d.core.base.SubGeometryBase.call(this);this._verticesInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8);this._uvsInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._secondaryUvsInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._normalsInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._tangentsInvalid=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._vertexBuffer=[];this._uvBuffer=[];this._secondaryUvBuffer=[];this._vertexNormalBuffer=[];this._vertexTangentBuffer=
[];this._vertexBufferContext=[];this._uvBufferContext=[];this._secondaryUvBufferContext=[];this._vertexNormalBufferContext=[];this._vertexTangentBufferContext=[]};h["away3d.core.base.SubGeometry"]=d.core.base.SubGeometry;d.core.base.SubGeometry.__name__=["away3d","core","base","SubGeometry"];d.core.base.SubGeometry.__interfaces__=[d.core.base.ISubGeometry];d.core.base.SubGeometry.__super__=d.core.base.SubGeometryBase;d.core.base.SubGeometry.prototype=q(d.core.base.SubGeometryBase.prototype,{get_numVertices:function(){return this._numVertices},
activateVertexBuffer:function(a,b){var f=b._stage3DIndex,p=b._context3D;if(null==this._vertexBuffer[f]||this._vertexBufferContext[f]!=p)this._vertexBuffer[f]=p.createVertexBuffer(this._numVertices,3),this._vertexBufferContext[f]=p,this._verticesInvalid[f]=!0;this._verticesInvalid[f]&&(this._vertexBuffer[f].uploadFromVector(this._vertexData,0,this._numVertices),this._verticesInvalid[f]=!1);p.setVertexBufferAt(a,this._vertexBuffer[f],0,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},activateUVBuffer:function(a,
b){var f=b._stage3DIndex,p=b._context3D;this._autoGenerateUVs&&this._uvsDirty&&(this._uvs=this.updateDummyUVs(this._uvs));if(null==this._uvBuffer[f]||this._uvBufferContext[f]!=p)this._uvBuffer[f]=p.createVertexBuffer(this._numVertices,2),this._uvBufferContext[f]=p,this._uvsInvalid[f]=!0;this._uvsInvalid[f]&&(this._uvBuffer[f].uploadFromVector(this._uvs,0,this._numVertices),this._uvsInvalid[f]=!1);p.setVertexBufferAt(a,this._uvBuffer[f],0,c.display3D.Context3DVertexBufferFormat.FLOAT_2)},activateSecondaryUVBuffer:function(a,
b){var f=b._stage3DIndex,p=b._context3D;if(null==this._secondaryUvBuffer[f]||this._secondaryUvBufferContext[f]!=p)this._secondaryUvBuffer[f]=p.createVertexBuffer(this._numVertices,2),this._secondaryUvBufferContext[f]=p,this._secondaryUvsInvalid[f]=!0;this._secondaryUvsInvalid[f]&&(this._secondaryUvBuffer[f].uploadFromVector(this._secondaryUvs,0,this._numVertices),this._secondaryUvsInvalid[f]=!1);p.setVertexBufferAt(a,this._secondaryUvBuffer[f],0,c.display3D.Context3DVertexBufferFormat.FLOAT_2)},activateVertexNormalBuffer:function(a,
b){var f=b._stage3DIndex,p=b._context3D;this._autoDeriveVertexNormals&&this._vertexNormalsDirty&&(this._vertexNormals=this.updateVertexNormals(this._vertexNormals));if(null==this._vertexNormalBuffer[f]||this._vertexNormalBufferContext[f]!=p)this._vertexNormalBuffer[f]=p.createVertexBuffer(this._numVertices,3),this._vertexNormalBufferContext[f]=p,this._normalsInvalid[f]=!0;this._normalsInvalid[f]&&(this._vertexNormalBuffer[f].uploadFromVector(this._vertexNormals,0,this._numVertices),this._normalsInvalid[f]=
!1);p.setVertexBufferAt(a,this._vertexNormalBuffer[f],0,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},activateVertexTangentBuffer:function(a,b){var f=b._stage3DIndex,p=b._context3D;this._vertexTangentsDirty&&(this._vertexTangents=this.updateVertexTangents(this._vertexTangents));if(null==this._vertexTangentBuffer[f]||this._vertexTangentBufferContext[f]!=p)this._vertexTangentBuffer[f]=p.createVertexBuffer(this._numVertices,3),this._vertexTangentBufferContext[f]=p,this._tangentsInvalid[f]=!0;this._tangentsInvalid[f]&&
(this._vertexTangentBuffer[f].uploadFromVector(this._vertexTangents,0,this._numVertices),this._tangentsInvalid[f]=!1);p.setVertexBufferAt(a,this._vertexTangentBuffer[f],0,c.display3D.Context3DVertexBufferFormat.FLOAT_3)},applyTransformation:function(a){d.core.base.SubGeometryBase.prototype.applyTransformation.call(this,a);this.invalidateBuffers(this._verticesInvalid);this.invalidateBuffers(this._normalsInvalid);this.invalidateBuffers(this._tangentsInvalid)},clone:function(){var a=new d.core.base.SubGeometry;
a.updateVertexData(this._vertexData.slice());a.updateUVData(this._uvs.slice());a.updateIndexData(this._indices.slice());null!=this._secondaryUvs&&a.updateSecondaryUVData(this._secondaryUvs.slice());this._autoDeriveVertexNormals||a.updateVertexNormalData(this._vertexNormals.slice());this._autoDeriveVertexTangents||a.updateVertexTangentData(this._vertexTangents.slice());return a},scale:function(a){d.core.base.SubGeometryBase.prototype.scale.call(this,a);this.invalidateBuffers(this._verticesInvalid)},
scaleUV:function(a,b){null==b&&(b=1);null==a&&(a=1);d.core.base.SubGeometryBase.prototype.scaleUV.call(this,a,b);this.invalidateBuffers(this._uvsInvalid)},dispose:function(){d.core.base.SubGeometryBase.prototype.dispose.call(this);this.disposeAllVertexBuffers();this._vertexTangentBufferContext=this._vertexNormalBufferContext=this._secondaryUvBufferContext=this._uvBufferContext=this._vertexBufferContext=this._vertexTangents=this._vertexNormals=this._secondaryUvs=this._uvs=this._indexBuffer=this._vertexTangentBuffer=
this._secondaryUvBuffer=this._uvBuffer=this._vertexNormalBuffer=this._vertexBuffer=null},disposeAllVertexBuffers:function(){this.disposeVertexBuffers(this._vertexBuffer);this.disposeVertexBuffers(this._vertexNormalBuffer);this.disposeVertexBuffers(this._uvBuffer);this.disposeVertexBuffers(this._secondaryUvBuffer);this.disposeVertexBuffers(this._vertexTangentBuffer)},get_vertexData:function(){return this._vertexData},get_vertexPositionData:function(){return this._vertexData},updateVertexData:function(a){this._autoDeriveVertexNormals&&
(this._vertexNormalsDirty=!0);this._autoDeriveVertexTangents&&(this._vertexTangentsDirty=!0);this._faceNormalsDirty=!0;this._vertexData=a;a=a.length/3|0;a!=this._numVertices&&this.disposeAllVertexBuffers();this._numVertices=a;this.invalidateBuffers(this._verticesInvalid);this.invalidateBounds()},get_UVData:function(){this._uvsDirty&&this._autoGenerateUVs&&(this._uvs=this.updateDummyUVs(this._uvs));return this._uvs},get_secondaryUVData:function(){return this._secondaryUvs},updateUVData:function(a){this._autoDeriveVertexTangents&&
(this._vertexTangentsDirty=!0);this._faceTangentsDirty=!0;this._uvs=a;this.invalidateBuffers(this._uvsInvalid)},updateSecondaryUVData:function(a){this._secondaryUvs=a;this.invalidateBuffers(this._secondaryUvsInvalid)},get_vertexNormalData:function(){this._autoDeriveVertexNormals&&this._vertexNormalsDirty&&(this._vertexNormals=this.updateVertexNormals(this._vertexNormals));return this._vertexNormals},updateVertexNormalData:function(a){this._vertexNormalsDirty=!1;this._autoDeriveVertexNormals=null==
a;this._vertexNormals=a;this.invalidateBuffers(this._normalsInvalid)},get_vertexTangentData:function(){this._autoDeriveVertexTangents&&this._vertexTangentsDirty&&(this._vertexTangents=this.updateVertexTangents(this._vertexTangents));return this._vertexTangents},updateVertexTangentData:function(a){this._vertexTangentsDirty=!1;this._autoDeriveVertexTangents=null==a;this._vertexTangents=a;this.invalidateBuffers(this._tangentsInvalid)},fromVectors:function(a,b,f,c){this.updateVertexData(a);this.updateUVData(b);
this.updateVertexNormalData(f);this.updateVertexTangentData(c)},updateVertexNormals:function(a){this.invalidateBuffers(this._normalsInvalid);return d.core.base.SubGeometryBase.prototype.updateVertexNormals.call(this,a)},updateVertexTangents:function(a){this._vertexNormalsDirty&&(this._vertexNormals=this.updateVertexNormals(this._vertexNormals));this.invalidateBuffers(this._tangentsInvalid);return d.core.base.SubGeometryBase.prototype.updateVertexTangents.call(this,a)},updateDummyUVs:function(a){this.invalidateBuffers(this._uvsInvalid);
return d.core.base.SubGeometryBase.prototype.updateDummyUVs.call(this,a)},disposeForStage3D:function(a){a=a._stage3DIndex;null!=this._vertexBuffer[a]&&(this._vertexBuffer[a].dispose(),this._vertexBuffer[a]=null);null!=this._uvBuffer[a]&&(this._uvBuffer[a].dispose(),this._uvBuffer[a]=null);null!=this._secondaryUvBuffer[a]&&(this._secondaryUvBuffer[a].dispose(),this._secondaryUvBuffer[a]=null);null!=this._vertexNormalBuffer[a]&&(this._vertexNormalBuffer[a].dispose(),this._vertexNormalBuffer[a]=null);
null!=this._vertexTangentBuffer[a]&&(this._vertexTangentBuffer[a].dispose(),this._vertexTangentBuffer[a]=null);null!=this._indexBuffer[a]&&(this._indexBuffer[a].dispose(),this._indexBuffer[a]=null)},get_vertexStride:function(){return 3},get_vertexTangentStride:function(){return 3},get_vertexNormalStride:function(){return 3},get_UVStride:function(){return 2},get_secondaryUVStride:function(){return 2},get_vertexOffset:function(){return 0},get_vertexNormalOffset:function(){return 0},get_vertexTangentOffset:function(){return 0},
get_UVOffset:function(){return 0},get_secondaryUVOffset:function(){return 0},cloneWithSeperateBuffers:function(){return s.Boot.__cast(this.clone(),d.core.base.SubGeometry)},__class__:d.core.base.SubGeometry,__properties__:q(d.core.base.SubGeometryBase.prototype.__properties__,{get_secondaryUVOffset:"get_secondaryUVOffset",get_secondaryUVStride:"get_secondaryUVStride",get_secondaryUVData:"get_secondaryUVData",get_numVertices:"get_numVertices"})});d.core.base.SubMesh=function(a,b,f){this._uvRotation=
0;this._scaleV=this._scaleU=1;this._offsetV=this._offsetU=0;this._parentMesh=b;this._subGeometry=a;this.set_material(f)};h["away3d.core.base.SubMesh"]=d.core.base.SubMesh;d.core.base.SubMesh.__name__=["away3d","core","base","SubMesh"];d.core.base.SubMesh.__interfaces__=[d.core.base.IRenderable];d.core.base.SubMesh.prototype={get_shaderPickingDetails:function(){return this.get_sourceEntity().get_shaderPickingDetails()},get_offsetU:function(){return this._offsetU},set_offsetU:function(a){if(a==this._offsetU)return a;
this._offsetU=a;this._uvTransformDirty=!0;return a},get_offsetV:function(){return this._offsetV},set_offsetV:function(a){if(a==this._offsetV)return a;this._offsetV=a;this._uvTransformDirty=!0;return a},get_scaleU:function(){return this._scaleU},set_scaleU:function(a){if(a==this._scaleU)return a;this._scaleU=a;this._uvTransformDirty=!0;return a},get_scaleV:function(){return this._scaleV},set_scaleV:function(a){if(a==this._scaleV)return a;this._scaleV=a;this._uvTransformDirty=!0;return a},get_uvRotation:function(){return this._uvRotation},
set_uvRotation:function(a){if(a==this._uvRotation)return a;this._uvRotation=a;this._uvTransformDirty=!0;return a},get_sourceEntity:function(){return this._parentMesh},get_subGeometry:function(){return this._subGeometry},set_subGeometry:function(a){return this._subGeometry=a},get_material:function(){return null!=this._material?this._material:this._parentMesh.get_material()},set_material:function(a){null!=this._material&&this._material.removeOwner(this);this._material=a;null!=this._material&&this._material.addOwner(this);
return a},get_sceneTransform:function(){return this._parentMesh.get_sceneTransform()},get_inverseSceneTransform:function(){return this._parentMesh.get_inverseSceneTransform()},activateVertexBuffer:function(a,b){this._subGeometry.activateVertexBuffer(a,b)},activateVertexNormalBuffer:function(a,b){this._subGeometry.activateVertexNormalBuffer(a,b)},activateVertexTangentBuffer:function(a,b){this._subGeometry.activateVertexTangentBuffer(a,b)},activateUVBuffer:function(a,b){this._subGeometry.activateUVBuffer(a,
b)},activateSecondaryUVBuffer:function(a,b){this._subGeometry.activateSecondaryUVBuffer(a,b)},getIndexBuffer:function(a){return this._subGeometry.getIndexBuffer(a)},get_numTriangles:function(){return this._subGeometry.get_numTriangles()},get_animator:function(){return this._parentMesh.get_animator()},get_mouseEnabled:function(){return this._parentMesh.get_mouseEnabled()||this._parentMesh._ancestorsAllowMouseEnabled},get_castsShadows:function(){return this._parentMesh.get_castsShadows()},get_parentMesh:function(){return this._parentMesh},
set_parentMesh:function(a){return this._parentMesh=a},get_uvTransform:function(){this._uvTransformDirty&&this.updateUVTransform();return this._uvTransform},updateUVTransform:function(){null==this._uvTransform&&(this._uvTransform=new c.geom.Matrix);this._uvTransform.identity();0!=this._uvRotation&&this._uvTransform.rotate(this._uvRotation);(1!=this._scaleU||1!=this._scaleV)&&this._uvTransform.scale(this._scaleU,this._scaleV);this._uvTransform.translate(this._offsetU,this._offsetV);this._uvTransformDirty=
!1},dispose:function(){this.set_material(null)},get_vertexData:function(){return this._subGeometry.get_vertexData()},get_indexData:function(){return this._subGeometry.get_indexData()},get_UVData:function(){return this._subGeometry.get_UVData()},get_bounds:function(){return this._parentMesh.get_bounds()},get_visible:function(){return this._parentMesh.get_visible()},get_numVertices:function(){return this._subGeometry.get_numVertices()},get_vertexStride:function(){return this._subGeometry.get_vertexStride()},
get_UVStride:function(){return this._subGeometry.get_UVStride()},get_vertexNormalData:function(){return this._subGeometry.get_vertexNormalData()},get_vertexTangentData:function(){return this._subGeometry.get_vertexTangentData()},get_UVOffset:function(){return this._subGeometry.get_UVOffset()},get_vertexOffset:function(){return this._subGeometry.get_vertexOffset()},get_vertexNormalOffset:function(){return this._subGeometry.get_vertexNormalOffset()},get_vertexTangentOffset:function(){return this._subGeometry.get_vertexTangentOffset()},
getRenderSceneTransform:function(){return this._parentMesh.get_sceneTransform()},__class__:d.core.base.SubMesh,__properties__:{get_vertexTangentOffset:"get_vertexTangentOffset",get_vertexNormalOffset:"get_vertexNormalOffset",get_vertexOffset:"get_vertexOffset",get_UVOffset:"get_UVOffset",get_vertexTangentData:"get_vertexTangentData",get_vertexNormalData:"get_vertexNormalData",get_UVStride:"get_UVStride",get_vertexStride:"get_vertexStride",get_numVertices:"get_numVertices",get_visible:"get_visible",
get_bounds:"get_bounds",get_UVData:"get_UVData",get_indexData:"get_indexData",get_vertexData:"get_vertexData",get_uvTransform:"get_uvTransform",set_parentMesh:"set_parentMesh",get_parentMesh:"get_parentMesh",get_castsShadows:"get_castsShadows",get_mouseEnabled:"get_mouseEnabled",get_animator:"get_animator",get_numTriangles:"get_numTriangles",get_inverseSceneTransform:"get_inverseSceneTransform",get_sceneTransform:"get_sceneTransform",set_material:"set_material",get_material:"get_material",set_subGeometry:"set_subGeometry",
get_subGeometry:"get_subGeometry",get_sourceEntity:"get_sourceEntity",set_uvRotation:"set_uvRotation",get_uvRotation:"get_uvRotation",set_scaleV:"set_scaleV",get_scaleV:"get_scaleV",set_scaleU:"set_scaleU",get_scaleU:"get_scaleU",set_offsetV:"set_offsetV",get_offsetV:"get_offsetV",set_offsetU:"set_offsetU",get_offsetU:"get_offsetU",get_shaderPickingDetails:"get_shaderPickingDetails"}};d.core.base.data={};d.core.base.data.ParticleData=function(){};h["away3d.core.base.data.ParticleData"]=d.core.base.data.ParticleData;
d.core.base.data.ParticleData.__name__=["away3d","core","base","data","ParticleData"];d.core.base.data.ParticleData.prototype={__class__:d.core.base.data.ParticleData};d.core.data={};d.core.data.EntityListItem=function(){};h["away3d.core.data.EntityListItem"]=d.core.data.EntityListItem;d.core.data.EntityListItem.__name__=["away3d","core","data","EntityListItem"];d.core.data.EntityListItem.prototype={__class__:d.core.data.EntityListItem};d.core.data.EntityListItemPool=function(){this._poolSize=this._index=
0;this._pool=[]};h["away3d.core.data.EntityListItemPool"]=d.core.data.EntityListItemPool;d.core.data.EntityListItemPool.__name__=["away3d","core","data","EntityListItemPool"];d.core.data.EntityListItemPool.prototype={getItem:function(){var a;this._index==this._poolSize?(a=new d.core.data.EntityListItem,this._pool[this._index++]=a,++this._poolSize):a=this._pool[this._index++];return a},freeAll:function(){this._index=0},dispose:function(){this._pool=[]},__class__:d.core.data.EntityListItemPool};d.core.data.RenderableListItem=
function(){};h["away3d.core.data.RenderableListItem"]=d.core.data.RenderableListItem;d.core.data.RenderableListItem.__name__=["away3d","core","data","RenderableListItem"];d.core.data.RenderableListItem.prototype={__class__:d.core.data.RenderableListItem};d.core.data.RenderableListItemPool=function(){this._poolSize=this._index=0;this._pool=[]};h["away3d.core.data.RenderableListItemPool"]=d.core.data.RenderableListItemPool;d.core.data.RenderableListItemPool.__name__=["away3d","core","data","RenderableListItemPool"];
d.core.data.RenderableListItemPool.prototype={getItem:function(){if(this._index==this._poolSize){var a=new d.core.data.RenderableListItem;this._pool[this._index++]=a;++this._poolSize;return a}return this._pool[this._index++]},freeAll:function(){this._index=0},dispose:function(){this._pool=[]},__class__:d.core.data.RenderableListItemPool};d.core.managers={};d.core.managers.AGALProgram3DCache=function(a){this._stage3DProxy=a;this._program3Ds=new m.ds.StringMap;this._ids=new m.ds.StringMap;this._usages=
[];this._keys=[]};h["away3d.core.managers.AGALProgram3DCache"]=d.core.managers.AGALProgram3DCache;d.core.managers.AGALProgram3DCache.__name__=["away3d","core","managers","AGALProgram3DCache"];d.core.managers.AGALProgram3DCache._instances=null;d.core.managers.AGALProgram3DCache.getInstance=function(a){var b=a.get_stage3DIndex();null==d.core.managers.AGALProgram3DCache._instances&&(d.core.managers.AGALProgram3DCache._instances=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8));null==d.core.managers.AGALProgram3DCache._instances[b]&&(d.core.managers.AGALProgram3DCache._instances[b]=new d.core.managers.AGALProgram3DCache(a),a.addEventListener(d.events.Stage3DEvent.CONTEXT3D_DISPOSED,d.core.managers.AGALProgram3DCache.onContext3DDisposed,!1,0,!0),a.addEventListener(d.events.Stage3DEvent.CONTEXT3D_CREATED,d.core.managers.AGALProgram3DCache.onContext3DDisposed,!1,0,!0),a.addEventListener(d.events.Stage3DEvent.CONTEXT3D_RECREATED,d.core.managers.AGALProgram3DCache.onContext3DDisposed,
!1,0,!0));return d.core.managers.AGALProgram3DCache._instances[b]};d.core.managers.AGALProgram3DCache.getInstanceFromIndex=function(a){if(null==d.core.managers.AGALProgram3DCache._instances[a])throw new c.errors.Error("Instance not created yet!");return d.core.managers.AGALProgram3DCache._instances[a]};d.core.managers.AGALProgram3DCache.onContext3DDisposed=function(a){var a=s.Boot.__cast(a.target,d.core.managers.Stage3DProxy),b=a.get_stage3DIndex();d.core.managers.AGALProgram3DCache._instances[b].dispose();
d.core.managers.AGALProgram3DCache._instances[b]=null;a.removeEventListener(d.events.Stage3DEvent.CONTEXT3D_DISPOSED,d.core.managers.AGALProgram3DCache.onContext3DDisposed);a.removeEventListener(d.events.Stage3DEvent.CONTEXT3D_CREATED,d.core.managers.AGALProgram3DCache.onContext3DDisposed);a.removeEventListener(d.events.Stage3DEvent.CONTEXT3D_RECREATED,d.core.managers.AGALProgram3DCache.onContext3DDisposed)};d.core.managers.AGALProgram3DCache.prototype={dispose:function(){for(var a=this._program3Ds.keys();a.hasNext();){var b=
a.next();this.destroyProgram(b)}this._usages=this._program3Ds=this._keys=null},setProgram3D:function(a,b,f){var p=this._stage3DProxy.get_stage3DIndex(),i,e=b+"---"+f;this._program3Ds.exists(e)||(this._keys[d.core.managers.AGALProgram3DCache._currentId]=e,this._usages[d.core.managers.AGALProgram3DCache._currentId]=0,this._ids.set(e,d.core.managers.AGALProgram3DCache._currentId),++d.core.managers.AGALProgram3DCache._currentId,i=this._stage3DProxy.get_context3D().createProgram(),b=c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,
b),f=c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,f),i.upload(b,f),this._program3Ds.set(e,i));i=a._program3Dids[p];f=this._ids.get(e);i!=f&&(0<=i&&this.freeProgram3D(i),this._usages[f]++);a._program3Dids[p]=f;a._program3Ds[p]=this._program3Ds.get(e)},freeProgram3D:function(a){this._usages[a]--;0==this._usages[a]&&this.destroyProgram(this._keys[a])},destroyProgram:function(a){this._program3Ds.get(a).dispose();this._program3Ds.remove(a);this._ids.set(a,
-1)},getKey:function(a,b){return a+"---"+b},__class__:d.core.managers.AGALProgram3DCache};d.core.managers.AGALProgram3DCacheSingletonEnforcer=function(){};h["away3d.core.managers.AGALProgram3DCacheSingletonEnforcer"]=d.core.managers.AGALProgram3DCacheSingletonEnforcer;d.core.managers.AGALProgram3DCacheSingletonEnforcer.__name__=["away3d","core","managers","AGALProgram3DCacheSingletonEnforcer"];d.core.managers.AGALProgram3DCacheSingletonEnforcer.prototype={__class__:d.core.managers.AGALProgram3DCacheSingletonEnforcer};
c.events.Event=function(a,b,f){null==f&&(f=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=f;this.eventPhase=1};h["openfl.events.Event"]=c.events.Event;c.events.Event.__name__=["openfl","events","Event"];c.events.Event.prototype={clone:function(){var a=new c.events.Event(this.type,this.bubbles,this.cancelable);a.eventPhase=this.eventPhase;a.target=this.target;a.currentTarget=this.currentTarget;return a},isDefaultPrevented:function(){return this.__isCancelled||this.__isCancelledNow},
stopImmediatePropagation:function(){this.__isCancelledNow=this.__isCancelled=!0},stopPropagation:function(){this.__isCancelled=!0},toString:function(){return"[Event type="+this.type+" bubbles="+k.string(this.bubbles)+" cancelable="+k.string(this.cancelable)+"]"},__class__:c.events.Event};d.events={};d.events.MouseEvent3D=function(a){this._allowedToPropagate=!0;c.events.Event.call(this,a,!0,!0)};h["away3d.events.MouseEvent3D"]=d.events.MouseEvent3D;d.events.MouseEvent3D.__name__=["away3d","events",
"MouseEvent3D"];d.events.MouseEvent3D.__super__=c.events.Event;d.events.MouseEvent3D.prototype=q(c.events.Event.prototype,{stopPropagation:function(){c.events.Event.prototype.stopPropagation.call(this);this._allowedToPropagate=!1;null!=this._parentEvent&&this._parentEvent.stopPropagation()},stopImmediatePropagation:function(){c.events.Event.prototype.stopImmediatePropagation.call(this);this._allowedToPropagate=!1;null!=this._parentEvent&&this._parentEvent.stopImmediatePropagation()},clone:function(){var a=
new d.events.MouseEvent3D(this.type);a.screenX=this.screenX;a.screenY=this.screenY;a.view=this.view;a.object=this.object;a.renderable=this.renderable;a.material=this.material;a.uv=this.uv;a.localPosition=this.localPosition;a.localNormal=this.localNormal;a.index=this.index;a.subGeometryIndex=this.subGeometryIndex;a.delta=this.delta;a.ctrlKey=this.ctrlKey;a.shiftKey=this.shiftKey;a._parentEvent=this;a._allowedToPropagate=this._allowedToPropagate;return a},get_scenePosition:function(){return s.Boot.__instanceof(this.object,
d.containers.ObjectContainer3D)?s.Boot.__cast(this.object,d.containers.ObjectContainer3D).get_sceneTransform().transformVector(this.localPosition):this.localPosition},get_sceneNormal:function(){if(s.Boot.__instanceof(this.object,d.containers.ObjectContainer3D)){var a=s.Boot.__cast(this.object,d.containers.ObjectContainer3D).get_sceneTransform().deltaTransformVector(this.localNormal);a.normalize();return a}return this.localNormal},__class__:d.events.MouseEvent3D,__properties__:{get_sceneNormal:"get_sceneNormal",
get_scenePosition:"get_scenePosition"}});d.core.managers.Mouse3DManager=function(){this._updateDirty=!0;this._nullVector=new c.geom.Vector3D;this._mouseMoveEvent=new c.events.MouseEvent(c.events.MouseEvent.MOUSE_MOVE);this._mousePicker=d.core.pick.PickingType.RAYCAST_FIRST_ENCOUNTERED;this._childDepth=0;null==d.core.managers.Mouse3DManager._view3Ds&&(d.core.managers.Mouse3DManager._view3Ds=new m.ds.ObjectMap,d.core.managers.Mouse3DManager._view3DLookup=[])};h["away3d.core.managers.Mouse3DManager"]=
d.core.managers.Mouse3DManager;d.core.managers.Mouse3DManager.__name__=["away3d","core","managers","Mouse3DManager"];d.core.managers.Mouse3DManager._view3Ds=null;d.core.managers.Mouse3DManager._view3DLookup=null;d.core.managers.Mouse3DManager._collidingObject=null;d.core.managers.Mouse3DManager._previousCollidingObject=null;d.core.managers.Mouse3DManager._collidingViewObjects=null;d.core.managers.Mouse3DManager.prototype={updateCollider:function(a){d.core.managers.Mouse3DManager._previousCollidingView=
d.core.managers.Mouse3DManager._collidingView;if(null!=a)if(a.get_stage3DProxy().get_bufferClear()&&(d.core.managers.Mouse3DManager._collidingViewObjects=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),d.core.managers.Mouse3DManager._viewCount)),a.get_shareContext())a.parent.getBounds(null).contains(a.get_mouseX()+a.get_x(),a.get_mouseY()+a.get_y())&&(null==d.core.managers.Mouse3DManager._collidingViewObjects&&(d.core.managers.Mouse3DManager._collidingViewObjects=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
d.core.managers.Mouse3DManager._viewCount)),d.core.managers.Mouse3DManager._collidingObject=d.core.managers.Mouse3DManager._collidingViewObjects[d.core.managers.Mouse3DManager._view3Ds.h[a.__id__]]=this._mousePicker.getViewCollision(a.get_mouseX(),a.get_mouseY(),a));else if(a==this._activeView&&(this._forceMouseMove||this._updateDirty))d.core.managers.Mouse3DManager._collidingObject=this._mousePicker.getViewCollision(a.get_mouseX(),a.get_mouseY(),a)},fireMouseEvents:function(){var a=0,b,f,c;if(null!=
d.core.managers.Mouse3DManager._collidingViewObjects){d.core.managers.Mouse3DManager._collidingObject=null;a=Math.POSITIVE_INFINITY;for(f=d.core.managers.Mouse3DManager._viewCount-1;0<=f;){b=d.core.managers.Mouse3DManager._view3DLookup[f];if(null!=d.core.managers.Mouse3DManager._collidingViewObjects[f]&&(b.get_layeredView()||d.core.managers.Mouse3DManager._collidingViewObjects[f].rayEntryDistance<a))if(a=d.core.managers.Mouse3DManager._collidingViewObjects[f].rayEntryDistance,d.core.managers.Mouse3DManager._collidingObject=
d.core.managers.Mouse3DManager._collidingViewObjects[f],b.get_layeredView())break;f--}}d.core.managers.Mouse3DManager._collidingObject!=d.core.managers.Mouse3DManager._previousCollidingObject&&(null!=d.core.managers.Mouse3DManager._previousCollidingObject&&this.queueDispatch(d.core.managers.Mouse3DManager._mouseOut,this._mouseMoveEvent,d.core.managers.Mouse3DManager._previousCollidingObject),null!=d.core.managers.Mouse3DManager._collidingObject&&this.queueDispatch(d.core.managers.Mouse3DManager._mouseOver,
this._mouseMoveEvent,d.core.managers.Mouse3DManager._collidingObject));this._forceMouseMove&&null!=d.core.managers.Mouse3DManager._collidingObject&&this.queueDispatch(d.core.managers.Mouse3DManager._mouseMove,this._mouseMoveEvent,d.core.managers.Mouse3DManager._collidingObject);b=d.core.managers.Mouse3DManager._queuedEvents.length;for(a=0;a<b;){f=d.core.managers.Mouse3DManager._queuedEvents[a];for(c=f.object;null!=c&&!c._ancestorsAllowMouseEnabled;)c=c.get_parent();null!=c&&c.dispatchEvent(f);++a}d.core.managers.Mouse3DManager._queuedEvents=
[];this._updateDirty=!1;d.core.managers.Mouse3DManager._previousCollidingObject=d.core.managers.Mouse3DManager._collidingObject},addViewLayer:function(a){var b=a.stage;null==a.get_stage3DProxy().get_mouse3DManager()&&a.get_stage3DProxy().set_mouse3DManager(this);this.hasKey(a)||d.core.managers.Mouse3DManager._view3Ds.set(a,0);this._childDepth=0;this.traverseDisplayObjects(b);d.core.managers.Mouse3DManager._viewCount=this._childDepth},enableMouseListeners:function(a){a.addEventListener(c.events.MouseEvent.CLICK,
r(this,this.onClick));a.addEventListener(c.events.MouseEvent.DOUBLE_CLICK,r(this,this.onDoubleClick));a.addEventListener(c.events.MouseEvent.MOUSE_DOWN,r(this,this.onMouseDown));a.addEventListener(c.events.MouseEvent.MOUSE_MOVE,r(this,this.onMouseMove));a.addEventListener(c.events.MouseEvent.MOUSE_UP,r(this,this.onMouseUp));a.addEventListener(c.events.MouseEvent.MOUSE_WHEEL,r(this,this.onMouseWheel));a.addEventListener(c.events.MouseEvent.MOUSE_OVER,r(this,this.onMouseOver));a.addEventListener(c.events.MouseEvent.MOUSE_OUT,
r(this,this.onMouseOut))},disableMouseListeners:function(a){a.removeEventListener(c.events.MouseEvent.CLICK,r(this,this.onClick));a.removeEventListener(c.events.MouseEvent.DOUBLE_CLICK,r(this,this.onDoubleClick));a.removeEventListener(c.events.MouseEvent.MOUSE_DOWN,r(this,this.onMouseDown));a.removeEventListener(c.events.MouseEvent.MOUSE_MOVE,r(this,this.onMouseMove));a.removeEventListener(c.events.MouseEvent.MOUSE_UP,r(this,this.onMouseUp));a.removeEventListener(c.events.MouseEvent.MOUSE_WHEEL,r(this,
this.onMouseWheel));a.removeEventListener(c.events.MouseEvent.MOUSE_OVER,r(this,this.onMouseOver));a.removeEventListener(c.events.MouseEvent.MOUSE_OUT,r(this,this.onMouseOut))},dispose:function(){this._mousePicker.dispose()},queueDispatch:function(a,b,f){a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.delta=b.delta;a.screenX=b.localX;a.screenY=b.localY;null==f&&(f=d.core.managers.Mouse3DManager._collidingObject);null!=f?(a.object=f.entity,a.renderable=f.renderable,a.uv=f.uv,a.localPosition=
null!=f.localPosition?f.localPosition.clone():null,a.localNormal=null!=f.localNormal?f.localNormal.clone():null,a.index=f.index,a.subGeometryIndex=f.subGeometryIndex):(a.uv=null,a.object=null,a.localPosition=this._nullVector,a.localNormal=this._nullVector,a.index=0,a.subGeometryIndex=0);d.core.managers.Mouse3DManager._queuedEvents.push(a)},reThrowEvent:function(a){if(!(null==this._activeView||null!=this._activeView&&!this._activeView.get_shareContext()))for(var b=d.core.managers.Mouse3DManager._view3Ds.keys();b.hasNext();){var f=
b.next();f!=this._activeView&&d.core.managers.Mouse3DManager._view3Ds.h[f.__id__]<d.core.managers.Mouse3DManager._view3Ds.h[this._activeView.__id__]&&f.dispatchEvent(a)}},hasKey:function(a){for(var b=d.core.managers.Mouse3DManager._view3Ds.keys();b.hasNext();)if(b.next()==a)return!0;return!1},traverseDisplayObjects:function(){},onMouseMove:function(a){null!=d.core.managers.Mouse3DManager._collidingObject?this.queueDispatch(d.core.managers.Mouse3DManager._mouseMove,this._mouseMoveEvent=a):this.reThrowEvent(a);
this._updateDirty=!0},onMouseOut:function(a){this._activeView=null;null!=d.core.managers.Mouse3DManager._collidingObject&&this.queueDispatch(d.core.managers.Mouse3DManager._mouseOut,a,d.core.managers.Mouse3DManager._collidingObject);this._updateDirty=!0},onMouseOver:function(a){this._activeView=s.Boot.__cast(a.currentTarget,d.containers.View3D);null!=d.core.managers.Mouse3DManager._collidingObject&&d.core.managers.Mouse3DManager._previousCollidingObject!=d.core.managers.Mouse3DManager._collidingObject?
this.queueDispatch(d.core.managers.Mouse3DManager._mouseOver,a,d.core.managers.Mouse3DManager._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onClick:function(a){null!=d.core.managers.Mouse3DManager._collidingObject?this.queueDispatch(d.core.managers.Mouse3DManager._mouseClick,a):this.reThrowEvent(a);this._updateDirty=!0},onDoubleClick:function(a){null!=d.core.managers.Mouse3DManager._collidingObject?this.queueDispatch(d.core.managers.Mouse3DManager._mouseDoubleClick,a):this.reThrowEvent(a);
this._updateDirty=!0},onMouseDown:function(a){this._activeView=s.Boot.__cast(a.currentTarget,d.containers.View3D);this.updateCollider(this._activeView);null!=d.core.managers.Mouse3DManager._collidingObject?(this.queueDispatch(d.core.managers.Mouse3DManager._mouseDown,a),d.core.managers.Mouse3DManager._previousCollidingObject=d.core.managers.Mouse3DManager._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onMouseUp:function(a){null!=d.core.managers.Mouse3DManager._collidingObject?(this.queueDispatch(d.core.managers.Mouse3DManager._mouseUp,
a),d.core.managers.Mouse3DManager._previousCollidingObject=d.core.managers.Mouse3DManager._collidingObject):this.reThrowEvent(a);this._updateDirty=!0},onMouseWheel:function(a){null!=d.core.managers.Mouse3DManager._collidingObject?this.queueDispatch(d.core.managers.Mouse3DManager._mouseWheel,a):this.reThrowEvent(a);this._updateDirty=!0},get_forceMouseMove:function(){return this._forceMouseMove},set_forceMouseMove:function(a){return this._forceMouseMove=a},get_mousePicker:function(){return this._mousePicker},
set_mousePicker:function(a){return this._mousePicker=a},__class__:d.core.managers.Mouse3DManager,__properties__:{set_mousePicker:"set_mousePicker",get_mousePicker:"get_mousePicker",set_forceMouseMove:"set_forceMouseMove",get_forceMouseMove:"get_forceMouseMove"}};d.core.managers.RTTBufferManager=function(a,b){this._textureHeight=this._textureWidth=this._viewHeight=this._viewWidth=-1;this._buffersInvalid=!0;if(null==a)throw new c.errors.Error("No cheating the multiton!");this._renderToTextureRect=new c.geom.Rectangle;
this._stage3DProxy=b;c.events.EventDispatcher.call(this)};h["away3d.core.managers.RTTBufferManager"]=d.core.managers.RTTBufferManager;d.core.managers.RTTBufferManager.__name__=["away3d","core","managers","RTTBufferManager"];d.core.managers.RTTBufferManager._instances=null;d.core.managers.RTTBufferManager.getInstance=function(a){if(null==a)throw new c.errors.Error("stage3DProxy key cannot be null!");null==d.core.managers.RTTBufferManager._instances&&(d.core.managers.RTTBufferManager._instances=new m.ds.ObjectMap);
var b=d.core.managers.RTTBufferManager._instances.h[a.__id__];null==b&&(b=new d.core.managers.RTTBufferManager(new d.core.managers.SingletonEnforcer,a),d.core.managers.RTTBufferManager._instances.set(a,b));return b};d.core.managers.RTTBufferManager.__super__=c.events.EventDispatcher;d.core.managers.RTTBufferManager.prototype=q(c.events.EventDispatcher.prototype,{get_textureRatioX:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._textureRatioX},get_textureRatioY:function(){this._buffersInvalid&&
this.updateRTTBuffers();return this._textureRatioY},get_viewWidth:function(){return this._viewWidth},set_viewWidth:function(a){if(a==this._viewWidth)return a;this._viewWidth=a;this._buffersInvalid=!0;this._textureWidth=d.tools.utils.TextureUtils.getBestPowerOf2(this._viewWidth);this._textureWidth>this._viewWidth?(this._renderToTextureRect.x=0.5*(this._textureWidth-this._viewWidth)|0,this._renderToTextureRect.width=this._viewWidth):(this._renderToTextureRect.x=0,this._renderToTextureRect.width=this._textureWidth);
this.dispatchEvent(new c.events.Event(c.events.Event.RESIZE));return a},get_viewHeight:function(){return this._viewHeight},set_viewHeight:function(a){if(a==this._viewHeight)return a;this._viewHeight=a;this._buffersInvalid=!0;this._textureHeight=d.tools.utils.TextureUtils.getBestPowerOf2(this._viewHeight);this._textureHeight>this._viewHeight?(this._renderToTextureRect.y=0.5*(this._textureHeight-this._viewHeight)|0,this._renderToTextureRect.height=this._viewHeight):(this._renderToTextureRect.y=0,this._renderToTextureRect.height=
this._textureHeight);this.dispatchEvent(new c.events.Event(c.events.Event.RESIZE));return a},get_renderToTextureVertexBuffer:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToTextureVertexBuffer},get_renderToScreenVertexBuffer:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToScreenVertexBuffer},get_indexBuffer:function(){return this._indexBuffer},get_renderToTextureRect:function(){this._buffersInvalid&&this.updateRTTBuffers();return this._renderToTextureRect},
get_textureWidth:function(){return this._textureWidth},get_textureHeight:function(){return this._textureHeight},dispose:function(){d.core.managers.RTTBufferManager._instances.remove(this._stage3DProxy);null!=this._indexBuffer&&(this._indexBuffer.dispose(),this._renderToScreenVertexBuffer.dispose(),this._renderToTextureVertexBuffer.dispose(),this._indexBuffer=this._renderToTextureVertexBuffer=this._renderToScreenVertexBuffer=null)},updateRTTBuffers:function(){var a=this._stage3DProxy.get_context3D(),
b,f;null==this._renderToTextureVertexBuffer&&(this._renderToTextureVertexBuffer=a.createVertexBuffer(4,5));null==this._renderToScreenVertexBuffer&&(this._renderToScreenVertexBuffer=a.createVertexBuffer(4,5));if(null==this._indexBuffer){this._indexBuffer=a.createIndexBuffer(6);var p=[2,1,0,3,2,0];this._indexBuffer.uploadFromVector(function(){var a=new c.VectorData;a.length=p.length;a.fixed=true;var b;b=Array(p.length);for(var f=0,d=p.length;f<d;){var i=f++;b[i]=p[i]}a.data=b;return a}(this),0,6)}this._textureRatioX=
b=Math.min(this._viewWidth/this._textureWidth,1);this._textureRatioY=f=Math.min(this._viewHeight/this._textureHeight,1);var a=0.5*(1-b),d=0.5*(b+1),e=0.5*(f+1),g=0.5*(1-f);b=[-b,-f,a,e,0,b,-f,d,e,1,b,f,d,g,2,-b,f,a,g,3];a=[-1,-1,a,e,0,1,-1,d,e,1,1,1,d,g,2,-1,1,a,g,3];this._renderToTextureVertexBuffer.uploadFromVector(b,0,4);this._renderToScreenVertexBuffer.uploadFromVector(a,0,4);this._buffersInvalid=!1},__class__:d.core.managers.RTTBufferManager,__properties__:{get_textureHeight:"get_textureHeight",
get_textureWidth:"get_textureWidth",get_renderToTextureRect:"get_renderToTextureRect",get_indexBuffer:"get_indexBuffer",get_renderToScreenVertexBuffer:"get_renderToScreenVertexBuffer",get_renderToTextureVertexBuffer:"get_renderToTextureVertexBuffer",set_viewHeight:"set_viewHeight",get_viewHeight:"get_viewHeight",set_viewWidth:"set_viewWidth",get_viewWidth:"get_viewWidth",get_textureRatioY:"get_textureRatioY",get_textureRatioX:"get_textureRatioX"}});d.core.managers.SingletonEnforcer=function(){};h["away3d.core.managers.SingletonEnforcer"]=
d.core.managers.SingletonEnforcer;d.core.managers.SingletonEnforcer.__name__=["away3d","core","managers","SingletonEnforcer"];d.core.managers.SingletonEnforcer.prototype={__class__:d.core.managers.SingletonEnforcer};d.core.managers.Stage3DManager=function(a,b){if(null==b)throw new c.errors.Error("This class is a multiton and cannot be instantiated manually. Use Stage3DManager.getInstance instead.");this._stage=a;this.stage3DsLength=1;null==d.core.managers.Stage3DManager._stageProxies&&(d.core.managers.Stage3DManager._stageProxies=
d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),this.stage3DsLength))};h["away3d.core.managers.Stage3DManager"]=d.core.managers.Stage3DManager;d.core.managers.Stage3DManager.__name__=["away3d","core","managers","Stage3DManager"];d.core.managers.Stage3DManager._instances=null;d.core.managers.Stage3DManager._stageProxies=null;d.core.managers.Stage3DManager.getInstance=function(a){null==d.core.managers.Stage3DManager._instances&&(d.core.managers.Stage3DManager._instances=
new m.ds.ObjectMap);var b=d.core.managers.Stage3DManager._instances.h[a.__id__];null==b&&(b=new d.core.managers.Stage3DManager(a,new d.core.managers.Stage3DManagerSingletonEnforcer),d.core.managers.Stage3DManager._instances.set(a,b));return b};d.core.managers.Stage3DManager.prototype={getStage3DProxy:function(a,b,f){null==f&&(f="baseline");null==b&&(b=!1);null==d.core.managers.Stage3DManager._stageProxies[a]&&(d.core.managers.Stage3DManager._numStageProxies++,d.core.managers.Stage3DManager._stageProxies[a]=
new d.core.managers.Stage3DProxy(a,c.display3D.OpenFLStage3D.getStage3D(this._stage,a),this,b,f));return d.core.managers.Stage3DManager._stageProxies[a]},removeStage3DProxy:function(a){d.core.managers.Stage3DManager._numStageProxies--;d.core.managers.Stage3DManager._stageProxies[a.get_stage3DIndex()]=null},getFreeStage3DProxy:function(a,b){null==b&&(b="baseline");null==a&&(a=!1);for(var f=0,p=this.stage3DsLength;f<p;){if(null==d.core.managers.Stage3DManager._stageProxies[f])return this.getStage3DProxy(f,
a,b),d.core.managers.Stage3DManager._stageProxies[f].set_width(this._stage.stageWidth),d.core.managers.Stage3DManager._stageProxies[f].set_height(this._stage.stageHeight),d.core.managers.Stage3DManager._stageProxies[f];++f}throw new c.errors.Error("Too many Stage3D instances used!");},get_hasFreeStage3DProxy:function(){return(d.core.managers.Stage3DManager._numStageProxies|0)<d.core.managers.Stage3DManager._stageProxies.length?!0:!1},get_numProxySlotsFree:function(){return d.core.managers.Stage3DManager._stageProxies.length-
d.core.managers.Stage3DManager._numStageProxies},get_numProxySlotsUsed:function(){return d.core.managers.Stage3DManager._numStageProxies},get_numProxySlotsTotal:function(){return d.core.managers.Stage3DManager._stageProxies.length},__class__:d.core.managers.Stage3DManager,__properties__:{get_numProxySlotsTotal:"get_numProxySlotsTotal",get_numProxySlotsUsed:"get_numProxySlotsUsed",get_numProxySlotsFree:"get_numProxySlotsFree",get_hasFreeStage3DProxy:"get_hasFreeStage3DProxy"}};d.core.managers.Stage3DManagerSingletonEnforcer=
function(){};h["away3d.core.managers.Stage3DManagerSingletonEnforcer"]=d.core.managers.Stage3DManagerSingletonEnforcer;d.core.managers.Stage3DManagerSingletonEnforcer.__name__=["away3d","core","managers","Stage3DManagerSingletonEnforcer"];d.core.managers.Stage3DManagerSingletonEnforcer.prototype={__class__:d.core.managers.Stage3DManagerSingletonEnforcer};c.display.Shape=function(){c.display.DisplayObject.call(this)};h["openfl.display.Shape"]=c.display.Shape;c.display.Shape.__name__=["openfl","display",
"Shape"];c.display.Shape.__super__=c.display.DisplayObject;c.display.Shape.prototype=q(c.display.DisplayObject.prototype,{__getBounds:function(a){null!=this.__graphics&&this.__graphics.__getBounds(a,this.__worldTransform)},__hitTest:function(a,b,f,c,d){return this.get_visible()&&null!=this.__graphics&&this.__graphics.__hitTest(a,b,f,this.__worldTransform)?(d||c.push(this),!0):!1},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)&&null!=this.__graphics&&(this.__graphics.__render(),
null!=this.__graphics.__canvas)){var b=a.context;b.globalAlpha=this.__worldAlpha;var f=this.__worldTransform;a.roundPixels?b.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):b.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty);null==this.get_scrollRect()?b.drawImage(this.__graphics.__canvas,this.__graphics.__bounds.x,this.__graphics.__bounds.y):b.drawImage(this.__graphics.__canvas,this.get_scrollRect().x-this.__graphics.__bounds.x,this.get_scrollRect().y-this.__graphics.__bounds.y,this.get_scrollRect().width,this.get_scrollRect().height,
this.__graphics.__bounds.x+this.get_scrollRect().x,this.__graphics.__bounds.y+this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height)}},__renderDOM:function(a){if(null!=this.stage&&this.__worldVisible&&this.__renderable&&null!=this.__graphics){if(this.__graphics.__dirty||this.__worldAlphaChanged||null==this.__canvas&&null!=this.__graphics.__canvas)this.__graphics.__render(),null!=this.__graphics.__canvas?(null==this.__canvas&&(this.__canvas=window.document.createElement("canvas"),
this.__canvasContext=this.__canvas.getContext("2d"),this.__initializeElement(this.__canvas,a)),this.__canvas.width=this.__graphics.__canvas.width,this.__canvas.height=this.__graphics.__canvas.height,this.__canvasContext.globalAlpha=this.__worldAlpha,this.__canvasContext.drawImage(this.__graphics.__canvas,0,0)):null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null);if(null!=this.__canvas){if(this.__worldTransformChanged){var b=new c.geom.Matrix;b.translate(this.__graphics.__bounds.x,
this.__graphics.__bounds.y);b=b.mult(this.__worldTransform);this.__style.setProperty(a.transformProperty,a.roundPixels?"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+(b.tx|0)+", "+(b.ty|0)+", 0, 1)":"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+b.tx+", "+b.ty+", 0, 1)",null)}this.__applyStyle(a,!1,!1,!0)}}else null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null)},get_graphics:function(){null==this.__graphics&&
(this.__graphics=new c.display.Graphics);return this.__graphics},__class__:c.display.Shape,__properties__:q(c.display.DisplayObject.prototype.__properties__,{get_graphics:"get_graphics"})});d.core.managers.Stage3DProxy=function(a,b,f,p,d){null==d&&(d="baseline");null==p&&(p=!1);this._stage3DIndex=-1;this._stage3DIndex=a;this._stage3D=b;this._stage3D.set_x(0);this._stage3D.set_y(0);this._stage3D.visible=!0;this._stage3DManager=f;this._viewPort=new c.geom.Rectangle;this._enableDepthAndStencil=!0;c.events.EventDispatcher.call(this);
this._stage3D.addEventListener(c.events.Event.CONTEXT3D_CREATE,r(this,this.onContext3DUpdate),!1,1E3,!1);this.forceSoftware=p;this._profile=d;this.requestContext(p,this._profile)};h["away3d.core.managers.Stage3DProxy"]=d.core.managers.Stage3DProxy;d.core.managers.Stage3DProxy.__name__=["away3d","core","managers","Stage3DProxy"];d.core.managers.Stage3DProxy.__super__=c.events.EventDispatcher;d.core.managers.Stage3DProxy.prototype=q(c.events.EventDispatcher.prototype,{notifyViewportUpdated:function(){this._viewportDirty||
(this._viewportDirty=!0,this.hasEventListener(d.events.Stage3DEvent.VIEWPORT_UPDATED)&&(this._viewportUpdated=new d.events.Stage3DEvent(d.events.Stage3DEvent.VIEWPORT_UPDATED),this.dispatchEvent(this._viewportUpdated)))},notifyEnterFrame:function(){this.hasEventListener(c.events.Event.ENTER_FRAME)&&(null==this._enterFrame&&(this._enterFrame=new c.events.Event(c.events.Event.ENTER_FRAME)),this.dispatchEvent(this._enterFrame))},get_profile:function(){return this._profile},dispose:function(){this._stage3DManager.removeStage3DProxy(this);
this._stage3D.removeEventListener(c.events.Event.CONTEXT3D_CREATE,r(this,this.onContext3DUpdate));this.freeContext3D();this._stage3DManager=this._stage3D=null;this._stage3DIndex=-1},setRenderCallback:function(a){null!=this._context3D&&(null!=this._callbackMethod&&this._context3D.removeRenderMethod(a),null!=a&&this._context3D.setRenderMethod(a));this._callbackMethod=a},configureBackBuffer:function(a,b,f,c){var d=this._backBufferWidth,e=this._backBufferHeight;this._viewPort.width=this._backBufferWidth=
a;this._viewPort.height=this._backBufferHeight=b;(d!=this._backBufferWidth||e!=this._backBufferHeight)&&this.notifyViewportUpdated();this._antiAlias=f;this._enableDepthAndStencil=c;null!=this._context3D&&this._context3D.configureBackBuffer(a,b,f,c)},get_enableDepthAndStencil:function(){return this._enableDepthAndStencil},set_enableDepthAndStencil:function(a){this._enableDepthAndStencil=a;this._backBufferDirty=!0;return a},get_renderTarget:function(){return this._renderTarget},get_renderSurfaceSelector:function(){return this._renderSurfaceSelector},
setRenderTarget:function(a,b,f){null==f&&(f=0);null==b&&(b=!1);this._renderTarget==a&&f==this._renderSurfaceSelector&&this._enableDepthAndStencil==b||(this._renderTarget=a,this._renderSurfaceSelector=f,this._enableDepthAndStencil=b,null!=a?this._context3D.setRenderToTexture(a,b,this._antiAlias,f):(this._context3D.setRenderToBackBuffer(),this._context3D.configureBackBuffer(this._backBufferWidth,this._backBufferHeight,this._antiAlias,this._enableDepthAndStencil)))},clear:function(){null!=this._context3D&&
(this._backBufferDirty&&(this.configureBackBuffer(this._backBufferWidth,this._backBufferHeight,this._antiAlias,this._enableDepthAndStencil),this._backBufferDirty=!1),this._context3D.clear((this._color>>16&255)/255,(this._color>>8&255)/255,(this._color&255)/255,(this._color>>24&255)/255),this._bufferClear=!0)},present:function(){null!=this._context3D&&(this._context3D.present(),this._activeProgram3D=null,null!=this._mouse3DManager&&this._mouse3DManager.fireMouseEvents())},get_scissorRect:function(){return this._scissorRect},
set_scissorRect:function(a){this._scissorRect=a;this._context3D.setScissorRectangle(this._scissorRect);return a},get_stage3DIndex:function(){return this._stage3DIndex},get_stage3D:function(){return this._stage3D},get_context3D:function(){return this._context3D},get_driverInfo:function(){return null!=this._context3D?this._context3D.driverInfo:null},get_usesSoftwareRendering:function(){return this._usesSoftwareRendering},get_x:function(){return this._stage3D.x},set_x:function(a){if(this._viewPort.x==
a)return a;this._stage3D.set_x(this._viewPort.x=a);this.notifyViewportUpdated();return a},get_y:function(){return this._stage3D.y},set_y:function(a){if(this._viewPort.y==a)return a;this._stage3D.set_y(this._viewPort.y=a);this.notifyViewportUpdated();return a},get_width:function(){return this._backBufferWidth},set_width:function(a){if(this._viewPort.width==a)return a;this._viewPort.width=this._backBufferWidth=a;this._backBufferDirty=!0;this.notifyViewportUpdated();return a},get_height:function(){return this._backBufferHeight},
set_height:function(a){if(this._viewPort.height==a)return a;this._viewPort.height=this._backBufferHeight=a;this._backBufferDirty=!0;this.notifyViewportUpdated();return a},get_antiAlias:function(){return this._antiAlias},set_antiAlias:function(a){this._antiAlias=a;this._backBufferDirty=!0;return a},get_viewPort:function(){this._viewportDirty=!1;return this._viewPort},get_color:function(){return this._color},set_color:function(a){return this._color=a},get_visible:function(){return this._stage3D.visible},
set_visible:function(a){return this._stage3D.visible=a},get_bufferClear:function(){return this._bufferClear},set_bufferClear:function(a){return this._bufferClear=a},get_mouse3DManager:function(){return this._mouse3DManager},set_mouse3DManager:function(a){return this._mouse3DManager=a},get_touch3DManager:function(){return this._touch3DManager},set_touch3DManager:function(a){return this._touch3DManager=a},freeContext3D:function(){null!=this._context3D&&(this._context3D.dispose(),this.dispatchEvent(new d.events.Stage3DEvent(d.events.Stage3DEvent.CONTEXT3D_DISPOSED)));
this._context3D=null},onContext3DUpdate:function(){if(null!=this._stage3D.context3D){var a=null!=this._context3D;this._context3D=this._stage3D.context3D;this._context3D.enableErrorChecking=d.debug.Debug.active;0<this._backBufferWidth&&0<this._backBufferHeight&&this._context3D.configureBackBuffer(this._backBufferWidth,this._backBufferHeight,this._antiAlias,this._enableDepthAndStencil);this.setRenderCallback(this._callbackMethod);this.dispatchEvent(new d.events.Stage3DEvent(a?d.events.Stage3DEvent.CONTEXT3D_RECREATED:
d.events.Stage3DEvent.CONTEXT3D_CREATED))}else throw new c.errors.Error("Rendering context lost!");},requestContext:function(a,b){null==b&&(b="baseline");null==a&&(a=!1);this._usesSoftwareRendering||(this._usesSoftwareRendering=a);this._profile=b;this._stage3D.requestAGLSLContext3D(k.string(a?c.display3D.Context3DRenderMode.SOFTWARE:c.display3D.Context3DRenderMode.AUTO));this._contextRequested=!0},onEnterFrame:function(){null!=this._context3D&&(this.clear(),this.notifyEnterFrame(),this.present())},
recoverFromDisposal:function(){return null==this._context3D?!1:"Disposed"==this._context3D.driverInfo?(this._context3D=null,this.dispatchEvent(new d.events.Stage3DEvent(d.events.Stage3DEvent.CONTEXT3D_DISPOSED)),!1):!0},clearDepthBuffer:function(){null!=this._context3D&&this._context3D.clear(0,0,0,1,1,0,256)},__class__:d.core.managers.Stage3DProxy,__properties__:{set_touch3DManager:"set_touch3DManager",get_touch3DManager:"get_touch3DManager",set_mouse3DManager:"set_mouse3DManager",get_mouse3DManager:"get_mouse3DManager",
set_bufferClear:"set_bufferClear",get_bufferClear:"get_bufferClear",set_visible:"set_visible",get_visible:"get_visible",set_color:"set_color",get_color:"get_color",get_viewPort:"get_viewPort",set_antiAlias:"set_antiAlias",get_antiAlias:"get_antiAlias",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",get_usesSoftwareRendering:"get_usesSoftwareRendering",get_driverInfo:"get_driverInfo",get_context3D:"get_context3D",
get_stage3D:"get_stage3D",get_stage3DIndex:"get_stage3DIndex",set_scissorRect:"set_scissorRect",get_scissorRect:"get_scissorRect",get_renderSurfaceSelector:"get_renderSurfaceSelector",get_renderTarget:"get_renderTarget",set_enableDepthAndStencil:"set_enableDepthAndStencil",get_enableDepthAndStencil:"get_enableDepthAndStencil",get_profile:"get_profile"}});var m={ds:{}};m.ds.IntMap=function(){this.h={}};h["haxe.ds.IntMap"]=m.ds.IntMap;m.ds.IntMap.__name__=["haxe","ds","IntMap"];m.ds.IntMap.__interfaces__=
[F];m.ds.IntMap.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return w.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:m.ds.IntMap};
d.core.managers.Touch3DManager=function(){this._updateDirty=!0;this._nullVector=new c.geom.Vector3D;this._touchMoveEvent=new c.events.TouchEvent("touchMove");this._touchPicker=d.core.pick.PickingType.RAYCAST_FIRST_ENCOUNTERED;this._touchPoints=[];this._touchPointFromId=new m.ds.IntMap};h["away3d.core.managers.Touch3DManager"]=d.core.managers.Touch3DManager;d.core.managers.Touch3DManager.__name__=["away3d","core","managers","Touch3DManager"];d.core.managers.Touch3DManager.prototype={updateCollider:function(){if(this._forceTouchMove||
this._updateDirty)for(var a=0,b=this._numTouchPoints;a<b;){var f=a++;this._touchPoint=this._touchPoints[f];this._collidingObject=this._touchPicker.getViewCollision(this._touchPoint.x,this._touchPoint.y,this._view);d.core.managers.Touch3DManager._collidingObjectFromTouchId.set(this._touchPoint.id,this._collidingObject)}},fireTouchEvents:function(){var a,b,f;a=0;for(var c=this._numTouchPoints;a<c;)b=a++,this._touchPoint=this._touchPoints[b],this._collidingObject=d.core.managers.Touch3DManager._collidingObjectFromTouchId.get(this._touchPoint.id),
this._previousCollidingObject=d.core.managers.Touch3DManager._previousCollidingObjectFromTouchId.get(this._touchPoint.id),this._collidingObject!=this._previousCollidingObject&&(null!=this._previousCollidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_OUT,this._touchMoveEvent,this._previousCollidingObject,this._touchPoint),null!=this._collidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_OVER,this._touchMoveEvent,this._collidingObject,this._touchPoint)),this._forceTouchMove&&null!=
this._collidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_MOVE,this._touchMoveEvent,this._collidingObject,this._touchPoint);a=d.core.managers.Touch3DManager._queuedEvents.length;for(c=0;c<a;){b=c++;b=d.core.managers.Touch3DManager._queuedEvents[b];for(f=b.object;null!=f&&!f._ancestorsAllowMouseEnabled;)f=f.get_parent();null!=f&&f.dispatchEvent(b)}d.core.managers.Touch3DManager._queuedEvents=[];this._updateDirty=!1;a=0;for(c=this._numTouchPoints;a<c;)b=a++,this._touchPoint=this._touchPoints[b],
d.core.managers.Touch3DManager._previousCollidingObjectFromTouchId.set(this._touchPoint.id,d.core.managers.Touch3DManager._collidingObjectFromTouchId.get(this._touchPoint.id))},enableTouchListeners:function(a){a.addEventListener("touchBegin",r(this,this.onTouchBegin));a.addEventListener("touchMove",r(this,this.onTouchMove));a.addEventListener("touchEnd",r(this,this.onTouchEnd))},disableTouchListeners:function(a){a.removeEventListener("touchBegin",r(this,this.onTouchBegin));a.removeEventListener("touchMove",
r(this,this.onTouchMove));a.removeEventListener("touchEnd",r(this,this.onTouchEnd))},dispose:function(){this._touchPicker.dispose();this._touchPointFromId=this._touchPoints=null;d.core.managers.Touch3DManager._collidingObjectFromTouchId=null;d.core.managers.Touch3DManager._previousCollidingObjectFromTouchId=null},queueDispatch:function(a,b,f,c){a=new d.events.TouchEvent3D(a);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.screenX=c.x;a.screenY=c.y;a.touchPointID=c.id;null!=f?(a.object=
f.entity,a.renderable=f.renderable,a.uv=f.uv,a.localPosition=null!=f.localPosition?f.localPosition.clone():null,a.localNormal=null!=f.localNormal?f.localNormal.clone():null,a.index=f.index,a.subGeometryIndex=f.subGeometryIndex):(a.uv=null,a.object=null,a.localPosition=this._nullVector,a.localNormal=this._nullVector,a.index=0,a.subGeometryIndex=0);d.core.managers.Touch3DManager._queuedEvents.push(a)},onTouchBegin:function(a){var b=new d.core.managers.TouchPoint;b.id=a.touchPointID;b.x=a.stageX;b.y=
a.stageY;this._numTouchPoints++;this._touchPoints.push(b);this._touchPointFromId.set(b.id,b);this.updateCollider();this._collidingObject=d.core.managers.Touch3DManager._collidingObjectFromTouchId.get(b.id);null!=this._collidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_BEGIN,a,this._collidingObject,b);this._updateDirty=!0},onTouchMove:function(a){var b=this._touchPointFromId.get(a.touchPointID);b.x=a.stageX;b.y=a.stageY;this._collidingObject=d.core.managers.Touch3DManager._collidingObjectFromTouchId.get(b.id);
null!=this._collidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_MOVE,this._touchMoveEvent=a,this._collidingObject,b);this._updateDirty=!0},onTouchEnd:function(a){var b=this._touchPointFromId.get(a.touchPointID);this._collidingObject=d.core.managers.Touch3DManager._collidingObjectFromTouchId.get(b.id);null!=this._collidingObject&&this.queueDispatch(d.events.TouchEvent3D.TOUCH_END,a,this._collidingObject,b);this._touchPointFromId.remove(b.id);this._numTouchPoints--;this._touchPoints.splice(w.indexOf(this._touchPoints,
b,0),1);this._updateDirty=!0},get_forceTouchMove:function(){return this._forceTouchMove},set_forceTouchMove:function(a){return this._forceTouchMove=a},get_touchPicker:function(){return this._touchPicker},set_touchPicker:function(a){return this._touchPicker=a},set_view:function(a){return this._view=a},__class__:d.core.managers.Touch3DManager,__properties__:{set_view:"set_view",set_touchPicker:"set_touchPicker",get_touchPicker:"get_touchPicker",set_forceTouchMove:"set_forceTouchMove",get_forceTouchMove:"get_forceTouchMove"}};
d.core.managers.TouchPoint=function(){};h["away3d.core.managers.TouchPoint"]=d.core.managers.TouchPoint;d.core.managers.TouchPoint.__name__=["away3d","core","managers","TouchPoint"];d.core.managers.TouchPoint.prototype={__class__:d.core.managers.TouchPoint};d.core.math={};d.core.math.MathConsts=function(){};h["away3d.core.math.MathConsts"]=d.core.math.MathConsts;d.core.math.MathConsts.__name__=["away3d","core","math","MathConsts"];d.core.math.Matrix3DUtils=function(){};h["away3d.core.math.Matrix3DUtils"]=
d.core.math.Matrix3DUtils;d.core.math.Matrix3DUtils.__name__=["away3d","core","math","Matrix3DUtils"];d.core.math.Matrix3DUtils.__properties__={get_CALCULATION_MATRIX:"get_CALCULATION_MATRIX",get_RAW_DATA_CONTAINER:"get_RAW_DATA_CONTAINER"};d.core.math.Matrix3DUtils.RAW_DATA_CONTAINER=null;d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER=function(){var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=new c.VectorData;b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var p=0,d=a.length;p<d;){var e=p++;
f[e]=a[e]}b.data=f;return b};d.core.math.Matrix3DUtils.CALCULATION_MATRIX=null;d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX=function(){return new c.geom.Matrix3D};d.core.math.Matrix3DUtils.quaternion2matrix=function(a,b){var f=a.x,p=a.y,i=a.z,e=a.w,g=f*f,o=f*p,h=f*i,f=f*e,A=p*p,n=p*i,p=p*e,k=i*i,e=i*e,i=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();0>=i.length&&!i.fixed&&(i.length=1);i.data[0]=1-2*(A+k);1>=i.length&&!i.fixed&&(i.length=2);i.data[1]=2*(o+e);2>=i.length&&!i.fixed&&(i.length=
3);i.data[2]=2*(h-p);4>=i.length&&!i.fixed&&(i.length=5);i.data[4]=2*(o-e);5>=i.length&&!i.fixed&&(i.length=6);i.data[5]=1-2*(g+k);6>=i.length&&!i.fixed&&(i.length=7);i.data[6]=2*(n+f);8>=i.length&&!i.fixed&&(i.length=9);i.data[8]=2*(h+p);9>=i.length&&!i.fixed&&(i.length=10);i.data[9]=2*(n-f);10>=i.length&&!i.fixed&&(i.length=11);i.data[10]=1-2*(g+A);14>=i.length&&!i.fixed&&(i.length=15);g=i.data[14]=0;13>=i.length&&!i.fixed&&(i.length=14);g=i.data[13]=g;12>=i.length&&!i.fixed&&(i.length=13);g=i.data[12]=
g;11>=i.length&&!i.fixed&&(i.length=12);g=i.data[11]=g;7>=i.length&&!i.fixed&&(i.length=8);g=i.data[7]=g;3>=i.length&&!i.fixed&&(i.length=4);i.data[3]=g;15>=i.length&&!i.fixed&&(i.length=16);i.data[15]=1;return null!=b?(b.copyRawDataFrom(i),b):new c.geom.Matrix3D(i)};d.core.math.Matrix3DUtils.getForward=function(a,b){null==b&&(b=new c.geom.Vector3D(0,0,0));a.copyColumnTo(2,b);b.normalize();return b};d.core.math.Matrix3DUtils.getUp=function(a,b){null==b&&(b=new c.geom.Vector3D(0,0,0));a.copyColumnTo(1,
b);b.normalize();return b};d.core.math.Matrix3DUtils.getRight=function(a,b){null==b&&(b=new c.geom.Vector3D(0,0,0));a.copyColumnTo(0,b);b.normalize();return b};d.core.math.Matrix3DUtils.compare=function(a,b){var f=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),c=b.rawData;a.copyRawDataTo(f);for(var i=0;16>i;){if(f.data[i]!=c.data[i])return!1;++i}return!0};d.core.math.Matrix3DUtils.lookAt=function(a,b,f,p){var i,e=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER();i=new c.geom.Vector3D(f.y*p.z-
f.z*p.y,f.z*p.x-f.x*p.z,f.x*p.y-f.y*p.x,1);i.normalize();p=new c.geom.Vector3D(i.y*f.z-i.z*f.y,i.z*f.x-i.x*f.z,i.x*f.y-i.y*f.x,1);p.normalize();f=new c.geom.Vector3D(f.x,f.y,f.z,f.w);f.normalize();0>=e.length&&!e.fixed&&(e.length=1);e.data[0]=i.x;1>=e.length&&!e.fixed&&(e.length=2);e.data[1]=p.x;2>=e.length&&!e.fixed&&(e.length=3);e.data[2]=-f.x;3>=e.length&&!e.fixed&&(e.length=4);e.data[3]=0;4>=e.length&&!e.fixed&&(e.length=5);e.data[4]=i.y;5>=e.length&&!e.fixed&&(e.length=6);e.data[5]=p.y;6>=e.length&&
!e.fixed&&(e.length=7);e.data[6]=-f.y;7>=e.length&&!e.fixed&&(e.length=8);e.data[7]=0;8>=e.length&&!e.fixed&&(e.length=9);e.data[8]=i.z;9>=e.length&&!e.fixed&&(e.length=10);e.data[9]=p.z;10>=e.length&&!e.fixed&&(e.length=11);e.data[10]=-f.z;11>=e.length&&!e.fixed&&(e.length=12);e.data[11]=0;12>=e.length&&!e.fixed&&(e.length=13);e.data[12]=-(i.x*b.x+i.y*b.y+i.z*b.z);13>=e.length&&!e.fixed&&(e.length=14);e.data[13]=-(p.x*b.x+p.y*b.y+p.z*b.z);14>=e.length&&!e.fixed&&(e.length=15);e.data[14]=f.x*b.x+
f.y*b.y+f.z*b.z;15>=e.length&&!e.fixed&&(e.length=16);e.data[15]=1;a.copyRawDataFrom(e)};d.core.math.Matrix3DUtils.reflection=function(a,b){null==b&&(b=new c.geom.Matrix3D);var f=a.a,p=a.b,i=a.c,e=a.d,g=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),o=-2*f*p,h=-2*f*i,k=-2*p*i;0>=g.length&&!g.fixed&&(g.length=1);g.data[0]=1-2*f*f;4>=g.length&&!g.fixed&&(g.length=5);g.data[4]=o;8>=g.length&&!g.fixed&&(g.length=9);g.data[8]=h;12>=g.length&&!g.fixed&&(g.length=13);g.data[12]=-2*f*e;1>=g.length&&!g.fixed&&
(g.length=2);g.data[1]=o;5>=g.length&&!g.fixed&&(g.length=6);g.data[5]=1-2*p*p;9>=g.length&&!g.fixed&&(g.length=10);g.data[9]=k;13>=g.length&&!g.fixed&&(g.length=14);g.data[13]=-2*p*e;2>=g.length&&!g.fixed&&(g.length=3);g.data[2]=h;6>=g.length&&!g.fixed&&(g.length=7);g.data[6]=k;10>=g.length&&!g.fixed&&(g.length=11);g.data[10]=1-2*i*i;14>=g.length&&!g.fixed&&(g.length=15);g.data[14]=-2*i*e;3>=g.length&&!g.fixed&&(g.length=4);g.data[3]=0;7>=g.length&&!g.fixed&&(g.length=8);g.data[7]=0;11>=g.length&&
!g.fixed&&(g.length=12);g.data[11]=0;15>=g.length&&!g.fixed&&(g.length=16);g.data[15]=1;b.copyRawDataFrom(g);return b};d.core.math.Plane3D=function(a,b,f,c){null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);this.a=a;this.b=b;this.c=f;this.d=c;this._alignment=0==a&&0==b?d.core.math.Plane3D.ALIGN_XY_AXIS:0==b&&0==f?d.core.math.Plane3D.ALIGN_YZ_AXIS:0==a&&0==f?d.core.math.Plane3D.ALIGN_XZ_AXIS:d.core.math.Plane3D.ALIGN_ANY};h["away3d.core.math.Plane3D"]=d.core.math.Plane3D;d.core.math.Plane3D.__name__=
["away3d","core","math","Plane3D"];d.core.math.Plane3D.prototype={fromPoints:function(a,b,f){var c=b.x-a.x,i=b.y-a.y,b=b.z-a.z,e=f.x-a.x,g=f.y-a.y,f=f.z-a.z;this.a=i*f-b*g;this.b=b*e-c*f;this.c=c*g-i*e;this.d=this.a*a.x+this.b*a.y+this.c*a.z;this._alignment=0==this.a&&0==this.b?d.core.math.Plane3D.ALIGN_XY_AXIS:0==this.b&&0==this.c?d.core.math.Plane3D.ALIGN_YZ_AXIS:0==this.a&&0==this.c?d.core.math.Plane3D.ALIGN_XZ_AXIS:d.core.math.Plane3D.ALIGN_ANY},fromNormalAndPoint:function(a,b){this.a=a.x;this.b=
a.y;this.c=a.z;this.d=this.a*b.x+this.b*b.y+this.c*b.z;this._alignment=0==this.a&&0==this.b?d.core.math.Plane3D.ALIGN_XY_AXIS:0==this.b&&0==this.c?d.core.math.Plane3D.ALIGN_YZ_AXIS:0==this.a&&0==this.c?d.core.math.Plane3D.ALIGN_XZ_AXIS:d.core.math.Plane3D.ALIGN_ANY},normalize:function(){var a=1/Math.sqrt(this.a*this.a+this.b*this.b+this.c*this.c);this.a*=a;this.b*=a;this.c*=a;this.d*=a;return this},distance:function(a){return this._alignment==d.core.math.Plane3D.ALIGN_YZ_AXIS?this.a*a.x-this.d:this._alignment==
d.core.math.Plane3D.ALIGN_XZ_AXIS?this.b*a.y-this.d:this._alignment==d.core.math.Plane3D.ALIGN_XY_AXIS?this.c*a.z-this.d:this.a*a.x+this.b*a.y+this.c*a.z-this.d},classifyPoint:function(a,b){null==b&&(b=0.01);if(this.d!=this.d)return d.core.math.PlaneClassification.FRONT;var f;f=this._alignment==d.core.math.Plane3D.ALIGN_YZ_AXIS?this.a*a.x-this.d:this._alignment==d.core.math.Plane3D.ALIGN_XZ_AXIS?this.b*a.y-this.d:this._alignment==d.core.math.Plane3D.ALIGN_XY_AXIS?this.c*a.z-this.d:this.a*a.x+this.b*
a.y+this.c*a.z-this.d;return f<-b?d.core.math.PlaneClassification.BACK:f>b?d.core.math.PlaneClassification.FRONT:d.core.math.PlaneClassification.INTERSECT},toString:function(){return"Plane3D [a:"+this.a+", b:"+this.b+", c:"+this.c+", d:"+this.d+"]."},__class__:d.core.math.Plane3D};d.core.math.PlaneClassification=function(){};h["away3d.core.math.PlaneClassification"]=d.core.math.PlaneClassification;d.core.math.PlaneClassification.__name__=["away3d","core","math","PlaneClassification"];d.core.math.Quaternion=
function(){this.z=this.y=this.x=0;this.w=1};h["away3d.core.math.Quaternion"]=d.core.math.Quaternion;d.core.math.Quaternion.__name__=["away3d","core","math","Quaternion"];d.core.math.Quaternion.prototype={get_magnitude:function(){return Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z)},multiply:function(a,b){var f=a.w,c=a.x,d=a.y,e=a.z,g=b.w,o=b.x,h=b.y,k=b.z;this.w=f*g-c*o-d*h-e*k;this.x=f*o+c*g+d*k-e*h;this.y=f*h-c*k+d*g+e*o;this.z=f*k+c*h-d*o+e*g},multiplyVector:function(a,b){null==
b&&(b=new d.core.math.Quaternion);var f=a.x,c=a.y,i=a.z;b.w=-this.x*f-this.y*c-this.z*i;b.x=this.w*f+this.y*i-this.z*c;b.y=this.w*c-this.x*i+this.z*f;b.z=this.w*i+this.x*c-this.y*f;return b},fromAxisAngle:function(a,b){var f=Math.sin(b/2),c=Math.cos(b/2);this.x=a.x*f;this.y=a.y*f;this.z=a.z*f;this.w=c;this.normalize()},slerp:function(a,b,f){var c=a.w,d=a.x,e=a.y,a=a.z,g=b.w,o=b.x,h=b.y,b=b.z,k=c*g+d*o+e*h+a*b;0>k&&(k=-k,g=-g,o=-o,h=-h,b=-b);if(0.95>k){var n=Math.acos(k),m=1/Math.sin(n),k=Math.sin(n*
(1-f))*m,f=Math.sin(n*f)*m;this.w=c*k+g*f;this.x=d*k+o*f;this.y=e*k+h*f;this.z=a*k+b*f}else this.w=c+f*(g-c),this.x=d+f*(o-d),this.y=e+f*(h-e),this.z=a+f*(b-a),c=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*this.y+this.z*this.z),this.w*=c,this.x*=c,this.y*=c,this.z*=c},lerp:function(a,b,f){var c=a.w,d=a.x,e=a.y,a=a.z,g=b.w,o=b.x,h=b.y,b=b.z;0>c*g+d*o+e*h+a*b&&(g=-g,o=-o,h=-h,b=-b);this.w=c+f*(g-c);this.x=d+f*(o-d);this.y=e+f*(h-e);this.z=a+f*(b-a);f=1/Math.sqrt(this.w*this.w+this.x*this.x+this.y*
this.y+this.z*this.z);this.w*=f;this.x*=f;this.y*=f;this.z*=f},fromEulerAngles:function(a,b,f){var a=0.5*a,c=0.5*b,b=0.5*f,f=Math.cos(a),a=Math.sin(a),d=Math.cos(c),c=Math.sin(c),e=Math.cos(b),b=Math.sin(b);this.w=f*d*e+a*c*b;this.x=a*d*e-f*c*b;this.y=f*c*e+a*d*b;this.z=f*d*b-a*c*e},toEulerAngles:function(a){null==a&&(a=new c.geom.Vector3D);a.x=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y));a.y=Math.asin(2*(this.w*this.y-this.z*this.x));a.z=Math.atan2(2*(this.w*this.z+
this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return a},normalize:function(a){null==a&&(a=1);a/=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);this.x*=a;this.y*=a;this.z*=a;this.w*=a},toString:function(){return"{x:"+this.x+" y:"+this.y+" z:"+this.z+" w:"+this.w+"}"},toMatrix3D:function(a){var b=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),f=2*this.x*this.y,p=2*this.x*this.z,i=2*this.x*this.w,e=2*this.y*this.z,g=2*this.y*this.w,o=2*this.z*this.w,h=this.x*this.x,k=this.y*
this.y,n=this.z*this.z,m=this.w*this.w;0>=b.length&&!b.fixed&&(b.length=1);b.data[0]=h-k-n+m;4>=b.length&&!b.fixed&&(b.length=5);b.data[4]=f-o;8>=b.length&&!b.fixed&&(b.length=9);b.data[8]=p+g;12>=b.length&&!b.fixed&&(b.length=13);b.data[12]=0;1>=b.length&&!b.fixed&&(b.length=2);b.data[1]=f+o;5>=b.length&&!b.fixed&&(b.length=6);b.data[5]=-h+k-n+m;9>=b.length&&!b.fixed&&(b.length=10);b.data[9]=e-i;13>=b.length&&!b.fixed&&(b.length=14);b.data[13]=0;2>=b.length&&!b.fixed&&(b.length=3);b.data[2]=p-g;
6>=b.length&&!b.fixed&&(b.length=7);b.data[6]=e+i;10>=b.length&&!b.fixed&&(b.length=11);b.data[10]=-h-k+n+m;14>=b.length&&!b.fixed&&(b.length=15);b.data[14]=0;3>=b.length&&!b.fixed&&(b.length=4);b.data[3]=0;7>=b.length&&!b.fixed&&(b.length=8);b.data[7]=0;11>=b.length&&!b.fixed&&(b.length=12);b.data[11]=0;15>=b.length&&!b.fixed&&(b.length=16);b.data[15]=1;if(null==a)return new c.geom.Matrix3D(b);a.copyRawDataFrom(b);return a},fromMatrix:function(a){a=a.decompose(c.geom.Orientation3D.QUATERNION).data[1];
this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w},toRawData:function(a,b){null==b&&(b=!1);var f=2*this.x*this.y,c=2*this.x*this.z,d=2*this.x*this.w,e=2*this.y*this.z,g=2*this.y*this.w,o=2*this.z*this.w,h=this.x*this.x,k=this.y*this.y,n=this.z*this.z,m=this.w*this.w;a[0]=h-k-n+m;a[1]=f-o;a[2]=c+g;a[4]=f+o;a[5]=-h+k-n+m;a[6]=e-d;a[8]=c-g;a[9]=e+d;a[10]=-h-k+n+m;a[3]=a[7]=a[11]=0;b||(a[12]=a[13]=a[14]=0,a[15]=1)},clone:function(){return new d.core.math.Quaternion(this.x,this.y,this.z,this.w)},rotatePoint:function(a,
b){var f,p,d,e;d=a.x;var g=a.y,o=a.z;null==b&&(b=new c.geom.Vector3D);e=-this.x*d-this.y*g-this.z*o;f=this.w*d+this.y*o-this.z*g;p=this.w*g-this.x*o+this.z*d;d=this.w*o+this.x*g-this.y*d;b.x=-e*this.x+f*this.w-p*this.z+d*this.y;b.y=-e*this.y+f*this.z+p*this.w-d*this.x;b.z=-e*this.z-f*this.y+p*this.x+d*this.w;return b},copyFrom:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w},__class__:d.core.math.Quaternion,__properties__:{get_magnitude:"get_magnitude"}};d.core.partition={};d.core.partition.NodeBase=
function(){this._childNodes=[];this._numChildNodes=this._collectionMark=this._numEntities=0};h["away3d.core.partition.NodeBase"]=d.core.partition.NodeBase;d.core.partition.NodeBase.__name__=["away3d","core","partition","NodeBase"];d.core.partition.NodeBase.prototype={get_showDebugBounds:function(){return null!=this._debugPrimitive},set_showDebugBounds:function(a){if(s.Boot.__cast(null!=this._debugPrimitive,K)==a)return a;a?this._debugPrimitive=this.createDebugBounds():(this._debugPrimitive.dispose(),
this._debugPrimitive=null);for(var b=0;b<this._numChildNodes;)this._childNodes[b].set_showDebugBounds(a),++b;return a},get_parent:function(){return this._parent},addNode:function(a){a._parent=this;this._numEntities+=a._numEntities;this._childNodes[this._numChildNodes++]=a;a.set_showDebugBounds(null!=this._debugPrimitive);var b=a._numEntities,a=this;do a._numEntities+=b;while(null!=(a=a._parent))},removeNode:function(a){var b=w.indexOf(this._childNodes,a,0);this._childNodes[b]=this._childNodes[--this._numChildNodes];
this._childNodes.pop();b=a._numEntities;a=this;do a._numEntities-=b;while(null!=(a=a._parent))},isInFrustum:function(){return!0},isIntersectingRay:function(){return!0},findPartitionForEntity:function(){return this},acceptTraverser:function(a){if(!(0==this._numEntities&&null==this._debugPrimitive)&&a.enterNode(this)){for(var b=0;b<this._numChildNodes;)this._childNodes[b++].acceptTraverser(a);null!=this._debugPrimitive&&a.applyRenderable(this._debugPrimitive)}},createDebugBounds:function(){return null},
get_numEntities:function(){return this._numEntities},updateNumEntities:function(a){var a=a-this._numEntities,b=this;do b._numEntities+=a;while(null!=(b=b._parent))},__class__:d.core.partition.NodeBase,__properties__:{get_numEntities:"get_numEntities",get_parent:"get_parent",set_showDebugBounds:"set_showDebugBounds",get_showDebugBounds:"get_showDebugBounds"}};d.core.partition.EntityNode=function(a){d.core.partition.NodeBase.call(this);this._entity=a;this._numEntities=1};h["away3d.core.partition.EntityNode"]=
d.core.partition.EntityNode;d.core.partition.EntityNode.__name__=["away3d","core","partition","EntityNode"];d.core.partition.EntityNode.__super__=d.core.partition.NodeBase;d.core.partition.EntityNode.prototype=q(d.core.partition.NodeBase.prototype,{get_entity:function(){return this._entity},acceptTraverser:function(a){a.applyEntity(this._entity)},removeFromParent:function(){null!=this._parent&&this._parent.removeNode(this);this._parent=null},isInFrustum:function(a,b){return!this._entity.get_isVisible()?
!1:this._entity.get_worldBounds().isInFrustum(a,b)},isIntersectingRay:function(a,b){return!this._entity.get_isVisible()?!1:this._entity.isIntersectingRay(a,b)},__class__:d.core.partition.EntityNode,__properties__:q(d.core.partition.NodeBase.prototype.__properties__,{get_entity:"get_entity"})});d.core.partition.CameraNode=function(a){d.core.partition.EntityNode.call(this,a)};h["away3d.core.partition.CameraNode"]=d.core.partition.CameraNode;d.core.partition.CameraNode.__name__=["away3d","core","partition",
"CameraNode"];d.core.partition.CameraNode.__super__=d.core.partition.EntityNode;d.core.partition.CameraNode.prototype=q(d.core.partition.EntityNode.prototype,{acceptTraverser:function(){},__class__:d.core.partition.CameraNode});d.core.partition.DirectionalLightNode=function(a){d.core.partition.EntityNode.call(this,a);this._light=a};h["away3d.core.partition.DirectionalLightNode"]=d.core.partition.DirectionalLightNode;d.core.partition.DirectionalLightNode.__name__=["away3d","core","partition","DirectionalLightNode"];
d.core.partition.DirectionalLightNode.__super__=d.core.partition.EntityNode;d.core.partition.DirectionalLightNode.prototype=q(d.core.partition.EntityNode.prototype,{get_light:function(){return this._light},acceptTraverser:function(a){a.enterNode(this)&&(d.core.partition.EntityNode.prototype.acceptTraverser.call(this,a),a.applyDirectionalLight(this._light))},__class__:d.core.partition.DirectionalLightNode,__properties__:q(d.core.partition.EntityNode.prototype.__properties__,{get_light:"get_light"})});
d.core.partition.LightNode=function(a){d.core.partition.EntityNode.call(this,a);this._light=a};h["away3d.core.partition.LightNode"]=d.core.partition.LightNode;d.core.partition.LightNode.__name__=["away3d","core","partition","LightNode"];d.core.partition.LightNode.__super__=d.core.partition.EntityNode;d.core.partition.LightNode.prototype=q(d.core.partition.EntityNode.prototype,{get_light:function(){return this._light},acceptTraverser:function(a){a.enterNode(this)&&(d.core.partition.EntityNode.prototype.acceptTraverser.call(this,
a),a.applyUnknownLight(this._light))},__class__:d.core.partition.LightNode,__properties__:q(d.core.partition.EntityNode.prototype.__properties__,{get_light:"get_light"})});d.core.partition.LightProbeNode=function(a){d.core.partition.EntityNode.call(this,a);this._light=a};h["away3d.core.partition.LightProbeNode"]=d.core.partition.LightProbeNode;d.core.partition.LightProbeNode.__name__=["away3d","core","partition","LightProbeNode"];d.core.partition.LightProbeNode.__super__=d.core.partition.EntityNode;
d.core.partition.LightProbeNode.prototype=q(d.core.partition.EntityNode.prototype,{get_light:function(){return this._light},acceptTraverser:function(a){a.enterNode(this)&&(d.core.partition.EntityNode.prototype.acceptTraverser.call(this,a),a.applyLightProbe(this._light))},__class__:d.core.partition.LightProbeNode,__properties__:q(d.core.partition.EntityNode.prototype.__properties__,{get_light:"get_light"})});d.core.partition.MeshNode=function(a){d.core.partition.EntityNode.call(this,a);this._mesh=
a};h["away3d.core.partition.MeshNode"]=d.core.partition.MeshNode;d.core.partition.MeshNode.__name__=["away3d","core","partition","MeshNode"];d.core.partition.MeshNode.__super__=d.core.partition.EntityNode;d.core.partition.MeshNode.prototype=q(d.core.partition.EntityNode.prototype,{get_mesh:function(){return this._mesh},acceptTraverser:function(a){if(a.enterNode(this)){d.core.partition.EntityNode.prototype.acceptTraverser.call(this,a);for(var b=this._mesh.get_subMeshes(),f=0,c=b.length;f<c;)a.applyRenderable(b[f++])}},
__class__:d.core.partition.MeshNode,__properties__:q(d.core.partition.EntityNode.prototype.__properties__,{get_mesh:"get_mesh"})});d.core.partition.NullNode=function(){d.core.partition.NodeBase.call(this)};h["away3d.core.partition.NullNode"]=d.core.partition.NullNode;d.core.partition.NullNode.__name__=["away3d","core","partition","NullNode"];d.core.partition.NullNode.__super__=d.core.partition.NodeBase;d.core.partition.NullNode.prototype=q(d.core.partition.NodeBase.prototype,{__class__:d.core.partition.NullNode});
d.core.partition.Partition3D=function(a){this._rootNode=a;null==a&&(this._rootNode=new d.core.partition.NullNode)};h["away3d.core.partition.Partition3D"]=d.core.partition.Partition3D;d.core.partition.Partition3D.__name__=["away3d","core","partition","Partition3D"];d.core.partition.Partition3D.prototype={get_showDebugBounds:function(){return this._rootNode.get_showDebugBounds()},set_showDebugBounds:function(a){this._rootNode.set_showDebugBounds(a);return a},traverse:function(a){this._updatesMade&&
this.updateEntities();++d.core.traverse.PartitionTraverser._collectionMark;this._rootNode.acceptTraverser(a)},markForUpdate:function(a){for(var a=a.getEntityPartitionNode(),b=this._updateQueue;null!=b;){if(a==b)return;b=b._updateQueueNext}a._updateQueueNext=this._updateQueue;this._updateQueue=a;this._updatesMade=!0},removeEntity:function(a){var a=a.getEntityPartitionNode(),b;a.removeFromParent();if(a==this._updateQueue)this._updateQueue=a._updateQueueNext;else{for(b=this._updateQueue;null!=b&&b._updateQueueNext!=
a;)b=b._updateQueueNext;null!=b&&(b._updateQueueNext=a._updateQueueNext)}a._updateQueueNext=null;null==this._updateQueue&&(this._updatesMade=!1)},updateEntities:function(){var a=this._updateQueue,b;this._updateQueue=null;this._updatesMade=!1;do b=this._rootNode.findPartitionForEntity(a.get_entity()),a.get_parent()!=b&&(null!=a&&a.removeFromParent(),b.addNode(a)),b=a._updateQueueNext,a._updateQueueNext=null,a.get_entity().internalUpdate();while(null!=(a=b))},__class__:d.core.partition.Partition3D,
__properties__:{set_showDebugBounds:"set_showDebugBounds",get_showDebugBounds:"get_showDebugBounds"}};d.core.partition.PointLightNode=function(a){d.core.partition.EntityNode.call(this,a);this._light=a};h["away3d.core.partition.PointLightNode"]=d.core.partition.PointLightNode;d.core.partition.PointLightNode.__name__=["away3d","core","partition","PointLightNode"];d.core.partition.PointLightNode.__super__=d.core.partition.EntityNode;d.core.partition.PointLightNode.prototype=q(d.core.partition.EntityNode.prototype,
{get_light:function(){return this._light},acceptTraverser:function(a){a.enterNode(this)&&(d.core.partition.EntityNode.prototype.acceptTraverser.call(this,a),a.applyPointLight(this._light))},__class__:d.core.partition.PointLightNode,__properties__:q(d.core.partition.EntityNode.prototype.__properties__,{get_light:"get_light"})});d.core.partition.RenderableNode=function(a){d.core.partition.EntityNode.call(this,s.Boot.__cast(a,d.entities.Entity));this._renderable=a};h["away3d.core.partition.RenderableNode"]=
d.core.partition.RenderableNode;d.core.partition.RenderableNode.__name__=["away3d","core","partition","RenderableNode"];d.core.partition.RenderableNode.__super__=d.core.partition.EntityNode;d.core.partition.RenderableNode.prototype=q(d.core.partition.EntityNode.prototype,{acceptTraverser:function(a){a.enterNode(this)&&(d.core.partition.EntityNode.prototype.acceptTraverser.call(this,a),a.applyRenderable(this._renderable))},__class__:d.core.partition.RenderableNode});d.core.pick={};d.core.pick.IPicker=
function(){};h["away3d.core.pick.IPicker"]=d.core.pick.IPicker;d.core.pick.IPicker.__name__=["away3d","core","pick","IPicker"];d.core.pick.IPicker.prototype={__class__:d.core.pick.IPicker,__properties__:{set_onlyMouseEnabled:"set_onlyMouseEnabled",get_onlyMouseEnabled:"get_onlyMouseEnabled"}};d.core.pick.IPickingCollider=function(){};h["away3d.core.pick.IPickingCollider"]=d.core.pick.IPickingCollider;d.core.pick.IPickingCollider.__name__=["away3d","core","pick","IPickingCollider"];d.core.pick.IPickingCollider.prototype=
{__class__:d.core.pick.IPickingCollider};d.core.pick.PickingCollisionVO=function(a){this.entity=a};h["away3d.core.pick.PickingCollisionVO"]=d.core.pick.PickingCollisionVO;d.core.pick.PickingCollisionVO.__name__=["away3d","core","pick","PickingCollisionVO"];d.core.pick.PickingCollisionVO.prototype={__class__:d.core.pick.PickingCollisionVO};d.core.pick.RaycastPicker=function(a){this._raycastCollector=new d.core.traverse.RaycastCollector;this._ignoredEntities=[];this._onlyMouseEnabled=!0;this._findClosestCollision=
a;this._entities=[]};h["away3d.core.pick.RaycastPicker"]=d.core.pick.RaycastPicker;d.core.pick.RaycastPicker.__name__=["away3d","core","pick","RaycastPicker"];d.core.pick.RaycastPicker.__interfaces__=[d.core.pick.IPicker];d.core.pick.RaycastPicker.prototype={get_onlyMouseEnabled:function(){return this._onlyMouseEnabled},set_onlyMouseEnabled:function(a){return this._onlyMouseEnabled=a},getViewCollision:function(a,b,f){var p=f.get_entityCollector();if(0==p.get_numMouseEnableds())return null;var d=f.unproject(a,
b,0),a=f.unproject(a,b,1),a=new c.geom.Vector3D(a.x-d.x,a.y-d.y,a.z-d.z);this._numEntities=0;for(p=p.get_entityHead();null!=p;)b=p.entity,this.isIgnored(b)||b.get_isVisible()&&b.isIntersectingRay(d,a)&&(this._entities[this._numEntities++]=b),p=p.next;return 0==this._numEntities?null:this.getPickingCollisionVO()},getSceneCollision:function(a,b,f){this._raycastCollector.clear();this._raycastCollector.set_rayPosition(a);this._raycastCollector.set_rayDirection(b);f.traversePartitions(this._raycastCollector);
this._numEntities=0;for(a=this._raycastCollector.get_entityHead();null!=a;)b=a.entity,this.isIgnored(b)||(this._entities[this._numEntities++]=b),a=a.next;return 0==this._numEntities?null:this.getPickingCollisionVO()},getEntityCollision:function(a,b,f){for(var c=this._numEntities=0;c<f.length;){var d=f[c];++c;d.isIntersectingRay(a,b)&&(this._entities[this._numEntities++]=d)}return this.getPickingCollisionVO()},setIgnoreList:function(a){this._ignoredEntities=a},isIgnored:function(a){if(this._onlyMouseEnabled&&
(!a._ancestorsAllowMouseEnabled||!a.get_mouseEnabled()))return!0;for(var b=0,f=this._ignoredEntities;b<f.length;){var c=f[b];++b;if(c==a)return!0}return!1},sortOnNearT:function(a,b){return a.get_pickingCollisionVO().rayEntryDistance>b.get_pickingCollisionVO().rayEntryDistance?1:-1},getPickingCollisionVO:function(){d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._entities),this._numEntities);this._entities.sort(r(this,this.sortOnNearT));var a=Math.POSITIVE_INFINITY,b=null,
f,c,i;for(i=0;i<this._numEntities;){c=this._entities[i];f=c._pickingCollisionVO;if(null!=c.get_pickingCollider()){if((null==b||f.rayEntryDistance<b.rayEntryDistance)&&c.collidesBefore(a,this._findClosestCollision))if(a=f.rayEntryDistance,b=f,!this._findClosestCollision)return this.updateLocalPosition(f),f}else if((null==b||f.rayEntryDistance<b.rayEntryDistance)&&!f.rayOriginIsInsideBounds)return this.updateLocalPosition(f),f;++i}return b},updateLocalPosition:function(a){null==a.localPosition&&(a.localPosition=
new c.geom.Vector3D);var b=a.localPosition,f=a.localRayDirection,p=a.localRayPosition,a=a.rayEntryDistance;b.x=p.x+a*f.x;b.y=p.y+a*f.y;b.z=p.z+a*f.z},dispose:function(){},__class__:d.core.pick.RaycastPicker,__properties__:{set_onlyMouseEnabled:"set_onlyMouseEnabled",get_onlyMouseEnabled:"get_onlyMouseEnabled"}};d.core.traverse={};d.core.traverse.PartitionTraverser=function(){};h["away3d.core.traverse.PartitionTraverser"]=d.core.traverse.PartitionTraverser;d.core.traverse.PartitionTraverser.__name__=
["away3d","core","traverse","PartitionTraverser"];d.core.traverse.PartitionTraverser.prototype={enterNode:function(){return!0},applySkyBox:function(){throw new d.errors.AbstractMethodError;},applyRenderable:function(){throw new d.errors.AbstractMethodError;},applyUnknownLight:function(){throw new d.errors.AbstractMethodError;},applyDirectionalLight:function(){throw new d.errors.AbstractMethodError;},applyPointLight:function(){throw new d.errors.AbstractMethodError;},applyLightProbe:function(){throw new d.errors.AbstractMethodError;
},applyEntity:function(){throw new d.errors.AbstractMethodError;},get_entryPoint:function(){return this._entryPoint},__class__:d.core.traverse.PartitionTraverser,__properties__:{get_entryPoint:"get_entryPoint"}};d.core.traverse.EntityCollector=function(){d.core.traverse.PartitionTraverser.call(this);this.init()};h["away3d.core.traverse.EntityCollector"]=d.core.traverse.EntityCollector;d.core.traverse.EntityCollector.__name__=["away3d","core","traverse","EntityCollector"];d.core.traverse.EntityCollector.__super__=
d.core.traverse.PartitionTraverser;d.core.traverse.EntityCollector.prototype=q(d.core.traverse.PartitionTraverser.prototype,{init:function(){this._lights=[];this._directionalLights=[];this._pointLights=[];this._lightProbes=[];this._renderableListItemPool=new d.core.data.RenderableListItemPool;this._entityListItemPool=new d.core.data.EntityListItemPool;this._numCullPlanes=this._numLightProbes=this._numPointLights=this._numDirectionalLights=this._numMouseEnableds=this._numTriangles=this._numLights=
this._numEntities=0},get_camera:function(){return this._camera},set_camera:function(a){this._camera=a;this._entryPoint=this._camera.get_scenePosition();this._cameraForward=this._camera.get_forwardVector();this._cullPlanes=this._camera.get_frustumPlanes();return a},get_cullPlanes:function(){return this._customCullPlanes},set_cullPlanes:function(a){return this._customCullPlanes=a},get_numMouseEnableds:function(){return this._numMouseEnableds},get_skyBox:function(){return this._skyBox},get_opaqueRenderableHead:function(){return this._opaqueRenderableHead},
set_opaqueRenderableHead:function(a){return this._opaqueRenderableHead=a},get_blendedRenderableHead:function(){return this._blendedRenderableHead},set_blendedRenderableHead:function(a){return this._blendedRenderableHead=a},get_entityHead:function(){return this._entityHead},get_lights:function(){return this._lights},get_directionalLights:function(){return this._directionalLights},get_pointLights:function(){return this._pointLights},get_lightProbes:function(){return this._lightProbes},clear:function(){null!=
this._camera&&(this._entryPoint=this._camera.get_scenePosition(),this._cameraForward=this._camera.get_forwardVector());this._cullPlanes=null!=this._customCullPlanes?this._customCullPlanes:null!=this._camera?this._camera.get_frustumPlanes():null;this._numCullPlanes=null!=this._cullPlanes?this._cullPlanes.length:0;this._numTriangles=this._numMouseEnableds=0;this._entityHead=this._opaqueRenderableHead=this._blendedRenderableHead=null;this._renderableListItemPool.freeAll();this._entityListItemPool.freeAll();
this._skyBox=null;0<this._numLights&&(this._lights=[],this._numLights=0);0<this._numDirectionalLights&&(this._directionalLights=[],this._numDirectionalLights=0);0<this._numPointLights&&(this._pointLights=[],this._numPointLights=0);0<this._numLightProbes&&(this._lightProbes=[],this._numLightProbes=0)},enterNode:function(a){var b=d.core.traverse.PartitionTraverser._collectionMark!=a._collectionMark&&a.isInFrustum(this._cullPlanes,this._numCullPlanes);a._collectionMark=d.core.traverse.PartitionTraverser._collectionMark;
return b},applySkyBox:function(a){this._skyBox=a},applyRenderable:function(a){var b,f=a.get_sourceEntity();a.get_mouseEnabled()&&++this._numMouseEnableds;this._numTriangles+=a.get_numTriangles();b=a.get_material();if(null!=b){var c=this._renderableListItemPool.getItem();c.renderable=a;c.materialId=b._uniqueId;c.renderOrderId=b._renderOrderId;c.cascaded=!1;var d=this._entryPoint.x-f.get_x(),e=this._entryPoint.y-f.get_y(),g=this._entryPoint.z-f.get_z();c.zIndex=d*this._cameraForward.x+e*this._cameraForward.y+
g*this._cameraForward.z+f.get_zOffset();c.renderSceneTransform=a.getRenderSceneTransform(this._camera);b.get_requiresBlending()?(c.next=this._blendedRenderableHead,this._blendedRenderableHead=c):(c.next=this._opaqueRenderableHead,this._opaqueRenderableHead=c)}},applyEntity:function(a){++this._numEntities;var b=this._entityListItemPool.getItem();b.entity=a;b.next=this._entityHead;this._entityHead=b},applyUnknownLight:function(a){this._lights[this._numLights++]=a},applyDirectionalLight:function(a){this._lights[this._numLights++]=
a;this._directionalLights[this._numDirectionalLights++]=a},applyPointLight:function(a){this._lights[this._numLights++]=a;this._pointLights[this._numPointLights++]=a},applyLightProbe:function(a){this._lights[this._numLights++]=a;this._lightProbes[this._numLightProbes++]=a},get_numTriangles:function(){return this._numTriangles},cleanUp:function(){},__class__:d.core.traverse.EntityCollector,__properties__:q(d.core.traverse.PartitionTraverser.prototype.__properties__,{get_numTriangles:"get_numTriangles",
get_lightProbes:"get_lightProbes",get_pointLights:"get_pointLights",get_directionalLights:"get_directionalLights",get_lights:"get_lights",get_entityHead:"get_entityHead",set_blendedRenderableHead:"set_blendedRenderableHead",get_blendedRenderableHead:"get_blendedRenderableHead",set_opaqueRenderableHead:"set_opaqueRenderableHead",get_opaqueRenderableHead:"get_opaqueRenderableHead",get_skyBox:"get_skyBox",get_numMouseEnableds:"get_numMouseEnableds",set_cullPlanes:"set_cullPlanes",get_cullPlanes:"get_cullPlanes",
set_camera:"set_camera",get_camera:"get_camera"})});d.core.traverse.RaycastCollector=function(){this._rayPosition=new c.geom.Vector3D;this._rayDirection=new c.geom.Vector3D;d.core.traverse.EntityCollector.call(this)};h["away3d.core.traverse.RaycastCollector"]=d.core.traverse.RaycastCollector;d.core.traverse.RaycastCollector.__name__=["away3d","core","traverse","RaycastCollector"];d.core.traverse.RaycastCollector.__super__=d.core.traverse.EntityCollector;d.core.traverse.RaycastCollector.prototype=
q(d.core.traverse.EntityCollector.prototype,{get_rayPosition:function(){return this._rayPosition},set_rayPosition:function(a){return this._rayPosition=a},get_rayDirection:function(){return this._rayDirection},set_rayDirection:function(a){return this._rayDirection=a},enterNode:function(a){return a.isIntersectingRay(this._rayPosition,this._rayDirection)},applySkyBox:function(){},applyRenderable:function(){},applyUnknownLight:function(){},__class__:d.core.traverse.RaycastCollector,__properties__:q(d.core.traverse.EntityCollector.prototype.__properties__,
{set_rayDirection:"set_rayDirection",get_rayDirection:"get_rayDirection",set_rayPosition:"set_rayPosition",get_rayPosition:"get_rayPosition"})});c.geom.Vector3D=function(a,b,f,c){null==c&&(c=0);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);this.w=c;this.x=a;this.y=b;this.z=f};h["openfl.geom.Vector3D"]=c.geom.Vector3D;c.geom.Vector3D.__name__=["openfl","geom","Vector3D"];c.geom.Vector3D.__properties__={get_Z_AXIS:"get_Z_AXIS",get_Y_AXIS:"get_Y_AXIS",get_X_AXIS:"get_X_AXIS"};c.geom.Vector3D.X_AXIS=null;
c.geom.Vector3D.Y_AXIS=null;c.geom.Vector3D.Z_AXIS=null;c.geom.Vector3D.angleBetween=function(a,b){var f=new c.geom.Vector3D(a.x,a.y,a.z,a.w);f.normalize();var p=new c.geom.Vector3D(b.x,b.y,b.z,b.w);p.normalize();return Math.acos(f.x*p.x+f.y*p.y+f.z*p.z)};c.geom.Vector3D.distance=function(a,b){var f=b.x-a.x,c=b.y-a.y,d=b.z-a.z;return Math.sqrt(f*f+c*c+d*d)};c.geom.Vector3D.get_X_AXIS=function(){return new c.geom.Vector3D(1,0,0)};c.geom.Vector3D.get_Y_AXIS=function(){return new c.geom.Vector3D(0,1,
0)};c.geom.Vector3D.get_Z_AXIS=function(){return new c.geom.Vector3D(0,0,1)};c.geom.Vector3D.prototype={add:function(a){return new c.geom.Vector3D(this.x+a.x,this.y+a.y,this.z+a.z)},clone:function(){return new c.geom.Vector3D(this.x,this.y,this.z,this.w)},copyFrom:function(a){this.x=a.x;this.y=a.y;this.z=a.z},crossProduct:function(a){return new c.geom.Vector3D(this.y*a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x,1)},decrementBy:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z},dotProduct:function(a){return this.x*
a.x+this.y*a.y+this.z*a.z},equals:function(a,b){null==b&&(b=!1);return this.x==a.x&&this.y==a.y&&this.z==a.z&&(!b||this.w==a.w)},incrementBy:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z},nearEquals:function(a,b,f){null==f&&(f=!1);return Math.abs(this.x-a.x)<b&&Math.abs(this.y-a.y)<b&&Math.abs(this.z-a.z)<b&&(!f||Math.abs(this.w-a.w)<b)},negate:function(){this.x*=-1;this.y*=-1;this.z*=-1},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);0!=a&&(this.x/=a,this.y/=a,
this.z/=a);return a},project:function(){this.x/=this.w;this.y/=this.w;this.z/=this.w},scaleBy:function(a){this.x*=a;this.y*=a;this.z*=a},setTo:function(a,b,f){this.x=a;this.y=b;this.z=f},subtract:function(a){return new c.geom.Vector3D(this.x-a.x,this.y-a.y,this.z-a.z)},toString:function(){return"Vector3D("+this.x+", "+this.y+", "+this.z+")"},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},get_lengthSquared:function(){return this.x*this.x+this.y*this.y+this.z*this.z},
__class__:c.geom.Vector3D,__properties__:{get_lengthSquared:"get_lengthSquared",get_length:"get_length"}};d.core.pick.ShaderPicker=function(){this._onlyMouseEnabled=!0;this._interactives=[];this._localHitPosition=new c.geom.Vector3D;this._hitUV=new c.geom.Point;this._localHitNormal=new c.geom.Vector3D;this._rayPos=new c.geom.Vector3D;this._rayDir=new c.geom.Vector3D;this._id=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),4,0);this._viewportData=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
4,0);this._boundOffsetScale=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8,0);this._boundOffsetScale[3]=0;this._boundOffsetScale[7]=1};h["away3d.core.pick.ShaderPicker"]=d.core.pick.ShaderPicker;d.core.pick.ShaderPicker.__name__=["away3d","core","pick","ShaderPicker"];d.core.pick.ShaderPicker.__interfaces__=[d.core.pick.IPicker];d.core.pick.ShaderPicker.prototype={get_onlyMouseEnabled:function(){return this._onlyMouseEnabled},set_onlyMouseEnabled:function(a){return this._onlyMouseEnabled=
a},getViewCollision:function(a,b,f){var p=f.get_entityCollector();this._stage3DProxy=f.get_stage3DProxy();if(null==this._stage3DProxy)return null;this._context=this._stage3DProxy._context3D;this._viewportData[0]=f.get_width();this._viewportData[1]=f.get_height();this._viewportData[2]=-(this._projX=2*a/f.get_width()-1);this._viewportData[3]=this._projY=2*b/f.get_height()-1;this._potentialFound=!1;this.draw(p,null);this._context.setVertexBufferAt(0,null);if(null==this._context||!this._potentialFound)return null;
null==this._bitmapData&&(this._bitmapData=new c.display.BitmapData(1,1,!1,0));this._context.drawToBitmapData(this._bitmapData);this._hitColor=this._bitmapData.getPixel(0,0);if(0==this._hitColor)return this._context.present(),null;this._hitRenderable=this._interactives[this._hitColor-1];this._hitEntity=this._hitRenderable.get_sourceEntity();if(this._onlyMouseEnabled&&(!this._hitEntity._ancestorsAllowMouseEnabled||!this._hitEntity.get_mouseEnabled()))return null;a=this._hitEntity.get_pickingCollisionVO();
this._hitRenderable.get_shaderPickingDetails()?(this.getHitDetails(f.get_camera()),a.localPosition=this._localHitPosition,a.localNormal=this._localHitNormal,a.uv=this._hitUV,a.index=this._faceIndex,a.subGeometryIndex=this._subGeometryIndex):(a.localPosition=null,a.localNormal=null,a.uv=null,a.index=0,a.subGeometryIndex=0);return a},getSceneCollision:function(){return null},draw:function(a){var b=a.get_camera();this._context.clear(0,0,0,1);this._stage3DProxy.set_scissorRect(d.core.pick.ShaderPicker.MOUSE_SCISSOR_RECT);
this._interactives=[];this._interactiveId=0;null==this._objectProgram3D&&this.initObjectProgram3D();this._context.setBlendFactors(1,0);this._context.setDepthTest(!0,513);this._context.setProgram(this._objectProgram3D);this._context.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,4,this._viewportData,1);this.drawRenderables(a.get_opaqueRenderableHead(),b);this.drawRenderables(a.get_blendedRenderableHead(),b)},drawRenderables:function(a,b){for(var f=d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX(),
p,i=b.get_viewProjection();null!=a;)p=a.renderable,null==p.get_sourceEntity().get_scene()||!p.get_mouseEnabled()&&this._onlyMouseEnabled||(this._potentialFound=!0,this._context.setCulling(null!=p.get_material()&&p.get_material().get_bothSides()?0:1028),this._interactives[this._interactiveId++]=p,this._id[1]=(this._interactiveId>>8)/255,this._id[2]=(this._interactiveId&255)/255,f.copyFrom(p.getRenderSceneTransform(b)),f.append(i),this._context.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,
0,f,!0),this._context.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this._id,1),p.activateVertexBuffer(0,this._stage3DProxy),this._context.drawTriangles(p.getIndexBuffer(this._stage3DProxy),0,p.get_numTriangles())),a=a.next},updateRay:function(a){this._rayPos=a.get_scenePosition();this._rayDir=a.getRay(this._projX,this._projY,1);this._rayDir.normalize()},initObjectProgram3D:function(){this._objectProgram3D=this._context.createProgram();this._objectProgram3D.upload(c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,
"m44 vt0, va0, vc0\t\t\t\nmul vt1.xy, vt0.w, vc4.zw\t\nadd vt0.xy, vt0.xy, vt1.xy\t\nmul vt0.xy, vt0.xy, vc4.xy\t\nmov op, vt0\t\n"),c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,"mov oc, fc0"))},initTriangleProgram3D:function(){this._triangleProgram3D=this._context.createProgram();this._triangleProgram3D.upload(c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,"add vt0, va0, vc5 \t\t\t\nmul vt0, vt0, vc6 \t\t\t\nmov v0, vt0\t\t\t\t\nm44 vt0, va0, vc0\t\t\t\nmul vt1.xy, vt0.w, vc4.zw\t\nadd vt0.xy, vt0.xy, vt1.xy\t\nmul vt0.xy, vt0.xy, vc4.xy\t\nmov op, vt0\t\n"),
c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,"mov oc, v0"))},getHitDetails:function(a){this.getApproximatePosition(a);this.getPreciseDetails(a)},getApproximatePosition:function(a){var b=this._hitRenderable.get_sourceEntity(),f,p,i,e,g;f=d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX();f.copyFrom(this._hitRenderable.getRenderSceneTransform(a));f.append(a.get_viewProjection());null==this._triangleProgram3D&&this.initTriangleProgram3D();this._boundOffsetScale[4]=
1/(a=b.get_maxX()-b.get_minX());this._boundOffsetScale[5]=1/(p=b.get_maxY()-b.get_minY());this._boundOffsetScale[6]=1/(i=b.get_maxZ()-b.get_minZ());this._boundOffsetScale[0]=e=-b.get_minX();this._boundOffsetScale[1]=g=-b.get_minY();this._boundOffsetScale[2]=b=-b.get_minZ();this._context.setProgram(this._triangleProgram3D);this._context.clear(0,0,0,0,1,0,256);this._context.setScissorRectangle(d.core.pick.ShaderPicker.MOUSE_SCISSOR_RECT);this._context.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,
0,f,!0);this._context.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,5,this._boundOffsetScale,2);this._hitRenderable.activateVertexBuffer(0,this._stage3DProxy);this._context.drawTriangles(this._hitRenderable.getIndexBuffer(this._stage3DProxy),0,this._hitRenderable.get_numTriangles());this._context.drawToBitmapData(this._bitmapData);f=this._bitmapData.getPixel(0,0);this._localHitPosition.x=(f>>16&255)*a/255-e;this._localHitPosition.y=(f>>8&255)*p/255-g;this._localHitPosition.z=
(f&255)*i/255-b},getPreciseDetails:function(a){var b=s.Boot.__cast(this._hitRenderable,d.core.base.SubMesh).get_subGeometry(),f=b.get_indexData(),c=b.get_vertexData(),i=f.length,e,g,o,h,k,n,m,l=0,q=1,r=2,u,t,v,U,w,x,y,B,C,E,D,F,$,Y,I=b.get_UVData(),V=b.get_faceNormals(),L=this._localHitPosition.x,G=this._localHitPosition.y,H=this._localHitPosition.z,J=b.get_vertexStride(),K=b.get_vertexOffset();for(this.updateRay(a);l<i;){b=K+f[l]*J;u=K+f[q]*J;t=K+f[r]*J;e=c[b];a=c[b+1];b=c[b+2];g=c[u];o=c[u+1];h=
c[u+2];k=c[t];n=c[t+1];m=c[t+2];if(!(L<e&&L<g&&L<k||G<a&&G<o&&G<n||H<b&&H<h&&H<m||L>e&&L>g&&L>k||G>a&&G>o&&G>n||H>b&&H>h&&H>m))if(t=k-e,u=n-a,v=m-b,U=g-e,w=o-a,x=h-b,y=L-e,B=G-a,C=H-b,E=t*t+u*u+v*v,D=t*U+u*w+v*x,F=t*y+u*B+v*C,$=U*U+w*w+x*x,B=U*y+w*B+x*C,Y=1/(E*$-D*D),y=($*F-D*B)*Y,B=(E*B-D*F)*Y,0<=y&&0<=B&&1>=y+B){this.getPrecisePosition(this._hitRenderable.get_inverseSceneTransform(),V[l],V[l+1],V[l+2],e,a,b);y=this._localHitPosition.x-e;B=this._localHitPosition.y-a;C=this._localHitPosition.z-b;
c=g-e;i=o-a;V=h-b;e=k-e;a=n-a;b=m-b;this._localHitNormal.x=i*b-V*a;this._localHitNormal.y=V*e-c*b;this._localHitNormal.z=c*a-i*e;a=1/Math.sqrt(this._localHitNormal.x*this._localHitNormal.x+this._localHitNormal.y*this._localHitNormal.y+this._localHitNormal.z*this._localHitNormal.z);this._localHitNormal.x*=a;this._localHitNormal.y*=a;this._localHitNormal.z*=a;F=t*y+u*B+v*C;B=U*y+w*B+x*C;y=($*F-D*B)*Y;B=(E*B-D*F)*Y;a=f[l]<<1;q=f[q]<<1;r=f[r]<<1;f=I[a];a=I[a+1];this._hitUV.x=f+B*(I[q]-f)+y*(I[r]-f);this._hitUV.y=
a+B*(I[q+1]-a)+y*(I[r+1]-a);this._faceIndex=l;this._subGeometryIndex=d.tools.utils.GeomUtil.getMeshSubMeshIndex(s.Boot.__cast(this._hitRenderable,d.core.base.SubMesh));break}l+=3;q+=3;r+=3}},getPrecisePosition:function(a,b,f,c,i,e,g){var o,h,k,n,m,l=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),q=this._rayPos.x,s=this._rayPos.y,r=this._rayPos.z;k=this._rayDir.x;n=this._rayDir.y;m=this._rayDir.z;a.copyRawDataTo(l);a=l.data[0]*k+l.data[4]*n+l.data[8]*m;o=l.data[1]*k+l.data[5]*n+l.data[9]*m;h=l.data[2]*
k+l.data[6]*n+l.data[10]*m;k=l.data[0]*q+l.data[4]*s+l.data[8]*r+l.data[12];n=l.data[1]*q+l.data[5]*s+l.data[9]*r+l.data[13];m=l.data[2]*q+l.data[6]*s+l.data[10]*r+l.data[14];b=((i-k)*b+(e-n)*f+(g-m)*c)/(a*b+o*f+h*c);this._localHitPosition.x=k+a*b;this._localHitPosition.y=n+o*b;this._localHitPosition.z=m+h*b},dispose:function(){this._bitmapData.dispose();null!=this._triangleProgram3D&&this._triangleProgram3D.dispose();null!=this._objectProgram3D&&this._objectProgram3D.dispose();this._hitEntity=this._hitRenderable=
this._bitmapData=this._objectProgram3D=this._triangleProgram3D=null},__class__:d.core.pick.ShaderPicker,__properties__:{set_onlyMouseEnabled:"set_onlyMouseEnabled",get_onlyMouseEnabled:"get_onlyMouseEnabled"}};d.utils={};d.utils.ArrayUtils=function(){};h["away3d.utils.ArrayUtils"]=d.utils.ArrayUtils;d.utils.ArrayUtils.__name__=["away3d","utils","ArrayUtils"];d.utils.ArrayUtils.reSize=function(a,b,f){switch(a[1]){case 0:for(var a=a[2],p=a.length;p<b;)a.push(f),p++;for(;p>b;)a.pop(),p--;b=0;for(p=a.length;b<
p;){var d=b++;a[d]=f}break;case 1:a=a[2];for(p=a.length;p<b;){d=f;if(!a.fixed){a.length++;if(a.data.length<a.length){var e;e=Array(a.data.length+10);m.ds._Vector.Vector_Impl_.blit(a.data,0,e,0,a.data.length);a.data=e}a.data[a.length-1]=d}a.length;p++}for(;p>b;)c._Vector.Vector_Impl_.pop(a),p--;b=0;for(p=a.length;b<p;)d=b++,e=f,d>=a.length&&!a.fixed&&(a.length=d+1),a.data[d]=e}};d.utils.ArrayUtils.Prefill=function(a,b,f){switch(a[1]){case 0:a=a[2];a.splice(0,a.length);for(var p=0;p++<b;)a.push(f);
return a;case 1:a=a[2];c._Vector.Vector_Impl_.splice(a,0,a.length);for(p=0;p++<b;){if(!a.fixed){a.length++;if(a.data.length<a.length){var d;d=Array(a.data.length+10);m.ds._Vector.Vector_Impl_.blit(a.data,0,d,0,a.data.length);a.data=d}a.data[a.length-1]=f}a.length}return a}};c._Vector={};c._Vector.Vector_Impl_=function(){};h["openfl._Vector.Vector_Impl_"]=c._Vector.Vector_Impl_;c._Vector.Vector_Impl_.__name__=["openfl","_Vector","Vector_Impl_"];c._Vector.Vector_Impl_.__properties__={set_fixed:"set_fixed",
get_fixed:"get_fixed",set_length:"set_length",get_length:"get_length"};c._Vector.Vector_Impl_._new=function(a,b){null==b&&(b=!1);null==a&&(a=0);var f;f=new c.VectorData;f.data=Array(a);f.length=a;f.fixed=b;return f};c._Vector.Vector_Impl_.concat=function(a,b){var f=new c.VectorData;f.length=null!=b?a.length+b.length:a.length;f.fixed=!1;f.data=Array(f.length);m.ds._Vector.Vector_Impl_.blit(a.data,0,f.data,0,a.length);null!=b&&m.ds._Vector.Vector_Impl_.blit(b.data,0,f.data,a.length,b.length);return f};
c._Vector.Vector_Impl_.copy=function(a){var b=new c.VectorData;b.length=a.length;b.fixed=a.fixed;b.data=Array(a.length);m.ds._Vector.Vector_Impl_.blit(a.data,0,b.data,0,a.length);return b};c._Vector.Vector_Impl_.iterator=function(a){return new c.VectorDataIterator(a)};c._Vector.Vector_Impl_.join=function(a,b){for(var f="",c=0,d=a.length;c<d;){var e=c++;0<e&&(f+=b);f+=k.string(a.data[e])}return f};c._Vector.Vector_Impl_.pop=function(a){return!a.fixed&&0<a.length?(a.length--,a.data[a.length]):null};
c._Vector.Vector_Impl_.push=function(a,b){if(!a.fixed){a.length++;if(a.data.length<a.length){var f;f=Array(a.data.length+10);m.ds._Vector.Vector_Impl_.blit(a.data,0,f,0,a.data.length);a.data=f}a.data[a.length-1]=b}return a.length};c._Vector.Vector_Impl_.reverse=function(a){var b;b=Array(a.length);for(var f=0,c=a.length;f<c;){var d=f++;b[a.length-1-d]=a.data[d]}a.data=b};c._Vector.Vector_Impl_.shift=function(a){if(!a.fixed&&0<a.length){var b=a.data[0];a.length--;m.ds._Vector.Vector_Impl_.blit(a.data,
1,a.data,0,a.length);return b}return null};c._Vector.Vector_Impl_.unshift=function(a,b){if(!a.fixed){a.length++;if(a.data.length<a.length){var f;f=Array(a.length+10);m.ds._Vector.Vector_Impl_.blit(a.data,0,f,1,a.data.length);a.data=f}else m.ds._Vector.Vector_Impl_.blit(a.data,0,a.data,1,a.length-1);a.data[0]=b}};c._Vector.Vector_Impl_.slice=function(a,b,f){null==f&&(f=0);null==b&&(b=0);0>b&&(b+=a.length);0>=f&&(f+=a.length);f>a.length&&(f=a.length);var p=f-b;if(0>=p||p>a.length)p=a.length;var d=new c.VectorData;
d.length=f-b;d.fixed=!0;d.data=Array(p);m.ds._Vector.Vector_Impl_.blit(a.data,b,d.data,0,p);return d};c._Vector.Vector_Impl_.sort=function(a,b){var f=m.ds._Vector.Vector_Impl_.toArray(a.data);f.sort(b);var c;c=Array(f.length);for(var d=0,e=f.length;d<e;){var g=d++;c[g]=f[g]}a.data=c};c._Vector.Vector_Impl_.splice=function(a,b,f){0>b&&(b+=a.length);b+f>a.length&&(f=a.length-b);0>f&&(f=0);var p=new c.VectorData;p.length=f;p.fixed=!1;p.data=Array(f);m.ds._Vector.Vector_Impl_.blit(a.data,b,p.data,0,f);
0<f&&(a.length-=f,m.ds._Vector.Vector_Impl_.blit(a.data,b+f,a.data,b,a.length-b));return p};c._Vector.Vector_Impl_.toString=function(){return""};c._Vector.Vector_Impl_.indexOf=function(a,b,f){null==f&&(f=0);for(var c=a.length;f<c;){var d=f++;if(a.data[d]==b)return d}return-1};c._Vector.Vector_Impl_.lastIndexOf=function(a,b,f){null==f&&(f=0);for(var c=a.length-1;c>=f;){if(a.data[c]==b)return c;c--}return-1};c._Vector.Vector_Impl_.ofArray=function(a){var b=new c.VectorData;b.length=a.length;b.fixed=
!0;var f;f=Array(a.length);for(var p=0,d=a.length;p<d;){var e=p++;f[e]=a[e]}b.data=f;return b};c._Vector.Vector_Impl_.convert=function(a){return a};c._Vector.Vector_Impl_.arrayAccess=function(a,b){return a.data[b]};c._Vector.Vector_Impl_.arrayWrite=function(a,b,f){b>=a.length&&!a.fixed&&(a.length=b+1);return a.data[b]=f};c._Vector.Vector_Impl_.fromArray=function(a){var b=new c.VectorData;b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var p=0,d=a.length;p<d;){var e=p++;f[e]=a[e]}b.data=f;
return b};c._Vector.Vector_Impl_.toArray=function(a){for(var b=[],f=0,c=a.data.length;f<c;){var d=f++;b.push(a.data[d])}return b};c._Vector.Vector_Impl_.fromHaxeVector=function(a){var b=new c.VectorData;b.length=a.length;b.fixed=!0;b.data=a;return b};c._Vector.Vector_Impl_.toHaxeVector=function(a){return a.data};c._Vector.Vector_Impl_.fromVectorData=function(a){return a};c._Vector.Vector_Impl_.toVectorData=function(a){return a};c._Vector.Vector_Impl_.get_length=function(a){return a.length};c._Vector.Vector_Impl_.set_length=
function(a,b){if(!a.fixed){if(b>a.length){var f;f=Array(b);m.ds._Vector.Vector_Impl_.blit(a.data,0,f,0,k["int"](Math.min(a.data.length,b)));a.data=f}a.length=b}return b};c._Vector.Vector_Impl_.get_fixed=function(a){return a.fixed};c._Vector.Vector_Impl_.set_fixed=function(a,b){return a.fixed=b};c.VectorData=function(){this.length=0};h["openfl.VectorData"]=c.VectorData;c.VectorData.__name__=["openfl","VectorData"];c.VectorData.prototype={__class__:c.VectorData};m.ds._Vector={};m.ds._Vector.Vector_Impl_=
function(){};h["haxe.ds._Vector.Vector_Impl_"]=m.ds._Vector.Vector_Impl_;m.ds._Vector.Vector_Impl_.__name__=["haxe","ds","_Vector","Vector_Impl_"];m.ds._Vector.Vector_Impl_.blit=function(a,b,f,c,d){for(var e=0;e<d;){var g=e++;f[c+g]=a[b+g]}};m.ds._Vector.Vector_Impl_.toArray=function(a){for(var b=[],f=a.length,c=0;c<f;){var d=c++;b[d]=a[d]}return b};d.utils._ArrayUtils={};d.utils._ArrayUtils.AcceptEither_Impl_=function(){};h["away3d.utils._ArrayUtils.AcceptEither_Impl_"]=d.utils._ArrayUtils.AcceptEither_Impl_;
d.utils._ArrayUtils.AcceptEither_Impl_.__name__=["away3d","utils","_ArrayUtils","AcceptEither_Impl_"];d.utils._ArrayUtils.AcceptEither_Impl_.__properties__={get_type:"get_type",get_value:"get_value"};d.utils._ArrayUtils.AcceptEither_Impl_._new=function(a){return a};d.utils._ArrayUtils.AcceptEither_Impl_.get_value=function(a){switch(a[1]){case 0:return a=a[2];case 1:return a=a[2]}};d.utils._ArrayUtils.AcceptEither_Impl_.get_type=function(a){return a};d.utils._ArrayUtils.AcceptEither_Impl_.fromA=function(a){return d.utils.Either.Left(a)};
d.utils._ArrayUtils.AcceptEither_Impl_.fromB=function(a){return d.utils.Either.Right(a)};d.utils.Either=h["away3d.utils.Either"]={__ename__:!0,__constructs__:["Left","Right"]};d.utils.Either.Left=function(a){a=["Left",0,a];a.__enum__=d.utils.Either;a.toString=u;return a};d.utils.Either.Right=function(a){a=["Right",1,a];a.__enum__=d.utils.Either;a.toString=u;return a};d.core.pick.PickingType=function(){};h["away3d.core.pick.PickingType"]=d.core.pick.PickingType;d.core.pick.PickingType.__name__=["away3d",
"core","pick","PickingType"];d.core.render={};d.core.render.BackgroundImageRenderer=function(a){this.set_stage3DProxy(a)};h["away3d.core.render.BackgroundImageRenderer"]=d.core.render.BackgroundImageRenderer;d.core.render.BackgroundImageRenderer.__name__=["away3d","core","render","BackgroundImageRenderer"];d.core.render.BackgroundImageRenderer.prototype={get_stage3DProxy:function(){return this._stage3DProxy},set_stage3DProxy:function(a){if(a==this._stage3DProxy)return a;this._stage3DProxy=a;this.removeBuffers();
return a},removeBuffers:function(){null!=this._vertexBuffer&&(this._vertexBuffer.dispose(),this._vertexBuffer=null,this._program3d.dispose(),this._program3d=null,this._indexBuffer.dispose(),this._indexBuffer=null)},getVertexCode:function(){return"mov op, va0\nmov v0, va1"},getFragmentCode:function(){var a;switch(this._texture.get_format()[1]){case 1:a="dxt1,";break;case 2:a="dxt5,";break;default:a=""}return"tex ft0, v0, fs0 <2d, "+a+"linear>\t\nmov oc, ft0"},dispose:function(){this.removeBuffers()},
render:function(){},initBuffers:function(a){this._vertexBuffer=a.createVertexBuffer(4,4);this._program3d=a.createProgram();this._indexBuffer=a.createIndexBuffer(6);this._indexBuffer.uploadFromVector(function(){var a=[2,1,0,3,2,0],b=new c.VectorData;b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var p=0,d=a.length;p<d;){var e=p++;f[e]=a[e]}b.data=f;return b}(this),0,6);this._program3d.upload(c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,this.getVertexCode()),
c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,this.getFragmentCode()));var b=a=2,f=-1,p=1;null!=this._stage3DProxy.get_scissorRect()&&(f=(2*this._stage3DProxy.get_scissorRect().x-this._stage3DProxy.get_viewPort().width)/this._stage3DProxy.get_viewPort().width,p=-1*((2*this._stage3DProxy.get_scissorRect().y-this._stage3DProxy.get_viewPort().height)/this._stage3DProxy.get_viewPort().height),a=2/(this._stage3DProxy.get_viewPort().width/this._stage3DProxy.get_scissorRect().width),
b=2/(this._stage3DProxy.get_viewPort().height/this._stage3DProxy.get_scissorRect().height));this._vertexBuffer.uploadFromVector([f,p-b,0,1,f+a,p-b,1,1,f+a,p,1,0,f,p,0,0],0,4)},get_texture:function(){return this._texture},set_texture:function(a){return this._texture=a},__class__:d.core.render.BackgroundImageRenderer,__properties__:{set_texture:"set_texture",get_texture:"get_texture",set_stage3DProxy:"set_stage3DProxy",get_stage3DProxy:"get_stage3DProxy"}};d.core.render.RendererBase=function(a){null==
a&&(a=!1);this._backgroundB=this._backgroundG=this._backgroundR=0;this._backgroundAlpha=1;this._shareContext=!1;this._textureRatioY=this._textureRatioX=1;this._clearOnRender=!0;this._rttViewProjectionMatrix=new c.geom.Matrix3D;this._renderableSorter=new d.core.sort.RenderableMergeSort;this._renderToTexture=a};h["away3d.core.render.RendererBase"]=d.core.render.RendererBase;d.core.render.RendererBase.__name__=["away3d","core","render","RendererBase"];d.core.render.RendererBase.prototype={createEntityCollector:function(){return new d.core.traverse.EntityCollector},
get_viewWidth:function(){return this._viewWidth},set_viewWidth:function(a){return this._viewWidth=a},get_viewHeight:function(){return this._viewHeight},set_viewHeight:function(a){return this._viewHeight=a},get_renderToTexture:function(){return this._renderToTexture},get_renderableSorter:function(){return this._renderableSorter},set_renderableSorter:function(a){return this._renderableSorter=a},get_clearOnRender:function(){return this._clearOnRender},set_clearOnRender:function(a){return this._clearOnRender=
a},get_backgroundR:function(){return this._backgroundR},set_backgroundR:function(a){return this._backgroundR=a},get_backgroundG:function(){return this._backgroundG},set_backgroundG:function(a){return this._backgroundG=a},get_backgroundB:function(){return this._backgroundB},set_backgroundB:function(a){return this._backgroundB=a},get_stage3DProxy:function(){return this._stage3DProxy},set_stage3DProxy:function(a){if(a==this._stage3DProxy)return a;if(null==a)return null!=this._stage3DProxy&&(this._stage3DProxy.removeEventListener(d.events.Stage3DEvent.CONTEXT3D_CREATED,
r(this,this.onContextUpdate)),this._stage3DProxy.removeEventListener(d.events.Stage3DEvent.CONTEXT3D_RECREATED,r(this,this.onContextUpdate))),this._context=this._stage3DProxy=null;this._stage3DProxy=a;this._stage3DProxy.addEventListener(d.events.Stage3DEvent.CONTEXT3D_CREATED,r(this,this.onContextUpdate));this._stage3DProxy.addEventListener(d.events.Stage3DEvent.CONTEXT3D_RECREATED,r(this,this.onContextUpdate));null!=this._backgroundImageRenderer&&this._backgroundImageRenderer.set_stage3DProxy(a);
null!=a.get_context3D()&&(this._context=a.get_context3D());return a},get_shareContext:function(){return this._shareContext},set_shareContext:function(a){return this._shareContext=a},dispose:function(){this.set_stage3DProxy(null);null!=this._backgroundImageRenderer&&(this._backgroundImageRenderer.dispose(),this._backgroundImageRenderer=null)},render:function(a,b,f,c){null==c&&(c=0);if(!(null==this._stage3DProxy||null==this._context)){this._rttViewProjectionMatrix.copyFrom(a.get_camera().get_viewProjection());
this._rttViewProjectionMatrix.appendScale(this._textureRatioX,this._textureRatioY,1);this.executeRender(a,b,f,c);for(a=0;8>a;)this._context.setVertexBufferAt(a,null),this._context.setTextureAt(a,null),++a}},executeRender:function(a,b,f,c){null==c&&(c=0);this._renderTarget=b;this._renderTargetSurface=c;null!=this._renderableSorter&&this._renderableSorter.sort(a);this._renderToTexture&&this.executeRenderToTexturePass(a);this._stage3DProxy.setRenderTarget(b,!0,c);(null!=b||!this._shareContext)&&this._clearOnRender&&
this._context.clear(this._backgroundR,this._backgroundG,this._backgroundB,this._backgroundAlpha,1,0);this._context.setDepthTest(!1,519);this._stage3DProxy.set_scissorRect(f);null!=this._backgroundImageRenderer&&this._backgroundImageRenderer.render();this.draw(a,b);this._context.setDepthTest(!1,515);!this._shareContext&&(this._snapshotRequired&&null!=this._snapshotBitmapData)&&(this._context.drawToBitmapData(this._snapshotBitmapData),this._snapshotRequired=!1);this._stage3DProxy.set_scissorRect(null)},
queueSnapshot:function(a){this._snapshotRequired=!0;this._snapshotBitmapData=a},executeRenderToTexturePass:function(){throw new d.errors.AbstractMethodError;},draw:function(){throw new d.errors.AbstractMethodError;},onContextUpdate:function(){this._context=this._stage3DProxy.get_context3D()},get_backgroundAlpha:function(){return this._backgroundAlpha},set_backgroundAlpha:function(a){return this._backgroundAlpha=a},get_background:function(){return this._background},set_background:function(a){null!=
this._backgroundImageRenderer&&null==a&&(this._backgroundImageRenderer.dispose(),this._backgroundImageRenderer=null);null==this._backgroundImageRenderer&&null!=a&&(this._backgroundImageRenderer=new d.core.render.BackgroundImageRenderer(this._stage3DProxy));this._background=a;null!=this._backgroundImageRenderer&&this._backgroundImageRenderer.set_texture(a);return a},get_backgroundImageRenderer:function(){return this._backgroundImageRenderer},get_antiAlias:function(){return this._antiAlias},set_antiAlias:function(a){return this._antiAlias=
a},get_textureRatioX:function(){return this._textureRatioX},set_textureRatioX:function(a){return this._textureRatioX=a},get_textureRatioY:function(){return this._textureRatioY},set_textureRatioY:function(a){return this._textureRatioY=a},__class__:d.core.render.RendererBase,__properties__:{set_textureRatioY:"set_textureRatioY",get_textureRatioY:"get_textureRatioY",set_textureRatioX:"set_textureRatioX",get_textureRatioX:"get_textureRatioX",set_antiAlias:"set_antiAlias",get_antiAlias:"get_antiAlias",
get_backgroundImageRenderer:"get_backgroundImageRenderer",set_background:"set_background",get_background:"get_background",set_backgroundAlpha:"set_backgroundAlpha",get_backgroundAlpha:"get_backgroundAlpha",set_shareContext:"set_shareContext",get_shareContext:"get_shareContext",set_stage3DProxy:"set_stage3DProxy",get_stage3DProxy:"get_stage3DProxy",set_backgroundB:"set_backgroundB",get_backgroundB:"get_backgroundB",set_backgroundG:"set_backgroundG",get_backgroundG:"get_backgroundG",set_backgroundR:"set_backgroundR",
get_backgroundR:"get_backgroundR",set_clearOnRender:"set_clearOnRender",get_clearOnRender:"get_clearOnRender",set_renderableSorter:"set_renderableSorter",get_renderableSorter:"get_renderableSorter",get_renderToTexture:"get_renderToTexture",set_viewHeight:"set_viewHeight",get_viewHeight:"get_viewHeight",set_viewWidth:"set_viewWidth",get_viewWidth:"get_viewWidth"}};d.core.render.DefaultRenderer=function(){d.core.render.RendererBase.call(this);this._skyboxProjection=new c.geom.Matrix3D;this._depthRenderer=
new d.core.render.DepthRenderer;this._distanceRenderer=new d.core.render.DepthRenderer(!1,!0)};h["away3d.core.render.DefaultRenderer"]=d.core.render.DefaultRenderer;d.core.render.DefaultRenderer.__name__=["away3d","core","render","DefaultRenderer"];d.core.render.DefaultRenderer.__super__=d.core.render.RendererBase;d.core.render.DefaultRenderer.prototype=q(d.core.render.RendererBase.prototype,{set_stage3DProxy:function(a){d.core.render.RendererBase.prototype.set_stage3DProxy.call(this,a);this._distanceRenderer.set_stage3DProxy(this._depthRenderer.set_stage3DProxy(a));
return a},executeRender:function(a,b,f,c){null==c&&(c=0);this.updateLights(a);null!=b&&(this.drawRenderables(a.get_opaqueRenderableHead(),a,d.core.render.DefaultRenderer.RTT_PASSES),this.drawRenderables(a.get_blendedRenderableHead(),a,d.core.render.DefaultRenderer.RTT_PASSES));d.core.render.RendererBase.prototype.executeRender.call(this,a,b,f,c)},updateLights:function(a){var b=a.get_directionalLights(),f=a.get_pointLights(),c,d,e,g;c=b.length;for(d=0;d<c;)e=b[d],g=e.get_shadowMapper(),e.get_castsShadows()&&
(g.get_autoUpdateShadows()||g._shadowsInvalid)&&g.renderDepthMap(this._stage3DProxy,a,this._depthRenderer),++d;c=f.length;for(d=0;d<c;)e=f[d],g=e.get_shadowMapper(),e.get_castsShadows()&&(g.get_autoUpdateShadows()||g._shadowsInvalid)&&g.renderDepthMap(this._stage3DProxy,a,this._distanceRenderer),++d},draw:function(a,b){this._context.setBlendFactors(1,0);null!=a.get_skyBox()&&(null!=this._activeMaterial&&this._activeMaterial.deactivate(this._stage3DProxy),this._activeMaterial=null,this._context.setDepthTest(!1,
519),this.drawSkyBox(a));this._context.setDepthTest(!0,515);var f;f=null!=b?d.core.render.DefaultRenderer.SCREEN_PASSES:d.core.render.DefaultRenderer.ALL_PASSES;this.drawRenderables(a.get_opaqueRenderableHead(),a,f);this.drawRenderables(a.get_blendedRenderableHead(),a,f);this._context.setDepthTest(!1,515);null!=this._activeMaterial&&this._activeMaterial.deactivate(this._stage3DProxy);this._activeMaterial=null},drawSkyBox:function(a){var b=a.get_skyBox(),f=b.get_material(),c=a.get_camera();this.updateSkyBoxProjection(c);
f.activatePass(0,this._stage3DProxy,c);f.renderPass(0,b,this._stage3DProxy,a,this._skyboxProjection);f.deactivatePass(0,this._stage3DProxy)},updateSkyBoxProjection:function(a){var b=new c.geom.Vector3D;this._skyboxProjection.copyFrom(this._rttViewProjectionMatrix);this._skyboxProjection.copyRowTo(2,b);var f=a.get_scenePosition(),a=b.x,p=b.y,d=b.z,b=-(b.x*f.x+b.y*f.y+b.z*f.z+Math.sqrt(a*a+p*p+d*d)),f=new c.geom.Vector3D(0<=a?1:-1,0<=p?1:-1,1,1),e=new c.geom.Matrix3D(c._Vector.Vector_Impl_.copy(this._skyboxProjection.rawData));
e.invert();e=e.transformVector(f);this._skyboxProjection.copyRowTo(3,f);f=(e.x*f.x+e.y*f.y+e.z*f.z+e.w*f.w)/(a*e.x+p*e.y+d*e.z+b*e.w);this._skyboxProjection.copyRowFrom(2,new c.geom.Vector3D(a*f,p*f,d*f,b*f))},drawRenderables:function(a,b,f){for(var c,d,e=b.get_camera(),g;null!=a;){this._activeMaterial=a.renderable.get_material();this._activeMaterial.updateMaterial(this._context);c=this._activeMaterial.get_numPasses();d=0;do if(g=a,0!=((this._activeMaterial.passRendersToTexture(d)?1:2)&f)){this._activeMaterial.activatePass(d,
this._stage3DProxy,e);do this._activeMaterial.renderPass(d,g.renderable,this._stage3DProxy,b,this._rttViewProjectionMatrix),g=g.next;while(null!=g&&g.renderable.get_material()==this._activeMaterial);this._activeMaterial.deactivatePass(d,this._stage3DProxy)}else{do g=g.next;while(null!=g&&g.renderable.get_material()==this._activeMaterial)}while(++d<c);a=g}},dispose:function(){d.core.render.RendererBase.prototype.dispose.call(this);this._depthRenderer.dispose();this._distanceRenderer.dispose();this._distanceRenderer=
this._depthRenderer=null},__class__:d.core.render.DefaultRenderer});d.core.render.DepthRenderer=function(a,b){null==b&&(b=!1);null==a&&(a=!1);d.core.render.RendererBase.call(this);this._renderBlended=a;this._distanceBased=b;this._backgroundB=this._backgroundG=this._backgroundR=1};h["away3d.core.render.DepthRenderer"]=d.core.render.DepthRenderer;d.core.render.DepthRenderer.__name__=["away3d","core","render","DepthRenderer"];d.core.render.DepthRenderer.__super__=d.core.render.RendererBase;d.core.render.DepthRenderer.prototype=
q(d.core.render.RendererBase.prototype,{get_disableColor:function(){return this._disableColor},set_disableColor:function(a){return this._disableColor=a},set_backgroundR:function(a){return a},set_backgroundG:function(a){return a},set_backgroundB:function(a){return a},renderCascades:function(a,b,f,c,d){this._renderTarget=b;this._renderTargetSurface=0;this._renderableSorter.sort(a);this._stage3DProxy.setRenderTarget(b,!0,0);this._context.clear(1,1,1,1,1,0);this._context.setBlendFactors(1,0);this._context.setDepthTest(!0,
513);a=a.get_opaqueRenderableHead();b=!0;for(f-=1;0<=f;)this._stage3DProxy.set_scissorRect(c[f]),this.drawCascadeRenderables(a,d[f],b?null:d[f].get_frustumPlanes()),b=!1,--f;null!=this._activeMaterial&&this._activeMaterial.deactivateForDepth(this._stage3DProxy);this._activeMaterial=null;this._context.setDepthTest(!1,515);this._stage3DProxy.set_scissorRect(null)},drawCascadeRenderables:function(a,b,f){for(var c;null!=a;){if(!a.cascaded){var d=a.renderable;c=d.get_sourceEntity();null==f||c.get_worldBounds().isInFrustum(f,
4)?(c=d.get_material(),this._activeMaterial!=c&&(null!=this._activeMaterial&&this._activeMaterial.deactivateForDepth(this._stage3DProxy),this._activeMaterial=c,this._activeMaterial.activateForDepth(this._stage3DProxy,b,!1)),this._activeMaterial.renderDepth(d,this._stage3DProxy,b,b.get_viewProjection())):a.cascaded=!0}a=a.next}},draw:function(a){this._context.setBlendFactors(1,0);this._context.setDepthTest(!0,513);this.drawRenderables(a.get_opaqueRenderableHead(),a);this._disableColor&&this._context.setColorMask(!1,
!1,!1,!1);this._renderBlended&&this.drawRenderables(a.get_blendedRenderableHead(),a);null!=this._activeMaterial&&this._activeMaterial.deactivateForDepth(this._stage3DProxy);this._disableColor&&this._context.setColorMask(!0,!0,!0,!0);this._activeMaterial=null},drawRenderables:function(a,b){for(var f=b.get_camera(),c;null!=a;){this._activeMaterial=a.renderable.get_material();if(this._disableColor&&this._activeMaterial.hasDepthAlphaThreshold()){c=a;do c=c.next;while(null!=c&&c.renderable.get_material()==
this._activeMaterial)}else{this._activeMaterial.activateForDepth(this._stage3DProxy,f,this._distanceBased);c=a;do this._activeMaterial.renderDepth(c.renderable,this._stage3DProxy,f,this._rttViewProjectionMatrix),c=c.next;while(null!=c&&c.renderable.get_material()==this._activeMaterial);this._activeMaterial.deactivateForDepth(this._stage3DProxy)}a=c}},__class__:d.core.render.DepthRenderer,__properties__:q(d.core.render.RendererBase.prototype.__properties__,{set_disableColor:"set_disableColor",get_disableColor:"get_disableColor"})});
d.core.render.Filter3DRenderer=function(a){this._filterSizesInvalid=!0;this._stage3DProxy=a;this._rttManager=d.core.managers.RTTBufferManager.getInstance(a);this._rttManager.addEventListener(c.events.Event.RESIZE,r(this,this.onRTTResize))};h["away3d.core.render.Filter3DRenderer"]=d.core.render.Filter3DRenderer;d.core.render.Filter3DRenderer.__name__=["away3d","core","render","Filter3DRenderer"];d.core.render.Filter3DRenderer.prototype={onRTTResize:function(){this._filterSizesInvalid=!0},get_requireDepthRender:function(){return this._requireDepthRender},
getMainInputTexture:function(a){this._filterTasksInvalid&&this.updateFilterTasks(a);return this._mainInputTexture},get_filters:function(){return this._filters},set_filters:function(a){this._filters=a;this._filterTasksInvalid=!0;this._requireDepthRender=!1;if(null==this._filters)return null;for(var b=0;b<this._filters.length;)this._requireDepthRender||(this._requireDepthRender=s.Boot.__cast(null!=this._filters[b].requireDepthRender,K)),++b;this._filterSizesInvalid=!0;return a},updateFilterTasks:function(a){var b;
this._filterSizesInvalid&&this.updateFilterSizes();if(null==this._filters)this._tasks=null;else{this._tasks=[];b=this._filters.length-1;for(var f,c=0;c<=b;)f=this._filters[c],f.setRenderTargets(c==b?null:s.Boot.__cast(this._filters[c+1],d.filters.Filter3DBase).getMainInputTexture(a),a),this._tasks=this._tasks.concat(f.get_tasks()),++c;this._mainInputTexture=this._filters[0].getMainInputTexture(a)}},render:function(a,b,f){var p,d,e,g=a.get_context3D(),o=this._rttManager.get_indexBuffer(),h=this._rttManager.get_renderToTextureVertexBuffer();
if(null!=this._filters){this._filterSizesInvalid&&this.updateFilterSizes();this._filterTasksInvalid&&this.updateFilterTasks(a);p=this._filters.length;for(d=0;d<p;)this._filters[d].update(a,b),++d;p=this._tasks.length;1<p&&(g.setVertexBufferAt(0,h,0,c.display3D.Context3DVertexBufferFormat.FLOAT_2),g.setVertexBufferAt(1,h,2,c.display3D.Context3DVertexBufferFormat.FLOAT_2));for(d=0;d<p;)e=this._tasks[d],a.setRenderTarget(e.get_target()),g.setProgram(e.getProgram3D(a)),null==e.get_target()&&(a.set_scissorRect(null),
h=this._rttManager.get_renderToScreenVertexBuffer(),g.setVertexBufferAt(0,h,0,c.display3D.Context3DVertexBufferFormat.FLOAT_2),g.setVertexBufferAt(1,h,2,c.display3D.Context3DVertexBufferFormat.FLOAT_2)),g.setTextureAt(0,e.getMainInputTexture(a)),g.clear(0,0,0,0),e.activate(a,b,f),g.setBlendFactors(1,0),g.drawTriangles(o,0,2),e.deactivate(a),++d;g.setTextureAt(0,null);g.setVertexBufferAt(0,null);g.setVertexBufferAt(1,null)}},updateFilterSizes:function(){for(var a=0;a<this._filters.length;)this._filters[a].textureWidth=
this._rttManager.get_textureWidth(),this._filters[a].textureHeight=this._rttManager.get_textureHeight(),++a;this._filterSizesInvalid=!0},dispose:function(){this._rttManager.removeEventListener(c.events.Event.RESIZE,r(this,this.onRTTResize));this._stage3DProxy=this._rttManager=null},__class__:d.core.render.Filter3DRenderer,__properties__:{set_filters:"set_filters",get_filters:"get_filters",get_requireDepthRender:"get_requireDepthRender"}};d.core.sort={};d.core.sort.IEntitySorter=function(){};h["away3d.core.sort.IEntitySorter"]=
d.core.sort.IEntitySorter;d.core.sort.IEntitySorter.__name__=["away3d","core","sort","IEntitySorter"];d.core.sort.IEntitySorter.prototype={__class__:d.core.sort.IEntitySorter};d.core.sort.RenderableMergeSort=function(){};h["away3d.core.sort.RenderableMergeSort"]=d.core.sort.RenderableMergeSort;d.core.sort.RenderableMergeSort.__name__=["away3d","core","sort","RenderableMergeSort"];d.core.sort.RenderableMergeSort.__interfaces__=[d.core.sort.IEntitySorter];d.core.sort.RenderableMergeSort.prototype={sort:function(a){a.set_opaqueRenderableHead(this.mergeSortByMaterial(a.get_opaqueRenderableHead()));
a.set_blendedRenderableHead(this.mergeSortByDepth(a.get_blendedRenderableHead()))},mergeSortByDepth:function(a){var b,f;if(null==a||null==a.next)return a;f=a;for(b=a.next;null!=b;)b=b.next,null!=b&&(f=f.next,b=b.next);b=f.next;f.next=null;a=this.mergeSortByDepth(a);b=this.mergeSortByDepth(b);var c=f=null,d=null;if(null==a)return b;if(null==b)return a;for(;null!=a&&null!=b;)a.zIndex<b.zIndex?(d=a,a=a.next):(d=b,b=b.next),null==f?f=d:c.next=d,c=d;null!=a?c.next=a:null!=b&&(c.next=b);return f},mergeSortByMaterial:function(a){var b,
f;if(null==a||null==a.next)return a;f=a;for(b=a.next;null!=b;)b=b.next,null!=b&&(f=f.next,b=b.next);b=f.next;f.next=null;a=this.mergeSortByMaterial(a);b=this.mergeSortByMaterial(b);var c=f=null,d=null;if(null==a)return b;if(null==b)return a;for(;null!=a&&null!=b&&null!=a&&null!=b;){var d=a.renderOrderId,e=b.renderOrderId;d==e?(d=a.materialId,e=b.materialId,d=d==e?a.zIndex<b.zIndex?1:-1:d>e?1:-1):d=d>e?1:-1;0>d?(d=a,a=a.next):(d=b,b=b.next);null==f?f=d:c.next=d;c=d}null!=a?c.next=a:null!=b&&(c.next=
b);return f},__class__:d.core.sort.RenderableMergeSort};d.core.traverse.ShadowCasterCollector=function(){d.core.traverse.EntityCollector.call(this)};h["away3d.core.traverse.ShadowCasterCollector"]=d.core.traverse.ShadowCasterCollector;d.core.traverse.ShadowCasterCollector.__name__=["away3d","core","traverse","ShadowCasterCollector"];d.core.traverse.ShadowCasterCollector.__super__=d.core.traverse.EntityCollector;d.core.traverse.ShadowCasterCollector.prototype=q(d.core.traverse.EntityCollector.prototype,
{applyRenderable:function(a){var b=a.get_material(),f=a.get_sourceEntity();if(a.get_castsShadows()&&null!=b){var c=this._renderableListItemPool.getItem();c.renderable=a;c.next=this._opaqueRenderableHead;c.cascaded=!1;var d=this._entryPoint.x-f.get_x(),e=this._entryPoint.y-f.get_y(),f=this._entryPoint.z-f.get_z();c.zIndex=d*this._cameraForward.x+e*this._cameraForward.y+f*this._cameraForward.z;c.renderSceneTransform=a.getRenderSceneTransform(this._camera);c.renderOrderId=b._depthPassId;this._opaqueRenderableHead=
c}},applyUnknownLight:function(){},applyDirectionalLight:function(){},applyPointLight:function(){},applyLightProbe:function(){},applySkyBox:function(){},__class__:d.core.traverse.ShadowCasterCollector});d.debug={};d.debug.Debug=function(){};h["away3d.debug.Debug"]=d.debug.Debug;d.debug.Debug.__name__=["away3d","debug","Debug"];d.debug.Debug.clear=function(){};d.debug.Debug.delimiter=function(){};d.debug.Debug.trace=function(a){d.debug.Debug.active&&m.Log.trace(a,{fileName:"Debug.hx",lineNumber:20,
className:"away3d.debug.Debug",methodName:"trace"})};d.debug.Debug.warning=function(a){d.debug.Debug.warningsAsErrors?d.debug.Debug.error(a):m.Log.trace("WARNING: "+k.string(a),{fileName:"Debug.hx",lineNumber:28,className:"away3d.debug.Debug",methodName:"warning"})};d.debug.Debug.error=function(a){m.Log.trace("ERROR: "+k.string(a),{fileName:"Debug.hx",lineNumber:32,className:"away3d.debug.Debug",methodName:"error"});throw new c.errors.Error(a);};d.entities.Mesh=function(a,b){this._shareAnimationGeometry=
this._castsShadows=!0;d.entities.Entity.call(this);this._subMeshes=[];this.set_geometry(a);null==this.get_geometry()&&this.set_geometry(new d.core.base.Geometry);this.set_material(b);null==this.get_material()&&this.set_material(d.materials.utils.DefaultMaterialManager.getDefaultMaterial(this))};h["away3d.entities.Mesh"]=d.entities.Mesh;d.entities.Mesh.__name__=["away3d","entities","Mesh"];d.entities.Mesh.__interfaces__=[d.library.assets.IAsset,d.core.base.IMaterialOwner];d.entities.Mesh.__super__=
d.entities.Entity;d.entities.Mesh.prototype=q(d.entities.Entity.prototype,{bakeTransformations:function(){this.get_geometry().applyTransformation(this.get_transform());this.get_transform().identity()},get_assetType:function(){return d.library.assets.Asset3DType.MESH},onGeometryBoundsInvalid:function(){this.invalidateBounds()},get_castsShadows:function(){return this._castsShadows},set_castsShadows:function(a){return this._castsShadows=a},get_animator:function(){return this._animator},set_animator:function(a){null!=
this._animator&&this._animator.removeOwner(this);this._animator=a;var b=this.get_material();this.set_material(null);this.set_material(b);for(var f=this._subMeshes.length,c,d=0;d<f;)c=this._subMeshes[d],b=c._material,null!=b&&(c.set_material(null),c.set_material(b)),++d;null!=this._animator&&this._animator.addOwner(this);return a},get_geometry:function(){return this._geometry},set_geometry:function(a){var b;if(null!=this._geometry){this._geometry.removeEventListener(d.events.GeometryEvent.BOUNDS_INVALID,
r(this,this.onGeometryBoundsInvalid));this._geometry.removeEventListener(d.events.GeometryEvent.SUB_GEOMETRY_ADDED,r(this,this.onSubGeometryAdded));this._geometry.removeEventListener(d.events.GeometryEvent.SUB_GEOMETRY_REMOVED,r(this,this.onSubGeometryRemoved));for(b=0;b<this._subMeshes.length;)this._subMeshes[b].dispose(),++b;this._subMeshes=[]}this._geometry=a;if(null!=this._geometry){this._geometry.addEventListener(d.events.GeometryEvent.BOUNDS_INVALID,r(this,this.onGeometryBoundsInvalid));this._geometry.addEventListener(d.events.GeometryEvent.SUB_GEOMETRY_ADDED,
r(this,this.onSubGeometryAdded));this._geometry.addEventListener(d.events.GeometryEvent.SUB_GEOMETRY_REMOVED,r(this,this.onSubGeometryRemoved));var f=this._geometry.get_subGeometries();for(b=0;b<f.length;)this.addSubMesh(f[b]),++b}null!=this._material&&(this._material.removeOwner(this),this._material.addOwner(this));return a},get_material:function(){return this._material},set_material:function(a){if(a==this._material)return a;null!=this._material&&this._material.removeOwner(this);this._material=a;
null!=this._material&&this._material.addOwner(this);return a},get_subMeshes:function(){this._geometry.validate();return this._subMeshes},get_shareAnimationGeometry:function(){return this._shareAnimationGeometry},set_shareAnimationGeometry:function(a){return this._shareAnimationGeometry=a},clearAnimationGeometry:function(){for(var a=this._subMeshes.length,b=0;b<a;)this._subMeshes[b].animationSubGeometry=null,++b},dispose:function(){d.entities.Entity.prototype.dispose.call(this);this.set_material(null);
this.set_geometry(null)},disposeWithAnimatorAndChildren:function(){this.disposeWithChildren();null!=this._animator&&this._animator.dispose()},clone:function(){var a=new d.entities.Mesh(this._geometry,this._material);a.set_transform(this.get_transform());a.set_pivotPoint(this.get_pivotPoint());a.set_partition(this.get_partition());a.set_bounds(this._bounds.clone());a.set_name(this.get_name());a.set_castsShadows(this.get_castsShadows());a.set_shareAnimationGeometry(this.get_shareAnimationGeometry());
a.set_mouseEnabled(this.get_mouseEnabled());a.set_mouseChildren(this.get_mouseChildren());a.extra=this.extra;for(var b=this._subMeshes.length,f=0;f<b;)a._subMeshes[f]._material=this._subMeshes[f]._material,++f;b=this.get_numChildren();for(f=0;f<b;)a.addChild(s.Boot.__cast(this.getChildAt(f).clone(),d.containers.ObjectContainer3D)),++f;null!=this._animator&&a.set_animator(this._animator.clone());return a},updateBounds:function(){this._bounds.fromGeometry(this._geometry);this._boundsInvalid=!1},createEntityPartitionNode:function(){return new d.core.partition.MeshNode(this)},
onSubGeometryAdded:function(a){this.addSubMesh(a.get_subGeometry())},onSubGeometryRemoved:function(a){var b=a.get_subGeometry(),f=this._subMeshes.length,c;for(c=0;c<f;){a=this._subMeshes[c];if(a.get_subGeometry()==b){a.dispose();this._subMeshes.splice(c,1);break}++c}for(--f;c<f;)this._subMeshes[c]._index=c,++c},addSubMesh:function(a){var a=new d.core.base.SubMesh(a,this,null),b=this._subMeshes.length;a._index=b;this._subMeshes[b]=a;this.invalidateBounds()},getSubMeshForSubGeometry:function(a){var b=
this._subMeshes,f=this._geometry.get_subGeometries(),a=w.indexOf(f,a,0);return b[a]},collidesBefore:function(a,b){this._pickingCollider.setLocalRay(this._pickingCollisionVO.localRayPosition,this._pickingCollisionVO.localRayDirection);this._pickingCollisionVO.renderable=null;for(var f=this._subMeshes.length,c=0;c<f;){var d=this._subMeshes[c];if(this._pickingCollider.testSubMeshCollision(d,this._pickingCollisionVO,a)&&(a=this._pickingCollisionVO.rayEntryDistance,this._pickingCollisionVO.renderable=
d,!b))return!0;++c}return null!=this._pickingCollisionVO.renderable},__class__:d.entities.Mesh,__properties__:q(d.entities.Entity.prototype.__properties__,{set_shareAnimationGeometry:"set_shareAnimationGeometry",get_shareAnimationGeometry:"get_shareAnimationGeometry",get_subMeshes:"get_subMeshes",set_material:"set_material",get_material:"get_material",set_geometry:"set_geometry",get_geometry:"get_geometry",set_animator:"set_animator",get_animator:"get_animator",set_castsShadows:"set_castsShadows",
get_castsShadows:"get_castsShadows"})});d.entities.SegmentSet=function(){this._indexSegments=0;this.LIMIT=196605;d.entities.Entity.call(this);this._subSetCount=0;this._subSets=[];this.addSubSet();this._segments=new m.ds.IntMap;this.set_material(new d.materials.SegmentMaterial)};h["away3d.entities.SegmentSet"]=d.entities.SegmentSet;d.entities.SegmentSet.__name__=["away3d","entities","SegmentSet"];d.entities.SegmentSet.__interfaces__=[d.core.base.IRenderable];d.entities.SegmentSet.__super__=d.entities.Entity;
d.entities.SegmentSet.prototype=q(d.entities.Entity.prototype,{addSegment:function(a){a.set_segmentsBase(this);this._hasData=!0;var b=this._subSets.length-1,f=this._subSets[b];f.vertices.length+44>this.LIMIT&&(f=this.addSubSet(),b++);a.set_index(f.vertices.length);a.set_subSetIndex(b);this.updateSegment(a);var c=f.lineCount<<2;f.indices.push(c);f.indices.push(c+1);f.indices.push(c+2);f.indices.push(c+3);f.indices.push(c+2);f.indices.push(c+1);f.numVertices=f.vertices.length/11|0;f.numIndices=f.indices.length;
f.lineCount++;f=new d.entities.SegRef;f.index=c;f.subSetIndex=b;f.segment=a;this._segments.set(this._indexSegments,f);this._indexSegments++},removeSegmentByIndex:function(a,b){null==b&&(b=!1);var f;if(!(a>=this._indexSegments)&&this._segments.exists(a)){f=this._segments.get(a);var c;if(null!=this._subSets[f.subSetIndex]){var d=f.subSetIndex;c=this._subSets[f.subSetIndex];f=f.segment;for(var e=c.indices,g=6*a,o=e.length;g<o;){var h=g++;e[h]-=4}c.indices.splice(6*a,6);c.vertices.splice(44*a,44);c.numVertices=
c.vertices.length/11|0;c.numIndices=e.length;c.vertexBufferDirty=!0;c.indexBufferDirty=!0;c.lineCount--;b?f.dispose():(f.set_index(-1),f.set_segmentsBase(null));0==c.lineCount&&(0==d?this._hasData=!1:(c.dispose(),this._subSets[d]=null,this._subSets.splice(d,1)));this.reOrderIndices(d,a);this._segments.remove(this._indexSegments);this._indexSegments--}}},removeSegment:function(a){-1!=a.get_index()&&this.removeSegmentByIndex(k["int"](a.get_index()/44))},removeAllSegments:function(){for(var a,b=0,f=
this._subSetCount;b<f;)a=b++,a=this._subSets[a],a.vertices=null,a.indices=null,null!=a.vertexBuffer&&a.vertexBuffer.dispose(),null!=a.indexBuffer&&a.indexBuffer.dispose();for(b=this._segments.iterator();b.hasNext();)b.next();this._segments=null;this._subSetCount=0;this._activeSubSet=null;this._indexSegments=0;this._subSets=[];this._segments=new m.ds.IntMap;this.addSubSet();this._hasData=!1},getSegment:function(a){return a>this._indexSegments-1?null:this._segments.get(a).segment},get_segmentCount:function(){return this._indexSegments},
get_subSetCount:function(){return this._subSetCount},updateSegment:function(a){var b=a._start,f=a._end,c=b.x,d=b.y,b=b.z,e=f.x,g=f.y,f=f.z,o=a._startR,h=a._startG,k=a._startB,n=a._endR,l=a._endG,m=a._endB,q=a.get_index(),s=a.get_thickness(),a=this._subSets[a.get_subSetIndex()],r=a.vertices;r[q++]=c;r[q++]=d;r[q++]=b;r[q++]=e;r[q++]=g;r[q++]=f;r[q++]=s;r[q++]=o;r[q++]=h;r[q++]=k;r[q++]=1;r[q++]=e;r[q++]=g;r[q++]=f;r[q++]=c;r[q++]=d;r[q++]=b;r[q++]=-s;r[q++]=n;r[q++]=l;r[q++]=m;r[q++]=1;r[q++]=c;r[q++]=
d;r[q++]=b;r[q++]=e;r[q++]=g;r[q++]=f;r[q++]=-s;r[q++]=o;r[q++]=h;r[q++]=k;r[q++]=1;r[q++]=e;r[q++]=g;r[q++]=f;r[q++]=c;r[q++]=d;r[q++]=b;r[q++]=s;r[q++]=n;r[q++]=l;r[q++]=m;r[q++]=1;a.vertexBufferDirty=!0;this.invalidateBounds()},get_hasData:function(){return this._hasData},getIndexBuffer:function(a){if(this._activeSubSet.indexContext3D!=a.get_context3D()||this._activeSubSet.indexBufferDirty)this._activeSubSet.indexBuffer=a._context3D.createIndexBuffer(this._activeSubSet.numIndices),this._activeSubSet.indexBuffer.uploadFromVector(function(a){var a=
a._activeSubSet.indices,f=new c.VectorData;f.length=a.length;f.fixed=!0;var d;d=Array(a.length);for(var e=0,j=a.length;e<j;){var g=e++;d[g]=a[g]}f.data=d;return f}(this),0,this._activeSubSet.numIndices),this._activeSubSet.indexBufferDirty=!1,this._activeSubSet.indexContext3D=a.get_context3D();return this._activeSubSet.indexBuffer},activateVertexBuffer:function(a,b){var f=this._subSets[a];this._activeSubSet=f;this._numIndices=f.numIndices;if(f.vertexContext3D!=b.get_context3D()||f.vertexBufferDirty)f.vertexBuffer=
b._context3D.createVertexBuffer(f.numVertices,11),f.vertexBuffer.uploadFromVector(f.vertices,0,f.numVertices),f.vertexBufferDirty=!1,f.vertexContext3D=b.get_context3D();var f=f.vertexBuffer,d=b._context3D;d.setVertexBufferAt(0,f,0,c.display3D.Context3DVertexBufferFormat.FLOAT_3);d.setVertexBufferAt(1,f,3,c.display3D.Context3DVertexBufferFormat.FLOAT_3);d.setVertexBufferAt(2,f,6,c.display3D.Context3DVertexBufferFormat.FLOAT_1);d.setVertexBufferAt(3,f,7,c.display3D.Context3DVertexBufferFormat.FLOAT_4)},
activateUVBuffer:function(){},activateVertexNormalBuffer:function(){},activateVertexTangentBuffer:function(){},activateSecondaryUVBuffer:function(){},reOrderIndices:function(a,b){for(var f,c=b,d=this._indexSegments-1;c<d;){var e=c++;f=this._segments.get(e+1);f.index=e;if(f.subSetIndex==a){var g=f.segment;g.set_index(g.get_index()-44)}this._segments.set(e,f)}},addSubSet:function(){var a=new d.entities.SubSet;this._subSets.push(a);a.vertices=[];a.numVertices=0;a.indices=[];a.numIndices=0;a.vertexBufferDirty=
!0;a.indexBufferDirty=!0;a.lineCount=0;this._subSetCount++;return a},dispose:function(){d.entities.Entity.prototype.dispose.call(this);this.removeAllSegments();this._material=this._segments=null;var a=this._subSets[0];a.vertices=null;this._subSets=a.indices=null},get_mouseEnabled:function(){return!1},getDefaultBoundingVolume:function(){return new d.bounds.BoundingSphere},updateBounds:function(){for(var a,b,f,c=Math.POSITIVE_INFINITY,d=Math.POSITIVE_INFINITY,e=Math.POSITIVE_INFINITY,g=Math.NEGATIVE_INFINITY,
o=Math.NEGATIVE_INFINITY,h=Math.NEGATIVE_INFINITY,k,n=0;n<this._subSetCount;){a=this._subSets[n];f=0;k=a.vertices;a=k.length;if(0!=a)for(;f<a;)b=k[f++],b<c?c=b:b>g&&(g=b),b=k[f++],b<d?d=b:b>o&&(o=b),b=k[f++],b<e?e=b:b>h&&(h=b),f+=8;++n}c!=Math.POSITIVE_INFINITY?this._bounds.fromExtremes(c,d,e,g,o,h):this._bounds.fromExtremes(-0.5,-0.5,-0.5,0.5,0.5,0.5);this._boundsInvalid=!1},createEntityPartitionNode:function(){return new d.core.partition.RenderableNode(this)},get_numTriangles:function(){return 0.3333333*
this._numIndices|0},get_sourceEntity:function(){return this},get_castsShadows:function(){return!1},get_material:function(){return this._material},get_animator:function(){return this._animator},set_material:function(a){if(a==this._material)return a;null!=this._material&&this._material.removeOwner(this);this._material=a;null!=this._material&&this._material.addOwner(this);return a},get_uvTransform:function(){return null},get_vertexData:function(){return null},get_indexData:function(){return null},get_UVData:function(){return null},
get_numVertices:function(){return 0},get_vertexStride:function(){return 11},get_vertexNormalData:function(){return null},get_vertexTangentData:function(){return null},get_vertexOffset:function(){return 0},get_vertexNormalOffset:function(){return 0},get_vertexTangentOffset:function(){return 0},get_assetType:function(){return d.library.assets.Asset3DType.SEGMENT_SET},getRenderSceneTransform:function(){return this._sceneTransform},__class__:d.entities.SegmentSet,__properties__:q(d.entities.Entity.prototype.__properties__,
{get_vertexTangentOffset:"get_vertexTangentOffset",get_vertexNormalOffset:"get_vertexNormalOffset",get_vertexOffset:"get_vertexOffset",get_vertexTangentData:"get_vertexTangentData",get_vertexNormalData:"get_vertexNormalData",get_vertexStride:"get_vertexStride",get_numVertices:"get_numVertices",get_UVData:"get_UVData",get_indexData:"get_indexData",get_vertexData:"get_vertexData",get_uvTransform:"get_uvTransform",get_animator:"get_animator",set_material:"set_material",get_material:"get_material",get_castsShadows:"get_castsShadows",
get_sourceEntity:"get_sourceEntity",get_numTriangles:"get_numTriangles",get_hasData:"get_hasData",get_subSetCount:"get_subSetCount",get_segmentCount:"get_segmentCount"})});d.entities.SegRef=function(){};h["away3d.entities.SegRef"]=d.entities.SegRef;d.entities.SegRef.__name__=["away3d","entities","SegRef"];d.entities.SegRef.prototype={__class__:d.entities.SegRef};d.entities.SubSet=function(){};h["away3d.entities.SubSet"]=d.entities.SubSet;d.entities.SubSet.__name__=["away3d","entities","SubSet"];d.entities.SubSet.prototype=
{dispose:function(){this.vertices=null;null!=this.vertexBuffer&&this.vertexBuffer.dispose();null!=this.indexBuffer&&this.indexBuffer.dispose()},__class__:d.entities.SubSet};c.errors={};c.errors.Error=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};h["openfl.errors.Error"]=c.errors.Error;c.errors.Error.__name__=["openfl","errors","Error"];c.errors.Error.prototype={getStackTrace:function(){return m.CallStack.toString(m.CallStack.exceptionStack())},toString:function(){return null!=
this.message?this.message:"Error"},__class__:c.errors.Error};d.errors={};d.errors.AbstractMethodError=function(a,b){null==b&&(b=0);null==a&&(a="An abstract method was called! Either an instance of an abstract class was created, or an abstract method was not overridden by the subclass.");c.errors.Error.call(this,a,b)};h["away3d.errors.AbstractMethodError"]=d.errors.AbstractMethodError;d.errors.AbstractMethodError.__name__=["away3d","errors","AbstractMethodError"];d.errors.AbstractMethodError.__super__=
c.errors.Error;d.errors.AbstractMethodError.prototype=q(c.errors.Error.prototype,{__class__:d.errors.AbstractMethodError});d.events.Asset3DEvent=function(a,b,f){c.events.Event.call(this,a);this._asset=b;this._prevName=null!=f?f:null!=this._asset?this._asset.get_name():null};h["away3d.events.Asset3DEvent"]=d.events.Asset3DEvent;d.events.Asset3DEvent.__name__=["away3d","events","Asset3DEvent"];d.events.Asset3DEvent.__super__=c.events.Event;d.events.Asset3DEvent.prototype=q(c.events.Event.prototype,
{get_asset:function(){return this._asset},get_assetPrevName:function(){return this._prevName},clone:function(){return new d.events.Asset3DEvent(this.type,this.get_asset(),this.get_assetPrevName())},__class__:d.events.Asset3DEvent,__properties__:{get_assetPrevName:"get_assetPrevName",get_asset:"get_asset"}});d.events.CameraEvent=function(a,b,f,d){null==d&&(d=!1);null==f&&(f=!1);c.events.Event.call(this,a,f,d);this._camera=b};h["away3d.events.CameraEvent"]=d.events.CameraEvent;d.events.CameraEvent.__name__=
["away3d","events","CameraEvent"];d.events.CameraEvent.__super__=c.events.Event;d.events.CameraEvent.prototype=q(c.events.Event.prototype,{get_camera:function(){return this._camera},clone:function(){return new d.events.CameraEvent(this.type,this._camera,this.bubbles,this.cancelable)},__class__:d.events.CameraEvent,__properties__:{get_camera:"get_camera"}});d.events.GeometryEvent=function(a,b){c.events.Event.call(this,a,!1,!1);this._subGeometry=b};h["away3d.events.GeometryEvent"]=d.events.GeometryEvent;
d.events.GeometryEvent.__name__=["away3d","events","GeometryEvent"];d.events.GeometryEvent.__super__=c.events.Event;d.events.GeometryEvent.prototype=q(c.events.Event.prototype,{get_subGeometry:function(){return this._subGeometry},clone:function(){return new d.events.GeometryEvent(this.type,this._subGeometry)},__class__:d.events.GeometryEvent,__properties__:{get_subGeometry:"get_subGeometry"}});d.events.LensEvent=function(a,b,f,d){null==d&&(d=!1);null==f&&(f=!1);c.events.Event.call(this,a,f,d);this._lens=
b};h["away3d.events.LensEvent"]=d.events.LensEvent;d.events.LensEvent.__name__=["away3d","events","LensEvent"];d.events.LensEvent.__super__=c.events.Event;d.events.LensEvent.prototype=q(c.events.Event.prototype,{get_lens:function(){return this._lens},clone:function(){return new d.events.LensEvent(this.type,this._lens,this.bubbles,this.cancelable)},__class__:d.events.LensEvent,__properties__:{get_lens:"get_lens"}});d.events.LightEvent=function(a){c.events.Event.call(this,a)};h["away3d.events.LightEvent"]=
d.events.LightEvent;d.events.LightEvent.__name__=["away3d","events","LightEvent"];d.events.LightEvent.__super__=c.events.Event;d.events.LightEvent.prototype=q(c.events.Event.prototype,{clone:function(){return new d.events.LightEvent(this.type)},__class__:d.events.LightEvent});d.events.Object3DEvent=function(a,b){c.events.Event.call(this,a);this.object=b};h["away3d.events.Object3DEvent"]=d.events.Object3DEvent;d.events.Object3DEvent.__name__=["away3d","events","Object3DEvent"];d.events.Object3DEvent.__super__=
c.events.Event;d.events.Object3DEvent.prototype=q(c.events.Event.prototype,{clone:function(){return new d.events.Object3DEvent(this.type,this.object)},__class__:d.events.Object3DEvent});d.events.Scene3DEvent=function(a,b){this.objectContainer3D=b;c.events.Event.call(this,a)};h["away3d.events.Scene3DEvent"]=d.events.Scene3DEvent;d.events.Scene3DEvent.__name__=["away3d","events","Scene3DEvent"];d.events.Scene3DEvent.__super__=c.events.Event;d.events.Scene3DEvent.prototype=q(c.events.Event.prototype,
{clone:function(){return new d.events.Scene3DEvent(this.type,this.objectContainer3D)},__class__:d.events.Scene3DEvent});d.events.ShadingMethodEvent=function(a,b,f){null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f)};h["away3d.events.ShadingMethodEvent"]=d.events.ShadingMethodEvent;d.events.ShadingMethodEvent.__name__=["away3d","events","ShadingMethodEvent"];d.events.ShadingMethodEvent.__super__=c.events.Event;d.events.ShadingMethodEvent.prototype=q(c.events.Event.prototype,{__class__:d.events.ShadingMethodEvent});
d.events.Stage3DEvent=function(a,b,f){null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f)};h["away3d.events.Stage3DEvent"]=d.events.Stage3DEvent;d.events.Stage3DEvent.__name__=["away3d","events","Stage3DEvent"];d.events.Stage3DEvent.__super__=c.events.Event;d.events.Stage3DEvent.prototype=q(c.events.Event.prototype,{__class__:d.events.Stage3DEvent});d.events.TouchEvent3D=function(a){this._allowedToPropagate=!0;c.events.Event.call(this,a,!0,!0)};h["away3d.events.TouchEvent3D"]=d.events.TouchEvent3D;
d.events.TouchEvent3D.__name__=["away3d","events","TouchEvent3D"];d.events.TouchEvent3D.__super__=c.events.Event;d.events.TouchEvent3D.prototype=q(c.events.Event.prototype,{stopPropagation:function(){c.events.Event.prototype.stopPropagation.call(this);this._allowedToPropagate=!1;null!=this._parentEvent&&(this._parentEvent._allowedToPropagate=!1)},stopImmediatePropagation:function(){c.events.Event.prototype.stopImmediatePropagation.call(this);this._allowedToPropagate=!1;null!=this._parentEvent&&(this._parentEvent._allowedToPropagate=
!1)},clone:function(){var a=new d.events.TouchEvent3D(this.type);a.screenX=this.screenX;a.screenY=this.screenY;a.view=this.view;a.object=this.object;a.renderable=this.renderable;a.material=this.material;a.uv=this.uv;a.localPosition=this.localPosition;a.localNormal=this.localNormal;a.index=this.index;a.subGeometryIndex=this.subGeometryIndex;a.ctrlKey=this.ctrlKey;a.shiftKey=this.shiftKey;a._parentEvent=this;return a},get_scenePosition:function(){return s.Boot.__instanceof(this.object,d.containers.ObjectContainer3D)?
s.Boot.__cast(this.object,d.containers.ObjectContainer3D).get_sceneTransform().transformVector(this.localPosition):this.localPosition},get_sceneNormal:function(){if(s.Boot.__instanceof(this.object,d.containers.ObjectContainer3D)){var a=s.Boot.__cast(this.object,d.containers.ObjectContainer3D).get_sceneTransform().deltaTransformVector(this.localNormal);a.normalize();return a}return this.localNormal},__class__:d.events.TouchEvent3D,__properties__:{get_sceneNormal:"get_sceneNormal",get_scenePosition:"get_scenePosition"}});
d.filters={};d.filters.Filter3DBase=function(){this._tasks=[]};h["away3d.filters.Filter3DBase"]=d.filters.Filter3DBase;d.filters.Filter3DBase.__name__=["away3d","filters","Filter3DBase"];d.filters.Filter3DBase.prototype={get_requireDepthRender:function(){return this._requireDepthRender},addTask:function(a){this._tasks.push(a);this._requireDepthRender||(this._requireDepthRender=a.get_requireDepthRender())},get_tasks:function(){return this._tasks},getMainInputTexture:function(a){return this._tasks[0].getMainInputTexture(a)},
get_textureWidth:function(){return this._textureWidth},set_textureWidth:function(a){this._textureWidth=a;for(var b=0;b<this._tasks.length;)this._tasks[b].set_textureWidth(a),++b;return a},get_textureHeight:function(){return this._textureHeight},set_textureHeight:function(a){this._textureHeight=a;for(var b=0;b<this._tasks.length;)this._tasks[b].set_textureHeight(a),++b;return a},setRenderTargets:function(a){this._tasks[this._tasks.length-1].set_target(a)},dispose:function(){for(var a=0;a<this._tasks.length;)this._tasks[a].dispose(),
++a},update:function(){},__class__:d.filters.Filter3DBase,__properties__:{set_textureHeight:"set_textureHeight",get_textureHeight:"get_textureHeight",set_textureWidth:"set_textureWidth",get_textureWidth:"get_textureWidth",get_tasks:"get_tasks",get_requireDepthRender:"get_requireDepthRender"}};d.filters.tasks={};d.filters.tasks.Filter3DTaskBase=function(a){null==a&&(a=!1);this._textureHeight=this._textureWidth=this._scaledTextureHeight=this._scaledTextureWidth=-1;this._program3DInvalid=this._textureDimensionsInvalid=
!0;this._textureScale=0;this._requireDepthRender=a};h["away3d.filters.tasks.Filter3DTaskBase"]=d.filters.tasks.Filter3DTaskBase;d.filters.tasks.Filter3DTaskBase.__name__=["away3d","filters","tasks","Filter3DTaskBase"];d.filters.tasks.Filter3DTaskBase.prototype={get_textureScale:function(){return this._textureScale},set_textureScale:function(a){if(this._textureScale==a)return a;this._textureScale=a;this._scaledTextureWidth=this._textureWidth>>this._textureScale;this._scaledTextureHeight=this._textureHeight>>
this._textureScale;this._textureDimensionsInvalid=!0;return a},get_target:function(){return this._target},set_target:function(a){return this._target=a},get_textureWidth:function(){return this._textureWidth},set_textureWidth:function(a){if(this._textureWidth==a)return a;this._textureWidth=a;this._scaledTextureWidth=this._textureWidth>>this._textureScale;this._textureDimensionsInvalid=!0;return a},get_textureHeight:function(){return this._textureHeight},set_textureHeight:function(a){if(this._textureHeight==
a)return a;this._textureHeight=a;this._scaledTextureHeight=this._textureHeight>>this._textureScale;this._textureDimensionsInvalid=!0;return a},getMainInputTexture:function(a){this._textureDimensionsInvalid&&this.updateTextures(a);return this._mainInputTexture},dispose:function(){null!=this._mainInputTexture&&this._mainInputTexture.dispose();null!=this._program3D&&this._program3D.dispose()},invalidateProgram3D:function(){this._program3DInvalid=!0},updateProgram3D:function(a){null!=this._program3D&&
this._program3D.dispose();this._program3D=a.get_context3D().createProgram();this._program3D.upload(c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,this.getVertexCode()),c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,this.getFragmentCode()));this._program3DInvalid=!1},getVertexCode:function(){return"mov op, va0\nmov v0, va1\n"},getFragmentCode:function(){throw new d.errors.AbstractMethodError;},updateTextures:function(a){null!=
this._mainInputTexture&&this._mainInputTexture.dispose();this._mainInputTexture=a.get_context3D().createTexture(this._scaledTextureWidth,this._scaledTextureHeight,c.display3D.Context3DTextureFormat.BGRA,!0);this._textureDimensionsInvalid=!1},getProgram3D:function(a){this._program3DInvalid&&this.updateProgram3D(a);return this._program3D},activate:function(){},deactivate:function(){},get_requireDepthRender:function(){return this._requireDepthRender},__class__:d.filters.tasks.Filter3DTaskBase,__properties__:{get_requireDepthRender:"get_requireDepthRender",
set_textureHeight:"set_textureHeight",get_textureHeight:"get_textureHeight",set_textureWidth:"set_textureWidth",get_textureWidth:"get_textureWidth",set_target:"set_target",get_target:"get_target",set_textureScale:"set_textureScale",get_textureScale:"get_textureScale"}};d.library.assets.Asset3DType=function(){};h["away3d.library.assets.Asset3DType"]=d.library.assets.Asset3DType;d.library.assets.Asset3DType.__name__=["away3d","library","assets","Asset3DType"];d.lights={};d.lights.LightBase=function(){this._color=
16777215;this._colorB=this._colorG=this._colorR=1;this._ambientColor=16777215;this._ambientB=this._ambientG=this._ambientR=this._ambient=0;this._diffuseB=this._diffuseG=this._diffuseR=this._diffuse=this._specularB=this._specularG=this._specularR=this._specular=1;d.entities.Entity.call(this)};h["away3d.lights.LightBase"]=d.lights.LightBase;d.lights.LightBase.__name__=["away3d","lights","LightBase"];d.lights.LightBase.__super__=d.entities.Entity;d.lights.LightBase.prototype=q(d.entities.Entity.prototype,
{get_castsShadows:function(){return this._castsShadows},set_castsShadows:function(a){if(this._castsShadows==a)return a;(this._castsShadows=a)?(null==this._shadowMapper&&(this._shadowMapper=this.createShadowMapper()),this._shadowMapper.set_light(this)):(null!=this._shadowMapper&&this._shadowMapper.dispose(),this._shadowMapper=null);this.dispatchEvent(new d.events.LightEvent(d.events.LightEvent.CASTS_SHADOW_CHANGE));return a},createShadowMapper:function(){throw new d.errors.AbstractMethodError;},get_specular:function(){return this._specular},
set_specular:function(a){0>a&&(a=0);this._specular=a;this.updateSpecular();return a},get_diffuse:function(){return this._diffuse},set_diffuse:function(a){0>a&&(a=0);this._diffuse=a;this.updateDiffuse();return a},get_color:function(){return this._color},set_color:function(a){this._color=a;this._colorR=(this._color>>16&255)/255;this._colorG=(this._color>>8&255)/255;this._colorB=(this._color&255)/255;this.updateDiffuse();this.updateSpecular();return a},get_ambient:function(){return this._ambient},set_ambient:function(a){0>
a?a=0:1<a&&(a=1);this._ambient=a;this.updateAmbient();return a},get_ambientColor:function(){return this._ambientColor},set_ambientColor:function(a){this._ambientColor=a;this.updateAmbient();return a},updateAmbient:function(){this._ambientR=(this._ambientColor>>16&255)/255*this._ambient;this._ambientG=(this._ambientColor>>8&255)/255*this._ambient;this._ambientB=(this._ambientColor&255)/255*this._ambient},getObjectProjectionMatrix:function(){throw new d.errors.AbstractMethodError;},createEntityPartitionNode:function(){return new d.core.partition.LightNode(this)},
get_assetType:function(){return d.library.assets.Asset3DType.LIGHT},updateSpecular:function(){this._specularR=this._colorR*this._specular;this._specularG=this._colorG*this._specular;this._specularB=this._colorB*this._specular},updateDiffuse:function(){this._diffuseR=this._colorR*this._diffuse;this._diffuseG=this._colorG*this._diffuse;this._diffuseB=this._colorB*this._diffuse},get_shadowMapper:function(){return this._shadowMapper},set_shadowMapper:function(a){this._shadowMapper=a;this._shadowMapper.set_light(this);
return a},__class__:d.lights.LightBase,__properties__:q(d.entities.Entity.prototype.__properties__,{set_shadowMapper:"set_shadowMapper",get_shadowMapper:"get_shadowMapper",set_ambientColor:"set_ambientColor",get_ambientColor:"get_ambientColor",set_ambient:"set_ambient",get_ambient:"get_ambient",set_color:"set_color",get_color:"get_color",set_diffuse:"set_diffuse",get_diffuse:"get_diffuse",set_specular:"set_specular",get_specular:"get_specular",set_castsShadows:"set_castsShadows",get_castsShadows:"get_castsShadows"})});
d.lights.DirectionalLight=function(a,b,f){null==f&&(f=1);null==b&&(b=-1);null==a&&(a=0);d.lights.LightBase.call(this);this.set_direction(new c.geom.Vector3D(a,b,f));this._sceneDirection=new c.geom.Vector3D};h["away3d.lights.DirectionalLight"]=d.lights.DirectionalLight;d.lights.DirectionalLight.__name__=["away3d","lights","DirectionalLight"];d.lights.DirectionalLight.__super__=d.lights.LightBase;d.lights.DirectionalLight.prototype=q(d.lights.LightBase.prototype,{createEntityPartitionNode:function(){return new d.core.partition.DirectionalLightNode(this)},
get_sceneDirection:function(){this._sceneTransformDirty&&this.updateSceneTransform();return this._sceneDirection},get_direction:function(){return this._direction},set_direction:function(a){this._direction=a;null==this._tmpLookAt&&(this._tmpLookAt=new c.geom.Vector3D);this._tmpLookAt.x=this.get_x()+this._direction.x;this._tmpLookAt.y=this.get_y()+this._direction.y;this._tmpLookAt.z=this.get_z()+this._direction.z;this.lookAt(this._tmpLookAt);return a},getDefaultBoundingVolume:function(){return new d.bounds.NullBounds},
updateBounds:function(){},updateSceneTransform:function(){d.lights.LightBase.prototype.updateSceneTransform.call(this);this.get_sceneTransform().copyColumnTo(2,this._sceneDirection);this._sceneDirection.normalize()},createShadowMapper:function(){return new d.lights.shadowmaps.DirectionalShadowMapper},getObjectProjectionMatrix:function(a,b){var f=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),p=a.get_sourceEntity().get_bounds(),e=new c.geom.Matrix3D;e.copyFrom(a.get_sceneTransform());e.append(this.get_inverseSceneTransform());
null==this._projAABBPoints&&(this._projAABBPoints=c._Vector.Vector_Impl_._new(24));e.transformVectors(p.get_aabbPoints(),this._projAABBPoints);for(var p=Math.POSITIVE_INFINITY,j=Math.NEGATIVE_INFINITY,g=Math.POSITIVE_INFINITY,o=Math.NEGATIVE_INFINITY,h=Math.POSITIVE_INFINITY,k=Math.NEGATIVE_INFINITY,n,l=0;24>l;)n=l++,n=this._projAABBPoints.data[n],n<p&&(p=n),n>j&&(j=n),n=l++,n=this._projAABBPoints.data[n],n<g&&(g=n),n>o&&(o=n),n=l++,n=this._projAABBPoints.data[n],n<h&&(h=n),n>k&&(k=n);l=1/(j-p);n=
1/(o-g);k=1/(k-h);0>=f.length&&!f.fixed&&(f.length=1);f.data[0]=2*l;5>=f.length&&!f.fixed&&(f.length=6);f.data[5]=2*n;10>=f.length&&!f.fixed&&(f.length=11);f.data[10]=k;12>=f.length&&!f.fixed&&(f.length=13);f.data[12]=-(j+p)*l;13>=f.length&&!f.fixed&&(f.length=14);f.data[13]=-(o+g)*n;14>=f.length&&!f.fixed&&(f.length=15);f.data[14]=-h*k;11>=f.length&&!f.fixed&&(f.length=12);p=f.data[11]=0;9>=f.length&&!f.fixed&&(f.length=10);p=f.data[9]=p;8>=f.length&&!f.fixed&&(f.length=9);p=f.data[8]=p;7>=f.length&&
!f.fixed&&(f.length=8);p=f.data[7]=p;6>=f.length&&!f.fixed&&(f.length=7);p=f.data[6]=p;4>=f.length&&!f.fixed&&(f.length=5);p=f.data[4]=p;3>=f.length&&!f.fixed&&(f.length=4);p=f.data[3]=p;2>=f.length&&!f.fixed&&(f.length=3);p=f.data[2]=p;1>=f.length&&!f.fixed&&(f.length=2);f.data[1]=p;15>=f.length&&!f.fixed&&(f.length=16);f.data[15]=1;null==b&&(b=new c.geom.Matrix3D);b.copyRawDataFrom(f);b.prepend(e);return b},__class__:d.lights.DirectionalLight,__properties__:q(d.lights.LightBase.prototype.__properties__,
{set_direction:"set_direction",get_direction:"get_direction",get_sceneDirection:"get_sceneDirection"})});d.lights.LightProbe=function(a,b){d.lights.LightBase.call(this);this._diffuseMap=a;this._specularMap=b};h["away3d.lights.LightProbe"]=d.lights.LightProbe;d.lights.LightProbe.__name__=["away3d","lights","LightProbe"];d.lights.LightProbe.__super__=d.lights.LightBase;d.lights.LightProbe.prototype=q(d.lights.LightBase.prototype,{createEntityPartitionNode:function(){return new d.core.partition.LightProbeNode(this)},
get_diffuseMap:function(){return this._diffuseMap},set_diffuseMap:function(a){return this._diffuseMap=a},get_specularMap:function(){return this._specularMap},set_specularMap:function(a){return this._specularMap=a},updateBounds:function(){this._boundsInvalid=!1},getDefaultBoundingVolume:function(){return new d.bounds.NullBounds},getObjectProjectionMatrix:function(){throw new c.errors.Error("Object projection matrices are not supported for LightProbe objects!");},__class__:d.lights.LightProbe,__properties__:q(d.lights.LightBase.prototype.__properties__,
{set_specularMap:"set_specularMap",get_specularMap:"get_specularMap",set_diffuseMap:"set_diffuseMap",get_diffuseMap:"get_diffuseMap"})});d.lights.PointLight=function(){this._radius=9E4;this._fallOff=1E5;d.lights.LightBase.call(this);this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius)};h["away3d.lights.PointLight"]=d.lights.PointLight;d.lights.PointLight.__name__=["away3d","lights","PointLight"];d.lights.PointLight.__super__=d.lights.LightBase;d.lights.PointLight.prototype=
q(d.lights.LightBase.prototype,{createShadowMapper:function(){return new d.lights.shadowmaps.CubeMapShadowMapper},createEntityPartitionNode:function(){return new d.core.partition.PointLightNode(this)},get_radius:function(){return this._radius},set_radius:function(a){this._radius=a;0>this._radius?this._radius=0:this._radius>this._fallOff&&(this._fallOff=this._radius,this.invalidateBounds());this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius);return a},fallOffFactor:function(){return this._fallOffFactor},
get_fallOff:function(){return this._fallOff},set_fallOff:function(a){this._fallOff=a;0>this._fallOff&&(this._fallOff=0);this._fallOff<this._radius&&(this._radius=this._fallOff);this._fallOffFactor=1/(this._fallOff*this._fallOff-this._radius*this._radius);this.invalidateBounds();return a},updateBounds:function(){this._bounds.fromSphere(new c.geom.Vector3D,this._fallOff);this._boundsInvalid=!1},getDefaultBoundingVolume:function(){return new d.bounds.BoundingSphere},getObjectProjectionMatrix:function(a,
b){var f=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),p=a.get_sourceEntity().get_bounds(),e=new c.geom.Matrix3D;e.copyFrom(a.get_sceneTransform());e.append(this._parent.get_inverseSceneTransform());this.lookAt(new c.geom.Vector3D(e.rawData.data[12],e.rawData.data[13],e.rawData.data[14]));e.copyFrom(a.get_sceneTransform());e.append(this.get_inverseSceneTransform());e.copyColumnTo(3,this._pos);var j=e.deltaTransformVector(p.get_min()),g=e.deltaTransformVector(p.get_max()),p=this._pos.z,j=j.x*
j.x+j.y*j.y+j.z*j.z,g=g.x*g.x+g.y*g.y+g.z*g.z,g=Math.sqrt(j>g?j:g),j=p-g,p=p+g;0>=f.length&&!f.fixed&&(f.length=1);g=f.data[0]=j/g;5>=f.length&&!f.fixed&&(f.length=6);f.data[5]=g;10>=f.length&&!f.fixed&&(f.length=11);f.data[10]=p/(p-j);11>=f.length&&!f.fixed&&(f.length=12);f.data[11]=1;15>=f.length&&!f.fixed&&(f.length=16);p=f.data[15]=0;13>=f.length&&!f.fixed&&(f.length=14);p=f.data[13]=p;12>=f.length&&!f.fixed&&(f.length=13);p=f.data[12]=p;9>=f.length&&!f.fixed&&(f.length=10);p=f.data[9]=p;8>=f.length&&
!f.fixed&&(f.length=9);p=f.data[8]=p;7>=f.length&&!f.fixed&&(f.length=8);p=f.data[7]=p;6>=f.length&&!f.fixed&&(f.length=7);p=f.data[6]=p;4>=f.length&&!f.fixed&&(f.length=5);p=f.data[4]=p;3>=f.length&&!f.fixed&&(f.length=4);p=f.data[3]=p;2>=f.length&&!f.fixed&&(f.length=3);p=f.data[2]=p;1>=f.length&&!f.fixed&&(f.length=2);f.data[1]=p;14>=f.length&&!f.fixed&&(f.length=15);f.data[14]=-j*f.data[10];null==b&&(b=new c.geom.Matrix3D);b.copyRawDataFrom(f);b.prepend(e);return b},__class__:d.lights.PointLight,
__properties__:q(d.lights.LightBase.prototype.__properties__,{set_fallOff:"set_fallOff",get_fallOff:"get_fallOff",set_radius:"set_radius",get_radius:"get_radius"})});d.lights.shadowmaps={};d.lights.shadowmaps.ShadowMapperBase=function(){this._depthMapSize=2048;this._autoUpdateShadows=!0;this._casterCollector=this.createCasterCollector()};h["away3d.lights.shadowmaps.ShadowMapperBase"]=d.lights.shadowmaps.ShadowMapperBase;d.lights.shadowmaps.ShadowMapperBase.__name__=["away3d","lights","shadowmaps",
"ShadowMapperBase"];d.lights.shadowmaps.ShadowMapperBase.prototype={createCasterCollector:function(){return new d.core.traverse.ShadowCasterCollector},get_autoUpdateShadows:function(){return this._autoUpdateShadows},set_autoUpdateShadows:function(a){return this._autoUpdateShadows=a},updateShadows:function(){this._shadowsInvalid=!0},setDepthMap:function(a){this._depthMap!=a&&(null!=this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose(),this._depthMap=a,null!=this._depthMap?(this._explicitDepthMap=
!0,this._depthMapSize=this._depthMap.get_width()):this._explicitDepthMap=!1)},get_light:function(){return this._light},set_light:function(a){return this._light=a},get_depthMap:function(){null==this._depthMap&&(this._depthMap=this.createDepthTexture());return this._depthMap},get_depthMapSize:function(){return this._depthMapSize},set_depthMapSize:function(a){if(a==this._depthMapSize)return a;this._depthMapSize=a;if(this._explicitDepthMap)throw new c.errors.Error("Cannot set depth map size for the current renderer.");
null!=this._depthMap&&(this._depthMap.dispose(),this._depthMap=null);return a},dispose:function(){this._casterCollector=null;null!=this._depthMap&&!this._explicitDepthMap&&this._depthMap.dispose();this._depthMap=null},createDepthTexture:function(){return new d.textures.RenderTexture(this._depthMapSize,this._depthMapSize)},renderDepthMap:function(a,b,f){this._shadowsInvalid=!1;this.updateDepthProjection(b.get_camera());null==this._depthMap&&(this._depthMap=this.createDepthTexture());this.drawDepthMap(this._depthMap.getTextureForStage3D(a),
b.scene,f)},updateDepthProjection:function(){throw new d.errors.AbstractMethodError;},drawDepthMap:function(){throw new d.errors.AbstractMethodError;},__class__:d.lights.shadowmaps.ShadowMapperBase,__properties__:{set_depthMapSize:"set_depthMapSize",get_depthMapSize:"get_depthMapSize",get_depthMap:"get_depthMap",set_light:"set_light",get_light:"get_light",set_autoUpdateShadows:"set_autoUpdateShadows",get_autoUpdateShadows:"get_autoUpdateShadows"}};d.lights.shadowmaps.CubeMapShadowMapper=function(){d.lights.shadowmaps.ShadowMapperBase.call(this);
this._depthMapSize=512;this._needsRender=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),6,!1);this.initCameras()};h["away3d.lights.shadowmaps.CubeMapShadowMapper"]=d.lights.shadowmaps.CubeMapShadowMapper;d.lights.shadowmaps.CubeMapShadowMapper.__name__=["away3d","lights","shadowmaps","CubeMapShadowMapper"];d.lights.shadowmaps.CubeMapShadowMapper.__super__=d.lights.shadowmaps.ShadowMapperBase;d.lights.shadowmaps.CubeMapShadowMapper.prototype=q(d.lights.shadowmaps.ShadowMapperBase.prototype,
{initCameras:function(){this._depthCameras=[];this._lenses=[];this.addCamera(0,90,0);this.addCamera(0,-90,0);this.addCamera(-90,0,0);this.addCamera(90,0,0);this.addCamera(0,0,0);this.addCamera(0,180,0)},addCamera:function(a,b,f){var c=new d.cameras.Camera3D;c.set_rotationX(a);c.set_rotationY(b);c.set_rotationZ(f);c.get_lens().set_near(0.01);s.Boot.__cast(c.get_lens(),d.cameras.lenses.PerspectiveLens).set_fieldOfView(90);this._lenses.push(s.Boot.__cast(c.get_lens(),d.cameras.lenses.PerspectiveLens));
c.get_lens().set_aspectRatio(1);this._depthCameras.push(c)},createDepthTexture:function(){return new d.textures.RenderCubeTexture(this._depthMapSize)},updateDepthProjection:function(){for(var a=s.Boot.__cast(this._light,d.lights.PointLight)._fallOff,b=this._light.get_scenePosition(),f=0;6>f;)this._lenses[f].set_far(a),this._depthCameras[f].set_position(b),this._needsRender[f]=!0,++f},drawDepthMap:function(a,b,f){for(var c=0;6>c;)this._needsRender[c]&&(this._casterCollector.set_camera(this._depthCameras[c]),
this._casterCollector.clear(),b.traversePartitions(this._casterCollector),f.render(this._casterCollector,a,null,c),this._casterCollector.cleanUp()),++c},__class__:d.lights.shadowmaps.CubeMapShadowMapper});d.lights.shadowmaps.DirectionalShadowMapper=function(){this._lightOffset=1E4;this._snap=64;d.lights.shadowmaps.ShadowMapperBase.call(this);this._cullPlanes=[];this._overallDepthLens=new d.cameras.lenses.FreeMatrixLens;this._overallDepthCamera=new d.cameras.Camera3D(this._overallDepthLens);this._localFrustum=
d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(c._Vector.Vector_Impl_._new(24)),24,0);this._matrix=new c.geom.Matrix3D};h["away3d.lights.shadowmaps.DirectionalShadowMapper"]=d.lights.shadowmaps.DirectionalShadowMapper;d.lights.shadowmaps.DirectionalShadowMapper.__name__=["away3d","lights","shadowmaps","DirectionalShadowMapper"];d.lights.shadowmaps.DirectionalShadowMapper.__super__=d.lights.shadowmaps.ShadowMapperBase;d.lights.shadowmaps.DirectionalShadowMapper.prototype=q(d.lights.shadowmaps.ShadowMapperBase.prototype,
{get_snap:function(){return this._snap},set_snap:function(a){return this._snap=a},get_lightOffset:function(){return this._lightOffset},set_lightOffset:function(a){return this._lightOffset=a},get_depthProjection:function(){return this._overallDepthCamera.get_viewProjection()},get_depth:function(){return this._maxZ-this._minZ},drawDepthMap:function(a,b,f){this._casterCollector.set_camera(this._overallDepthCamera);this._casterCollector.set_cullPlanes(this._cullPlanes);this._casterCollector.clear();b.traversePartitions(this._casterCollector);
f.render(this._casterCollector,a);this._casterCollector.cleanUp()},updateCullPlanes:function(a){var b=this._overallDepthCamera.get_frustumPlanes(),a=a.get_frustumPlanes();d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._cullPlanes),4);this._cullPlanes[0]=b[0];this._cullPlanes[1]=b[1];this._cullPlanes[2]=b[2];this._cullPlanes[3]=b[3];for(var f=s.Boot.__cast(this._light,d.lights.DirectionalLight).get_sceneDirection(),b=f.x,c=f.y,f=f.z,e=4,j=0;6>j;){var g=a[j];0>g.a*b+g.b*
c+g.c*f&&(this._cullPlanes[e++]=g);++j}},updateDepthProjection:function(a){this.updateProjectionFromFrustumCorners(a,function(){var b=a.get_lens().get_frustumCorners(),f=new c.VectorData;f.length=b.length;f.fixed=!0;var d;d=Array(b.length);for(var e=0,j=b.length;e<j;){var g=e++;d[g]=b[g]}f.data=d;return f}(this),this._matrix);this._overallDepthLens.set_matrix(this._matrix);this.updateCullPlanes(a)},updateProjectionFromFrustumCorners:function(a,b,f){var c=d.core.math.Matrix3DUtils.get_RAW_DATA_CONTAINER(),
e,j,g,o,h,k;e=s.Boot.__cast(this._light,d.lights.DirectionalLight).get_sceneDirection();this._overallDepthCamera.set_transform(this._light.get_sceneTransform());j=(a.get_x()-e.x*this._lightOffset)/this._snap*this._snap;g=(a.get_y()-e.y*this._lightOffset)/this._snap*this._snap;o=(a.get_z()-e.z*this._lightOffset)/this._snap*this._snap;this._overallDepthCamera.set_x(j);this._overallDepthCamera.set_y(g);this._overallDepthCamera.set_z(o);this._matrix.copyFrom(this._overallDepthCamera.get_inverseSceneTransform());
this._matrix.prepend(a.get_sceneTransform());this._matrix.transformVectors(b,this._localFrustum);a=e=this._localFrustum.data[0];b=h=this._localFrustum.data[1];this._maxZ=this._localFrustum.data[2];for(k=3;24>k;)j=this._localFrustum.data[k],g=this._localFrustum.data[k+1],o=this._localFrustum.data[k+2],j<a&&(a=j),j>e&&(e=j),g<b&&(b=g),g>h&&(h=g),o>this._maxZ&&(this._maxZ=o),k+=3;this._minZ=1;j=e-a;g=h-b;o=1/(this._maxZ-this._minZ);0>a&&(a-=this._snap);0>b&&(b-=this._snap);a=a/this._snap*this._snap;
b=b/this._snap*this._snap;e=2*this._snap;j=(j/e+2)*e;g=(g/e+2)*e;e=a+j;h=b+g;j=1/j;g=1/g;0>=c.length&&!c.fixed&&(c.length=1);c.data[0]=2*j;5>=c.length&&!c.fixed&&(c.length=6);c.data[5]=2*g;10>=c.length&&!c.fixed&&(c.length=11);c.data[10]=o;12>=c.length&&!c.fixed&&(c.length=13);c.data[12]=-(e+a)*j;13>=c.length&&!c.fixed&&(c.length=14);c.data[13]=-(h+b)*g;14>=c.length&&!c.fixed&&(c.length=15);c.data[14]=-this._minZ*o;15>=c.length&&!c.fixed&&(c.length=16);c.data[15]=1;11>=c.length&&!c.fixed&&(c.length=
12);a=c.data[11]=0;9>=c.length&&!c.fixed&&(c.length=10);a=c.data[9]=a;8>=c.length&&!c.fixed&&(c.length=9);a=c.data[8]=a;7>=c.length&&!c.fixed&&(c.length=8);a=c.data[7]=a;6>=c.length&&!c.fixed&&(c.length=7);a=c.data[6]=a;4>=c.length&&!c.fixed&&(c.length=5);a=c.data[4]=a;3>=c.length&&!c.fixed&&(c.length=4);a=c.data[3]=a;2>=c.length&&!c.fixed&&(c.length=3);a=c.data[2]=a;1>=c.length&&!c.fixed&&(c.length=2);c.data[1]=a;f.copyRawDataFrom(c)},__class__:d.lights.shadowmaps.DirectionalShadowMapper,__properties__:q(d.lights.shadowmaps.ShadowMapperBase.prototype.__properties__,
{get_depth:"get_depth",get_depthProjection:"get_depthProjection",set_lightOffset:"set_lightOffset",get_lightOffset:"get_lightOffset",set_snap:"set_snap",get_snap:"get_snap"})});d.materials.LightSources=function(){};h["away3d.materials.LightSources"]=d.materials.LightSources;d.materials.LightSources.__name__=["away3d","materials","LightSources"];d.materials.MaterialBase=function(){this._blendMode=c.display.BlendMode.NORMAL;this._smooth=this._mipmap=!0;this._depthCompareMode=515;this._owners=[];this._passes=
[];this._depthPass=new d.materials.passes.DepthMapPass;this._distancePass=new d.materials.passes.DistanceMapPass;this._depthPass.addEventListener(c.events.Event.CHANGE,r(this,this.onDepthPassChange));this._distancePass.addEventListener(c.events.Event.CHANGE,r(this,this.onDistancePassChange));this.set_alphaPremultiplied(!1);this._uniqueId=d.materials.MaterialBase.MATERIAL_ID_COUNT++;this._numPasses=this._depthPassId=0;d.library.assets.NamedAssetBase.call(this)};h["away3d.materials.MaterialBase"]=d.materials.MaterialBase;
d.materials.MaterialBase.__name__=["away3d","materials","MaterialBase"];d.materials.MaterialBase.__interfaces__=[d.library.assets.IAsset];d.materials.MaterialBase.__super__=d.library.assets.NamedAssetBase;d.materials.MaterialBase.prototype=q(d.library.assets.NamedAssetBase.prototype,{get_assetType:function(){return d.library.assets.Asset3DType.MATERIAL},get_lightPicker:function(){return this._lightPicker},set_lightPicker:function(a){if(a!=this._lightPicker){this._lightPicker=a;for(var b=this._passes.length,
f=0;f<b;)this._passes[f].set_lightPicker(this._lightPicker),++f}return a},get_mipmap:function(){return this._mipmap},set_mipmap:function(a){this._mipmap=a;for(var b=0;b<this._numPasses;)this._passes[b].set_mipmap(a),++b;return a},get_smooth:function(){return this._smooth},set_smooth:function(a){this._smooth=a;for(var b=0;b<this._numPasses;)this._passes[b].set_smooth(a),++b;return a},get_depthCompareMode:function(){return this._depthCompareMode},set_depthCompareMode:function(a){return this._depthCompareMode=
a},get_repeat:function(){return this._repeat},set_repeat:function(a){this._repeat=a;for(var b=0;b<this._numPasses;)this._passes[b].set_repeat(a),++b;return a},dispose:function(){for(var a=0,a=0;a<this._numPasses;)this._passes[a].dispose(),++a;this._depthPass.dispose();this._distancePass.dispose();this._depthPass.removeEventListener(c.events.Event.CHANGE,r(this,this.onDepthPassChange));this._distancePass.removeEventListener(c.events.Event.CHANGE,r(this,this.onDistancePassChange))},get_bothSides:function(){return this._bothSides},
set_bothSides:function(a){this._bothSides=a;for(var b=0;b<this._numPasses;)this._passes[b].set_bothSides(a),++b;this._depthPass.set_bothSides(a);this._distancePass.set_bothSides(a);return a},get_blendMode:function(){return this._blendMode},set_blendMode:function(a){return this._blendMode=a},get_alphaPremultiplied:function(){return this._alphaPremultiplied},set_alphaPremultiplied:function(a){this._alphaPremultiplied=a;for(var b=0;b<this._numPasses;)this._passes[b].set_alphaPremultiplied(a),++b;return a},
get_requiresBlending:function(){return this._blendMode!=c.display.BlendMode.NORMAL},get_uniqueId:function(){return this._uniqueId},get_numPasses:function(){return this._numPasses},hasDepthAlphaThreshold:function(){return 0<this._depthPass.get_alphaThreshold()},activateForDepth:function(a,b,f){null==f&&(f=!1);(this._distanceBasedDepthRender=f)?this._distancePass.activate(a,b):this._depthPass.activate(a,b)},deactivateForDepth:function(a){this._distanceBasedDepthRender?this._distancePass.deactivate(a):
this._depthPass.deactivate(a)},renderDepth:function(a,b,f,c){this._distanceBasedDepthRender?(null!=a.get_animator()&&this._distancePass.updateAnimationState(a,b,f),this._distancePass.render(a,b,f,c)):(null!=a.get_animator()&&this._depthPass.updateAnimationState(a,b,f),this._depthPass.render(a,b,f,c))},passRendersToTexture:function(a){return this._passes[a].get_renderToTexture()},activatePass:function(a,b,f){this._passes[a].activate(b,f)},deactivatePass:function(a,b){this._passes[a].deactivate(b)},
renderPass:function(a,b,f,c,d){null!=this._lightPicker&&this._lightPicker.collectLights(b,c);a=this._passes[a];null!=b.get_animator()&&a.updateAnimationState(b,f,c.get_camera());a.render(b,f,c.get_camera(),d)},addOwner:function(a){this._owners.push(a);if(null!=a.get_animator()){if(null!=this._animationSet&&a.get_animator().get_animationSet()!=this._animationSet)throw new c.errors.Error("A Material instance cannot be shared across renderables with different animator libraries");if(this._animationSet!=
a.get_animator().get_animationSet()){this._animationSet=a.get_animator().get_animationSet();for(a=0;a<this._numPasses;)this._passes[a].set_animationSet(this._animationSet),++a;this._depthPass.set_animationSet(this._animationSet);this._distancePass.set_animationSet(this._animationSet);this.invalidatePasses(null)}}},removeOwner:function(a){this._owners.splice(N.indexOf(this._owners,a),1);if(0==this._owners.length){this._animationSet=null;for(a=0;a<this._numPasses;)this._passes[a].set_animationSet(this._animationSet),
++a;this._depthPass.set_animationSet(this._animationSet);this._distancePass.set_animationSet(this._animationSet);this.invalidatePasses(null)}},get_owners:function(){return this._owners},updateMaterial:function(){},deactivate:function(a){this._passes[this._numPasses-1].deactivate(a)},invalidatePasses:function(a){var b=this;this._depthPass.invalidateShaderProgram();this._distancePass.invalidateShaderProgram();null!=this._animationSet&&(this._animationSet.resetGPUCompatibility(),N.foreach(this._owners,
function(a){null!=a.get_animator()&&(a.get_animator().testGPUCompatibility(b._depthPass),a.get_animator().testGPUCompatibility(b._distancePass));return!0}));for(var f=0,c=this._numPasses;f<c;){var d=[f++];this._passes[d[0]]!=a&&this._passes[d[0]].invalidateShaderProgram(!1);null!=this._animationSet&&N.foreach(this._owners,function(a){return function(f){f.get_animator()!=null&&f.get_animator().testGPUCompatibility(b._passes[a[0]]);return true}}(d))}},removePass:function(a){this._passes.splice(w.indexOf(this._passes,
a,0),1);--this._numPasses},clearPasses:function(){for(var a=0;a<this._numPasses;)this._passes[a].removeEventListener(c.events.Event.CHANGE,r(this,this.onPassChange)),++a;this._passes=[];this._numPasses=0},addPass:function(a){this._passes[this._numPasses++]=a;a.set_animationSet(this._animationSet);a.set_alphaPremultiplied(this._alphaPremultiplied);a.set_mipmap(this._mipmap);a.set_smooth(this._smooth);a.set_repeat(this._repeat);a.set_lightPicker(this._lightPicker);a.set_bothSides(this._bothSides);a.addEventListener(c.events.Event.CHANGE,
r(this,this.onPassChange));this.invalidatePasses(null)},onPassChange:function(){for(var a=1,b,f,c=this._renderOrderId=0;c<this._numPasses;){b=this._passes[c]._program3Dids;f=b.length;for(var d=0;d<f;)-1!=b[d]&&(this._renderOrderId+=a*b[d]|0,d=f),++d;a*=1E3;++c}},onDistancePassChange:function(){for(var a=this._distancePass._program3Dids,b=a.length,f=this._depthPassId=0;f<b;)-1!=a[f]&&(this._depthPassId+=a[f],f=b),++f},onDepthPassChange:function(){for(var a=this._depthPass._program3Dids,b=a.length,
f=this._depthPassId=0;f<b;)-1!=a[f]&&(this._depthPassId+=a[f],f=b),++f},__class__:d.materials.MaterialBase,__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,{get_owners:"get_owners",get_numPasses:"get_numPasses",get_uniqueId:"get_uniqueId",get_requiresBlending:"get_requiresBlending",set_alphaPremultiplied:"set_alphaPremultiplied",get_alphaPremultiplied:"get_alphaPremultiplied",set_blendMode:"set_blendMode",get_blendMode:"get_blendMode",set_bothSides:"set_bothSides",get_bothSides:"get_bothSides",
set_repeat:"set_repeat",get_repeat:"get_repeat",set_depthCompareMode:"set_depthCompareMode",get_depthCompareMode:"get_depthCompareMode",set_smooth:"set_smooth",get_smooth:"get_smooth",set_mipmap:"set_mipmap",get_mipmap:"get_mipmap",set_lightPicker:"set_lightPicker",get_lightPicker:"get_lightPicker",get_assetType:"get_assetType"})});d.materials.SegmentMaterial=function(a){null==a&&(a=1.25);d.materials.MaterialBase.call(this);this.set_bothSides(!0);this.addPass(this._screenPass=new d.materials.passes.SegmentPass(a));
this._screenPass.set_material(this)};h["away3d.materials.SegmentMaterial"]=d.materials.SegmentMaterial;d.materials.SegmentMaterial.__name__=["away3d","materials","SegmentMaterial"];d.materials.SegmentMaterial.__super__=d.materials.MaterialBase;d.materials.SegmentMaterial.prototype=q(d.materials.MaterialBase.prototype,{__class__:d.materials.SegmentMaterial});d.materials.SinglePassMaterialBase=function(){d.materials.MaterialBase.call(this);this.addPass(this._screenPass=new d.materials.passes.SuperShaderPass(this))};
h["away3d.materials.SinglePassMaterialBase"]=d.materials.SinglePassMaterialBase;d.materials.SinglePassMaterialBase.__name__=["away3d","materials","SinglePassMaterialBase"];d.materials.SinglePassMaterialBase.__super__=d.materials.MaterialBase;d.materials.SinglePassMaterialBase.prototype=q(d.materials.MaterialBase.prototype,{get_enableLightFallOff:function(){return this._screenPass.get_enableLightFallOff()},set_enableLightFallOff:function(a){this._screenPass.set_enableLightFallOff(a);return a},get_alphaThreshold:function(){return this._screenPass.get_diffuseMethod().get_alphaThreshold()},
set_alphaThreshold:function(a){this._screenPass.get_diffuseMethod().set_alphaThreshold(a);this._depthPass.set_alphaThreshold(a);this._distancePass.set_alphaThreshold(a);return a},set_blendMode:function(a){d.materials.MaterialBase.prototype.set_blendMode.call(this,a);this._screenPass.setBlendMode(this.get_blendMode()==c.display.BlendMode.NORMAL&&this.get_requiresBlending()?c.display.BlendMode.LAYER:this.get_blendMode());return a},set_depthCompareMode:function(a){d.materials.MaterialBase.prototype.set_depthCompareMode.call(this,
a);this._screenPass.set_depthCompareMode(a);return a},activateForDepth:function(a,b,f){null==f&&(f=!1);f?this._distancePass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture()):this._depthPass.set_alphaMask(this._screenPass.get_diffuseMethod().get_texture());d.materials.MaterialBase.prototype.activateForDepth.call(this,a,b,f)},get_specularLightSources:function(){return this._screenPass.get_specularLightSources()},set_specularLightSources:function(a){this._screenPass.set_specularLightSources(a);
return a},get_diffuseLightSources:function(){return this._screenPass.get_diffuseLightSources()},set_diffuseLightSources:function(a){this._screenPass.set_diffuseLightSources(a);return a},get_requiresBlending:function(){return d.materials.MaterialBase.prototype.get_requiresBlending.call(this)||this._alphaBlending||null!=this._screenPass.get_colorTransform()&&1>this._screenPass.get_colorTransform().alphaMultiplier},get_colorTransform:function(){return this._screenPass.get_colorTransform()},set_colorTransform:function(a){this._screenPass.set_colorTransform(a);
return a},get_ambientMethod:function(){return this._screenPass.get_ambientMethod()},set_ambientMethod:function(a){this._screenPass.set_ambientMethod(a);return a},get_shadowMethod:function(){return this._screenPass.get_shadowMethod()},set_shadowMethod:function(a){this._screenPass.set_shadowMethod(a);return a},get_diffuseMethod:function(){return this._screenPass.get_diffuseMethod()},set_diffuseMethod:function(a){this._screenPass.set_diffuseMethod(a);return a},get_normalMethod:function(){return this._screenPass.get_normalMethod()},
set_normalMethod:function(a){this._screenPass.set_normalMethod(a);return a},get_specularMethod:function(){return this._screenPass.get_specularMethod()},set_specularMethod:function(a){this._screenPass.set_specularMethod(a);return a},addMethod:function(a){this._screenPass.addMethod(a)},get_numMethods:function(){return this._screenPass.get_numMethods()},hasMethod:function(a){return this._screenPass.hasMethod(a)},getMethodAt:function(a){return this._screenPass.getMethodAt(a)},addMethodAt:function(a,b){this._screenPass.addMethodAt(a,
b)},removeMethod:function(a){this._screenPass.removeMethod(a)},set_mipmap:function(a){if(this._mipmap==a)return a;d.materials.MaterialBase.prototype.set_mipmap.call(this,a);return a},get_normalMap:function(){return this._screenPass.get_normalMap()},set_normalMap:function(a){this._screenPass.set_normalMap(a);return a},get_specularMap:function(){return this._screenPass.get_specularMethod().get_texture()},set_specularMap:function(a){if(null!=this._screenPass.get_specularMethod())this._screenPass.get_specularMethod().set_texture(a);
else throw new c.errors.Error("No specular method was set to assign the specularGlossMap to");return a},get_gloss:function(){return null!=this._screenPass.get_specularMethod()?this._screenPass.get_specularMethod().get_gloss():0},set_gloss:function(a){null!=this._screenPass.get_specularMethod()&&this._screenPass.get_specularMethod().set_gloss(a);return a},get_ambient:function(){return this._screenPass.get_ambientMethod().get_ambient()},set_ambient:function(a){this._screenPass.get_ambientMethod().set_ambient(a);
return a},get_specular:function(){return null!=this._screenPass.get_specularMethod()?this._screenPass.get_specularMethod().get_specular():0},set_specular:function(a){null!=this._screenPass.get_specularMethod()&&this._screenPass.get_specularMethod().set_specular(a);return a},get_ambientColor:function(){return this._screenPass.get_ambientMethod().get_ambientColor()},set_ambientColor:function(a){this._screenPass.get_ambientMethod().set_ambientColor(a);return a},get_specularColor:function(){return this._screenPass.get_specularMethod().get_specularColor()},
set_specularColor:function(a){this._screenPass.get_specularMethod().set_specularColor(a);return a},get_alphaBlending:function(){return this._alphaBlending},set_alphaBlending:function(a){this._alphaBlending=a;this._screenPass.setBlendMode(this.get_blendMode()==c.display.BlendMode.NORMAL&&this.get_requiresBlending()?c.display.BlendMode.LAYER:this.get_blendMode());this._screenPass.set_preserveAlpha(this.get_requiresBlending());return a},updateMaterial:function(){if(this._screenPass._passesDirty){this.clearPasses();
if(null!=this._screenPass._passes)for(var a=this._screenPass._passes.length,b=0;b<a;)this.addPass(this._screenPass._passes[b]),++b;this.addPass(this._screenPass);this._screenPass._passesDirty=!1}},set_lightPicker:function(a){d.materials.MaterialBase.prototype.set_lightPicker.call(this,a);this._screenPass.set_lightPicker(a);return a},__class__:d.materials.SinglePassMaterialBase,__properties__:q(d.materials.MaterialBase.prototype.__properties__,{set_alphaBlending:"set_alphaBlending",get_alphaBlending:"get_alphaBlending",
set_specularColor:"set_specularColor",get_specularColor:"get_specularColor",set_ambientColor:"set_ambientColor",get_ambientColor:"get_ambientColor",set_specular:"set_specular",get_specular:"get_specular",set_ambient:"set_ambient",get_ambient:"get_ambient",set_gloss:"set_gloss",get_gloss:"get_gloss",set_specularMap:"set_specularMap",get_specularMap:"get_specularMap",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",get_numMethods:"get_numMethods",set_specularMethod:"set_specularMethod",get_specularMethod:"get_specularMethod",
set_normalMethod:"set_normalMethod",get_normalMethod:"get_normalMethod",set_diffuseMethod:"set_diffuseMethod",get_diffuseMethod:"get_diffuseMethod",set_shadowMethod:"set_shadowMethod",get_shadowMethod:"get_shadowMethod",set_ambientMethod:"set_ambientMethod",get_ambientMethod:"get_ambientMethod",set_colorTransform:"set_colorTransform",get_colorTransform:"get_colorTransform",set_diffuseLightSources:"set_diffuseLightSources",get_diffuseLightSources:"get_diffuseLightSources",set_specularLightSources:"set_specularLightSources",
get_specularLightSources:"get_specularLightSources",set_alphaThreshold:"set_alphaThreshold",get_alphaThreshold:"get_alphaThreshold",set_enableLightFallOff:"set_enableLightFallOff",get_enableLightFallOff:"get_enableLightFallOff"})});d.materials.TextureMaterial=function(a,b,f,c){null==c&&(c=!0);null==f&&(f=!1);null==b&&(b=!0);d.materials.SinglePassMaterialBase.call(this);this.set_texture(a);this.set_smooth(b);this.set_repeat(f);this.set_mipmap(c)};h["away3d.materials.TextureMaterial"]=d.materials.TextureMaterial;
d.materials.TextureMaterial.__name__=["away3d","materials","TextureMaterial"];d.materials.TextureMaterial.__super__=d.materials.SinglePassMaterialBase;d.materials.TextureMaterial.prototype=q(d.materials.SinglePassMaterialBase.prototype,{get_animateUVs:function(){return this._screenPass.get_animateUVs()},set_animateUVs:function(a){this._screenPass.set_animateUVs(a);return a},get_alpha:function(){return null!=this._screenPass.get_colorTransform()?this._screenPass.get_colorTransform().alphaMultiplier:
1},set_alpha:function(a){1<a?a=1:0>a&&(a=0);null==this.get_colorTransform()&&this.set_colorTransform(new c.geom.ColorTransform);this.get_colorTransform().alphaMultiplier=a;this._screenPass.set_preserveAlpha(this.get_requiresBlending());this._screenPass.setBlendMode(this.get_blendMode()==c.display.BlendMode.NORMAL&&this.get_requiresBlending()?c.display.BlendMode.LAYER:this.get_blendMode());return a},get_texture:function(){return this._screenPass.get_diffuseMethod().get_texture()},set_texture:function(a){this._screenPass.get_diffuseMethod().set_texture(a);
return a},get_ambientTexture:function(){return this._screenPass.get_ambientMethod().get_texture()},set_ambientTexture:function(a){this._screenPass.get_ambientMethod().set_texture(a);this._screenPass.get_diffuseMethod().set_useAmbientTexture(s.Boot.__cast(null!=a,K));return a},__class__:d.materials.TextureMaterial,__properties__:q(d.materials.SinglePassMaterialBase.prototype.__properties__,{set_ambientTexture:"set_ambientTexture",get_ambientTexture:"get_ambientTexture",set_texture:"set_texture",get_texture:"get_texture",
set_alpha:"set_alpha",get_alpha:"get_alpha",set_animateUVs:"set_animateUVs",get_animateUVs:"get_animateUVs"})});d.materials.compilation.MethodDependencyCounter=function(){this._usesGlobalPosFragment=!1};h["away3d.materials.compilation.MethodDependencyCounter"]=d.materials.compilation.MethodDependencyCounter;d.materials.compilation.MethodDependencyCounter.__name__=["away3d","materials","compilation","MethodDependencyCounter"];d.materials.compilation.MethodDependencyCounter.prototype={reset:function(){this._tangentDependencies=
this._globalPosDependencies=this._secondaryUVDependencies=this._uvDependencies=this._viewDirDependencies=this._normalDependencies=this._projectionDependencies=0;this._usesGlobalPosFragment=!1},setPositionedLights:function(a,b){this._numPointLights=a;this._lightSourceMask=b},includeMethodVO:function(a){a.needsProjection&&++this._projectionDependencies;a.needsGlobalVertexPos?(++this._globalPosDependencies,a.needsGlobalFragmentPos&&(this._usesGlobalPosFragment=!0)):a.needsGlobalFragmentPos&&(++this._globalPosDependencies,
this._usesGlobalPosFragment=!0);a.needsNormals&&++this._normalDependencies;a.needsTangents&&++this._tangentDependencies;a.needsView&&++this._viewDirDependencies;a.needsUV&&++this._uvDependencies;a.needsSecondaryUV&&++this._secondaryUVDependencies},get_tangentDependencies:function(){return this._tangentDependencies},get_usesGlobalPosFragment:function(){return this._usesGlobalPosFragment},get_projectionDependencies:function(){return this._projectionDependencies},get_normalDependencies:function(){return this._normalDependencies},
get_viewDirDependencies:function(){return this._viewDirDependencies},get_uvDependencies:function(){return this._uvDependencies},get_secondaryUVDependencies:function(){return this._secondaryUVDependencies},get_globalPosDependencies:function(){return this._globalPosDependencies},addWorldSpaceDependencies:function(a){0<this._viewDirDependencies&&++this._globalPosDependencies;0<this._numPointLights&&1==(this._lightSourceMask&d.materials.LightSources.LIGHTS)&&(++this._globalPosDependencies,a&&(this._usesGlobalPosFragment=
!0))},__class__:d.materials.compilation.MethodDependencyCounter,__properties__:{get_globalPosDependencies:"get_globalPosDependencies",get_secondaryUVDependencies:"get_secondaryUVDependencies",get_uvDependencies:"get_uvDependencies",get_viewDirDependencies:"get_viewDirDependencies",get_normalDependencies:"get_normalDependencies",get_projectionDependencies:"get_projectionDependencies",get_usesGlobalPosFragment:"get_usesGlobalPosFragment",get_tangentDependencies:"get_tangentDependencies"}};m.ds.StringMap=
function(){this.h={}};h["haxe.ds.StringMap"]=m.ds.StringMap;m.ds.StringMap.__name__=["haxe","ds","StringMap"];m.ds.StringMap.__interfaces__=[F];m.ds.StringMap.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return w.iter(a)},iterator:function(){return{ref:this.h,
it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref["$"+a]}}},__class__:m.ds.StringMap};d.materials.compilation.RegisterPool=function(a,b,f){null==f&&(f=!0);this._regName=a;this._regCount=b;this._persistent=f;this.initRegisters(a,b)};h["away3d.materials.compilation.RegisterPool"]=d.materials.compilation.RegisterPool;d.materials.compilation.RegisterPool.__name__=["away3d","materials","compilation","RegisterPool"];d.materials.compilation.RegisterPool._initPool=
function(a,b){var f=a+b;if(null!=d.materials.compilation.RegisterPool._regPool.get(f))return f;var c=[];d.materials.compilation.RegisterPool._regPool.set(f,c);var e=[];d.materials.compilation.RegisterPool._regCompsPool.set(f,e);for(var j=0;j<b;){var g=j++;c[g]=new d.materials.compilation.ShaderRegisterElement(a,g);for(var o=0;4>o;){var h=o++;null==e[h]&&(e[h]=[]);e[h][g]=new d.materials.compilation.ShaderRegisterElement(a,g,h)}}return f};d.materials.compilation.RegisterPool.prototype={requestFreeVectorReg:function(){for(var a=
0,b=this._regCount;a<b;){var f=a++;if(!this.isRegisterUsed(f))return this._persistent&&this._usedVectorCount[f]++,this._vectorRegisters[f]}throw new c.errors.Error("Register overflow!");},requestFreeRegComponent:function(){for(var a=0,b=this._regCount;a<b;){var f=a++,d=void 0,d=this._usedVectorCount[f],e=0>d,d=!1!=e?e:0<d;if(!d)for(d=0;4>d;){var e=d++,j=void 0,j=this._usedSingleCount[e][f],j=0>j?4294967296+j:j+0;if(0==j)return this._persistent&&this._usedSingleCount[e][f]++,this._registerComponents[e][f]}}throw new c.errors.Error("Register overflow!");
},addUsage:function(a,b){if(-1<a._component){var f=this._usedSingleCount[a._component][a.get_index()];this._usedSingleCount[a._component][a.get_index()]=f+b}else f=this._usedVectorCount[a.get_index()],this._usedVectorCount[a.get_index()]=f+b},removeUsage:function(a){a=-1<a._component?--this._usedSingleCount[a._component][a.get_index()]:--this._usedVectorCount[a.get_index()];if(!1!=0>a?0:0>a)throw new c.errors.Error("More usages removed than exist!");},dispose:function(){this._usedVectorCount=this._usedSingleCount=
this._registerComponents=this._vectorRegisters=null},hasRegisteredRegs:function(){for(var a=0,b=this._regCount;a<b;){var f=a++;if(this.isRegisterUsed(f))return!0}return!1},initRegisters:function(a,b){var f=d.materials.compilation.RegisterPool._initPool(a,b);this._vectorRegisters=d.materials.compilation.RegisterPool._regPool.get(f);this._registerComponents=d.materials.compilation.RegisterPool._regCompsPool.get(f);this._usedVectorCount=[];this._usedSingleCount=[];this._usedSingleCount[0]=[];this._usedSingleCount[1]=
[];this._usedSingleCount[2]=[];this._usedSingleCount[3]=[];d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._usedVectorCount),b,0);d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._usedSingleCount[0]),b,0);d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._usedSingleCount[1]),b,0);d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._usedSingleCount[2]),b,0);d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this._usedSingleCount[3]),
b,0)},isRegisterUsed:function(a){var b=this._usedVectorCount[a],f=0>b;if(!1!=f?f:0<b)return!0;for(b=0;4>b;){var f=b++,c=void 0,f=this._usedSingleCount[f][a],c=0>f;if(c=!1!=c?c:0<f)return!0}return!1},__class__:d.materials.compilation.RegisterPool};d.materials.compilation.ShaderCompiler=function(a){this._preserveAlpha=!0;this._probeWeightsIndex=this._cameraPositionIndex=this._sceneNormalMatrixIndex=this._sceneMatrixIndex=this._lightFragmentConstantIndex=this._tangentBufferIndex=this._normalBufferIndex=
this._secondaryUVBufferIndex=this._uvTransformIndex=this._uvBufferIndex=this._commonsDataIndex=-1;this._sharedRegisters=new d.materials.compilation.ShaderRegisterData;this._dependencyCounter=new d.materials.compilation.MethodDependencyCounter;this._profile=a;this.initRegisterCache(a)};h["away3d.materials.compilation.ShaderCompiler"]=d.materials.compilation.ShaderCompiler;d.materials.compilation.ShaderCompiler.__name__=["away3d","materials","compilation","ShaderCompiler"];d.materials.compilation.ShaderCompiler.prototype=
{get_enableLightFallOff:function(){return this._enableLightFallOff},set_enableLightFallOff:function(a){return this._enableLightFallOff=a},get_needUVAnimation:function(){return this._needUVAnimation},get_UVTarget:function(){return this._UVTarget},get_UVSource:function(){return this._UVSource},get_forceSeperateMVP:function(){return this._forceSeperateMVP},set_forceSeperateMVP:function(a){return this._forceSeperateMVP=a},initRegisterCache:function(a){this._registerCache=new d.materials.compilation.ShaderRegisterCache(a);
this._registerCache.set_vertexAttributesOffset(1);this._registerCache.reset()},get_animateUVs:function(){return this._animateUVs},set_animateUVs:function(a){return this._animateUVs=a},get_alphaPremultiplied:function(){return this._alphaPremultiplied},set_alphaPremultiplied:function(a){return this._alphaPremultiplied=a},get_preserveAlpha:function(){return this._preserveAlpha},set_preserveAlpha:function(a){return this._preserveAlpha=a},setTextureSampling:function(a,b,f){this._smooth=a;this._repeat=
b;this._mipmap=f},setConstantDataBuffers:function(a,b){this._vertexConstantData=a;this._fragmentConstantData=b},get_methodSetup:function(){return this._methodSetup},set_methodSetup:function(a){return this._methodSetup=a},compile:function(){this.initRegisterIndices();this.initLightData();this._animatableAttributes=["va0"];this._animationTargetRegisters=["vt0"];this._fragmentCode=this._vertexCode="";this._sharedRegisters.localPosition=this._registerCache.getFreeVertexVectorTemp();this._registerCache.addVertexTempUsages(this._sharedRegisters.localPosition,
1);this.createCommons();this.calculateDependencies();this.updateMethodRegisters();for(var a=0;4>a;)this._registerCache.getFreeVertexConstant(),++a;this.createNormalRegisters();(0<this._dependencyCounter.get_globalPosDependencies()||this._forceSeperateMVP)&&this.compileGlobalPositionCode();this.compileProjectionCode();this.compileMethodsCode();this.compileFragmentOutput();this._fragmentPostLightCode=this.get_fragmentCode()},createNormalRegisters:function(){},compileMethodsCode:function(){0<this._dependencyCounter.get_uvDependencies()&&
this.compileUVCode();0<this._dependencyCounter.get_secondaryUVDependencies()&&this.compileSecondaryUVCode();0<this._dependencyCounter.get_normalDependencies()&&this.compileNormalCode();0<this._dependencyCounter.get_viewDirDependencies()&&this.compileViewDirCode();this.compileLightingCode();this._fragmentLightCode=this._fragmentCode;this._fragmentCode="";this.compileMethods()},compileLightingCode:function(){},compileViewDirCode:function(){},compileNormalCode:function(){},compileUVCode:function(){var a=
this._registerCache.getFreeVertexAttribute();this._uvBufferIndex=a.get_index();var b=this._registerCache.getFreeVarying();this._sharedRegisters.uvVarying=b;if(this.get_animateUVs()){var f=this._registerCache.getFreeVertexConstant(),c=this._registerCache.getFreeVertexConstant();this._uvTransformIndex=4*f.get_index();this._vertexCode+="dp4 "+k.string(b)+".x, "+k.string(a)+", "+k.string(f)+"\ndp4 "+k.string(b)+".y, "+k.string(a)+", "+k.string(c)+"\nmov "+k.string(b)+".zw, "+k.string(a)+".zw \n"}else this._uvTransformIndex=
-1,this._needUVAnimation=!0,this._UVTarget=b.toString(),this._UVSource=a.toString()},compileSecondaryUVCode:function(){var a=this._registerCache.getFreeVertexAttribute();this._secondaryUVBufferIndex=a.get_index();this._sharedRegisters.secondaryUVVarying=this._registerCache.getFreeVarying();this._vertexCode+="mov "+k.string(this._sharedRegisters.secondaryUVVarying)+", "+k.string(a)+"\n"},compileGlobalPositionCode:function(){this._sharedRegisters.globalPositionVertex=this._registerCache.getFreeVertexVectorTemp();
this._registerCache.addVertexTempUsages(this._sharedRegisters.globalPositionVertex,this._dependencyCounter.get_globalPosDependencies());var a=this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._registerCache.getFreeVertexConstant();this._sceneMatrixIndex=4*a.get_index();this._vertexCode+="m44 "+k.string(this._sharedRegisters.globalPositionVertex)+", "+k.string(this._sharedRegisters.localPosition)+", "+k.string(a)+
"\n";this._dependencyCounter.get_usesGlobalPosFragment()&&(this._sharedRegisters.globalPositionVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+k.string(this._sharedRegisters.globalPositionVarying)+", "+k.string(this._sharedRegisters.globalPositionVertex)+"\n")},compileProjectionCode:function(){var a;a=0<this._dependencyCounter.get_globalPosDependencies()||this._forceSeperateMVP?this._sharedRegisters.globalPositionVertex.toString():this._animationTargetRegisters[0];0<this._dependencyCounter.get_projectionDependencies()?
(this._sharedRegisters.projectionFragment=this._registerCache.getFreeVarying(),a="m44 vt5, "+a+", vc0\t\t\nmov "+k.string(this._sharedRegisters.projectionFragment)+", vt5\nmov op, vt5\n"):a="m44 op, "+a+", vc0\t\t\n";this._vertexCode+=a},compileFragmentOutput:function(){this._fragmentCode+="mov "+k.string(this._registerCache.get_fragmentOutputRegister())+", "+k.string(this._sharedRegisters.shadedTarget)+"\n";this._registerCache.removeFragmentTempUsage(this._sharedRegisters.shadedTarget)},initRegisterIndices:function(){this._probeWeightsIndex=
this._sceneNormalMatrixIndex=this._sceneMatrixIndex=this._lightFragmentConstantIndex=this._tangentBufferIndex=this._normalBufferIndex=this._secondaryUVBufferIndex=this._uvTransformIndex=this._uvBufferIndex=this._cameraPositionIndex=this._commonsDataIndex=-1},initLightData:function(){this._numLights=this._numPointLights+this._numDirectionalLights;this._numProbeRegisters=Math.ceil(this._numLightProbes/4);this._combinedLightSources=null!=this._methodSetup._specularMethod?this._specularLightSources|this._diffuseLightSources:
this._diffuseLightSources;this._usingSpecularMethod=s.Boot.__cast(null!=this._methodSetup._specularMethod&&(this.usesLightsForSpecular()||this.usesProbesForSpecular()),K)},createCommons:function(){this._sharedRegisters.commons=this._registerCache.getFreeFragmentConstant();this._commonsDataIndex=4*this._sharedRegisters.commons.get_index()},calculateDependencies:function(){this._dependencyCounter.reset();var a=this._methodSetup._methods,b;this.setupAndCountMethodDependencies(this._methodSetup._diffuseMethod,
this._methodSetup._diffuseMethodVO);null!=this._methodSetup._shadowMethod&&this.setupAndCountMethodDependencies(this._methodSetup._shadowMethod,this._methodSetup._shadowMethodVO);this.setupAndCountMethodDependencies(this._methodSetup._ambientMethod,this._methodSetup._ambientMethodVO);this._usingSpecularMethod&&this.setupAndCountMethodDependencies(this._methodSetup._specularMethod,this._methodSetup._specularMethodVO);null!=this._methodSetup._colorTransformMethod&&this.setupAndCountMethodDependencies(this._methodSetup._colorTransformMethod,
this._methodSetup._colorTransformMethodVO);b=a.length;for(var f=0;f<b;)this.setupAndCountMethodDependencies(a[f].method,a[f].data),++f;this.get_usesNormals()&&this.setupAndCountMethodDependencies(this._methodSetup._normalMethod,this._methodSetup._normalMethodVO);this._dependencyCounter.setPositionedLights(this._numPointLights,this._combinedLightSources)},setupAndCountMethodDependencies:function(a,b){this.setupMethod(a,b);this._dependencyCounter.includeMethodVO(b)},setupMethod:function(a,b){a.reset();
b.reset();b.vertexData=this._vertexConstantData;b.fragmentData=this._fragmentConstantData;b.useSmoothTextures=this._smooth;b.repeatTextures=this._repeat;b.useMipmapping=this._mipmap;b.useLightFallOff=this._enableLightFallOff&&"baselineConstrained"!=this._profile;b.numLights=this._numLights+this._numLightProbes;a.initVO(b)},get_commonsDataIndex:function(){return this._commonsDataIndex},updateMethodRegisters:function(){this._methodSetup._normalMethod.set_sharedRegisters(this._sharedRegisters);this._methodSetup._diffuseMethod.set_sharedRegisters(this._sharedRegisters);
null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.set_sharedRegisters(this._sharedRegisters);this._methodSetup._ambientMethod.set_sharedRegisters(this._sharedRegisters);null!=this._methodSetup._specularMethod&&this._methodSetup._specularMethod.set_sharedRegisters(this._sharedRegisters);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.set_sharedRegisters(this._sharedRegisters);for(var a=this._methodSetup._methods,b=a.length,f=0;f<b;)a[f].method.set_sharedRegisters(this._sharedRegisters),
++f},get_numUsedVertexConstants:function(){return this._registerCache.get_numUsedVertexConstants()},get_numUsedFragmentConstants:function(){return this._registerCache.get_numUsedFragmentConstants()},get_numUsedStreams:function(){return this._registerCache.get_numUsedStreams()},get_numUsedTextures:function(){return this._registerCache.get_numUsedTextures()},get_numUsedVaryings:function(){return this._registerCache.get_numUsedVaryings()},usesLightsForSpecular:function(){return 0<this._numLights&&0!=
(this._specularLightSources&d.materials.LightSources.LIGHTS)},usesLightsForDiffuse:function(){return 0<this._numLights&&0!=(this._diffuseLightSources&d.materials.LightSources.LIGHTS)},dispose:function(){this.cleanUpMethods();this._registerCache.dispose();this._sharedRegisters=this._registerCache=null},cleanUpMethods:function(){null!=this._methodSetup._normalMethod&&this._methodSetup._normalMethod.cleanCompilationData();null!=this._methodSetup._diffuseMethod&&this._methodSetup._diffuseMethod.cleanCompilationData();
null!=this._methodSetup._ambientMethod&&this._methodSetup._ambientMethod.cleanCompilationData();null!=this._methodSetup._specularMethod&&this._methodSetup._specularMethod.cleanCompilationData();null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.cleanCompilationData();null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.cleanCompilationData();for(var a=this._methodSetup._methods,b=a.length,f=0;f<b;)a[f].method.cleanCompilationData(),++f},get_specularLightSources:function(){return this._specularLightSources},
set_specularLightSources:function(a){return this._specularLightSources=a},get_diffuseLightSources:function(){return this._diffuseLightSources},set_diffuseLightSources:function(a){return this._diffuseLightSources=a},usesProbesForSpecular:function(){return 0<this._numLightProbes&&0!=(this._specularLightSources&d.materials.LightSources.PROBES)},usesProbesForDiffuse:function(){return 0<this._numLightProbes&&0!=(this._diffuseLightSources&d.materials.LightSources.PROBES)},usesProbes:function(){return 0<
this._numLightProbes&&0!=((this._diffuseLightSources|this._specularLightSources)&d.materials.LightSources.PROBES)},get_uvBufferIndex:function(){return this._uvBufferIndex},get_uvTransformIndex:function(){return this._uvTransformIndex},get_secondaryUVBufferIndex:function(){return this._secondaryUVBufferIndex},get_normalBufferIndex:function(){return this._normalBufferIndex},get_tangentBufferIndex:function(){return this._tangentBufferIndex},get_lightFragmentConstantIndex:function(){return this._lightFragmentConstantIndex},
get_cameraPositionIndex:function(){return this._cameraPositionIndex},get_sceneMatrixIndex:function(){return this._sceneMatrixIndex},get_sceneNormalMatrixIndex:function(){return this._sceneNormalMatrixIndex},get_probeWeightsIndex:function(){return this._probeWeightsIndex},get_vertexCode:function(){return this._vertexCode},get_fragmentCode:function(){return this._fragmentCode},get_fragmentLightCode:function(){return this._fragmentLightCode},get_fragmentPostLightCode:function(){return this._fragmentPostLightCode},
get_shadedTarget:function(){return this._sharedRegisters.shadedTarget.toString()},get_numPointLights:function(){return this._numPointLights},set_numPointLights:function(a){return this._numPointLights=a},get_numDirectionalLights:function(){return this._numDirectionalLights},set_numDirectionalLights:function(a){return this._numDirectionalLights=a},get_numLightProbes:function(){return this._numLightProbes},set_numLightProbes:function(a){return this._numLightProbes=a},get_usingSpecularMethod:function(){return this._usingSpecularMethod},
get_animatableAttributes:function(){return this._animatableAttributes},get_animationTargetRegisters:function(){return this._animationTargetRegisters},get_usesNormals:function(){return 0<this._dependencyCounter.get_normalDependencies()&&this._methodSetup._normalMethod.get_hasOutput()},usesLights:function(){return 0<this._numLights&&0!=(this._combinedLightSources&d.materials.LightSources.LIGHTS)},compileMethods:function(){var a=this._methodSetup._methods,b=a.length,f,c,d=null;this._preserveAlpha&&(d=
this._registerCache.getFreeFragmentSingleTemp(),this._registerCache.addFragmentTempUsages(d,1),this._fragmentCode+="mov "+k.string(d)+", "+k.string(this._sharedRegisters.shadedTarget)+".w\n");for(var e=0;e<b;)f=a[e].method,c=a[e].data,this._vertexCode+=f.getVertexCode(c,this._registerCache),(c.needsGlobalVertexPos||c.needsGlobalFragmentPos)&&this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex),this._fragmentCode+=f.getFragmentCode(c,this._registerCache,this._sharedRegisters.shadedTarget),
c.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment),c.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment),++e;this._preserveAlpha&&(this._fragmentCode+="mov "+k.string(this._sharedRegisters.shadedTarget)+".w, "+k.string(d)+"\n",this._registerCache.removeFragmentTempUsage(d));null!=this._methodSetup._colorTransformMethod&&(this._vertexCode+=this._methodSetup._colorTransformMethod.getVertexCode(this._methodSetup._colorTransformMethodVO,
this._registerCache),this._fragmentCode+=this._methodSetup._colorTransformMethod.getFragmentCode(this._methodSetup._colorTransformMethodVO,this._registerCache,this._sharedRegisters.shadedTarget))},get_lightProbeDiffuseIndices:function(){return this._lightProbeDiffuseIndices},get_lightProbeSpecularIndices:function(){return this._lightProbeSpecularIndices},__class__:d.materials.compilation.ShaderCompiler,__properties__:{get_lightProbeSpecularIndices:"get_lightProbeSpecularIndices",get_lightProbeDiffuseIndices:"get_lightProbeDiffuseIndices",
get_usesNormals:"get_usesNormals",get_animationTargetRegisters:"get_animationTargetRegisters",get_animatableAttributes:"get_animatableAttributes",get_usingSpecularMethod:"get_usingSpecularMethod",set_numLightProbes:"set_numLightProbes",get_numLightProbes:"get_numLightProbes",set_numDirectionalLights:"set_numDirectionalLights",get_numDirectionalLights:"get_numDirectionalLights",set_numPointLights:"set_numPointLights",get_numPointLights:"get_numPointLights",get_shadedTarget:"get_shadedTarget",get_fragmentPostLightCode:"get_fragmentPostLightCode",
get_fragmentLightCode:"get_fragmentLightCode",get_fragmentCode:"get_fragmentCode",get_vertexCode:"get_vertexCode",get_probeWeightsIndex:"get_probeWeightsIndex",get_sceneNormalMatrixIndex:"get_sceneNormalMatrixIndex",get_sceneMatrixIndex:"get_sceneMatrixIndex",get_cameraPositionIndex:"get_cameraPositionIndex",get_lightFragmentConstantIndex:"get_lightFragmentConstantIndex",get_tangentBufferIndex:"get_tangentBufferIndex",get_normalBufferIndex:"get_normalBufferIndex",get_secondaryUVBufferIndex:"get_secondaryUVBufferIndex",
get_uvTransformIndex:"get_uvTransformIndex",get_uvBufferIndex:"get_uvBufferIndex",set_diffuseLightSources:"set_diffuseLightSources",get_diffuseLightSources:"get_diffuseLightSources",set_specularLightSources:"set_specularLightSources",get_specularLightSources:"get_specularLightSources",get_numUsedVaryings:"get_numUsedVaryings",get_numUsedTextures:"get_numUsedTextures",get_numUsedStreams:"get_numUsedStreams",get_numUsedFragmentConstants:"get_numUsedFragmentConstants",get_numUsedVertexConstants:"get_numUsedVertexConstants",
get_commonsDataIndex:"get_commonsDataIndex",set_methodSetup:"set_methodSetup",get_methodSetup:"get_methodSetup",set_preserveAlpha:"set_preserveAlpha",get_preserveAlpha:"get_preserveAlpha",set_alphaPremultiplied:"set_alphaPremultiplied",get_alphaPremultiplied:"get_alphaPremultiplied",set_animateUVs:"set_animateUVs",get_animateUVs:"get_animateUVs",set_forceSeperateMVP:"set_forceSeperateMVP",get_forceSeperateMVP:"get_forceSeperateMVP",get_UVSource:"get_UVSource",get_UVTarget:"get_UVTarget",get_needUVAnimation:"get_needUVAnimation",
set_enableLightFallOff:"set_enableLightFallOff",get_enableLightFallOff:"get_enableLightFallOff"}};d.materials.compilation.ShaderRegisterData=function(){};h["away3d.materials.compilation.ShaderRegisterData"]=d.materials.compilation.ShaderRegisterData;d.materials.compilation.ShaderRegisterData.__name__=["away3d","materials","compilation","ShaderRegisterData"];d.materials.compilation.ShaderRegisterData.prototype={__class__:d.materials.compilation.ShaderRegisterData};d.materials.compilation.ShaderRegisterElement=
function(a,b,f){null==f&&(f=-1);this._component=f;this._regName=a;this._index=b;this._toStr=this._regName;0<=this._index&&(this._toStr+=this._index);-1<f&&(this._toStr+="."+d.materials.compilation.ShaderRegisterElement.COMPONENTS[f])};h["away3d.materials.compilation.ShaderRegisterElement"]=d.materials.compilation.ShaderRegisterElement;d.materials.compilation.ShaderRegisterElement.__name__=["away3d","materials","compilation","ShaderRegisterElement"];d.materials.compilation.ShaderRegisterElement.prototype=
{toString:function(){return this._toStr},get_regName:function(){return this._regName},get_index:function(){return this._index},__class__:d.materials.compilation.ShaderRegisterElement,__properties__:{get_index:"get_index",get_regName:"get_regName"}};d.materials.compilation.SuperShaderCompiler=function(a){d.materials.compilation.ShaderCompiler.call(this,a)};h["away3d.materials.compilation.SuperShaderCompiler"]=d.materials.compilation.SuperShaderCompiler;d.materials.compilation.SuperShaderCompiler.__name__=
["away3d","materials","compilation","SuperShaderCompiler"];d.materials.compilation.SuperShaderCompiler.__super__=d.materials.compilation.ShaderCompiler;d.materials.compilation.SuperShaderCompiler.prototype=q(d.materials.compilation.ShaderCompiler.prototype,{initLightData:function(){d.materials.compilation.ShaderCompiler.prototype.initLightData.call(this);this._pointLightRegisters=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),3*this._numPointLights);this._dirLightRegisters=
d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),3*this._numDirectionalLights)},calculateDependencies:function(){d.materials.compilation.ShaderCompiler.prototype.calculateDependencies.call(this);this._dependencyCounter.addWorldSpaceDependencies(!0)},compileNormalCode:function(){var a=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),3);this._sharedRegisters.normalFragment=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(this._sharedRegisters.normalFragment,
this._dependencyCounter.get_normalDependencies());this._methodSetup._normalMethod.get_hasOutput()&&!this._methodSetup._normalMethod.get_tangentSpace()?(this._vertexCode+=this._methodSetup._normalMethod.getVertexCode(this._methodSetup._normalMethodVO,this._registerCache),this._fragmentCode+=this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO,this._registerCache,this._sharedRegisters.normalFragment)):(this._sharedRegisters.normalVarying=this._registerCache.getFreeVarying(),
a[0]=this._registerCache.getFreeVertexConstant(),a[1]=this._registerCache.getFreeVertexConstant(),a[2]=this._registerCache.getFreeVertexConstant(),this._registerCache.getFreeVertexConstant(),this._sceneNormalMatrixIndex=4*a[0].get_index(),this._methodSetup._normalMethod.get_hasOutput()?(this.compileTangentVertexCode(a),this.compileTangentNormalMapFragmentCode()):(this._vertexCode+="m33 "+k.string(this._sharedRegisters.normalVarying)+".xyz, "+k.string(this._sharedRegisters.animatedNormal)+", "+k.string(a[0])+
"\nmov "+k.string(this._sharedRegisters.normalVarying)+".w, "+k.string(this._sharedRegisters.animatedNormal)+".w\t\n",this._fragmentCode+="nrm "+k.string(this._sharedRegisters.normalFragment)+".xyz, "+k.string(this._sharedRegisters.normalVarying)+"\nmov "+k.string(this._sharedRegisters.normalFragment)+".w, "+k.string(this._sharedRegisters.normalVarying)+".w\t\t\n",0<this._dependencyCounter.get_tangentDependencies()&&(this._sharedRegisters.tangentInput=this._registerCache.getFreeVertexAttribute(),
this._tangentBufferIndex=this._sharedRegisters.tangentInput.get_index(),this._sharedRegisters.tangentVarying=this._registerCache.getFreeVarying(),this._vertexCode+="mov "+k.string(this._sharedRegisters.tangentVarying)+", "+k.string(this._sharedRegisters.tangentInput)+"\n")),this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedNormal))},createNormalRegisters:function(){0<this._dependencyCounter.get_normalDependencies()&&(this._sharedRegisters.normalInput=this._registerCache.getFreeVertexAttribute(),
this._normalBufferIndex=this._sharedRegisters.normalInput.get_index(),this._sharedRegisters.animatedNormal=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedNormal,1),this._animatableAttributes.push(this._sharedRegisters.normalInput.toString()),this._animationTargetRegisters.push(this._sharedRegisters.animatedNormal.toString()));this._methodSetup._normalMethod.get_hasOutput()&&(this._sharedRegisters.tangentInput=this._registerCache.getFreeVertexAttribute(),
this._tangentBufferIndex=this._sharedRegisters.tangentInput.get_index(),this._sharedRegisters.animatedTangent=this._registerCache.getFreeVertexVectorTemp(),this._registerCache.addVertexTempUsages(this._sharedRegisters.animatedTangent,1),this._animatableAttributes.push(this._sharedRegisters.tangentInput.toString()),this._animationTargetRegisters.push(this._sharedRegisters.animatedTangent.toString()))},compileTangentVertexCode:function(a){this._sharedRegisters.tangentVarying=this._registerCache.getFreeVarying();
this._sharedRegisters.bitangentVarying=this._registerCache.getFreeVarying();this._vertexCode+="m33 "+k.string(this._sharedRegisters.animatedNormal)+".xyz, "+k.string(this._sharedRegisters.animatedNormal)+", "+k.string(a[0])+"\nnrm "+k.string(this._sharedRegisters.animatedNormal)+".xyz, "+k.string(this._sharedRegisters.animatedNormal)+"\n";this._vertexCode+="m33 "+k.string(this._sharedRegisters.animatedTangent)+".xyz, "+k.string(this._sharedRegisters.animatedTangent)+", "+k.string(a[0])+"\nnrm "+k.string(this._sharedRegisters.animatedTangent)+
".xyz, "+k.string(this._sharedRegisters.animatedTangent)+"\n";a=this._registerCache.getFreeVertexVectorTemp();this._vertexCode+="mov "+k.string(this._sharedRegisters.tangentVarying)+".x, "+k.string(this._sharedRegisters.animatedTangent)+".x  \nmov "+k.string(this._sharedRegisters.tangentVarying)+".z, "+k.string(this._sharedRegisters.animatedNormal)+".x  \nmov "+k.string(this._sharedRegisters.tangentVarying)+".w, "+k.string(this._sharedRegisters.normalInput)+".w  \nmov "+k.string(this._sharedRegisters.bitangentVarying)+
".x, "+k.string(this._sharedRegisters.animatedTangent)+".y  \nmov "+k.string(this._sharedRegisters.bitangentVarying)+".z, "+k.string(this._sharedRegisters.animatedNormal)+".y  \nmov "+k.string(this._sharedRegisters.bitangentVarying)+".w, "+k.string(this._sharedRegisters.normalInput)+".w  \nmov "+k.string(this._sharedRegisters.normalVarying)+".x, "+k.string(this._sharedRegisters.animatedTangent)+".z  \nmov "+k.string(this._sharedRegisters.normalVarying)+".z, "+k.string(this._sharedRegisters.animatedNormal)+
".z  \nmov "+k.string(this._sharedRegisters.normalVarying)+".w, "+k.string(this._sharedRegisters.normalInput)+".w  \ncrs "+k.string(a)+".xyz, "+k.string(this._sharedRegisters.animatedNormal)+", "+k.string(this._sharedRegisters.animatedTangent)+"\nmov "+k.string(this._sharedRegisters.tangentVarying)+".y, "+k.string(a)+".x    \nmov "+k.string(this._sharedRegisters.bitangentVarying)+".y, "+k.string(a)+".y  \nmov "+k.string(this._sharedRegisters.normalVarying)+".y, "+k.string(a)+".z    \n";this._registerCache.removeVertexTempUsage(this._sharedRegisters.animatedTangent)},
compileTangentNormalMapFragmentCode:function(){var a,b,f;a=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(a,1);b=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(b,1);f=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(f,1);this._fragmentCode+="nrm "+k.string(a)+".xyz, "+k.string(this._sharedRegisters.tangentVarying)+"\nmov "+k.string(a)+".w, "+k.string(this._sharedRegisters.tangentVarying)+
".w\t\nnrm "+k.string(b)+".xyz, "+k.string(this._sharedRegisters.bitangentVarying)+"\nnrm "+k.string(f)+".xyz, "+k.string(this._sharedRegisters.normalVarying)+"\n";var c=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(c,1);this._fragmentCode+=this._methodSetup._normalMethod.getFragmentCode(this._methodSetup._normalMethodVO,this._registerCache,c)+"m33 "+k.string(this._sharedRegisters.normalFragment)+".xyz, "+k.string(c)+", "+k.string(a)+"\t\nmov "+k.string(this._sharedRegisters.normalFragment)+
".w,   "+k.string(this._sharedRegisters.normalVarying)+".w\t\t\t\n";this._registerCache.removeFragmentTempUsage(c);this._methodSetup._normalMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);(this._methodSetup._normalMethodVO.needsGlobalVertexPos||this._methodSetup._normalMethodVO.needsGlobalFragmentPos)&&this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex);this._registerCache.removeFragmentTempUsage(b);this._registerCache.removeFragmentTempUsage(a);
this._registerCache.removeFragmentTempUsage(f)},compileViewDirCode:function(){var a=this._registerCache.getFreeVertexConstant();this._sharedRegisters.viewDirVarying=this._registerCache.getFreeVarying();this._sharedRegisters.viewDirFragment=this._registerCache.getFreeFragmentVectorTemp();this._registerCache.addFragmentTempUsages(this._sharedRegisters.viewDirFragment,this._dependencyCounter.get_viewDirDependencies());this._cameraPositionIndex=4*a.get_index();this._vertexCode+="sub "+k.string(this._sharedRegisters.viewDirVarying)+
", "+k.string(a)+", "+k.string(this._sharedRegisters.globalPositionVertex)+"\n";this._fragmentCode+="nrm "+k.string(this._sharedRegisters.viewDirFragment)+".xyz, "+k.string(this._sharedRegisters.viewDirVarying)+"\nmov "+k.string(this._sharedRegisters.viewDirFragment)+".w,   "+k.string(this._sharedRegisters.viewDirVarying)+".w \t\t\n";this._registerCache.removeVertexTempUsage(this._sharedRegisters.globalPositionVertex)},compileLightingCode:function(){var a=null;this._sharedRegisters.shadedTarget=this._registerCache.getFreeFragmentVectorTemp();
this._registerCache.addFragmentTempUsages(this._sharedRegisters.shadedTarget,1);this._vertexCode+=this._methodSetup._diffuseMethod.getVertexCode(this._methodSetup._diffuseMethodVO,this._registerCache);this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentPreLightingCode(this._methodSetup._diffuseMethodVO,this._registerCache);this._usingSpecularMethod&&(this._vertexCode+=this._methodSetup._specularMethod.getVertexCode(this._methodSetup._specularMethodVO,this._registerCache),this._fragmentCode+=
this._methodSetup._specularMethod.getFragmentPreLightingCode(this._methodSetup._specularMethodVO,this._registerCache));this.usesLights()&&(this.initLightRegisters(),this.compileDirectionalLightCode(),this.compilePointLightCode());this.usesProbes()&&this.compileLightProbeCode();this._vertexCode+=this._methodSetup._ambientMethod.getVertexCode(this._methodSetup._ambientMethodVO,this._registerCache);this._fragmentCode+=this._methodSetup._ambientMethod.getFragmentCode(this._methodSetup._ambientMethodVO,
this._registerCache,this._sharedRegisters.shadedTarget);this._methodSetup._ambientMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);this._methodSetup._ambientMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);null!=this._methodSetup._shadowMethod&&(this._vertexCode+=this._methodSetup._shadowMethod.getVertexCode(this._methodSetup._shadowMethodVO,this._registerCache),0==this._dependencyCounter.get_normalDependencies()?
(a=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(a,1)):a=this._sharedRegisters.normalFragment,this._methodSetup._diffuseMethod.set_shadowRegister(a),this._fragmentCode+=this._methodSetup._shadowMethod.getFragmentCode(this._methodSetup._shadowMethodVO,this._registerCache,a));this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentPostLightingCode(this._methodSetup._diffuseMethodVO,this._registerCache,this._sharedRegisters.shadedTarget);this._alphaPremultiplied&&
(this._fragmentCode+="add "+k.string(this._sharedRegisters.shadedTarget)+".w, "+k.string(this._sharedRegisters.shadedTarget)+".w, "+k.string(this._sharedRegisters.commons)+".z\ndiv "+k.string(this._sharedRegisters.shadedTarget)+".xyz, "+k.string(this._sharedRegisters.shadedTarget)+", "+k.string(this._sharedRegisters.shadedTarget)+".w\nsub "+k.string(this._sharedRegisters.shadedTarget)+".w, "+k.string(this._sharedRegisters.shadedTarget)+".w, "+k.string(this._sharedRegisters.commons)+".z\nsat "+k.string(this._sharedRegisters.shadedTarget)+
".xyz, "+k.string(this._sharedRegisters.shadedTarget)+"\n");this._methodSetup._diffuseMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment);this._methodSetup._diffuseMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment);this._usingSpecularMethod&&(this._methodSetup._specularMethod.set_shadowRegister(a),this._fragmentCode+=this._methodSetup._specularMethod.getFragmentPostLightingCode(this._methodSetup._specularMethodVO,
this._registerCache,this._sharedRegisters.shadedTarget),this._methodSetup._specularMethodVO.needsNormals&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.normalFragment),this._methodSetup._specularMethodVO.needsView&&this._registerCache.removeFragmentTempUsage(this._sharedRegisters.viewDirFragment))},initLightRegisters:function(){var a=0,b;b=this._dirLightRegisters.length;for(a=0;a<b;)this._dirLightRegisters[a]=this._registerCache.getFreeFragmentConstant(),-1==this._lightFragmentConstantIndex&&
(this._lightFragmentConstantIndex=4*this._dirLightRegisters[a].get_index()),++a;b=this._pointLightRegisters.length;for(a=0;a<b;)this._pointLightRegisters[a]=this._registerCache.getFreeFragmentConstant(),-1==this._lightFragmentConstantIndex&&(this._lightFragmentConstantIndex=4*this._pointLightRegisters[a].get_index()),++a},compileDirectionalLightCode:function(){var a,b,f,c=0,d=this._usingSpecularMethod&&this.usesLightsForSpecular(),e=this.usesLightsForDiffuse();if(d||e)for(var g=0;g<this._numDirectionalLights;)f=
this._dirLightRegisters[c++],a=this._dirLightRegisters[c++],b=this._dirLightRegisters[c++],e&&(this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO,f,a,this._registerCache)),d&&(this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO,f,b,this._registerCache)),++g},compilePointLightCode:function(){var a,b,f,c,d=0,e=this._usingSpecularMethod&&this.usesLightsForSpecular(),g=this.usesLightsForDiffuse();
if(e||g)for(var o=0;o<this._numPointLights;)f=this._pointLightRegisters[d++],a=this._pointLightRegisters[d++],b=this._pointLightRegisters[d++],c=this._registerCache.getFreeFragmentVectorTemp(),this._registerCache.addFragmentTempUsages(c,1),this._fragmentCode+="sub "+k.string(c)+", "+k.string(f)+", "+k.string(this._sharedRegisters.globalPositionVarying)+"\ndp3 "+k.string(c)+".w, "+k.string(c)+", "+k.string(c)+"\nsub "+k.string(c)+".w, "+k.string(c)+".w, "+k.string(a)+".w\nmul "+k.string(c)+".w, "+
k.string(c)+".w, "+k.string(b)+".w\nsat "+k.string(c)+".w, "+k.string(c)+".w\nsub "+k.string(c)+".w, "+k.string(f)+".w, "+k.string(c)+".w\nnrm "+k.string(c)+".xyz, "+k.string(c)+"\n",-1==this._lightFragmentConstantIndex&&(this._lightFragmentConstantIndex=4*f.get_index()),g&&(this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentCodePerLight(this._methodSetup._diffuseMethodVO,c,a,this._registerCache)),e&&(this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerLight(this._methodSetup._specularMethodVO,
c,b,this._registerCache)),this._registerCache.removeFragmentTempUsage(c),++o},compileLightProbeCode:function(){var a,b=[".x",".y",".z",".w"],f=[],c=0,d,e=this._usingSpecularMethod&&this.usesProbesForSpecular(),g=this.usesProbesForDiffuse();if(e||g){g&&(this._lightProbeDiffuseIndices=[]);e&&(this._lightProbeSpecularIndices=[]);for(c=0;c<this._numProbeRegisters;)f[c]=this._registerCache.getFreeFragmentConstant(),0==c&&(this._probeWeightsIndex=4*f[c].get_index()),++c;for(c=0;c<this._numLightProbes;)a=
f[Math.floor(c/4)].toString()+b[c%4],g&&(d=this._registerCache.getFreeTextureReg(),this._lightProbeDiffuseIndices[c]=d.get_index(),this._fragmentCode+=this._methodSetup._diffuseMethod.getFragmentCodePerProbe(this._methodSetup._diffuseMethodVO,d,a,this._registerCache)),e&&(d=this._registerCache.getFreeTextureReg(),this._lightProbeSpecularIndices[c]=d.get_index(),this._fragmentCode+=this._methodSetup._specularMethod.getFragmentCodePerProbe(this._methodSetup._specularMethodVO,d,a,this._registerCache)),
++c}},__class__:d.materials.compilation.SuperShaderCompiler});d.materials.lightpickers={};d.materials.lightpickers.LightPickerBase=function(){d.library.assets.NamedAssetBase.call(this)};h["away3d.materials.lightpickers.LightPickerBase"]=d.materials.lightpickers.LightPickerBase;d.materials.lightpickers.LightPickerBase.__name__=["away3d","materials","lightpickers","LightPickerBase"];d.materials.lightpickers.LightPickerBase.__interfaces__=[d.library.assets.IAsset];d.materials.lightpickers.LightPickerBase.__super__=
d.library.assets.NamedAssetBase;d.materials.lightpickers.LightPickerBase.prototype=q(d.library.assets.NamedAssetBase.prototype,{dispose:function(){},get_assetType:function(){return d.library.assets.Asset3DType.LIGHT_PICKER},get_numDirectionalLights:function(){return this._numDirectionalLights},get_numPointLights:function(){return this._numPointLights},get_numCastingDirectionalLights:function(){return this._numCastingDirectionalLights},get_numCastingPointLights:function(){return this._numCastingPointLights},
get_numLightProbes:function(){return this._numLightProbes},get_pointLights:function(){return this._pointLights},get_directionalLights:function(){return this._directionalLights},get_castingPointLights:function(){return this._castingPointLights},get_castingDirectionalLights:function(){return this._castingDirectionalLights},get_lightProbes:function(){return this._lightProbes},get_lightProbeWeights:function(){return this._lightProbeWeights},get_allPickedLights:function(){return this._allPickedLights},
collectLights:function(a){this.updateProbeWeights(a)},updateProbeWeights:function(a){var b=a.get_sourceEntity().get_scenePosition(),f,a=b.x,c=b.y,b=b.z,d,e,g=0,o;for(o=0;o<this._numLightProbes;)f=this._lightProbes[o].get_scenePosition(),d=a-f.x,e=c-f.y,f=b-f.z,d=d*d+e*e+f*f,d=1E-5<d?1/d:5E7,this._lightProbeWeights[o]=d,g+=d,++o;g=1/g;for(o=0;o<this._numLightProbes;)this._lightProbeWeights[o]*=g,++o},__class__:d.materials.lightpickers.LightPickerBase,__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,
{get_allPickedLights:"get_allPickedLights",get_lightProbeWeights:"get_lightProbeWeights",get_lightProbes:"get_lightProbes",get_castingDirectionalLights:"get_castingDirectionalLights",get_castingPointLights:"get_castingPointLights",get_directionalLights:"get_directionalLights",get_pointLights:"get_pointLights",get_numLightProbes:"get_numLightProbes",get_numCastingPointLights:"get_numCastingPointLights",get_numCastingDirectionalLights:"get_numCastingDirectionalLights",get_numPointLights:"get_numPointLights",
get_numDirectionalLights:"get_numDirectionalLights",get_assetType:"get_assetType"})});d.materials.methods={};d.materials.methods.ShadingMethodBase=function(){d.library.assets.NamedAssetBase.call(this)};h["away3d.materials.methods.ShadingMethodBase"]=d.materials.methods.ShadingMethodBase;d.materials.methods.ShadingMethodBase.__name__=["away3d","materials","methods","ShadingMethodBase"];d.materials.methods.ShadingMethodBase.__super__=d.library.assets.NamedAssetBase;d.materials.methods.ShadingMethodBase.prototype=
q(d.library.assets.NamedAssetBase.prototype,{initVO:function(){},initConstants:function(){},get_sharedRegisters:function(){return this._sharedRegisters},set_sharedRegisters:function(a){return this._sharedRegisters=a},get_passes:function(){return this._passes},dispose:function(){},createMethodVO:function(){return new d.materials.methods.MethodVO},reset:function(){this.cleanCompilationData()},cleanCompilationData:function(){},getVertexCode:function(){return""},activate:function(){},setRenderState:function(){},
deactivate:function(){},getTex2DSampleCode:function(a,b,f,c,d,e){var g;g=a.repeatTextures?"wrap":"clamp";null!=e&&(g=e);e=this.getFormatStringForTexture(c);c=a.useMipmapping&&c.get_hasMipMaps();a=a.useSmoothTextures?c?"linear,miplinear":"linear":c?"nearest,mipnearest":"nearest";null==d&&(d=this._sharedRegisters.uvVarying);return"tex "+k.string(b)+", "+k.string(d)+", "+k.string(f)+" <2d,"+a+","+e+g+">\n"},getTexCubeSampleCode:function(a,b,f,c,d){var e=this.getFormatStringForTexture(c),c=a.useMipmapping&&
c.get_hasMipMaps(),a=a.useSmoothTextures?c?"linear,miplinear":"linear":c?"nearest,mipnearest":"nearest";return"tex "+k.string(b)+", "+k.string(d)+", "+k.string(f)+" <cube,"+e+a+">\n"},getFormatStringForTexture:function(a){switch(a.get_format()[1]){case 1:return"dxt1,";case 2:return"dxt5,";default:return""}},invalidateShaderProgram:function(){this.dispatchEvent(new d.events.ShadingMethodEvent(d.events.ShadingMethodEvent.SHADER_INVALIDATED))},copyFrom:function(){},__class__:d.materials.methods.ShadingMethodBase,
__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,{get_passes:"get_passes",set_sharedRegisters:"set_sharedRegisters",get_sharedRegisters:"get_sharedRegisters"})});d.materials.methods.BasicAmbientMethod=function(){this._ambientColor=16777215;this._ambientB=this._ambientG=this._ambientR=0;this._ambient=1;this._lightAmbientB=this._lightAmbientG=this._lightAmbientR=0;d.materials.methods.ShadingMethodBase.call(this)};h["away3d.materials.methods.BasicAmbientMethod"]=d.materials.methods.BasicAmbientMethod;
d.materials.methods.BasicAmbientMethod.__name__=["away3d","materials","methods","BasicAmbientMethod"];d.materials.methods.BasicAmbientMethod.__super__=d.materials.methods.ShadingMethodBase;d.materials.methods.BasicAmbientMethod.prototype=q(d.materials.methods.ShadingMethodBase.prototype,{initVO:function(a){a.needsUV=this._useTexture},initConstants:function(a){var b=a.fragmentData,a=a.fragmentConstantsIndex+3;a>=b.length&&!b.fixed&&(b.length=a+1);b.data[a]=1},get_ambient:function(){return this._ambient},
set_ambient:function(a){return this._ambient=a},get_ambientColor:function(){return this._ambientColor},set_ambientColor:function(a){return this._ambientColor=a},get_texture:function(){return this._texture},set_texture:function(a){(s.Boot.__cast(null!=a,K)!=this._useTexture||null!=a&&null!=this._texture&&(a.get_hasMipMaps()!=this._texture.get_hasMipMaps()||a.get_format()!=this._texture.get_format()))&&this.invalidateShaderProgram();this._useTexture=s.Boot.__cast(a,K);return this._texture=a},copyFrom:function(a){a=
s.Boot.__cast(a,d.materials.methods.BasicAmbientMethod);this.set_ambient(a.get_ambient());this.set_ambientColor(a.get_ambientColor())},cleanCompilationData:function(){d.materials.methods.ShadingMethodBase.prototype.cleanCompilationData.call(this);this._ambientInputRegister=null},getFragmentCode:function(a,b,f){var c="";this._useTexture?(this._ambientInputRegister=b.getFreeTextureReg(),a.texturesIndex=this._ambientInputRegister.get_index(),c+=this.getTex2DSampleCode(a,f,this._ambientInputRegister,
this._texture)+"div "+k.string(f)+".xyz, "+k.string(f)+".xyz, "+k.string(f)+".w\n"):(this._ambientInputRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._ambientInputRegister.get_index(),c+="mov "+k.string(f)+", "+k.string(this._ambientInputRegister)+"\n");return c},activate:function(a,b){this._useTexture&&(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?c.display3D.Context3DWrapMode.REPEAT:c.display3D.Context3DWrapMode.CLAMP,a.useSmoothTextures?c.display3D.Context3DTextureFilter.LINEAR:
c.display3D.Context3DTextureFilter.NEAREST,a.useMipmapping?c.display3D.Context3DMipFilter.MIPLINEAR:c.display3D.Context3DMipFilter.MIPNONE),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)))},updateAmbient:function(){this._ambientR=(this._ambientColor>>16&255)/255*this._ambient*this._lightAmbientR;this._ambientG=(this._ambientColor>>8&255)/255*this._ambient*this._lightAmbientG;this._ambientB=(this._ambientColor&255)/255*this._ambient*this._lightAmbientB},setRenderState:function(a){this.updateAmbient();
if(!this._useTexture){var b=a.fragmentConstantsIndex,a=a.fragmentData;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=this._ambientR;var f=b+1;f>=a.length&&!a.fixed&&(a.length=f+1);a.data[f]=this._ambientG;b+=2;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=this._ambientB}},__class__:d.materials.methods.BasicAmbientMethod,__properties__:q(d.materials.methods.ShadingMethodBase.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture",set_ambientColor:"set_ambientColor",get_ambientColor:"get_ambientColor",
set_ambient:"set_ambient",get_ambient:"get_ambient"})});d.materials.methods.LightingMethodBase=function(){d.materials.methods.ShadingMethodBase.call(this)};h["away3d.materials.methods.LightingMethodBase"]=d.materials.methods.LightingMethodBase;d.materials.methods.LightingMethodBase.__name__=["away3d","materials","methods","LightingMethodBase"];d.materials.methods.LightingMethodBase.__super__=d.materials.methods.ShadingMethodBase;d.materials.methods.LightingMethodBase.prototype=q(d.materials.methods.ShadingMethodBase.prototype,
{getFragmentPreLightingCode:function(){return""},getFragmentCodePerLight:function(){return""},getFragmentCodePerProbe:function(){return""},getFragmentPostLightingCode:function(){return""},__class__:d.materials.methods.LightingMethodBase});d.materials.methods.BasicDiffuseMethod=function(){this._diffuseColor=16777215;this._diffuseA=this._diffuseB=this._diffuseG=this._diffuseR=1;this._alphaThreshold=0;d.materials.methods.LightingMethodBase.call(this)};h["away3d.materials.methods.BasicDiffuseMethod"]=
d.materials.methods.BasicDiffuseMethod;d.materials.methods.BasicDiffuseMethod.__name__=["away3d","materials","methods","BasicDiffuseMethod"];d.materials.methods.BasicDiffuseMethod.__super__=d.materials.methods.LightingMethodBase;d.materials.methods.BasicDiffuseMethod.prototype=q(d.materials.methods.LightingMethodBase.prototype,{get_useAmbientTexture:function(){return this._useAmbientTexture},set_useAmbientTexture:function(a){if(this._useAmbientTexture==a)return a;this._useAmbientTexture=a;this.invalidateShaderProgram();
return a},initVO:function(a){a.needsUV=this._useTexture;a.needsNormals=0<a.numLights},generateMip:function(a){this._useTexture&&this._texture.getTextureForStage3D(a)},get_diffuseAlpha:function(){return this._diffuseA},set_diffuseAlpha:function(a){return this._diffuseA=a},get_diffuseColor:function(){return this._diffuseColor},set_diffuseColor:function(a){this._diffuseColor=a;this.updateDiffuse();return a},get_texture:function(){return this._texture},set_texture:function(a){(s.Boot.__cast(null!=a,K)!=
this._useTexture||null!=a&&null!=this._texture&&(a.get_hasMipMaps()!=this._texture.get_hasMipMaps()||a.get_format()!=this._texture.get_format()))&&this.invalidateShaderProgram();this._useTexture=s.Boot.__cast(null!=a,K);return this._texture=a},get_alphaThreshold:function(){return this._alphaThreshold},set_alphaThreshold:function(a){0>a?a=0:1<a&&(a=1);if(a==this._alphaThreshold)return a;(0==a||0==this._alphaThreshold)&&this.invalidateShaderProgram();return this._alphaThreshold=a},dispose:function(){this._texture=
null},copyFrom:function(a){a=s.Boot.__cast(a,d.materials.methods.BasicDiffuseMethod);this.set_alphaThreshold(a.get_alphaThreshold());this.set_texture(a.get_texture());this.set_useAmbientTexture(a.get_useAmbientTexture());this.set_diffuseAlpha(a.get_diffuseAlpha());this.set_diffuseColor(a.get_diffuseColor())},cleanCompilationData:function(){d.materials.methods.LightingMethodBase.prototype.cleanCompilationData.call(this);this._diffuseInputRegister=this._totalLightColorReg=this._shadowRegister=null},
getFragmentPreLightingCode:function(a,b){this._isFirstLight=!0;0<a.numLights&&(this._totalLightColorReg=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._totalLightColorReg,1));return""},getFragmentCodePerLight:function(a,b,f,c){var d="",e;this._isFirstLight?e=this._totalLightColorReg:(e=c.getFreeFragmentVectorTemp(),c.addFragmentTempUsages(e,1));d+="dp3 "+k.string(e)+".x, "+k.string(b)+", "+k.string(this._sharedRegisters.normalFragment)+"\nmax "+k.string(e)+".w, "+k.string(e)+".x, "+k.string(this._sharedRegisters.commons)+
".y\n";a.useLightFallOff&&(d+="mul "+k.string(e)+".w, "+k.string(e)+".w, "+k.string(b)+".w\n");null!=this._modulateMethod&&(d+=k.string(this._modulateMethod(a,e,c,this._sharedRegisters)));d+="mul "+k.string(e)+", "+k.string(e)+".w, "+k.string(f)+"\n";this._isFirstLight||(d+="add "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(e)+"\n",c.removeFragmentTempUsage(e));this._isFirstLight=!1;return d},getFragmentCodePerProbe:function(a,b,c,d){var e="",j;this._isFirstLight?
j=this._totalLightColorReg:(j=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(j,1));e+="tex "+k.string(j)+", "+k.string(this._sharedRegisters.normalFragment)+", "+k.string(b)+" <cube,linear,miplinear>\nmul "+k.string(j)+".xyz, "+k.string(j)+".xyz, "+c+"\n";null!=this._modulateMethod&&(e+=k.string(this._modulateMethod(a,j,d,this._sharedRegisters)));this._isFirstLight||(e+="add "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(j)+"\n",d.removeFragmentTempUsage(j));
this._isFirstLight=!1;return e},getFragmentPostLightingCode:function(a,b,c){var d="",e,j;0<a.numLights?(null!=this._shadowRegister&&(d+=this.applyShadow(a,b)),e=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(e,1)):e=c;this._useTexture?(this._diffuseInputRegister=b.getFreeTextureReg(),a.texturesIndex=this._diffuseInputRegister.get_index(),d+=this.getTex2DSampleCode(a,e,this._diffuseInputRegister,this._texture),0<this._alphaThreshold&&(j=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*
j.get_index(),d+="sub "+k.string(e)+".w, "+k.string(e)+".w, "+k.string(j)+".x\nkil "+k.string(e)+".w\nadd "+k.string(e)+".w, "+k.string(e)+".w, "+k.string(j)+".x\n")):(this._diffuseInputRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._diffuseInputRegister.get_index(),d+="mov "+k.string(e)+", "+k.string(this._diffuseInputRegister)+"\n");if(0==a.numLights)return d;d+="sat "+k.string(this._totalLightColorReg)+", "+k.string(this._totalLightColorReg)+"\n";this._useAmbientTexture?d+=
"mul "+k.string(e)+".xyz, "+k.string(e)+", "+k.string(this._totalLightColorReg)+"\nmul "+k.string(this._totalLightColorReg)+".xyz, "+k.string(c)+", "+k.string(this._totalLightColorReg)+"\nsub "+k.string(c)+".xyz, "+k.string(c)+", "+k.string(this._totalLightColorReg)+"\nadd "+k.string(c)+".xyz, "+k.string(e)+", "+k.string(c)+"\n":(d+="add "+k.string(c)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(c)+"\n",d=this._useTexture?d+("mul "+k.string(c)+".xyz, "+k.string(e)+", "+k.string(c)+"\nmov "+
k.string(c)+".w, "+k.string(e)+".w\n"):d+("mul "+k.string(c)+".xyz, "+k.string(this._diffuseInputRegister)+", "+k.string(c)+"\nmov "+k.string(c)+".w, "+k.string(this._diffuseInputRegister)+".w\n"));b.removeFragmentTempUsage(this._totalLightColorReg);b.removeFragmentTempUsage(e);return d},applyShadow:function(){return"mul "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(this._shadowRegister)+".w\n"},activate:function(a,b){if(this._useTexture){if(b._context3D.setTextureAt(a.texturesIndex,
this._texture.getTextureForStage3D(b)),0<this._alphaThreshold){var c=a.fragmentData,d=a.fragmentConstantsIndex;d>=c.length&&!c.fixed&&(c.length=d+1);c.data[d]=this._alphaThreshold}}else{d=a.fragmentConstantsIndex;c=a.fragmentData;d>=c.length&&!c.fixed&&(c.length=d+1);c.data[d]=this._diffuseR;var e=d+1;e>=c.length&&!c.fixed&&(c.length=e+1);c.data[e]=this._diffuseG;e=d+2;e>=c.length&&!c.fixed&&(c.length=e+1);c.data[e]=this._diffuseB;d+=3;d>=c.length&&!c.fixed&&(c.length=d+1);c.data[d]=this._diffuseA}},
updateDiffuse:function(){this._diffuseR=(this._diffuseColor>>16&255)/255;this._diffuseG=(this._diffuseColor>>8&255)/255;this._diffuseB=(this._diffuseColor&255)/255},set_shadowRegister:function(a){return this._shadowRegister=a},__class__:d.materials.methods.BasicDiffuseMethod,__properties__:q(d.materials.methods.LightingMethodBase.prototype.__properties__,{set_shadowRegister:"set_shadowRegister",set_alphaThreshold:"set_alphaThreshold",get_alphaThreshold:"get_alphaThreshold",set_texture:"set_texture",
get_texture:"get_texture",set_diffuseColor:"set_diffuseColor",get_diffuseColor:"get_diffuseColor",set_diffuseAlpha:"set_diffuseAlpha",get_diffuseAlpha:"get_diffuseAlpha",set_useAmbientTexture:"set_useAmbientTexture",get_useAmbientTexture:"get_useAmbientTexture"})});d.materials.methods.BasicNormalMethod=function(){d.materials.methods.ShadingMethodBase.call(this)};h["away3d.materials.methods.BasicNormalMethod"]=d.materials.methods.BasicNormalMethod;d.materials.methods.BasicNormalMethod.__name__=["away3d",
"materials","methods","BasicNormalMethod"];d.materials.methods.BasicNormalMethod.__super__=d.materials.methods.ShadingMethodBase;d.materials.methods.BasicNormalMethod.prototype=q(d.materials.methods.ShadingMethodBase.prototype,{initVO:function(a){a.needsUV=s.Boot.__cast(null!=this._texture,K)},get_tangentSpace:function(){return!0},get_hasOutput:function(){return this._useTexture},copyFrom:function(a){this.set_normalMap(s.Boot.__cast(a,d.materials.methods.BasicNormalMethod).get_normalMap())},get_normalMap:function(){return this._texture},
set_normalMap:function(a){(s.Boot.__cast(null!=a,K)!=this._useTexture||null!=a&&null!=this._texture&&(a.get_hasMipMaps()!=this._texture.get_hasMipMaps()||a.get_format()!=this._texture.get_format()))&&this.invalidateShaderProgram();this._useTexture=s.Boot.__cast(null!=a,K);return this._texture=a},cleanCompilationData:function(){d.materials.methods.ShadingMethodBase.prototype.cleanCompilationData.call(this);this._normalTextureRegister=null},dispose:function(){null!=this._texture&&(this._texture=null)},
activate:function(a,b){0<=a.texturesIndex&&(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?c.display3D.Context3DWrapMode.REPEAT:c.display3D.Context3DWrapMode.CLAMP,a.useSmoothTextures?c.display3D.Context3DTextureFilter.LINEAR:c.display3D.Context3DTextureFilter.NEAREST,a.useMipmapping?c.display3D.Context3DMipFilter.MIPLINEAR:c.display3D.Context3DMipFilter.MIPNONE),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)))},getFragmentCode:function(a,b,c){this._normalTextureRegister=
b.getFreeTextureReg();a.texturesIndex=this._normalTextureRegister.get_index();return this.getTex2DSampleCode(a,c,this._normalTextureRegister,this._texture)+"sub "+k.string(c)+".xyz, "+k.string(c)+".xyz, "+k.string(this._sharedRegisters.commons)+".xxx\t\nnrm "+k.string(c)+".xyz, "+k.string(c)+".xyz\t\t\t\t\t\t\t\n"},__class__:d.materials.methods.BasicNormalMethod,__properties__:q(d.materials.methods.ShadingMethodBase.prototype.__properties__,{set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",
get_hasOutput:"get_hasOutput",get_tangentSpace:"get_tangentSpace"})});d.materials.methods.BasicSpecularMethod=function(){this._gloss=50;this._specular=1;this._specularColor=16777215;this._specularB=this._specularG=this._specularR=1;d.materials.methods.LightingMethodBase.call(this)};h["away3d.materials.methods.BasicSpecularMethod"]=d.materials.methods.BasicSpecularMethod;d.materials.methods.BasicSpecularMethod.__name__=["away3d","materials","methods","BasicSpecularMethod"];d.materials.methods.BasicSpecularMethod.__super__=
d.materials.methods.LightingMethodBase;d.materials.methods.BasicSpecularMethod.prototype=q(d.materials.methods.LightingMethodBase.prototype,{initVO:function(a){a.needsUV=this._useTexture;a.needsNormals=0<a.numLights;a.needsView=0<a.numLights},get_gloss:function(){return this._gloss},set_gloss:function(a){return this._gloss=a},get_specular:function(){return this._specular},set_specular:function(a){if(a==this._specular)return a;this._specular=a;this.updateSpecular();return a},get_specularColor:function(){return this._specularColor},
set_specularColor:function(a){var b=this._specularColor;if((0>b?4294967296+b:b+0)==(0>a?4294967296+a:a+0))return a;b=this._specularColor;if(!(b=0==(0>b?4294967296+b:b+0)))b=0==(0>a?4294967296+a:a+0);b&&this.invalidateShaderProgram();this._specularColor=a;this.updateSpecular();return a},get_texture:function(){return this._texture},set_texture:function(a){(s.Boot.__cast(null!=a,K)!=this._useTexture||null!=a&&null!=this._texture&&(a.get_hasMipMaps()!=this._texture.get_hasMipMaps()||a.get_format()!=this._texture.get_format()))&&
this.invalidateShaderProgram();this._useTexture=s.Boot.__cast(null!=a,K);return this._texture=a},copyFrom:function(a){a=s.Boot.__cast(a,d.materials.methods.BasicSpecularMethod);this.set_texture(a.get_texture());this.set_specular(a.get_specular());this.set_specularColor(a.get_specularColor());this.set_gloss(a.get_gloss())},cleanCompilationData:function(){d.materials.methods.LightingMethodBase.prototype.cleanCompilationData.call(this);this._specularDataRegister=this._specularTexData=this._specularTextureRegister=
this._totalLightColorReg=this._shadowRegister=null},getFragmentPreLightingCode:function(a,b){var c="";this._isFirstLight=!0;0<a.numLights&&(this._specularDataRegister=b.getFreeFragmentConstant(),a.fragmentConstantsIndex=4*this._specularDataRegister.get_index(),this._useTexture?(this._specularTexData=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._specularTexData,1),this._specularTextureRegister=b.getFreeTextureReg(),a.texturesIndex=this._specularTextureRegister.get_index(),c=this.getTex2DSampleCode(a,
this._specularTexData,this._specularTextureRegister,this._texture)):this._specularTextureRegister=null,this._totalLightColorReg=b.getFreeFragmentVectorTemp(),b.addFragmentTempUsages(this._totalLightColorReg,1));return c},getFragmentCodePerLight:function(a,b,c,d){var e="",j;this._isFirstLight?j=this._totalLightColorReg:(j=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(j,1));var g=this._sharedRegisters.viewDirFragment,o=this._sharedRegisters.normalFragment,e=e+("add "+k.string(j)+", "+k.string(b)+
", "+k.string(g)+"\nnrm "+k.string(j)+".xyz, "+k.string(j)+"\ndp3 "+k.string(j)+".w, "+k.string(o)+", "+k.string(j)+"\nsat "+k.string(j)+".w, "+k.string(j)+".w\n"),e=this._useTexture?e+("mul "+k.string(this._specularTexData)+".w, "+k.string(this._specularTexData)+".y, "+k.string(this._specularDataRegister)+".w\npow "+k.string(j)+".w, "+k.string(j)+".w, "+k.string(this._specularTexData)+".w\n"):e+("pow "+k.string(j)+".w, "+k.string(j)+".w, "+k.string(this._specularDataRegister)+".w\n");a.useLightFallOff&&
(e+="mul "+k.string(j)+".w, "+k.string(j)+".w, "+k.string(b)+".w\n");null!=this._modulateMethod&&(e+=k.string(this._modulateMethod(a,j,d,this._sharedRegisters)));e+="mul "+k.string(j)+".xyz, "+k.string(c)+", "+k.string(j)+".w\n";this._isFirstLight||(e+="add "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(j)+"\n",d.removeFragmentTempUsage(j));this._isFirstLight=!1;return e},getFragmentCodePerProbe:function(a,b,c,d){var e="",j;this._isFirstLight?j=this._totalLightColorReg:
(j=d.getFreeFragmentVectorTemp(),d.addFragmentTempUsages(j,1));var g=this._sharedRegisters.normalFragment,o=this._sharedRegisters.viewDirFragment,e=e+("dp3 "+k.string(j)+".w, "+k.string(g)+", "+k.string(o)+"\nadd "+k.string(j)+".w, "+k.string(j)+".w, "+k.string(j)+".w\nmul "+k.string(j)+", "+k.string(j)+".w, "+k.string(g)+"\nsub "+k.string(j)+", "+k.string(j)+", "+k.string(o)+"\ntex "+k.string(j)+", "+k.string(j)+", "+k.string(b)+" <cube,"+(a.useSmoothTextures?"linear":"nearest")+",miplinear>\nmul "+
k.string(j)+".xyz, "+k.string(j)+", "+c+"\n");null!=this._modulateMethod&&(e+=k.string(this._modulateMethod(a,j,d,this._sharedRegisters)));this._isFirstLight||(e+="add "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(j)+"\n",d.removeFragmentTempUsage(j));this._isFirstLight=!1;return e},getFragmentPostLightingCode:function(a,b,c){var d="";if(0==a.numLights)return d;null!=this._shadowRegister&&(d+="mul "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+
", "+k.string(this._shadowRegister)+".w\n");this._useTexture&&(d+="mul "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(this._specularTexData)+".x\n",b.removeFragmentTempUsage(this._specularTexData));d+="mul "+k.string(this._totalLightColorReg)+".xyz, "+k.string(this._totalLightColorReg)+", "+k.string(this._specularDataRegister)+"\nadd "+k.string(c)+".xyz, "+k.string(c)+", "+k.string(this._totalLightColorReg)+"\n";b.removeFragmentTempUsage(this._totalLightColorReg);
return d},activate:function(a,b){if(0!=a.numLights){this._useTexture&&(b._context3D.setSamplerStateAt(a.texturesIndex,a.repeatTextures?c.display3D.Context3DWrapMode.REPEAT:c.display3D.Context3DWrapMode.CLAMP,a.useSmoothTextures?c.display3D.Context3DTextureFilter.LINEAR:c.display3D.Context3DTextureFilter.NEAREST,a.useMipmapping?c.display3D.Context3DMipFilter.MIPLINEAR:c.display3D.Context3DMipFilter.MIPNONE),b._context3D.setTextureAt(a.texturesIndex,this._texture.getTextureForStage3D(b)));var f=a.fragmentConstantsIndex,
d=a.fragmentData;f>=d.length&&!d.fixed&&(d.length=f+1);d.data[f]=this._specularR;var e=f+1;e>=d.length&&!d.fixed&&(d.length=e+1);d.data[e]=this._specularG;e=f+2;e>=d.length&&!d.fixed&&(d.length=e+1);d.data[e]=this._specularB;f+=3;f>=d.length&&!d.fixed&&(d.length=f+1);d.data[f]=this._gloss}},updateSpecular:function(){var a=this._specularColor>>16&255;this._specularR=(0>a?4294967296+a:a+0)/255*this._specular;a=this._specularColor>>8&255;this._specularG=(0>a?4294967296+a:a+0)/255*this._specular;a=this._specularColor&
255;this._specularB=(0>a?4294967296+a:a+0)/255*this._specular},set_shadowRegister:function(a){return this._shadowRegister=a},__class__:d.materials.methods.BasicSpecularMethod,__properties__:q(d.materials.methods.LightingMethodBase.prototype.__properties__,{set_shadowRegister:"set_shadowRegister",set_texture:"set_texture",get_texture:"get_texture",set_specularColor:"set_specularColor",get_specularColor:"get_specularColor",set_specular:"set_specular",get_specular:"get_specular",set_gloss:"set_gloss",
get_gloss:"get_gloss"})});d.materials.methods.EffectMethodBase=function(){d.materials.methods.ShadingMethodBase.call(this)};h["away3d.materials.methods.EffectMethodBase"]=d.materials.methods.EffectMethodBase;d.materials.methods.EffectMethodBase.__name__=["away3d","materials","methods","EffectMethodBase"];d.materials.methods.EffectMethodBase.__interfaces__=[d.library.assets.IAsset];d.materials.methods.EffectMethodBase.__super__=d.materials.methods.ShadingMethodBase;d.materials.methods.EffectMethodBase.prototype=
q(d.materials.methods.ShadingMethodBase.prototype,{get_assetType:function(){return d.library.assets.Asset3DType.EFFECTS_METHOD},getFragmentCode:function(){throw new d.errors.AbstractMethodError;},__class__:d.materials.methods.EffectMethodBase,__properties__:q(d.materials.methods.ShadingMethodBase.prototype.__properties__,{get_assetType:"get_assetType"})});d.materials.methods.ColorTransformMethod=function(){d.materials.methods.EffectMethodBase.call(this)};h["away3d.materials.methods.ColorTransformMethod"]=
d.materials.methods.ColorTransformMethod;d.materials.methods.ColorTransformMethod.__name__=["away3d","materials","methods","ColorTransformMethod"];d.materials.methods.ColorTransformMethod.__super__=d.materials.methods.EffectMethodBase;d.materials.methods.ColorTransformMethod.prototype=q(d.materials.methods.EffectMethodBase.prototype,{get_colorTransform:function(){return this._colorTransform},set_colorTransform:function(a){return this._colorTransform=a},getFragmentCode:function(a,b,c){var d="",e=b.getFreeFragmentConstant(),
b=b.getFreeFragmentConstant();a.fragmentConstantsIndex=4*e.get_index();return d+="mul "+k.string(c)+", "+c.toString()+", "+k.string(e)+"\nadd "+k.string(c)+", "+c.toString()+", "+k.string(b)+"\n"},activate:function(a){var b=a.fragmentConstantsIndex,a=a.fragmentData;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=this._colorTransform.redMultiplier;var c=b+1;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=this._colorTransform.greenMultiplier;c=b+2;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=this._colorTransform.blueMultiplier;
c=b+3;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=this._colorTransform.alphaMultiplier;c=b+4;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=0.00392156862745098*this._colorTransform.redOffset;c=b+5;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=0.00392156862745098*this._colorTransform.greenOffset;c=b+6;c>=a.length&&!a.fixed&&(a.length=c+1);a.data[c]=0.00392156862745098*this._colorTransform.blueOffset;b+=7;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0.00392156862745098*this._colorTransform.alphaOffset},
__class__:d.materials.methods.ColorTransformMethod,__properties__:q(d.materials.methods.EffectMethodBase.prototype.__properties__,{set_colorTransform:"set_colorTransform",get_colorTransform:"get_colorTransform"})});d.materials.methods.MethodVO=function(){this.useLightFallOff=!0};h["away3d.materials.methods.MethodVO"]=d.materials.methods.MethodVO;d.materials.methods.MethodVO.__name__=["away3d","materials","methods","MethodVO"];d.materials.methods.MethodVO.prototype={reset:function(){this.fragmentConstantsIndex=
this.vertexConstantsIndex=this.texturesIndex=-1;this.useSmoothTextures=this.useMipmapping=!0;this.needsGlobalFragmentPos=this.needsGlobalVertexPos=this.needsSecondaryUV=this.needsUV=this.needsTangents=this.needsNormals=this.needsView=this.needsProjection=this.repeatTextures=!1;this.numLights=0;this.useLightFallOff=!0},__class__:d.materials.methods.MethodVO};d.materials.methods.MethodVOSet=function(a){this.method=a;this.data=a.createMethodVO()};h["away3d.materials.methods.MethodVOSet"]=d.materials.methods.MethodVOSet;
d.materials.methods.MethodVOSet.__name__=["away3d","materials","methods","MethodVOSet"];d.materials.methods.MethodVOSet.prototype={__class__:d.materials.methods.MethodVOSet};d.materials.methods.ShaderMethodSetup=function(){this._methods=[];this._normalMethod=new d.materials.methods.BasicNormalMethod;this._ambientMethod=new d.materials.methods.BasicAmbientMethod;this._diffuseMethod=new d.materials.methods.BasicDiffuseMethod;this._specularMethod=new d.materials.methods.BasicSpecularMethod;this._normalMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,
r(this,this.onShaderInvalidated));this._diffuseMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this._specularMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this._ambientMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this._normalMethodVO=this._normalMethod.createMethodVO();this._ambientMethodVO=this._ambientMethod.createMethodVO();
this._diffuseMethodVO=this._diffuseMethod.createMethodVO();this._specularMethodVO=this._specularMethod.createMethodVO();c.events.EventDispatcher.call(this)};h["away3d.materials.methods.ShaderMethodSetup"]=d.materials.methods.ShaderMethodSetup;d.materials.methods.ShaderMethodSetup.__name__=["away3d","materials","methods","ShaderMethodSetup"];d.materials.methods.ShaderMethodSetup.__super__=c.events.EventDispatcher;d.materials.methods.ShaderMethodSetup.prototype=q(c.events.EventDispatcher.prototype,
{onShaderInvalidated:function(){this.invalidateShaderProgram()},invalidateShaderProgram:function(){this.dispatchEvent(new d.events.ShadingMethodEvent(d.events.ShadingMethodEvent.SHADER_INVALIDATED))},get_normalMethod:function(){return this._normalMethod},set_normalMethod:function(a){null!=this._normalMethod&&this._normalMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));null!=a&&(null!=this._normalMethod&&a.copyFrom(this._normalMethod),this._normalMethodVO=
a.createMethodVO(),a.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated)));this._normalMethod=a;null!=a&&this.invalidateShaderProgram();return a},get_ambientMethod:function(){return this._ambientMethod},set_ambientMethod:function(a){null!=this._ambientMethod&&this._ambientMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));null!=a&&(null!=this._ambientMethod&&a.copyFrom(this._ambientMethod),a.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,
r(this,this.onShaderInvalidated)),this._ambientMethodVO=a.createMethodVO());this._ambientMethod=a;null!=a&&this.invalidateShaderProgram();return a},get_shadowMethod:function(){return this._shadowMethod},set_shadowMethod:function(a){null!=this._shadowMethod&&this._shadowMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this._shadowMethod=a;null!=this._shadowMethod?(this._shadowMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,
r(this,this.onShaderInvalidated)),this._shadowMethodVO=this._shadowMethod.createMethodVO()):this._shadowMethodVO=null;this.invalidateShaderProgram();return a},get_diffuseMethod:function(){return this._diffuseMethod},set_diffuseMethod:function(a){null!=this._diffuseMethod&&this._diffuseMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));null!=a&&(null!=this._diffuseMethod&&a.copyFrom(this._diffuseMethod),a.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,
r(this,this.onShaderInvalidated)),this._diffuseMethodVO=a.createMethodVO());this._diffuseMethod=a;null!=a&&this.invalidateShaderProgram();return a},get_specularMethod:function(){return this._specularMethod},set_specularMethod:function(a){null!=this._specularMethod&&(this._specularMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated)),null!=a&&a.copyFrom(this._specularMethod));this._specularMethod=a;null!=this._specularMethod?(this._specularMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,
r(this,this.onShaderInvalidated)),this._specularMethodVO=this._specularMethod.createMethodVO()):this._specularMethodVO=null;this.invalidateShaderProgram();return a},get_colorTransformMethod:function(){return this._colorTransformMethod},set_colorTransformMethod:function(a){if(this._colorTransformMethod==a)return a;null!=this._colorTransformMethod&&this._colorTransformMethod.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));(null==this._colorTransformMethod||
null==a)&&this.invalidateShaderProgram();this._colorTransformMethod=a;null!=this._colorTransformMethod?(this._colorTransformMethod.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated)),this._colorTransformMethodVO=this._colorTransformMethod.createMethodVO()):this._colorTransformMethodVO=null;return a},dispose:function(){this.clearListeners(this._normalMethod);this.clearListeners(this._diffuseMethod);this.clearListeners(this._shadowMethod);this.clearListeners(this._ambientMethod);
this.clearListeners(this._specularMethod);for(var a=0;a<this._methods.length;)this.clearListeners(this._methods[a].method),++a;this._methods=null},clearListeners:function(a){null!=a&&a.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated))},addMethod:function(a){this._methods.push(new d.materials.methods.MethodVOSet(a));a.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this.invalidateShaderProgram()},hasMethod:function(a){return null!=
this.getMethodSetForMethod(a)},addMethodAt:function(a,b){var c=new d.materials.methods.MethodVOSet(a);this._methods.splice(b,0,c);a.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this.invalidateShaderProgram()},getMethodAt:function(a){return a>this._methods.length-1?null:this._methods[a].method},get_numMethods:function(){return this._methods.length},removeMethod:function(a){var b=this.getMethodSetForMethod(a);null!=b&&(b=N.indexOf(this._methods,b),
this._methods.splice(b,1),a.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated)),this.invalidateShaderProgram())},getMethodSetForMethod:function(a){for(var b=this._methods.length,c=0;c<b;){if(this._methods[c].method==a)return this._methods[c];++c}return null},__class__:d.materials.methods.ShaderMethodSetup,__properties__:{get_numMethods:"get_numMethods",set_colorTransformMethod:"set_colorTransformMethod",get_colorTransformMethod:"get_colorTransformMethod",
set_specularMethod:"set_specularMethod",get_specularMethod:"get_specularMethod",set_diffuseMethod:"set_diffuseMethod",get_diffuseMethod:"get_diffuseMethod",set_shadowMethod:"set_shadowMethod",get_shadowMethod:"get_shadowMethod",set_ambientMethod:"set_ambientMethod",get_ambientMethod:"get_ambientMethod",set_normalMethod:"set_normalMethod",get_normalMethod:"get_normalMethod"}});d.materials.methods.ShadowMapMethodBase=function(a){this._epsilon=0.02;this._alpha=1;d.materials.methods.ShadingMethodBase.call(this);
this._castingLight=a;a.set_castsShadows(!0);this._shadowMapper=a.get_shadowMapper()};h["away3d.materials.methods.ShadowMapMethodBase"]=d.materials.methods.ShadowMapMethodBase;d.materials.methods.ShadowMapMethodBase.__name__=["away3d","materials","methods","ShadowMapMethodBase"];d.materials.methods.ShadowMapMethodBase.__interfaces__=[d.library.assets.IAsset];d.materials.methods.ShadowMapMethodBase.__super__=d.materials.methods.ShadingMethodBase;d.materials.methods.ShadowMapMethodBase.prototype=q(d.materials.methods.ShadingMethodBase.prototype,
{get_assetType:function(){return d.library.assets.Asset3DType.SHADOW_MAP_METHOD},get_alpha:function(){return this._alpha},set_alpha:function(a){return this._alpha=a},get_castingLight:function(){return this._castingLight},get_epsilon:function(){return this._epsilon},set_epsilon:function(a){return this._epsilon=a},getFragmentCode:function(){throw new d.errors.AbstractMethodError;},__class__:d.materials.methods.ShadowMapMethodBase,__properties__:q(d.materials.methods.ShadingMethodBase.prototype.__properties__,
{set_epsilon:"set_epsilon",get_epsilon:"get_epsilon",get_castingLight:"get_castingLight",set_alpha:"set_alpha",get_alpha:"get_alpha",get_assetType:"get_assetType"})});d.materials.passes={};d.materials.passes.MaterialPassBase=function(a){null==a&&(a=!1);c.events.EventDispatcher.call(this);this._program3Ds=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._program3Dids=[-1,-1,-1,-1,-1,-1,-1,-1];this._context3Ds=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),
8);this._smooth=!0;this._repeat=!1;this._mipmap=!0;this._depthCompareMode=515;this._blendFactorSource=1;this._blendFactorDest=0;this._animatableAttributes=["va0"];this._animationTargetRegisters=["vt0"];this._shadedTarget="ft0";this._defaultCulling=1028;this._writeDepth=!0;this._renderToTexture=a;this._numUsedStreams=1;this._numUsedVertexConstants=5};h["away3d.materials.passes.MaterialPassBase"]=d.materials.passes.MaterialPassBase;d.materials.passes.MaterialPassBase.__name__=["away3d","materials",
"passes","MaterialPassBase"];d.materials.passes.MaterialPassBase.__super__=c.events.EventDispatcher;d.materials.passes.MaterialPassBase.prototype=q(c.events.EventDispatcher.prototype,{get_material:function(){return this._material},set_material:function(a){return this._material=a},get_writeDepth:function(){return this._writeDepth},set_writeDepth:function(a){return this._writeDepth=a},get_mipmap:function(){return this._mipmap},set_mipmap:function(a){if(this._mipmap==a)return this._mipmap;this._mipmap=
a;this.invalidateShaderProgram();return this._mipmap},get_smooth:function(){return this._smooth},set_smooth:function(a){if(this._smooth==a)return this._smooth;this._smooth=a;this.invalidateShaderProgram();return this._smooth},get_repeat:function(){return this._repeat},set_repeat:function(a){if(this._repeat==a)return this._repeat;this._repeat=a;this.invalidateShaderProgram();return this._repeat},get_bothSides:function(){return this._bothSides},set_bothSides:function(a){return this._bothSides=a},get_depthCompareMode:function(){return this._depthCompareMode},
set_depthCompareMode:function(a){return this._depthCompareMode=a},get_animationSet:function(){return this._animationSet},set_animationSet:function(a){if(this._animationSet==a)return this._animationSet;this._animationSet=a;this.invalidateShaderProgram();return this._animationSet},get_renderToTexture:function(){return this._renderToTexture},dispose:function(){null!=this._lightPicker&&this._lightPicker.removeEventListener(c.events.Event.CHANGE,r(this,this.onLightsChange));for(var a=0;8>a;){var b=a++;
null!=this._program3Ds[b]&&(d.core.managers.AGALProgram3DCache.getInstanceFromIndex(b).freeProgram3D(this._program3Dids[b]),this._program3Ds[b]=null)}},get_numUsedStreams:function(){return this._numUsedStreams},get_numUsedVertexConstants:function(){return this._numUsedVertexConstants},get_numUsedVaryings:function(){return this._numUsedVaryings},get_numUsedFragmentConstants:function(){return this._numUsedFragmentConstants},get_needFragmentAnimation:function(){return this._needFragmentAnimation},get_needUVAnimation:function(){return this._needUVAnimation},
updateAnimationState:function(a,b,c){a.get_animator().setRenderState(b,a,this._numUsedVertexConstants,this._numUsedStreams,c)},render:function(){throw new d.errors.AbstractMethodError;},getVertexCode:function(){throw new d.errors.AbstractMethodError;},getFragmentCode:function(){throw new d.errors.AbstractMethodError;},setBlendMode:function(a){switch(a[1]){case 10:this._blendFactorSource=1;this._blendFactorDest=0;this._enableBlending=!1;break;case 7:this._blendFactorSource=770;this._blendFactorDest=
771;this._enableBlending=!0;break;case 9:this._blendFactorSource=0;this._blendFactorDest=768;this._enableBlending=!0;break;case 0:this._blendFactorSource=770;this._blendFactorDest=1;this._enableBlending=!0;break;case 1:this._blendFactorSource=0;this._blendFactorDest=770;this._enableBlending=!0;break;default:throw new c.errors.Error("Unsupported blend mode!");}},activate:function(a){var b=a._stage3DIndex,f=a._context3D;f.setDepthTest(this._writeDepth&&!this._enableBlending,this._depthCompareMode);
this._enableBlending&&f.setBlendFactors(this._blendFactorSource,this._blendFactorDest);if(this._context3Ds[b]!=f||null==this._program3Ds[b])this._context3Ds[b]=f,this.updateProgram(a),this.dispatchEvent(new c.events.Event(c.events.Event.CHANGE));for(var p=d.materials.passes.MaterialPassBase._previousUsedStreams[b],e=this._numUsedStreams;e<p;){var j=e++;f.setVertexBufferAt(j,null)}p=d.materials.passes.MaterialPassBase._previousUsedTexs[b];for(e=this._numUsedTextures;e<p;)j=e++,f.setTextureAt(j,null);
null!=this._animationSet&&!this._animationSet.get_usesCPU()&&this._animationSet.activate(a,this);f.setProgram(this._program3Ds[b]);f.setCulling(this._bothSides?0:this._defaultCulling);this._renderToTexture&&(this._oldTarget=a.get_renderTarget(),this._oldSurface=a.get_renderSurfaceSelector(),this._oldDepthStencil=a.get_enableDepthAndStencil(),this._oldRect=a.get_scissorRect())},deactivate:function(a){var b=a._stage3DIndex;d.materials.passes.MaterialPassBase._previousUsedStreams[b]=this._numUsedStreams;
d.materials.passes.MaterialPassBase._previousUsedTexs[b]=this._numUsedTextures;null!=this._animationSet&&!this._animationSet.get_usesCPU()&&this._animationSet.deactivate(a,this);this._renderToTexture&&(a.setRenderTarget(this._oldTarget,this._oldDepthStencil,this._oldSurface),a.set_scissorRect(this._oldRect));a._context3D.setDepthTest(!0,515)},invalidateShaderProgram:function(a){null==a&&(a=!0);for(var b=0;8>b;){var c=b++;this._program3Ds[c]=null}null!=this._material&&a&&this._material.invalidatePasses(this)},
updateProgram:function(a){var b="",c="",p="",e=this.getVertexCode();if(null!=this._animationSet&&!this._animationSet.get_usesCPU())b=this._animationSet.getAGALVertexCode(this,this._animatableAttributes,this._animationTargetRegisters,a.get_profile()),this._needFragmentAnimation&&(p=this._animationSet.getAGALFragmentCode(this,this._shadedTarget,a.get_profile())),this._needUVAnimation&&(c=this._animationSet.getAGALUVCode(this,this._UVSource,this._UVTarget)),this._animationSet.doneAGALCode(this);else{for(var j=
this._animatableAttributes.length,g=0;g<j;)var o=g++,b=b+("mov "+this._animationTargetRegisters[o]+", "+this._animatableAttributes[o]+"\n");this._needUVAnimation&&(c="mov "+this._UVTarget+","+this._UVSource+"\n")}e=b+c+e;b=this.getFragmentCode(p);d.debug.Debug.active&&(m.Log.trace("Compiling AGAL Code:",{fileName:"MaterialPassBase.hx",lineNumber:526,className:"away3d.materials.passes.MaterialPassBase",methodName:"updateProgram"}),m.Log.trace("--------------------",{fileName:"MaterialPassBase.hx",
lineNumber:527,className:"away3d.materials.passes.MaterialPassBase",methodName:"updateProgram"}),m.Log.trace(e,{fileName:"MaterialPassBase.hx",lineNumber:528,className:"away3d.materials.passes.MaterialPassBase",methodName:"updateProgram"}),m.Log.trace("--------------------",{fileName:"MaterialPassBase.hx",lineNumber:529,className:"away3d.materials.passes.MaterialPassBase",methodName:"updateProgram"}),m.Log.trace(b,{fileName:"MaterialPassBase.hx",lineNumber:530,className:"away3d.materials.passes.MaterialPassBase",
methodName:"updateProgram"}));d.core.managers.AGALProgram3DCache.getInstance(a).setProgram3D(this,e,b)},get_lightPicker:function(){return this._lightPicker},set_lightPicker:function(a){null!=this._lightPicker&&this._lightPicker.removeEventListener(c.events.Event.CHANGE,r(this,this.onLightsChange));this._lightPicker=a;null!=this._lightPicker&&this._lightPicker.addEventListener(c.events.Event.CHANGE,r(this,this.onLightsChange));this.updateLights();return this._lightPicker},onLightsChange:function(){this.updateLights()},
updateLights:function(){},get_alphaPremultiplied:function(){return this._alphaPremultiplied},set_alphaPremultiplied:function(a){this._alphaPremultiplied=a;this.invalidateShaderProgram(!1);return this._alphaPremultiplied},__class__:d.materials.passes.MaterialPassBase,__properties__:{set_alphaPremultiplied:"set_alphaPremultiplied",get_alphaPremultiplied:"get_alphaPremultiplied",set_lightPicker:"set_lightPicker",get_lightPicker:"get_lightPicker",get_needUVAnimation:"get_needUVAnimation",get_needFragmentAnimation:"get_needFragmentAnimation",
get_numUsedFragmentConstants:"get_numUsedFragmentConstants",get_numUsedVaryings:"get_numUsedVaryings",get_numUsedVertexConstants:"get_numUsedVertexConstants",get_numUsedStreams:"get_numUsedStreams",get_renderToTexture:"get_renderToTexture",set_animationSet:"set_animationSet",get_animationSet:"get_animationSet",set_depthCompareMode:"set_depthCompareMode",get_depthCompareMode:"get_depthCompareMode",set_bothSides:"set_bothSides",get_bothSides:"get_bothSides",set_repeat:"set_repeat",get_repeat:"get_repeat",
set_smooth:"set_smooth",get_smooth:"get_smooth",set_mipmap:"set_mipmap",get_mipmap:"get_mipmap",set_writeDepth:"set_writeDepth",get_writeDepth:"get_writeDepth",set_material:"set_material",get_material:"get_material"}});d.materials.passes.CompiledPass=function(a){this._numLightProbes=this._numPointLights=this._numDirectionalLights=0;this._specularLightSources=1;this._diffuseLightSources=3;this._vertexConstantData=c._Vector.Vector_Impl_._new();this._fragmentConstantData=c._Vector.Vector_Impl_._new();
this._enableLightFallOff=this._preserveAlpha=!0;this._material=a;this.init();d.materials.passes.MaterialPassBase.call(this)};h["away3d.materials.passes.CompiledPass"]=d.materials.passes.CompiledPass;d.materials.passes.CompiledPass.__name__=["away3d","materials","passes","CompiledPass"];d.materials.passes.CompiledPass.__super__=d.materials.passes.MaterialPassBase;d.materials.passes.CompiledPass.prototype=q(d.materials.passes.MaterialPassBase.prototype,{get_enableLightFallOff:function(){return this._enableLightFallOff},
set_enableLightFallOff:function(a){a!=this._enableLightFallOff&&this.invalidateShaderProgram(!0);return this._enableLightFallOff=a},get_forceSeparateMVP:function(){return this._forceSeparateMVP},set_forceSeparateMVP:function(a){return this._forceSeparateMVP=a},get_numPointLights:function(){return this._numPointLights},get_numDirectionalLights:function(){return this._numDirectionalLights},get_numLightProbes:function(){return this._numLightProbes},updateProgram:function(a){this.reset(a.get_profile());
d.materials.passes.MaterialPassBase.prototype.updateProgram.call(this,a)},reset:function(a){this.initCompiler(a);this.updateShaderProperties();this.initConstantData();this.cleanUp()},updateUsedOffsets:function(){this._numUsedVertexConstants=this._compiler.get_numUsedVertexConstants();this._numUsedFragmentConstants=this._compiler.get_numUsedFragmentConstants();this._numUsedStreams=this._compiler.get_numUsedStreams();this._numUsedTextures=this._compiler.get_numUsedTextures();this._numUsedVaryings=this._compiler.get_numUsedVaryings();
this._numUsedFragmentConstants=this._compiler.get_numUsedFragmentConstants()},initConstantData:function(){d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(this._vertexConstantData),4*this._numUsedVertexConstants,0);d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromB(this._fragmentConstantData),4*this._numUsedFragmentConstants,0);this.initCommonsData();0<=this._uvTransformIndex&&this.initUVTransformData();if(0<=this._cameraPositionIndex){var a=this._vertexConstantData,
b=this._cameraPositionIndex+3;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=1}this.updateMethodConstants()},initCompiler:function(a){this._compiler=this.createCompiler(a);this._compiler.set_forceSeperateMVP(this._forceSeparateMVP);this._compiler.set_numPointLights(this._numPointLights);this._compiler.set_numDirectionalLights(this._numDirectionalLights);this._compiler.set_numLightProbes(this._numLightProbes);this._compiler.set_methodSetup(this._methodSetup);this._compiler.set_diffuseLightSources(this._diffuseLightSources);
this._compiler.set_specularLightSources(this._specularLightSources);this._compiler.setTextureSampling(this._smooth,this._repeat,this._mipmap);this._compiler.setConstantDataBuffers(this._vertexConstantData,this._fragmentConstantData);this._compiler.set_animateUVs(this._animateUVs);this._compiler.set_alphaPremultiplied(this._alphaPremultiplied&&this._enableBlending);this._compiler.set_preserveAlpha(this._preserveAlpha&&this._enableBlending);this._compiler.set_enableLightFallOff(this._enableLightFallOff);
this._compiler.compile()},createCompiler:function(){throw new d.errors.AbstractMethodError;},updateShaderProperties:function(){this._animatableAttributes=this._compiler.get_animatableAttributes();this._animationTargetRegisters=this._compiler.get_animationTargetRegisters();this._vertexCode=this._compiler.get_vertexCode();this._fragmentLightCode=this._compiler.get_fragmentLightCode();this._framentPostLightCode=this._compiler.get_fragmentPostLightCode();this._shadedTarget=this._compiler.get_shadedTarget();
this._usingSpecularMethod=this._compiler.get_usingSpecularMethod();this._usesNormals=this._compiler.get_usesNormals();this._needUVAnimation=this._compiler.get_needUVAnimation();this._UVSource=this._compiler.get_UVSource();this._UVTarget=this._compiler.get_UVTarget();this.updateRegisterIndices();this.updateUsedOffsets()},updateRegisterIndices:function(){this._uvBufferIndex=this._compiler.get_uvBufferIndex();this._uvTransformIndex=this._compiler.get_uvTransformIndex();this._secondaryUVBufferIndex=this._compiler.get_secondaryUVBufferIndex();
this._normalBufferIndex=this._compiler.get_normalBufferIndex();this._tangentBufferIndex=this._compiler.get_tangentBufferIndex();this._lightFragmentConstantIndex=this._compiler.get_lightFragmentConstantIndex();this._cameraPositionIndex=this._compiler.get_cameraPositionIndex();this._commonsDataIndex=this._compiler.get_commonsDataIndex();this._sceneMatrixIndex=this._compiler.get_sceneMatrixIndex();this._sceneNormalMatrixIndex=this._compiler.get_sceneNormalMatrixIndex();this._probeWeightsIndex=this._compiler.get_probeWeightsIndex();
this._lightProbeDiffuseIndices=this._compiler.get_lightProbeDiffuseIndices();this._lightProbeSpecularIndices=this._compiler.get_lightProbeSpecularIndices()},get_preserveAlpha:function(){return this._preserveAlpha},set_preserveAlpha:function(a){if(this._preserveAlpha==a)return a;this._preserveAlpha=a;this.invalidateShaderProgram();return a},get_animateUVs:function(){return this._animateUVs},set_animateUVs:function(a){if(this._animateUVs==a)return a;this._animateUVs=a;this.invalidateShaderProgram();
return a},set_mipmap:function(a){if(this._mipmap==a)return a;d.materials.passes.MaterialPassBase.prototype.set_mipmap.call(this,a);return a},get_normalMap:function(){return this._methodSetup._normalMethod.get_normalMap()},set_normalMap:function(a){this._methodSetup._normalMethod.set_normalMap(a);return a},get_normalMethod:function(){return this._methodSetup.get_normalMethod()},set_normalMethod:function(a){this._methodSetup.set_normalMethod(a);return a},get_ambientMethod:function(){return this._methodSetup.get_ambientMethod()},
set_ambientMethod:function(a){this._methodSetup.set_ambientMethod(a);return a},get_shadowMethod:function(){return this._methodSetup.get_shadowMethod()},set_shadowMethod:function(a){this._methodSetup.set_shadowMethod(a);return a},get_diffuseMethod:function(){return this._methodSetup.get_diffuseMethod()},set_diffuseMethod:function(a){this._methodSetup.set_diffuseMethod(a);return a},get_specularMethod:function(){return this._methodSetup.get_specularMethod()},set_specularMethod:function(a){this._methodSetup.set_specularMethod(a);
return a},init:function(){this._methodSetup=new d.materials.methods.ShaderMethodSetup;this._methodSetup.addEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated))},dispose:function(){d.materials.passes.MaterialPassBase.prototype.dispose.call(this);this._methodSetup.removeEventListener(d.events.ShadingMethodEvent.SHADER_INVALIDATED,r(this,this.onShaderInvalidated));this._methodSetup.dispose();this._methodSetup=null},invalidateShaderProgram:function(a){null==a&&
(a=!0);var b=this._passes;this._passes=[];null!=this._methodSetup&&this.addPassesFromMethods();if(null==b||this._passes.length!=b.length)this._passesDirty=!0;else{for(var c=0;c<this._passes.length;){if(this._passes[c]!=b[c]){this._passesDirty=!0;return}++c}d.materials.passes.MaterialPassBase.prototype.invalidateShaderProgram.call(this,a)}},addPassesFromMethods:function(){null!=this._methodSetup._normalMethod&&this._methodSetup._normalMethod.get_hasOutput()&&this.addPasses(this._methodSetup._normalMethod.get_passes());
null!=this._methodSetup._ambientMethod&&this.addPasses(this._methodSetup._ambientMethod.get_passes());null!=this._methodSetup._shadowMethod&&this.addPasses(this._methodSetup._shadowMethod.get_passes());null!=this._methodSetup._diffuseMethod&&this.addPasses(this._methodSetup._diffuseMethod.get_passes());null!=this._methodSetup._specularMethod&&this.addPasses(this._methodSetup._specularMethod.get_passes())},addPasses:function(a){if(null!=a)for(var b=a.length,c=0;c<b;)a[c].set_material(this.get_material()),
a[c].set_lightPicker(this._lightPicker),this._passes.push(a[c]),++c},initUVTransformData:function(){var a=this._vertexConstantData,b=this._uvTransformIndex;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=1;a=this._vertexConstantData;b=this._uvTransformIndex+1;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0;a=this._vertexConstantData;b=this._uvTransformIndex+2;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0;a=this._vertexConstantData;b=this._uvTransformIndex+3;b>=a.length&&!a.fixed&&(a.length=
b+1);a.data[b]=0;a=this._vertexConstantData;b=this._uvTransformIndex+4;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0;a=this._vertexConstantData;b=this._uvTransformIndex+5;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=1;a=this._vertexConstantData;b=this._uvTransformIndex+6;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0;a=this._vertexConstantData;b=this._uvTransformIndex+7;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0},initCommonsData:function(){var a=this._fragmentConstantData,b=this._commonsDataIndex;
b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0.5;a=this._fragmentConstantData;b=this._commonsDataIndex+1;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0;a=this._fragmentConstantData;b=this._commonsDataIndex+2;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=0.00392156862745098;a=this._fragmentConstantData;b=this._commonsDataIndex+3;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=1},cleanUp:function(){this._compiler.dispose();this._compiler=null},updateMethodConstants:function(){null!=this._methodSetup._normalMethod&&
this._methodSetup._normalMethod.initConstants(this._methodSetup._normalMethodVO);null!=this._methodSetup._diffuseMethod&&this._methodSetup._diffuseMethod.initConstants(this._methodSetup._diffuseMethodVO);null!=this._methodSetup._ambientMethod&&this._methodSetup._ambientMethod.initConstants(this._methodSetup._ambientMethodVO);this._usingSpecularMethod&&this._methodSetup._specularMethod.initConstants(this._methodSetup._specularMethodVO);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.initConstants(this._methodSetup._shadowMethodVO)},
updateLightConstants:function(){},updateProbes:function(){},onShaderInvalidated:function(){this.invalidateShaderProgram()},getVertexCode:function(){return this._vertexCode},getFragmentCode:function(a){return this._fragmentLightCode+a+this._framentPostLightCode},activate:function(a,b){d.materials.passes.MaterialPassBase.prototype.activate.call(this,a,b);this._usesNormals&&this._methodSetup._normalMethod.activate(this._methodSetup._normalMethodVO,a);this._methodSetup._ambientMethod.activate(this._methodSetup._ambientMethodVO,
a);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.activate(this._methodSetup._shadowMethodVO,a);this._methodSetup._diffuseMethod.activate(this._methodSetup._diffuseMethodVO,a);this._usingSpecularMethod&&this._methodSetup._specularMethod.activate(this._methodSetup._specularMethodVO,a)},render:function(a,b,f,p){var e=0,j=b._context3D;0<=this._uvBufferIndex&&a.activateUVBuffer(this._uvBufferIndex,b);0<=this._secondaryUVBufferIndex&&a.activateSecondaryUVBuffer(this._secondaryUVBufferIndex,
b);0<=this._normalBufferIndex&&a.activateVertexNormalBuffer(this._normalBufferIndex,b);0<=this._tangentBufferIndex&&a.activateVertexTangentBuffer(this._tangentBufferIndex,b);if(this._animateUVs)if(e=a.get_uvTransform(),null!=e){var g=this._vertexConstantData,o=this._uvTransformIndex;o>=g.length&&!g.fixed&&(g.length=o+1);g.data[o]=e.a;g=this._vertexConstantData;o=this._uvTransformIndex+1;o>=g.length&&!g.fixed&&(g.length=o+1);g.data[o]=e.b;g=this._vertexConstantData;o=this._uvTransformIndex+3;o>=g.length&&
!g.fixed&&(g.length=o+1);g.data[o]=e.tx;g=this._vertexConstantData;o=this._uvTransformIndex+4;o>=g.length&&!g.fixed&&(g.length=o+1);g.data[o]=e.c;g=this._vertexConstantData;o=this._uvTransformIndex+5;o>=g.length&&!g.fixed&&(g.length=o+1);g.data[o]=e.d;g=this._vertexConstantData;o=this._uvTransformIndex+7;o>=g.length&&!g.fixed&&(g.length=o+1);g.data[o]=e.ty}else e=this._vertexConstantData,g=this._uvTransformIndex,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=1,e=this._vertexConstantData,g=this._uvTransformIndex+
1,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=0,e=this._vertexConstantData,g=this._uvTransformIndex+3,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=0,e=this._vertexConstantData,g=this._uvTransformIndex+4,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=0,e=this._vertexConstantData,g=this._uvTransformIndex+5,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=1,e=this._vertexConstantData,g=this._uvTransformIndex+7,g>=e.length&&!e.fixed&&(e.length=g+1),e.data[g]=0;this._ambientLightR=this._ambientLightG=
this._ambientLightB=0;this.usesLights()&&this.updateLightConstants();this.usesProbes()&&this.updateProbes(b);0<=this._sceneMatrixIndex?(a.getRenderSceneTransform(f).copyRawDataTo(this._vertexConstantData,this._sceneMatrixIndex,!0),p.copyRawDataTo(this._vertexConstantData,0,!0)):(e=d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX(),e.copyFrom(a.getRenderSceneTransform(f)),e.append(p),e.copyRawDataTo(this._vertexConstantData,0,!0));0<=this._sceneNormalMatrixIndex&&a.get_inverseSceneTransform().copyRawDataTo(this._vertexConstantData,
this._sceneNormalMatrixIndex,!1);this._usesNormals&&this._methodSetup._normalMethod.setRenderState(this._methodSetup._normalMethodVO,a,b,f);p=this._methodSetup._ambientMethod;p._lightAmbientR=this._ambientLightR;p._lightAmbientG=this._ambientLightG;p._lightAmbientB=this._ambientLightB;p.setRenderState(this._methodSetup._ambientMethodVO,a,b,f);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.setRenderState(this._methodSetup._shadowMethodVO,a,b,f);this._methodSetup._diffuseMethod.setRenderState(this._methodSetup._diffuseMethodVO,
a,b,f);this._usingSpecularMethod&&this._methodSetup._specularMethod.setRenderState(this._methodSetup._specularMethodVO,a,b,f);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.setRenderState(this._methodSetup._colorTransformMethodVO,a,b,f);p=this._methodSetup._methods;g=p.length;for(e=0;e<g;)o=p[e],o.method.setRenderState(o.data,a,b,f),++e;j.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,0,function(a){for(var a=a._vertexConstantData,b=[],
c=0,f=a.data.length;c<f;){var d=c++;b.push(a.data[d])}return b}(this),this._numUsedVertexConstants);j.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,function(a){for(var a=a._fragmentConstantData,b=[],c=0,f=a.data.length;c<f;){var d=c++;b.push(a.data[d])}return b}(this),this._numUsedFragmentConstants);a.activateVertexBuffer(0,b);j.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},usesProbes:function(){return 0<this._numLightProbes&&0!=((this._diffuseLightSources|
this._specularLightSources)&d.materials.LightSources.PROBES)},usesLights:function(){return(0<this._numPointLights||0<this._numDirectionalLights)&&0!=((this._diffuseLightSources|this._specularLightSources)&d.materials.LightSources.LIGHTS)},deactivate:function(a){d.materials.passes.MaterialPassBase.prototype.deactivate.call(this,a);this._usesNormals&&this._methodSetup._normalMethod.deactivate(this._methodSetup._normalMethodVO,a);this._methodSetup._ambientMethod.deactivate(this._methodSetup._ambientMethodVO,
a);null!=this._methodSetup._shadowMethod&&this._methodSetup._shadowMethod.deactivate(this._methodSetup._shadowMethodVO,a);this._methodSetup._diffuseMethod.deactivate(this._methodSetup._diffuseMethodVO,a);this._usingSpecularMethod&&this._methodSetup._specularMethod.deactivate(this._methodSetup._specularMethodVO,a)},get_specularLightSources:function(){return this._specularLightSources},set_specularLightSources:function(a){return this._specularLightSources=a},get_diffuseLightSources:function(){return this._diffuseLightSources},
set_diffuseLightSources:function(a){return this._diffuseLightSources=a},__class__:d.materials.passes.CompiledPass,__properties__:q(d.materials.passes.MaterialPassBase.prototype.__properties__,{set_diffuseLightSources:"set_diffuseLightSources",get_diffuseLightSources:"get_diffuseLightSources",set_specularLightSources:"set_specularLightSources",get_specularLightSources:"get_specularLightSources",set_specularMethod:"set_specularMethod",get_specularMethod:"get_specularMethod",set_diffuseMethod:"set_diffuseMethod",
get_diffuseMethod:"get_diffuseMethod",set_shadowMethod:"set_shadowMethod",get_shadowMethod:"get_shadowMethod",set_ambientMethod:"set_ambientMethod",get_ambientMethod:"get_ambientMethod",set_normalMethod:"set_normalMethod",get_normalMethod:"get_normalMethod",set_normalMap:"set_normalMap",get_normalMap:"get_normalMap",set_animateUVs:"set_animateUVs",get_animateUVs:"get_animateUVs",set_preserveAlpha:"set_preserveAlpha",get_preserveAlpha:"get_preserveAlpha",get_numLightProbes:"get_numLightProbes",get_numDirectionalLights:"get_numDirectionalLights",
get_numPointLights:"get_numPointLights",set_forceSeparateMVP:"set_forceSeparateMVP",get_forceSeparateMVP:"get_forceSeparateMVP",set_enableLightFallOff:"set_enableLightFallOff",get_enableLightFallOff:"get_enableLightFallOff"})});d.materials.passes.DepthMapPass=function(){this._alphaThreshold=0;d.materials.passes.MaterialPassBase.call(this);this._data=[1,255,65025,16581375,0.00392156862745098,0.00392156862745098,0.00392156862745098,0,0,0,0,0]};h["away3d.materials.passes.DepthMapPass"]=d.materials.passes.DepthMapPass;
d.materials.passes.DepthMapPass.__name__=["away3d","materials","passes","DepthMapPass"];d.materials.passes.DepthMapPass.__super__=d.materials.passes.MaterialPassBase;d.materials.passes.DepthMapPass.prototype=q(d.materials.passes.MaterialPassBase.prototype,{get_alphaThreshold:function(){return this._alphaThreshold},set_alphaThreshold:function(a){0>a?a=0:1<a&&(a=1);if(a==this._alphaThreshold)return a;(0==a||0==this._alphaThreshold)&&this.invalidateShaderProgram();this._alphaThreshold=a;this._data[8]=
this._alphaThreshold;return a},get_alphaMask:function(){return this._alphaMask},set_alphaMask:function(a){return this._alphaMask=a},getVertexCode:function(){var a;a="m44 vt1, vt0, vc0\t\t\nmov op, vt1\t\n";0<this._alphaThreshold?(this._numUsedTextures=1,this._numUsedStreams=2,a+="mov v0, vt1\nmov v1, va1\n"):(this._numUsedTextures=0,this._numUsedStreams=1,a+="mov v0, vt1\n");return a},getFragmentCode:function(){var a;a=this._repeat?"wrap":"clamp";var b;b=this._smooth?this._mipmap?"linear,miplinear":
"linear":this._mipmap?"nearest,mipnearest":"nearest";var c="div ft2, v0, v0.w\t\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";if(0<this._alphaThreshold){var d;switch(this._alphaMask.get_format()[1]){case 1:d="dxt1,";break;case 2:d="dxt5,";break;default:d=""}c+="tex ft3, v1, fs0 <2d,"+b+","+d+a+">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"}return c+"sub oc, ft0, ft1\t\t\n"},render:function(a,b,f,p){0<this._alphaThreshold&&a.activateUVBuffer(1,b);var e=b._context3D,j=d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX();
j.copyFrom(a.getRenderSceneTransform(f));j.append(p);e.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,0,j,!0);a.activateVertexBuffer(0,b);e.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},activate:function(a,b){var f=a._context3D;d.materials.passes.MaterialPassBase.prototype.activate.call(this,a,b);0<this._alphaThreshold?(f.setTextureAt(0,this._alphaMask.getTextureForStage3D(a)),f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this._data,
3)):f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this._data,2)},__class__:d.materials.passes.DepthMapPass,__properties__:q(d.materials.passes.MaterialPassBase.prototype.__properties__,{set_alphaMask:"set_alphaMask",get_alphaMask:"get_alphaMask",set_alphaThreshold:"set_alphaThreshold",get_alphaThreshold:"get_alphaThreshold"})});d.materials.passes.DistanceMapPass=function(){d.materials.passes.MaterialPassBase.call(this);this._fragmentData=[1,255,65025,16581375,0.00392156862745098,
0.00392156862745098,0.00392156862745098,0,0,0,0,0];this._vertexData=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),4,0);this._vertexData[3]=1;this._numUsedVertexConstants=9};h["away3d.materials.passes.DistanceMapPass"]=d.materials.passes.DistanceMapPass;d.materials.passes.DistanceMapPass.__name__=["away3d","materials","passes","DistanceMapPass"];d.materials.passes.DistanceMapPass.__super__=d.materials.passes.MaterialPassBase;d.materials.passes.DistanceMapPass.prototype=
q(d.materials.passes.MaterialPassBase.prototype,{get_alphaThreshold:function(){return this._alphaThreshold},set_alphaThreshold:function(a){0>a?a=0:1<a&&(a=1);if(a==this._alphaThreshold)return a;(0==a||0==this._alphaThreshold)&&this.invalidateShaderProgram();this._alphaThreshold=a;this._fragmentData[8]=this._alphaThreshold;return a},get_alphaMask:function(){return this._alphaMask},set_alphaMask:function(a){return this._alphaMask=a},getVertexCode:function(){var a;a="m44 op, vt0, vc0\t\t\nm44 vt1, vt0, vc5\t\t\nsub v0, vt1, vc9\t\t\n";
0<this._alphaThreshold?(a+="mov v1, va1\n",this._numUsedTextures=1,this._numUsedStreams=2):(this._numUsedTextures=0,this._numUsedStreams=1);return a},getFragmentCode:function(){var a,b;b=this._repeat?"wrap":"clamp";var c;c=this._smooth?this._mipmap?"linear,miplinear":"linear":this._mipmap?"nearest,mipnearest":"nearest";a="dp3 ft2.z, v0.xyz, v0.xyz\t\nmul ft0, fc0, ft2.z\t\nfrc ft0, ft0\t\t\t\nmul ft1, ft0.yzww, fc1\t\n";if(0<this._alphaThreshold){var d;switch(this._alphaMask.get_format()[1]){case 1:d=
"dxt1,";break;case 2:d="dxt5,";break;default:d=""}a+="tex ft3, v1, fs0 <2d,"+c+","+d+b+">\nsub ft3.w, ft3.w, fc2.x\nkil ft3.w\n"}return a+"sub oc, ft0, ft1\t\t\n"},render:function(a,b,f,p){var e=b._context3D,j=f.get_scenePosition();this._vertexData[0]=j.x;this._vertexData[1]=j.y;this._vertexData[2]=j.z;this._vertexData[3]=1;f=a.getRenderSceneTransform(f);e.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,5,f,!0);e.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,
9,this._vertexData,1);0<this._alphaThreshold&&a.activateUVBuffer(1,b);j=d.core.math.Matrix3DUtils.get_CALCULATION_MATRIX();j.copyFrom(f);j.append(p);e.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,0,j,!0);a.activateVertexBuffer(0,b);e.drawTriangles(a.getIndexBuffer(b),0,a.get_numTriangles())},activate:function(a,b){var f=a._context3D;d.materials.passes.MaterialPassBase.prototype.activate.call(this,a,b);var p=b.get_lens().get_far(),p=1/(2*p*p);this._fragmentData[0]=p;this._fragmentData[1]=
255*p;this._fragmentData[2]=65025*p;this._fragmentData[3]=16581375*p;0<this._alphaThreshold?(f.setTextureAt(0,this._alphaMask.getTextureForStage3D(a)),f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this._fragmentData,3)):f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this._fragmentData,2)},__class__:d.materials.passes.DistanceMapPass,__properties__:q(d.materials.passes.MaterialPassBase.prototype.__properties__,{set_alphaMask:"set_alphaMask",
get_alphaMask:"get_alphaMask",set_alphaThreshold:"set_alphaThreshold",get_alphaThreshold:"get_alphaThreshold"})});d.materials.passes.SegmentPass=function(a){this._constants=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),4,0);this._calcMatrix=new c.geom.Matrix3D;this._thickness=a;this._constants[1]=0.00392156862745098;d.materials.passes.MaterialPassBase.call(this)};h["away3d.materials.passes.SegmentPass"]=d.materials.passes.SegmentPass;d.materials.passes.SegmentPass.__name__=
["away3d","materials","passes","SegmentPass"];d.materials.passes.SegmentPass.__super__=d.materials.passes.MaterialPassBase;d.materials.passes.SegmentPass.prototype=q(d.materials.passes.MaterialPassBase.prototype,{getVertexCode:function(){return"m44 vt0, va0, vc8\t\t\t\nm44 vt1, va1, vc8\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nslt vt5.x, vt0.z, vc7.z\t\t\t\nsub vt5.y, vc5.x, vt5.x\t\t\t\nadd vt4.x, vt0.z, vc7.z\t\t\t\nsub vt4.y, vt0.z, vt1.z\t\t\t\nseq vt4.z, vt4.y vc6.x\t\t\t\nadd vt4.y, vt4.y, vt4.z\t\t\t\ndiv vt4.z, vt4.x, vt4.y\t\t\t\nmul vt4.xyz, vt4.zzz, vt2.xyz\t\nadd vt3.xyz, vt0.xyz, vt4.xyz\t\nmov vt3.w, vc5.x\t\t\t\nmul vt0, vt0, vt5.yyyy\t\t\t\nmul vt3, vt3, vt5.xxxx\t\t\t\nadd vt0, vt0, vt3\t\t\t\t\nsub vt2, vt1, vt0 \t\t\t\nnrm vt2.xyz, vt2.xyz\t\t\t\nnrm vt5.xyz, vt0.xyz\t\t\t\nmov vt5.w, vc5.x\t\t\t\t\ncrs vt3.xyz, vt2, vt5\t\t\t\nnrm vt3.xyz, vt3.xyz\t\t\t\nmul vt3.xyz, vt3.xyz, va2.xxx\t\nmov vt3.w, vc5.x\t\t\t\ndp3 vt4.x, vt0, vc6\t\t\t\nmul vt4.x, vt4.x, vc7.x\t\t\t\nmul vt3.xyz, vt3.xyz, vt4.xxx\t\nadd vt0.xyz, vt0.xyz, vt3.xyz\t\nm44 op, vt0, vc0\t\t\t\nmov v0, va3\t\t\t\t\n"},
getFragmentCode:function(){return"mov oc, v0\n"},render:function(a,b,f){var p=b._context3D;this._calcMatrix.copyFrom(a.get_sourceEntity().get_sceneTransform());this._calcMatrix.append(f.get_inverseSceneTransform());f=s.Boot.__cast(a,d.entities.SegmentSet).get_subSetCount();if(s.Boot.__cast(a,d.entities.SegmentSet).get_hasData())for(var e=0;e<f;)a.activateVertexBuffer(e,b),p.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,8,this._calcMatrix,!0),p.drawTriangles(a.getIndexBuffer(b),
0,a.get_numTriangles()),++e},activate:function(a,b){var f=a._context3D;d.materials.passes.MaterialPassBase.prototype.activate.call(this,a,b);this._constants[0]=null!=a.get_scissorRect()?this._thickness/Math.min(a.get_scissorRect().width,a.get_scissorRect().height):this._thickness/Math.min(a.get_width(),a.get_height());this._constants[2]=b.get_lens().get_near();f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,5,d.materials.passes.SegmentPass.ONE_VECTOR);f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,
6,d.materials.passes.SegmentPass.FRONT_VECTOR);f.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,7,this._constants);f.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,0,b.get_lens().get_matrix(),!0)},deactivate:function(a){a=a._context3D;a.setVertexBufferAt(0,null);a.setVertexBufferAt(1,null);a.setVertexBufferAt(2,null);a.setVertexBufferAt(3,null)},__class__:d.materials.passes.SegmentPass});d.materials.passes.SuperShaderPass=function(a){this._includeCasters=
!0;d.materials.passes.CompiledPass.call(this,a);this._needFragmentAnimation=!0};h["away3d.materials.passes.SuperShaderPass"]=d.materials.passes.SuperShaderPass;d.materials.passes.SuperShaderPass.__name__=["away3d","materials","passes","SuperShaderPass"];d.materials.passes.SuperShaderPass.__super__=d.materials.passes.CompiledPass;d.materials.passes.SuperShaderPass.prototype=q(d.materials.passes.CompiledPass.prototype,{createCompiler:function(a){return new d.materials.compilation.SuperShaderCompiler(a)},
get_includeCasters:function(){return this._includeCasters},set_includeCasters:function(a){if(this._includeCasters==a)return this._includeCasters;this._includeCasters=a;this.invalidateShaderProgram();return this._includeCasters},get_colorTransform:function(){return null!=this._methodSetup.get_colorTransformMethod()?this._methodSetup._colorTransformMethod.get_colorTransform():null},set_colorTransform:function(a){null!=a?(null==this.get_colorTransformMethod()&&this.set_colorTransformMethod(new d.materials.methods.ColorTransformMethod),
this._methodSetup._colorTransformMethod.set_colorTransform(a)):null==a&&(null!=this._methodSetup._colorTransformMethod&&this.set_colorTransformMethod(null),this.set_colorTransformMethod(this._methodSetup._colorTransformMethod=null));return a},get_colorTransformMethod:function(){return this._methodSetup.get_colorTransformMethod()},set_colorTransformMethod:function(a){this._methodSetup.set_colorTransformMethod(a);return a},addMethod:function(a){this._methodSetup.addMethod(a)},get_numMethods:function(){return this._methodSetup.get_numMethods()},
hasMethod:function(a){return this._methodSetup.hasMethod(a)},getMethodAt:function(a){return this._methodSetup.getMethodAt(a)},addMethodAt:function(a,b){this._methodSetup.addMethodAt(a,b)},removeMethod:function(a){this._methodSetup.removeMethod(a)},updateLights:function(){d.materials.passes.CompiledPass.prototype.updateLights.call(this);null!=this._lightPicker&&!this._ignoreLights?(this._numPointLights=this._lightPicker.get_numPointLights(),this._numDirectionalLights=this._lightPicker.get_numDirectionalLights(),
this._numLightProbes=this._lightPicker.get_numLightProbes(),this._includeCasters&&(this._numPointLights+=this._lightPicker.get_numCastingPointLights(),this._numDirectionalLights+=this._lightPicker.get_numCastingDirectionalLights())):this._numLightProbes=this._numDirectionalLights=this._numPointLights=0;this.invalidateShaderProgram()},activate:function(a,b){d.materials.passes.CompiledPass.prototype.activate.call(this,a,b);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.activate(this._methodSetup._colorTransformMethodVO,
a);for(var c=this._methodSetup._methods,e=c.length,i=0;i<e;){var j=i++,j=c[j];j.method.activate(j.data,a)}0<=this._cameraPositionIndex&&(c=b.get_scenePosition(),e=this._vertexConstantData,i=this._cameraPositionIndex,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=c.x,e=this._vertexConstantData,i=this._cameraPositionIndex+1,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=c.y,e=this._vertexConstantData,i=this._cameraPositionIndex+2,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=c.z)},deactivate:function(a){d.materials.passes.CompiledPass.prototype.deactivate.call(this,
a);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.deactivate(this._methodSetup._colorTransformMethodVO,a);for(var b,c=this._methodSetup._methods,e=c.length,i=0;i<e;)b=i++,b=c[b],b.method.deactivate(b.data,a)},addPassesFromMethods:function(){d.materials.passes.CompiledPass.prototype.addPassesFromMethods.call(this);null!=this._methodSetup._colorTransformMethod&&this.addPasses(this._methodSetup._colorTransformMethod.get_passes());for(var a=this._methodSetup._methods,
b=0,c=a.length;b<c;){var e=b++;this.addPasses(a[e].method.get_passes())}},usesProbesForSpecular:function(){return 0<this._numLightProbes&&0!=(this._specularLightSources&d.materials.LightSources.PROBES)},usesProbesForDiffuse:function(){return 0<this._numLightProbes&&0!=(this._diffuseLightSources&d.materials.LightSources.PROBES)},updateMethodConstants:function(){d.materials.passes.CompiledPass.prototype.updateMethodConstants.call(this);null!=this._methodSetup._colorTransformMethod&&this._methodSetup._colorTransformMethod.initConstants(this._methodSetup._colorTransformMethodVO);
for(var a=this._methodSetup._methods,b=a.length,c=0;c<b;){var e=c++;a[e].method.initConstants(a[e].data)}},updateLightConstants:function(){var a,b,c,d,e,j=0,g;g=this._includeCasters?2:1;c=this._lightFragmentConstantIndex;for(var o=0;o<g;){var h;h=0!=o++?this._lightPicker.get_castingDirectionalLights():this._lightPicker.get_directionalLights();d=h.length;for(var j=j+d,k=0;k<d;){a=k++;a=h[a];e=a.get_sceneDirection();this._ambientLightR+=a._ambientR;this._ambientLightG+=a._ambientG;this._ambientLightB+=
a._ambientB;var n=this._fragmentConstantData,l=c++;l>=n.length&&!n.fixed&&(n.length=l+1);n.data[l]=-e.x;n=this._fragmentConstantData;l=c++;l>=n.length&&!n.fixed&&(n.length=l+1);n.data[l]=-e.y;n=this._fragmentConstantData;l=c++;l>=n.length&&!n.fixed&&(n.length=l+1);n.data[l]=-e.z;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=1;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=a._diffuseR;e=this._fragmentConstantData;n=c++;n>=e.length&&
!e.fixed&&(e.length=n+1);e.data[n]=a._diffuseG;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=a._diffuseB;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=1;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=a._specularR;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=a._specularG;e=this._fragmentConstantData;n=c++;n>=e.length&&!e.fixed&&(e.length=n+1);e.data[n]=
a._specularB;a=this._fragmentConstantData;e=c++;e>=a.length&&!a.fixed&&(a.length=e+1);a.data[e]=1}}if(this._numDirectionalLights>j)for(b=c+12*(this._numDirectionalLights-j);function(){var a=0>b;return a!=0>c?a:b>c}(this);)d=this._fragmentConstantData,j=c++,j>=d.length&&!d.fixed&&(d.length=j+1),d.data[j]=0;for(o=j=0;o<g;){h=0!=o++?this._lightPicker.get_castingPointLights():this._lightPicker.get_pointLights();d=h.length;for(k=0;k<d;)a=k++,a=h[a],e=a.get_scenePosition(),this._ambientLightR+=a._ambientR,
this._ambientLightG+=a._ambientG,this._ambientLightB+=a._ambientB,n=this._fragmentConstantData,l=c++,l>=n.length&&!n.fixed&&(n.length=l+1),n.data[l]=e.x,n=this._fragmentConstantData,l=c++,l>=n.length&&!n.fixed&&(n.length=l+1),n.data[l]=e.y,n=this._fragmentConstantData,l=c++,l>=n.length&&!n.fixed&&(n.length=l+1),n.data[l]=e.z,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=1,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._diffuseR,
e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._diffuseG,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._diffuseB,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._radius*a._radius,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._specularR,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._specularG,e=this._fragmentConstantData,
n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._specularB,e=this._fragmentConstantData,n=c++,n>=e.length&&!e.fixed&&(e.length=n+1),e.data[n]=a._fallOffFactor}if(this._numPointLights>j){b=c+12*(j-this._numPointLights);for(g=c;g<b;)d=g++,j=this._fragmentConstantData,d>=j.length&&!j.fixed&&(j.length=d+1),j.data[d]=0}},updateProbes:function(a){var b,c=this._lightPicker.get_lightProbes(),d=this._lightPicker.get_lightProbeWeights(),e=c.length,j=this.usesProbesForDiffuse(),g=null!=this._methodSetup._specularMethod&&
this.usesProbesForSpecular(),o=a._context3D;if(j||g){for(var h=0;h<e;){var k=h++;b=c[k];j&&o.setTextureAt(this._lightProbeDiffuseIndices[k],b.get_diffuseMap().getTextureForStage3D(a));g&&o.setTextureAt(this._lightProbeSpecularIndices[k],b.get_specularMap().getTextureForStage3D(a))}a=this._fragmentConstantData;b=this._probeWeightsIndex;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=d[0];a=this._fragmentConstantData;b=this._probeWeightsIndex+1;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=d[1];a=
this._fragmentConstantData;b=this._probeWeightsIndex+2;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=d[2];a=this._fragmentConstantData;b=this._probeWeightsIndex+3;b>=a.length&&!a.fixed&&(a.length=b+1);a.data[b]=d[3]}},get_ignoreLights:function(){return this._ignoreLights},set_ignoreLights:function(a){return this._ignoreLights=a},__class__:d.materials.passes.SuperShaderPass,__properties__:q(d.materials.passes.CompiledPass.prototype.__properties__,{set_ignoreLights:"set_ignoreLights",get_ignoreLights:"get_ignoreLights",
get_numMethods:"get_numMethods",set_colorTransformMethod:"set_colorTransformMethod",get_colorTransformMethod:"get_colorTransformMethod",set_colorTransform:"set_colorTransform",get_colorTransform:"get_colorTransform",set_includeCasters:"set_includeCasters",get_includeCasters:"get_includeCasters"})});d.materials.utils={};d.materials.utils.DefaultMaterialManager=function(){};h["away3d.materials.utils.DefaultMaterialManager"]=d.materials.utils.DefaultMaterialManager;d.materials.utils.DefaultMaterialManager.__name__=
["away3d","materials","utils","DefaultMaterialManager"];d.materials.utils.DefaultMaterialManager._defaultTextureBitmapData=null;d.materials.utils.DefaultMaterialManager._defaultMaterial=null;d.materials.utils.DefaultMaterialManager._defaultTexture=null;d.materials.utils.DefaultMaterialManager.getDefaultMaterial=function(){null==d.materials.utils.DefaultMaterialManager._defaultTexture&&d.materials.utils.DefaultMaterialManager.createDefaultTexture();null==d.materials.utils.DefaultMaterialManager._defaultMaterial&&
d.materials.utils.DefaultMaterialManager.createDefaultMaterial();return d.materials.utils.DefaultMaterialManager._defaultMaterial};d.materials.utils.DefaultMaterialManager.getDefaultTexture=function(){null==d.materials.utils.DefaultMaterialManager._defaultTexture&&d.materials.utils.DefaultMaterialManager.createDefaultTexture();return d.materials.utils.DefaultMaterialManager._defaultTexture};d.materials.utils.DefaultMaterialManager.createDefaultTexture=function(){d.materials.utils.DefaultMaterialManager._defaultTextureBitmapData=
new c.display.BitmapData(8,8,!1,0);for(var a=0,b,a=0;8>a;){for(b=0;8>b;)1==(b&1^a&1)&&d.materials.utils.DefaultMaterialManager._defaultTextureBitmapData.setPixel(a,b,16777215),b++;a++}d.materials.utils.DefaultMaterialManager._defaultTexture=new d.textures.BitmapTexture(d.materials.utils.DefaultMaterialManager._defaultTextureBitmapData);d.materials.utils.DefaultMaterialManager._defaultTexture.set_name("defaultTexture")};d.materials.utils.DefaultMaterialManager.createDefaultMaterial=function(){d.materials.utils.DefaultMaterialManager._defaultMaterial=
new d.materials.TextureMaterial(d.materials.utils.DefaultMaterialManager._defaultTexture);d.materials.utils.DefaultMaterialManager._defaultMaterial.set_mipmap(!1);d.materials.utils.DefaultMaterialManager._defaultMaterial.set_smooth(!1);d.materials.utils.DefaultMaterialManager._defaultMaterial.set_name("defaultMaterial")};d.materials.utils.MipmapGenerator=function(){};h["away3d.materials.utils.MipmapGenerator"]=d.materials.utils.MipmapGenerator;d.materials.utils.MipmapGenerator.__name__=["away3d",
"materials","utils","MipmapGenerator"];d.materials.utils.MipmapGenerator.generateMipMaps=function(a,b,f,e,i){null==i&&(i=-1);null==e&&(e=!1);var j=a.width,g=a.height,o=0;d.materials.utils.MipmapGenerator._rect.width=j;for(d.materials.utils.MipmapGenerator._rect.height=g;1<=j||1<=g;)f=new c.display.BitmapData(1<j?j:1,1<g?g:1,e,0),d.materials.utils.MipmapGenerator._matrix.a=d.materials.utils.MipmapGenerator._rect.width/a.width,d.materials.utils.MipmapGenerator._matrix.d=d.materials.utils.MipmapGenerator._rect.height/
a.height,f.draw(a,d.materials.utils.MipmapGenerator._matrix,null,null,null,!0),s.Boot.__instanceof(b,c.display3D.textures.Texture)?s.Boot.__cast(b,c.display3D.textures.Texture).uploadFromBitmapData(f,o++):s.Boot.__cast(b,c.display3D.textures.CubeTexture).uploadFromBitmapData(f,i,o++),j>>=1,g>>=1,d.materials.utils.MipmapGenerator._rect.width=1<j?j:1,d.materials.utils.MipmapGenerator._rect.height=1<g?g:1};d.primitives={};d.primitives.data={};d.primitives.data.Segment=function(a,b,c,d,e,j){null==j&&
(j=1);null==e&&(e=3355443);null==d&&(d=3355443);this._subSetIndex=this._index=-1;this._thickness=0.5*j;this._start=a;this._end=b;this.set_startColor(d);this.set_endColor(e)};h["away3d.primitives.data.Segment"]=d.primitives.data.Segment;d.primitives.data.Segment.__name__=["away3d","primitives","data","Segment"];d.primitives.data.Segment.prototype={updateSegment:function(a,b,c,d,e,j){null==j&&(j=1);null==e&&(e=3355443);null==d&&(d=3355443);this._start=a;this._end=b;this._startColor!=d&&this.set_startColor(d);
this._endColor!=e&&this.set_endColor(e);this._thickness=0.5*j;this.update()},get_start:function(){return this._start},set_start:function(a){this._start=a;this.update();return a},get_end:function(){return this._end},set_end:function(a){this._end=a;this.update();return a},get_thickness:function(){return 2*this._thickness},set_thickness:function(a){this._thickness=0.5*a;this.update();return a},get_startColor:function(){return this._startColor},set_startColor:function(a){this._startR=(a>>16&255)/255;
this._startG=(a>>8&255)/255;this._startB=(a&255)/255;this._startColor=a;this.update();return a},get_endColor:function(){return this._endColor},set_endColor:function(a){this._endR=(a>>16&255)/255;this._endG=(a>>8&255)/255;this._endB=(a&255)/255;this._endColor=a;this.update();return a},dispose:function(){this._end=this._start=null},get_index:function(){return this._index},set_index:function(a){return this._index=a},get_subSetIndex:function(){return this._subSetIndex},set_subSetIndex:function(a){return this._subSetIndex=
a},set_segmentsBase:function(a){return this._segmentsBase=a},update:function(){null!=this._segmentsBase&&this._segmentsBase.updateSegment(this)},__class__:d.primitives.data.Segment,__properties__:{set_segmentsBase:"set_segmentsBase",set_subSetIndex:"set_subSetIndex",get_subSetIndex:"get_subSetIndex",set_index:"set_index",get_index:"get_index",set_endColor:"set_endColor",get_endColor:"get_endColor",set_startColor:"set_startColor",get_startColor:"get_startColor",set_thickness:"set_thickness",get_thickness:"get_thickness",
set_end:"set_end",get_end:"get_end",set_start:"set_start",get_start:"get_start"}};d.primitives.LineSegment=function(a,b,c,e,i){null==i&&(i=1);null==e&&(e=3355443);null==c&&(c=3355443);this.TYPE="line";d.primitives.data.Segment.call(this,a,b,null,c,e,i)};h["away3d.primitives.LineSegment"]=d.primitives.LineSegment;d.primitives.LineSegment.__name__=["away3d","primitives","LineSegment"];d.primitives.LineSegment.__super__=d.primitives.data.Segment;d.primitives.LineSegment.prototype=q(d.primitives.data.Segment.prototype,
{__class__:d.primitives.LineSegment});d.primitives.WireframePrimitiveBase=function(a,b){null==b&&(b=1);null==a&&(a=16777215);this._geomDirty=!0;0>=b&&(b=1);this._color=a;this._thickness=b;this.set_mouseEnabled(this.set_mouseChildren(!1));d.entities.SegmentSet.call(this)};h["away3d.primitives.WireframePrimitiveBase"]=d.primitives.WireframePrimitiveBase;d.primitives.WireframePrimitiveBase.__name__=["away3d","primitives","WireframePrimitiveBase"];d.primitives.WireframePrimitiveBase.__super__=d.entities.SegmentSet;
d.primitives.WireframePrimitiveBase.prototype=q(d.entities.SegmentSet.prototype,{get_color:function(){return this._color},set_color:function(a){this._color=a;for(var b=this._segments.iterator();b.hasNext();){var c=b.next();c.segment.set_startColor(c.segment.set_endColor(a))}return a},get_thickness:function(){return this._thickness},set_thickness:function(a){this._thickness=a;for(var b=this._segments.iterator();b.hasNext();){var c=b.next();c.segment.set_thickness(c.segment.set_thickness(a))}return a},
removeAllSegments:function(){d.entities.SegmentSet.prototype.removeAllSegments.call(this)},get_bounds:function(){this._geomDirty&&this.updateGeometry();return d.entities.SegmentSet.prototype.get_bounds.call(this)},buildGeometry:function(){throw new d.errors.AbstractMethodError;},invalidateGeometry:function(){this._geomDirty=!0;this.invalidateBounds()},updateGeometry:function(){this.buildGeometry();this._geomDirty=!1},updateOrAddSegment:function(a,b,f){var e,i;null!=(a=this.getSegment(a))?(e=a.get_start(),
i=a.get_end(),e.x=b.x,e.y=b.y,e.z=b.z,i.x=f.x,i.y=f.y,i.z=f.z,a.updateSegment(e,i,null,this._color,this._color,this._thickness)):this.addSegment(new d.primitives.LineSegment(new c.geom.Vector3D(b.x,b.y,b.z,b.w),new c.geom.Vector3D(f.x,f.y,f.z,f.w),this._color,this._color,this._thickness))},updateMouseChildren:function(){this._ancestorsAllowMouseEnabled=!1},__class__:d.primitives.WireframePrimitiveBase,__properties__:q(d.entities.SegmentSet.prototype.__properties__,{set_thickness:"set_thickness",get_thickness:"get_thickness",
set_color:"set_color",get_color:"get_color"})});d.primitives.WireframeCube=function(a,b,c,e,i){null==i&&(i=1);null==e&&(e=16777215);null==c&&(c=100);null==b&&(b=100);null==a&&(a=100);d.primitives.WireframePrimitiveBase.call(this,e,i);this._width=a;this._height=b;this._depth=c};h["away3d.primitives.WireframeCube"]=d.primitives.WireframeCube;d.primitives.WireframeCube.__name__=["away3d","primitives","WireframeCube"];d.primitives.WireframeCube.__super__=d.primitives.WireframePrimitiveBase;d.primitives.WireframeCube.prototype=
q(d.primitives.WireframePrimitiveBase.prototype,{get_width:function(){return this._width},set_width:function(a){this._width=a;this.invalidateGeometry();return a},get_height:function(){return this._height},set_height:function(a){if(0>=a)throw new c.errors.Error("Value needs to be greater than 0");this._height=a;this.invalidateGeometry();return a},get_depth:function(){return this._depth},set_depth:function(a){this._depth=a;this.invalidateGeometry();return a},buildGeometry:function(){var a=new c.geom.Vector3D,
b=new c.geom.Vector3D,f=0.5*this._width,d=0.5*this._height,e=0.5*this._depth;a.x=-f;a.y=d;a.z=-e;b.x=-f;b.y=-d;b.z=-e;this.updateOrAddSegment(0,a,b);a.z=e;b.z=e;this.updateOrAddSegment(1,a,b);a.x=f;b.x=f;this.updateOrAddSegment(2,a,b);a.z=-e;b.z=-e;this.updateOrAddSegment(3,a,b);a.x=-f;a.y=-d;a.z=-e;b.x=f;b.y=-d;b.z=-e;this.updateOrAddSegment(4,a,b);a.y=d;b.y=d;this.updateOrAddSegment(5,a,b);a.z=e;b.z=e;this.updateOrAddSegment(6,a,b);a.y=-d;b.y=-d;this.updateOrAddSegment(7,a,b);a.x=-f;a.y=-d;a.z=
-e;b.x=-f;b.y=-d;b.z=e;this.updateOrAddSegment(8,a,b);a.y=d;b.y=d;this.updateOrAddSegment(9,a,b);a.x=f;b.x=f;this.updateOrAddSegment(10,a,b);a.y=-d;b.y=-d;this.updateOrAddSegment(11,a,b)},__class__:d.primitives.WireframeCube,__properties__:q(d.primitives.WireframePrimitiveBase.prototype.__properties__,{set_depth:"set_depth",get_depth:"get_depth",set_height:"set_height",get_height:"get_height",set_width:"set_width",get_width:"get_width"})});d.primitives.WireframeSphere=function(a,b,c,e,i){null==i&&
(i=1);null==e&&(e=16777215);null==c&&(c=12);null==b&&(b=16);null==a&&(a=50);d.primitives.WireframePrimitiveBase.call(this,e,i);this._radius=a;this._segmentsW=b;this._segmentsH=c};h["away3d.primitives.WireframeSphere"]=d.primitives.WireframeSphere;d.primitives.WireframeSphere.__name__=["away3d","primitives","WireframeSphere"];d.primitives.WireframeSphere.__super__=d.primitives.WireframePrimitiveBase;d.primitives.WireframeSphere.prototype=q(d.primitives.WireframePrimitiveBase.prototype,{buildGeometry:function(){for(var a=
[],b=new c.geom.Vector3D,f=new c.geom.Vector3D,d=0,e=0,j=0,g=0,e=0;e<=this._segmentsH;){for(var d=Math.PI*e/this._segmentsH,o=-this._radius*Math.cos(d),h=this._radius*Math.sin(d),d=0;d<=this._segmentsW;){var k=2*Math.PI*d/this._segmentsW,n=h*Math.cos(k),k=h*Math.sin(k);a[j++]=n;a[j++]=-o;a[j++]=k;++d}++e}for(e=1;e<=this._segmentsH;){for(d=1;d<=this._segmentsW;)j=3*((this._segmentsW+1)*e+d),o=3*((this._segmentsW+1)*e+d-1),h=3*((this._segmentsW+1)*(e-1)+d-1),n=3*((this._segmentsW+1)*(e-1)+d),e==this._segmentsH?
(b.x=a[h],b.y=a[h+1],b.z=a[h+2],f.x=a[n],f.y=a[n+1],f.z=a[n+2],this.updateOrAddSegment(g++,b,f),b.x=a[j],b.y=a[j+1],b.z=a[j+2]):1==e?(f.x=a[o],f.y=a[o+1],f.z=a[o+2],b.x=a[h],b.y=a[h+1],b.z=a[h+2]):(f.x=a[o],f.y=a[o+1],f.z=a[o+2],b.x=a[h],b.y=a[h+1],b.z=a[h+2],this.updateOrAddSegment(g++,b,f),f.x=a[n],f.y=a[n+1],f.z=a[n+2]),this.updateOrAddSegment(g++,b,f),++d;++e}},__class__:d.primitives.WireframeSphere});d.textures={};d.textures.TextureProxyBase=function(){this._format=c.display3D.Context3DTextureFormat.BGRA;
this._hasMipmaps=!0;this._textures=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);this._dirty=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),8);d.library.assets.NamedAssetBase.call(this)};h["away3d.textures.TextureProxyBase"]=d.textures.TextureProxyBase;d.textures.TextureProxyBase.__name__=["away3d","textures","TextureProxyBase"];d.textures.TextureProxyBase.__interfaces__=[d.library.assets.IAsset];d.textures.TextureProxyBase.__super__=d.library.assets.NamedAssetBase;
d.textures.TextureProxyBase.prototype=q(d.library.assets.NamedAssetBase.prototype,{get_hasMipMaps:function(){return this._hasMipmaps},get_format:function(){return this._format},get_assetType:function(){return d.library.assets.Asset3DType.TEXTURE},get_width:function(){return this._width},get_height:function(){return this._height},set_width:function(a){return a==this._width?a:this._width=a},set_height:function(a){return a==this._height?a:this._height=a},getTextureForStage3D:function(a){var b=a._stage3DIndex,
c=this._textures[b],a=a._context3D;if(null==c||this._dirty[b]!=a)this._textures[b]=c=this.createTexture(a),this._dirty[b]=a,this.uploadContent(c);return c},uploadContent:function(){throw new d.errors.AbstractMethodError;},setSize:function(a,b){(this._width!=a||this._height!=b)&&this.invalidateSize();this._width=a;this._height=b},invalidateContent:function(){for(var a=0;8>a;)this._dirty[a]=null,++a},invalidateSize:function(){for(var a,b=0;8>b;)a=this._textures[b],null!=a&&(a.dispose(),this._textures[b]=
null,this._dirty[b]=null),++b},createTexture:function(){throw new d.errors.AbstractMethodError;},dispose:function(){for(var a=0;8>a;)null!=this._textures[a]&&this._textures[a].dispose(),++a},__class__:d.textures.TextureProxyBase,__properties__:q(d.library.assets.NamedAssetBase.prototype.__properties__,{get_height:"get_height",get_width:"get_width",get_assetType:"get_assetType",get_format:"get_format",get_hasMipMaps:"get_hasMipMaps"})});d.textures.Texture2DBase=function(){d.textures.TextureProxyBase.call(this)};
h["away3d.textures.Texture2DBase"]=d.textures.Texture2DBase;d.textures.Texture2DBase.__name__=["away3d","textures","Texture2DBase"];d.textures.Texture2DBase.__super__=d.textures.TextureProxyBase;d.textures.Texture2DBase.prototype=q(d.textures.TextureProxyBase.prototype,{createTexture:function(a){return a.createTexture(this._width,this._height,c.display3D.Context3DTextureFormat.BGRA,!1)},__class__:d.textures.Texture2DBase});d.textures.BitmapTexture=function(a,b){null==b&&(b=!0);d.textures.Texture2DBase.call(this);
this._bitmapData=a;this.setSize(this._bitmapData.width,this._bitmapData.height);this._generateMipmaps=this._hasMipmaps=b};h["away3d.textures.BitmapTexture"]=d.textures.BitmapTexture;d.textures.BitmapTexture.__name__=["away3d","textures","BitmapTexture"];d.textures.BitmapTexture.__super__=d.textures.Texture2DBase;d.textures.BitmapTexture.prototype=q(d.textures.Texture2DBase.prototype,{get_bitmapData:function(){return this._bitmapData},set_bitmapData:function(a){if(a==this._bitmapData)return null;if(!d.tools.utils.TextureUtils.isBitmapDataValid(a))throw new c.errors.Error("Invalid bitmapData: Width and height must be power of 2 and cannot exceed 2048");
this.invalidateContent();this.setSize(a.width,a.height);this._bitmapData=a;this._generateMipmaps&&this.getMipMapHolder();return a},uploadContent:function(a){this._generateMipmaps?d.materials.utils.MipmapGenerator.generateMipMaps(this._bitmapData,a,this._mipMapHolder,!0):s.Boot.__cast(a,c.display3D.textures.Texture).uploadFromBitmapData(this._bitmapData,0)},getMipMapHolder:function(){var a,b;a=this._bitmapData.width;b=this._bitmapData.height;if(null!=this._mipMapHolder){if(this._mipMapHolder.width==
a&&this._bitmapData.height==b)return;this.freeMipMapHolder()}null==d.textures.BitmapTexture._mipMaps[a]&&(d.textures.BitmapTexture._mipMaps[a]=[],d.textures.BitmapTexture._mipMapUses[a]=[]);null==d.textures.BitmapTexture._mipMaps[a][b]?(this._mipMapHolder=d.textures.BitmapTexture._mipMaps[a][b]=new c.display.BitmapData(a,b,!0),d.textures.BitmapTexture._mipMapUses[a][b]=1):(d.textures.BitmapTexture._mipMapUses[a][b]+=1,this._mipMapHolder=d.textures.BitmapTexture._mipMaps[a][b])},freeMipMapHolder:function(){var a=
this._mipMapHolder.width,b=this._mipMapHolder.height;0==--d.textures.BitmapTexture._mipMapUses[a][b]&&(d.textures.BitmapTexture._mipMaps[a][b].dispose(),d.textures.BitmapTexture._mipMaps[a][b]=null)},dispose:function(){d.textures.Texture2DBase.prototype.dispose.call(this);null!=this._mipMapHolder&&this.freeMipMapHolder()},__class__:d.textures.BitmapTexture,__properties__:q(d.textures.Texture2DBase.prototype.__properties__,{set_bitmapData:"set_bitmapData",get_bitmapData:"get_bitmapData"})});d.textures.CubeTextureBase=
function(){d.textures.TextureProxyBase.call(this)};h["away3d.textures.CubeTextureBase"]=d.textures.CubeTextureBase;d.textures.CubeTextureBase.__name__=["away3d","textures","CubeTextureBase"];d.textures.CubeTextureBase.__super__=d.textures.TextureProxyBase;d.textures.CubeTextureBase.prototype=q(d.textures.TextureProxyBase.prototype,{get_size:function(){return this._width},createTexture:function(a){return a.createCubeTexture(this.get_width(),c.display3D.Context3DTextureFormat.BGRA,!1)},__class__:d.textures.CubeTextureBase,
__properties__:q(d.textures.TextureProxyBase.prototype.__properties__,{get_size:"get_size"})});d.textures.RenderCubeTexture=function(a){d.textures.CubeTextureBase.call(this);this.setSize(a,a)};h["away3d.textures.RenderCubeTexture"]=d.textures.RenderCubeTexture;d.textures.RenderCubeTexture.__name__=["away3d","textures","RenderCubeTexture"];d.textures.RenderCubeTexture.__super__=d.textures.CubeTextureBase;d.textures.RenderCubeTexture.prototype=q(d.textures.CubeTextureBase.prototype,{set_size:function(a){if(a==
this._width)return a;if(!d.tools.utils.TextureUtils.isDimensionValid(a))throw new c.errors.Error("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this.setSize(a,a);return a},uploadContent:function(a){for(var b=new c.display.BitmapData(this._width,this._height,!1,0),f=0;6>f;)d.materials.utils.MipmapGenerator.generateMipMaps(b,a,null,!1,f),++f;b.dispose()},createTexture:function(a){return a.createCubeTexture(this._width,c.display3D.Context3DTextureFormat.BGRA,
!0)},__class__:d.textures.RenderCubeTexture});d.textures.RenderTexture=function(a,b){d.textures.Texture2DBase.call(this);this.setSize(a,b)};h["away3d.textures.RenderTexture"]=d.textures.RenderTexture;d.textures.RenderTexture.__name__=["away3d","textures","RenderTexture"];d.textures.RenderTexture.__super__=d.textures.Texture2DBase;d.textures.RenderTexture.prototype=q(d.textures.Texture2DBase.prototype,{set_width:function(a){if(a==this._width)return a;if(!d.tools.utils.TextureUtils.isDimensionValid(a))throw new c.errors.Error("Invalid size: Width and height must be power of 2 and cannot exceed 2048");
this.invalidateContent();this.setSize(a,this._height);return a},set_height:function(a){if(a==this._height)return a;if(!d.tools.utils.TextureUtils.isDimensionValid(a))throw new c.errors.Error("Invalid size: Width and height must be power of 2 and cannot exceed 2048");this.invalidateContent();this.setSize(this._width,a);return a},uploadContent:function(){},createTexture:function(a){return a.createTexture(this.get_width(),this.get_height(),c.display3D.Context3DTextureFormat.BGRA,!0)},__class__:d.textures.RenderTexture});
d.tools={};d.tools.utils={};d.tools.utils.GeomUtil=function(){};h["away3d.tools.utils.GeomUtil"]=d.tools.utils.GeomUtil;d.tools.utils.GeomUtil.__name__=["away3d","tools","utils","GeomUtil"];d.tools.utils.GeomUtil.fromVectors=function(a,b,c,e,i,j,g,o){null==o&&(o=0);var h=[];null!=c&&0==c.length&&(c=null);null!=e&&0==e.length&&(e=null);null!=i&&0==i.length&&(i=null);null!=j&&0==j.length&&(j=null);null!=g&&0==g.length&&(g=null);if(983025<=b.length||196605<=a.length){var k=0,n,l,m,q=[],r=[],s;s=null!=
c?[]:null;var u;u=null!=e?[]:null;var t;t=null!=i?[]:null;var v;v=null!=j?[]:null;var w;w=null!=g?[]:null;for(var x=d.utils.ArrayUtils.Prefill(d.utils._ArrayUtils.AcceptEither_Impl_.fromA([]),a.length/3|0,0),k=x.length;0<k--;)x[k]=-1;var y,B,C,E,D,F,H,I,J,K,L,G;l=0;n=b.length;for(k=0;k<n;){B=q.length+6;if(983025<=l+2||196605<=B){h.push(d.tools.utils.GeomUtil.constructSubGeometry(q,r,s,u,t,v,w,o));q=[];r=[];s=null!=c?[]:null;u=null!=e?[]:null;t=null!=i?[]:null;v=null!=j?[]:null;w=null!=g?[]:null;for(m=
x.length;0<m--;)x[m]=-1;l=0}for(m=0;3>m;)y=b[k+m],0<=x[y]?B=x[y]:(C=3*y,E=3*y+1,D=3*y+2,B=q.length/3|0,F=3*B,H=3*B+1,I=3*B+2,q[F]=a[C],q[H]=a[E],q[I]=a[D],null!=c&&(J=2*B,L=2*B+1,K=2*y,G=2*y+1,s[J]=c[K],s[L]=c[G]),null!=e&&(u[F]=e[C],u[H]=e[E],u[I]=e[D]),null!=i&&(t[F]=i[C],t[H]=i[E],t[I]=i[D]),null!=j&&(v[F]=j[C],v[H]=j[E],v[I]=j[D]),null!=g&&(w[F]=g[C],w[H]=g[E],w[I]=g[D]),x[y]=B),r[l+m]=B,m++;l+=3;k+=3}0<q.length&&h.push(d.tools.utils.GeomUtil.constructSubGeometry(q,r,s,u,t,v,w,o))}else h.push(d.tools.utils.GeomUtil.constructSubGeometry(a,
b,c,e,i,j,g,o));return h};d.tools.utils.GeomUtil.constructSubGeometry=function(a,b,c,e,i,j,g){var o;null!=j&&null!=g?(o=new d.core.base.SkinnedSubGeometry(j.length/(a.length/3)|0),s.Boot.__cast(o,d.core.base.SkinnedSubGeometry).updateJointWeightsData(j),s.Boot.__cast(o,d.core.base.SkinnedSubGeometry).updateJointIndexData(g)):o=new d.core.base.CompactSubGeometry;o.updateIndexData(b);o.fromVectors(a,c,e,i);return o};d.tools.utils.GeomUtil.interleaveBuffers=function(a,b,c,d,e,j){var g=0,o,h,k,n;n=[];
for(g=0;g<a;)h=2*g,o=3*g,k=13*g,n[k]=null!=b?b[o]:0,n[k+1]=null!=b?b[o+1]:0,n[k+2]=null!=b?b[o+2]:0,n[k+3]=null!=c?c[o]:0,n[k+4]=null!=c?c[o+1]:0,n[k+5]=null!=c?c[o+2]:0,n[k+6]=null!=d?d[o]:0,n[k+7]=null!=d?d[o+1]:0,n[k+8]=null!=d?d[o+2]:0,n[k+9]=null!=e?e[h]:0,n[k+10]=null!=e?e[h+1]:0,n[k+11]=null!=j?j[h]:0,n[k+12]=null!=j?j[h+1]:0,++g;return n};d.tools.utils.GeomUtil.getMeshSubgeometryIndex=function(a){for(var b=0,c=a.get_parentGeometry().get_subGeometries(),d=0;d<c.length;){if(c[d]==a){b=d;break}++d}return b};
d.tools.utils.GeomUtil.getMeshSubMeshIndex=function(a){for(var b=0,c=a.get_parentMesh().get_subMeshes(),d=0;d<c.length;){if(c[d]==a){b=d;break}++d}return b};d.tools.utils.TextureUtils=function(){};h["away3d.tools.utils.TextureUtils"]=d.tools.utils.TextureUtils;d.tools.utils.TextureUtils.__name__=["away3d","tools","utils","TextureUtils"];d.tools.utils.TextureUtils.isBitmapDataValid=function(a){return null==a?!0:d.tools.utils.TextureUtils.isDimensionValid(a.width)&&d.tools.utils.TextureUtils.isDimensionValid(a.height)};
d.tools.utils.TextureUtils.isDimensionValid=function(a){return 1<=a&&a<=d.tools.utils.TextureUtils.MAX_SIZE&&d.tools.utils.TextureUtils.isPowerOfTwo(a)};d.tools.utils.TextureUtils.isPowerOfTwo=function(a){return 0<a?(a&-a)==a:!1};d.tools.utils.TextureUtils.getBestPowerOf2=function(a){for(var b=1;b<a;)b<<=1;b>d.tools.utils.TextureUtils.MAX_SIZE&&(b=d.tools.utils.TextureUtils.MAX_SIZE);return b};var v;v={Adler32:function(){this.a1=1;this.a2=0}};h["format.tools.Adler32"]=v.Adler32;v.Adler32.__name__=
["format","tools","Adler32"];v.Adler32.read=function(a){var b=new v.Adler32,c=a.readByte(),d=a.readByte(),e=a.readByte(),a=a.readByte();b.a1=e<<8|a;b.a2=c<<8|d;return b};v.Adler32.prototype={update:function(a,b,c){for(var d=this.a1,e=this.a2,j=b,b=b+c;j<b;)c=j++,d=(d+a.b[c])%65521,e=(e+d)%65521;this.a1=d;this.a2=e},equals:function(a){return a.a1==this.a1&&a.a2==this.a2},__class__:v.Adler32};v.Huffman=h["format.tools.Huffman"]={__ename__:!0,__constructs__:["Found","NeedBit","NeedBits"]};v.Huffman.Found=
function(a){a=["Found",0,a];a.__enum__=v.Huffman;a.toString=u;return a};v.Huffman.NeedBit=function(a,b){var c=["NeedBit",1,a,b];c.__enum__=v.Huffman;c.toString=u;return c};v.Huffman.NeedBits=function(a,b){var c=["NeedBits",2,a,b];c.__enum__=v.Huffman;c.toString=u;return c};v.HuffTools=function(){};h["format.tools.HuffTools"]=v.HuffTools;v.HuffTools.__name__=["format","tools","HuffTools"];v.HuffTools.prototype={treeDepth:function(a){switch(a[1]){case 0:return 0;case 2:throw"assert";case 1:var b=a[3],
a=this.treeDepth(a[2]),b=this.treeDepth(b);return 1+(a<b?a:b)}},treeCompress:function(a){var b=this.treeDepth(a);if(0==b)return a;if(1==b)switch(a[1]){case 1:return b=a[3],v.Huffman.NeedBit(this.treeCompress(a[2]),this.treeCompress(b));default:throw"assert";}for(var c=1<<b,d=[],e=0;e<c;)e++,d.push(v.Huffman.Found(-1));this.treeWalk(d,0,0,b,a);return v.Huffman.NeedBits(b,d)},treeWalk:function(a,b,c,d,e){switch(e[1]){case 1:var j=e[3],g=e[2];0<d?(this.treeWalk(a,b,c+1,d-1,g),this.treeWalk(a,b|1<<c,
c+1,d-1,j)):a[b]=this.treeCompress(e);break;default:a[b]=this.treeCompress(e)}},treeMake:function(a,b,c,d){if(d>b)throw"Invalid huffman";var e=c<<5|d;if(a.exists(e))return v.Huffman.Found(a.get(e));c<<=1;d+=1;return v.Huffman.NeedBit(this.treeMake(a,b,c,d),this.treeMake(a,b,c|1,d))},make:function(a,b,c,d){var e=[],j=[];if(32<d)throw"Invalid huffman";for(var g=0;g<d;)g++,e.push(0),j.push(0);for(g=0;g<c;){var o=g++,o=a[o+b];if(o>=d)throw"Invalid huffman";e[o]++}for(var g=0,o=1,h=d-1;o<h;){var k=o++,
g=g+e[k]<<1;j[k]=g}e=new m.ds.IntMap;for(g=0;g<c;)o=g++,h=a[o+b],0!=h&&(k=j[h-1],j[h-1]=k+1,e.set(k<<5|h,o));return this.treeCompress(v.Huffman.NeedBit(this.treeMake(e,d,0,1),this.treeMake(e,d,1,1)))},__class__:v.HuffTools};v.Inflate=function(){};h["format.tools.Inflate"]=v.Inflate;v.Inflate.__name__=["format","tools","Inflate"];v.Inflate.run=function(a){return v.InflateImpl.run(new m.io.BytesInput(a))};v._InflateImpl={};v._InflateImpl.Window=function(a){this.buffer=m.io.Bytes.alloc(65536);this.pos=
0;a&&(this.crc=new v.Adler32)};h["format.tools._InflateImpl.Window"]=v._InflateImpl.Window;v._InflateImpl.Window.__name__=["format","tools","_InflateImpl","Window"];v._InflateImpl.Window.prototype={slide:function(){null!=this.crc&&this.crc.update(this.buffer,0,32768);var a=m.io.Bytes.alloc(65536);this.pos-=32768;a.blit(0,this.buffer,32768,this.pos);this.buffer=a},addBytes:function(a,b,c){65536<this.pos+c&&this.slide();this.buffer.blit(this.pos,a,b,c);this.pos+=c},addByte:function(a){65536==this.pos&&
this.slide();this.buffer.b[this.pos]=a&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){null!=this.crc&&this.crc.update(this.buffer,0,this.pos);return this.crc},__class__:v._InflateImpl.Window};v._InflateImpl.State=h["format.tools._InflateImpl.State"]={__ename__:!0,__constructs__:"Head Block CData Flat Crc Dist DistOne Done".split(" ")};v._InflateImpl.State.Head=["Head",0];v._InflateImpl.State.Head.toString=u;v._InflateImpl.State.Head.__enum__=
v._InflateImpl.State;v._InflateImpl.State.Block=["Block",1];v._InflateImpl.State.Block.toString=u;v._InflateImpl.State.Block.__enum__=v._InflateImpl.State;v._InflateImpl.State.CData=["CData",2];v._InflateImpl.State.CData.toString=u;v._InflateImpl.State.CData.__enum__=v._InflateImpl.State;v._InflateImpl.State.Flat=["Flat",3];v._InflateImpl.State.Flat.toString=u;v._InflateImpl.State.Flat.__enum__=v._InflateImpl.State;v._InflateImpl.State.Crc=["Crc",4];v._InflateImpl.State.Crc.toString=u;v._InflateImpl.State.Crc.__enum__=
v._InflateImpl.State;v._InflateImpl.State.Dist=["Dist",5];v._InflateImpl.State.Dist.toString=u;v._InflateImpl.State.Dist.__enum__=v._InflateImpl.State;v._InflateImpl.State.DistOne=["DistOne",6];v._InflateImpl.State.DistOne.toString=u;v._InflateImpl.State.DistOne.__enum__=v._InflateImpl.State;v._InflateImpl.State.Done=["Done",7];v._InflateImpl.State.Done.toString=u;v._InflateImpl.State.Done.__enum__=v._InflateImpl.State;v.InflateImpl=function(a,b,c){null==c&&(c=!0);null==b&&(b=!0);this["final"]=!1;
this.htools=new v.HuffTools;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.dist=this.len=0;this.state=b?v._InflateImpl.State.Head:v._InflateImpl.State.Block;this.input=a;this.needed=this.nbits=this.bits=0;this.output=null;this.outpos=0;this.lengths=[];for(a=0;19>a;)a++,this.lengths.push(-1);this.window=new v._InflateImpl.Window(c)};h["format.tools.InflateImpl"]=v.InflateImpl;v.InflateImpl.__name__=["format","tools","InflateImpl"];v.InflateImpl.run=function(a,b){null==b&&(b=65536);for(var c=
m.io.Bytes.alloc(b),d=new m.io.BytesBuffer,e=new v.InflateImpl(a);;){var j=e.readBytes(c,0,b);d.addBytes(c,0,j);if(j<b)break}return d.getBytes()};v.InflateImpl.prototype={buildFixedHuffman:function(){if(null!=v.InflateImpl.FIXED_HUFFMAN)return v.InflateImpl.FIXED_HUFFMAN;for(var a=[],b=0;288>b;){var c=b++;a.push(143>=c?8:255>=c?9:279>=c?7:8)}v.InflateImpl.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return v.InflateImpl.FIXED_HUFFMAN},readBytes:function(a,b,c){this.needed=c;this.outpos=b;this.output=
a;if(0<c)for(;this.inflateLoop(););return c-this.needed},getBits:function(a){for(;this.nbits<a;)this.bits|=this.input.readByte()<<this.nbits,this.nbits+=8;var b=this.bits&(1<<a)-1;this.nbits-=a;this.bits>>=a;return b},getBit:function(){0==this.nbits&&(this.nbits=8,this.bits=this.input.readByte());var a=1==(this.bits&1);this.nbits--;this.bits>>=1;return a},getRevBits:function(a){return 0==a?0:this.getBit()?1<<a-1|this.getRevBits(a-1):this.getRevBits(a-1)},resetBits:function(){this.nbits=this.bits=
0},addBytes:function(a,b,c){this.window.addBytes(a,b,c);this.output.blit(this.outpos,a,b,c);this.needed-=c;this.outpos+=c},addByte:function(a){this.window.addByte(a);this.output.b[this.outpos]=a&255;this.needed--;this.outpos++},addDistOne:function(a){for(var b=this.window.getLastChar(),c=0;c<a;)c++,this.addByte(b)},addDist:function(a,b){this.addBytes(this.window.buffer,this.window.pos-a,b)},applyHuffman:function(a){switch(a[1]){case 0:return a[2];case 1:var b=a[3],a=a[2];return this.applyHuffman(this.getBit()?
b:a);case 2:return this.applyHuffman(a[3][this.getBits(a[2])])}},inflateLengths:function(a,b){for(var c=0,d=0;c<b;){var e=this.applyHuffman(this.huffman);switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:d=e;a[c]=e;c++;break;case 16:e=c+3+this.getBits(2);if(e>b)throw"Invalid data";for(;c<e;)a[c]=d,c++;break;case 17:c+=3+this.getBits(3);if(c>b)throw"Invalid data";break;case 18:c+=11+this.getBits(7);if(c>b)throw"Invalid data";
break;default:throw"Invalid data";}}},inflateLoop:function(){switch(this.state[1]){case 0:var a=this.input.readByte();if(8!=(a&15)||7!=a>>4)throw"Invalid data";var b=this.input.readByte();if(0!=((a<<8)+b)%31)throw"Invalid data";if(0!=(b&32))throw"Unsupported dictionary";this.state=v._InflateImpl.State.Block;return!0;case 4:a=this.window.checksum();if(null==a)return this.state=v._InflateImpl.State.Done,!0;b=v.Adler32.read(this.input);if(!a.equals(b))throw"Invalid CRC";this.state=v._InflateImpl.State.Done;
return!0;case 7:return!1;case 1:switch(this["final"]=this.getBit(),this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len)throw"Invalid data";this.state=v._InflateImpl.State.Flat;a=this.inflateLoop();this.resetBits();return a;case 1:return this.huffman=this.buildFixedHuffman(),this.huffdist=null,this.state=v._InflateImpl.State.CData,!0;case 2:for(var a=this.getBits(5)+257,b=this.getBits(5)+1,c=this.getBits(4)+4,d=0;d<c;){var e=d++;this.lengths[v.InflateImpl.CODE_LENGTHS_POS[e]]=
this.getBits(3)}for(;19>c;)d=c++,this.lengths[v.InflateImpl.CODE_LENGTHS_POS[d]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);c=[];d=0;for(e=a+b;d<e;)d++,c.push(0);this.inflateLengths(c,a+b);this.huffdist=this.htools.make(c,a,b,16);this.huffman=this.htools.make(c,0,a,16);this.state=v._InflateImpl.State.CData;return!0;default:throw"Invalid data";}case 3:return a=this.len<this.needed?this.len:this.needed,b=this.input.read(a),this.len-=a,this.addBytes(b,0,a),0==this.len&&(this.state=this["final"]?
v._InflateImpl.State.Crc:v._InflateImpl.State.Block),0<this.needed;case 6:return a=this.len<this.needed?this.len:this.needed,this.addDistOne(a),this.len-=a,0==this.len&&(this.state=v._InflateImpl.State.CData),0<this.needed;case 5:for(;0<this.len&&0<this.needed;)a=this.len<this.dist?this.len:this.dist,a=this.needed<a?this.needed:a,this.addDist(this.dist,a),this.len-=a;0==this.len&&(this.state=v._InflateImpl.State.CData);return 0<this.needed;case 2:b=this.applyHuffman(this.huffman);if(256>b)return this.addByte(b),
0<this.needed;if(256==b)this.state=this["final"]?v._InflateImpl.State.Crc:v._InflateImpl.State.Block;else{b-=257;a=v.InflateImpl.LEN_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.len=v.InflateImpl.LEN_BASE_VAL_TBL[b]+this.getBits(a);b=null==this.huffdist?this.getRevBits(5):this.applyHuffman(this.huffdist);a=v.InflateImpl.DIST_EXTRA_BITS_TBL[b];if(-1==a)throw"Invalid data";this.dist=v.InflateImpl.DIST_BASE_VAL_TBL[b]+this.getBits(a);if(this.dist>this.window.available())throw"Invalid data";this.state=
1==this.dist?v._InflateImpl.State.DistOne:v._InflateImpl.State.Dist}return!0}},__class__:v.InflateImpl};m.StackItem=h["haxe.StackItem"]={__ename__:!0,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};m.StackItem.CFunction=["CFunction",0];m.StackItem.CFunction.toString=u;m.StackItem.CFunction.__enum__=m.StackItem;m.StackItem.Module=function(a){a=["Module",1,a];a.__enum__=m.StackItem;a.toString=u;return a};m.StackItem.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=
m.StackItem;a.toString=u;return a};m.StackItem.Method=function(a,b){var c=["Method",3,a,b];c.__enum__=m.StackItem;c.toString=u;return c};m.StackItem.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=m.StackItem;a.toString=u;return a};m.CallStack=function(){};h["haxe.CallStack"]=m.CallStack;m.CallStack.__name__=["haxe","CallStack"];m.CallStack.exceptionStack=function(){return[]};m.CallStack.toString=function(a){for(var b=new P,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";m.CallStack.itemToString(b,
d)}return b.b};m.CallStack.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var c=b[2];a.b+="module ";a.b=null==c?a.b+"null":a.b+(""+c);break;case 2:var c=b[4],d=b[3],e=b[2];null!=e&&(m.CallStack.itemToString(a,e),a.b+=" (");a.b=null==d?a.b+"null":a.b+(""+d);a.b+=" line ";a.b=null==c?a.b+"null":a.b+(""+c);null!=e&&(a.b+=")");break;case 3:c=b[3];d=b[2];a.b=null==d?a.b+"null":a.b+(""+d);a.b+=".";a.b=null==c?a.b+"null":a.b+(""+c);break;case 4:c=b[2],a.b+="local function #",
a.b=null==c?a.b+"null":a.b+(""+c)}};m.Log=function(){};h["haxe.Log"]=m.Log;m.Log.__name__=["haxe","Log"];m.Log.trace=function(a,b){s.Boot.__trace(a,b)};m.Timer=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};h["haxe.Timer"]=m.Timer;m.Timer.__name__=["haxe","Timer"];m.Timer.delay=function(a,b){var c=new m.Timer(b);c.run=function(){c.stop();a()};return c};m.Timer.stamp=function(){return(new Date).getTime()/1E3};m.Timer.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),
this.id=null)},run:function(){},__class__:m.Timer};m.Unserializer=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=m.Unserializer.DEFAULT_RESOLVER;null==a&&(a=B,m.Unserializer.DEFAULT_RESOLVER=a);this.setResolver(a)};h["haxe.Unserializer"]=m.Unserializer;m.Unserializer.__name__=["haxe","Unserializer"];m.Unserializer.initCodes=function(){for(var a=[],b=0,c=m.Unserializer.BASE64.length;b<c;){var d=b++;a[m.Unserializer.BASE64.charCodeAt(d)]=d}return a};m.Unserializer.prototype=
{setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;
var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return B.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return B.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=
this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return k.parseFloat(w.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=w.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:a=[];for(this.cache.push(a);;){b=
this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();case 99:a=this.unserialize();
b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=B.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),d=B.getEnumConstructs(b)[c];if(null==d)throw"Unknown enum index "+
a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new X;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new m.ds.StringMap;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new m.ds.IntMap;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=
b)throw"Invalid IntMap format";return a;case 77:a=new m.ds.ObjectMap;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=w.substr(this.buf,this.pos,19),a=w.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=m.Unserializer.CODES;null==e&&(e=m.Unserializer.initCodes(),m.Unserializer.CODES=
e);for(var j=this.pos,g=a&3,o=j+(a-g),b=m.io.Bytes.alloc(3*(a>>2)+(2<=g?g-1:0)),c=0;j<o;){var h=e[C.fastCodeAt(d,j++)],l=e[C.fastCodeAt(d,j++)];b.set(c++,h<<2|l>>4);h=e[C.fastCodeAt(d,j++)];b.set(c++,l<<4|h>>2);l=e[C.fastCodeAt(d,j++)];b.set(c++,h<<6|l)}2<=g&&(l=e[C.fastCodeAt(d,j++)],o=e[C.fastCodeAt(d,j++)],b.set(c++,l<<2|o>>4),3==g&&(d=e[C.fastCodeAt(d,j++)],b.set(c++,o<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+
a;a=B.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:m.Unserializer};m.crypto={};m.crypto.BaseCode=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw"BaseCode : base length must be a power of two.";this.base=a;this.nbits=c};h["haxe.crypto.BaseCode"]=m.crypto.BaseCode;m.crypto.BaseCode.__name__=["haxe","crypto",
"BaseCode"];m.crypto.BaseCode.prototype={encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=8*a.length/b|0,e=m.io.Bytes.alloc(d+(0==8*a.length%b?0:1)),j=0,g=0,o=(1<<b)-1,h=0,k=0;k<d;){for(;g<b;)g+=8,j<<=8,j|=a.get(h++);g-=b;e.set(k++,c.b[j>>g&o])}0<g&&e.set(k++,c.b[j<<b-g&o]);return e},__class__:m.crypto.BaseCode};m.ds.ObjectMap=function(){this.h={};this.h.__keys__={}};h["haxe.ds.ObjectMap"]=m.ds.ObjectMap;m.ds.ObjectMap.__name__=["haxe","ds","ObjectMap"];m.ds.ObjectMap.__interfaces__=[F];
m.ds.ObjectMap.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++m.ds.ObjectMap.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return w.iter(a)},__class__:m.ds.ObjectMap};m.io=
{};m.io.Bytes=function(a,b){this.length=a;this.b=b};h["haxe.io.Bytes"]=m.io.Bytes;m.io.Bytes.__name__=["haxe","io","Bytes"];m.io.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new m.io.Bytes(a,b)};m.io.Bytes.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=C.fastCodeAt(a,c++);55296<=d&&56319>=d&&(d=d-55232<<10|C.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|
d&63))}return new m.io.Bytes(b.length,b)};m.io.Bytes.ofData=function(a){return new m.io.Bytes(a.length,a)};m.io.Bytes.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},blit:function(a,b,c,d){if(0>a||0>c||0>d||a+d>this.length||c+d>b.length)throw m.io.Error.OutsideBounds;var e=this.b,b=b.b;if(e==b&&a>c)for(;0<d;)d--,e[d+a]=b[d+c];else for(var j=0;j<d;){var g=j++;e[g+a]=b[g+c]}},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw m.io.Error.OutsideBounds;for(var c=
"",d=this.b,e=String.fromCharCode,j=a,g=a+b;j<g;){var o=d[j++];if(128>o){if(0==o)break;c+=e(o)}else if(224>o)c+=e((o&63)<<6|d[j++]&127);else if(240>o)var h=d[j++],c=c+e((o&31)<<12|(h&127)<<6|d[j++]&127);else var h=d[j++],k=d[j++],o=(o&15)<<18|(h&127)<<12|(k&127)<<6|d[j++]&127,c=c+e((o>>10)+55232),c=c+e(o&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},getData:function(){return this.b},__class__:m.io.Bytes};m.io.BytesBuffer=function(){this.b=[]};h["haxe.io.BytesBuffer"]=
m.io.BytesBuffer;m.io.BytesBuffer.__name__=["haxe","io","BytesBuffer"];m.io.BytesBuffer.prototype={addBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw m.io.Error.OutsideBounds;for(var a=a.b,d=b,b=b+c;d<b;)c=d++,this.b.push(a[c])},getBytes:function(){var a=new m.io.Bytes(this.b.length,this.b);this.b=null;return a},__class__:m.io.BytesBuffer};m.io.Input=function(){};h["haxe.io.Input"]=m.io.Input;m.io.Input.__name__=["haxe","io","Input"];m.io.Input.prototype={readByte:function(){throw"Not implemented";
},readBytes:function(a,b,c){var d=c,e=a.b;if(0>b||0>c||b+c>a.length)throw m.io.Error.OutsideBounds;for(;0<d;)e[b]=this.readByte(),b++,d--;return c},read:function(a){for(var b=m.io.Bytes.alloc(a),c=0;0<a;){var d=this.readBytes(b,c,a);if(0==d)throw m.io.Error.Blocked;c+=d;a-=d}return b},readUInt16:function(){var a=this.readByte(),b=this.readByte();return this.bigEndian?b|a<<8:a|b<<8},__class__:m.io.Input};m.io.BytesInput=function(a,b,c){null==b&&(b=0);null==c&&(c=a.length-b);if(0>b||0>c||b+c>a.length)throw m.io.Error.OutsideBounds;
this.b=a.b;this.pos=b;this.totlen=this.len=c};h["haxe.io.BytesInput"]=m.io.BytesInput;m.io.BytesInput.__name__=["haxe","io","BytesInput"];m.io.BytesInput.__super__=m.io.Input;m.io.BytesInput.prototype=q(m.io.Input.prototype,{readByte:function(){if(0==this.len)throw new m.io.Eof;this.len--;return this.b[this.pos++]},readBytes:function(a,b,c){if(0>b||0>c||b+c>a.length)throw m.io.Error.OutsideBounds;if(0==this.len&&0<c)throw new m.io.Eof;this.len<c&&(c=this.len);for(var d=this.b,a=a.b,e=0;e<c;){var j=
e++;a[b+j]=d[this.pos+j]}this.pos+=c;this.len-=c;return c},__class__:m.io.BytesInput});m.io.Eof=function(){};h["haxe.io.Eof"]=m.io.Eof;m.io.Eof.__name__=["haxe","io","Eof"];m.io.Eof.prototype={toString:function(){return"Eof"},__class__:m.io.Eof};m.io.Error=h["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};m.io.Error.Blocked=["Blocked",0];m.io.Error.Blocked.toString=u;m.io.Error.Blocked.__enum__=m.io.Error;m.io.Error.Overflow=["Overflow",1];m.io.Error.Overflow.toString=
u;m.io.Error.Overflow.__enum__=m.io.Error;m.io.Error.OutsideBounds=["OutsideBounds",2];m.io.Error.OutsideBounds.toString=u;m.io.Error.OutsideBounds.__enum__=m.io.Error;m.io.Error.Custom=function(a){a=["Custom",3,a];a.__enum__=m.io.Error;a.toString=u;return a};m.io.Path=function(a){var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=w.substr(a,0,c),a=w.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=w.substr(a,0,b),a=w.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=
w.substr(a,b+1,null),this.file=w.substr(a,0,b)):(this.ext=null,this.file=a)};h["haxe.io.Path"]=m.io.Path;m.io.Path.__name__=["haxe","io","Path"];m.io.Path.withoutExtension=function(a){a=new m.io.Path(a);a.ext=null;return a.toString()};m.io.Path.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:m.io.Path};m.xml={};m.xml.Parser=function(){};h["haxe.xml.Parser"]=m.xml.Parser;m.xml.Parser.__name__=["haxe",
"xml","Parser"];m.xml.Parser.parse=function(a){var b=y.createDocument();m.xml.Parser.doParse(a,0,b);return b};m.xml.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,j=1,g=null,o=0,h=0,l=0,n=a.charCodeAt(b),q=new P;n==n;){switch(e){case 0:switch(n){case 10:case 13:case 9:case 32:break;default:e=j;continue}break;case 1:switch(n){case 60:e=0;j=2;break;default:o=b;e=13;continue}break;case 13:60==n?(j=y.createPCData(q.b+w.substr(a,o,b-o)),q=new P,c.addChild(j),h++,e=0,j=2):38==n&&(q.addSub(a,
o,b-o),e=18,j=13,o=b+1);break;case 17:93==n&&(93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2))&&(e=y.createCData(w.substr(a,o,b-o)),c.addChild(e),h++,b+=2,e=1);break;case 2:switch(n){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=w.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=w.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";
b+=2;e=15}o=b+1;break;case 63:e=14;o=b;break;case 47:if(null==c)throw"Expected node name";o=b+1;e=0;j=10;break;default:e=3;o=b;continue}break;case 3:if(!(97<=n&&122>=n||65<=n&&90>=n||48<=n&&57>=n||58==n||46==n||95==n||45==n)){if(b==o)throw"Expected node name";d=y.createElement(w.substr(a,o,b-o));c.addChild(d);e=0;j=4;continue}break;case 4:switch(n){case 47:e=11;h++;break;case 62:e=9;h++;break;default:e=5;o=b;continue}break;case 5:if(!(97<=n&&122>=n||65<=n&&90>=n||48<=n&&57>=n||58==n||46==n||95==n||
45==n)){if(o==b)throw"Expected attribute name";g=w.substr(a,o,b-o);if(d.exists(g))throw"Duplicate attribute";e=0;j=6;continue}break;case 6:switch(n){case 61:e=0;j=7;break;default:throw"Expected =";}break;case 7:switch(n){case 34:case 39:e=8;o=b;break;default:throw'Expected "';}break;case 8:n==a.charCodeAt(o)&&(j=w.substr(a,o+1,b-o-1),d.set(g,j),e=0,j=4);break;case 9:o=b=m.xml.Parser.doParse(a,b,d);e=1;break;case 11:switch(n){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(n){case 62:return 0==
h&&c.addChild(y.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=n&&122>=n||65<=n&&90>=n||48<=n&&57>=n||58==n||46==n||95==n||45==n)){if(o==b)throw"Expected node name";if(w.substr(a,o,b-o)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;j=12;continue}break;case 15:45==n&&(45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2))&&(c.addChild(y.createComment(w.substr(a,o,b-o))),b+=2,e=1);break;case 16:91==n?l++:93==n?l--:62==n&&0==l&&(c.addChild(y.createDocType(w.substr(a,o,b-o))),
e=1);break;case 14:63==n&&62==a.charCodeAt(b+1)&&(b++,e=w.substr(a,o+1,b-o-2),c.addChild(y.createProcessingInstruction(e)),e=1);break;case 18:59==n&&(o=w.substr(a,o,b-o),35==o.charCodeAt(0)?(o=120==o.charCodeAt(1)?k.parseInt("0"+w.substr(o,1,o.length-1)):k.parseInt(w.substr(o,1,o.length-1)),q.add(String.fromCharCode(o))):m.xml.Parser.escapes.exists(o)?q.add(m.xml.Parser.escapes.get(o)):q.b+=k.string("&"+o+";"),o=b+1,e=j)}n=C.fastCodeAt(a,++b)}1==e&&(o=b,e=13);if(13==e)return(b!=o||0==h)&&c.addChild(y.createPCData(q.b+
w.substr(a,o,b-o))),b;throw"Unexpected end";};var s={Boot:function(){}};h["js.Boot"]=s.Boot;s.Boot.__name__=["js","Boot"];s.Boot.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};s.Boot.__trace=function(a,b){var c;c=null!=b?b.fileName+":"+b.lineNumber+": ":"";c+=s.Boot.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(var d=0,e=b.customParams;d<e.length;){var j=e[d];++d;c+=","+s.Boot.__string_rec(j,"")}var g;"undefined"!=typeof document&&
null!=(g=document.getElementById("haxe:trace"))?g.innerHTML+=s.Boot.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};s.Boot.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};s.Boot.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+
"(",b=b+"\t",d=2,e=a.length;d<e;)var j=d++,c=2!=j?c+(","+s.Boot.__string_rec(a[j],b)):c+s.Boot.__string_rec(a[j],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)j=e++,d+=(0<j?",":"")+s.Boot.__string_rec(a[j],b);return d+"]"}try{d=a.toString}catch(g){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||("__class__"==c||"__super__"==c||"__interfaces__"==c||
"__properties__"==c)||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+s.Boot.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};s.Boot.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var j=d++,j=c[j];if(j==b||s.Boot.__interfLoop(j,b))return!0}return s.Boot.__interfLoop(a.__super__,b)};s.Boot.__instanceof=function(a,b){if(null==b)return!1;
switch(b){case ca:return(a|0)===a;case Z:return"number"==typeof a;case K:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case ea:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||s.Boot.__interfLoop(s.Boot.getClass(a),b)))return!0}else return!1;return b==aa&&null!=a.__name__||b==fa&&null!=a.__ename__?!0:a.__enum__==b}};s.Boot.__cast=function(a,b){if(s.Boot.__instanceof(a,b))return a;throw"Cannot cast "+k.string(a)+
" to "+k.string(b);};s.html={};s.html._CanvasElement={};s.html._CanvasElement.CanvasUtil=function(){};h["js.html._CanvasElement.CanvasUtil"]=s.html._CanvasElement.CanvasUtil;s.html._CanvasElement.CanvasUtil.__name__=["js","html","_CanvasElement","CanvasUtil"];s.html._CanvasElement.CanvasUtil.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};c.AssetCache=function(){this.enabled=!0;this.bitmapData=
new m.ds.StringMap;this.font=new m.ds.StringMap;this.sound=new m.ds.StringMap};h["openfl.AssetCache"]=c.AssetCache;c.AssetCache.__name__=["openfl","AssetCache"];c.AssetCache.prototype={clear:function(a){if(null==a)this.bitmapData=new m.ds.StringMap,this.font=new m.ds.StringMap,this.sound=new m.ds.StringMap;else{for(var b=this.bitmapData.keys();b.hasNext();){var c=b.next();C.startsWith(c,a)&&this.bitmapData.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),C.startsWith(c,a)&&this.font.remove(c);
for(b=this.sound.keys();b.hasNext();)c=b.next(),C.startsWith(c,a)&&this.sound.remove(c)}},__class__:c.AssetCache};c.Assets=function(){};h["openfl.Assets"]=c.Assets;c.Assets.__name__=["openfl","Assets"];c.Assets.addEventListener=function(a,b,f,d,e){null==e&&(e=!1);null==d&&(d=0);null==f&&(f=!1);c.Assets.initialize();c.Assets.dispatcher.addEventListener(a,b,f,d,e)};c.Assets.dispatchEvent=function(a){c.Assets.initialize();return c.Assets.dispatcher.dispatchEvent(a)};c.Assets.exists=function(a,b){c.Assets.initialize();
null==b&&(b=c.AssetType.BINARY);var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,null);f=c.Assets.getLibrary(f);return null!=f?f.exists(d,b):!1};c.Assets.getBitmapData=function(a,b){null==b&&(b=!0);c.Assets.initialize();if(b&&c.Assets.cache.enabled&&c.Assets.cache.bitmapData.exists(a)){var f=c.Assets.cache.bitmapData.get(a);if(c.Assets.isValidBitmapData(f))return f}var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=
e)if(e.exists(d,c.AssetType.IMAGE)){if(e.isLocal(d,c.AssetType.IMAGE))return f=e.getBitmapData(d),b&&c.Assets.cache.enabled&&c.Assets.cache.bitmapData.set(a,f),f;m.Log.trace('[openfl.Assets] BitmapData asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:139,className:"openfl.Assets",methodName:"getBitmapData"})}else m.Log.trace('[openfl.Assets] There is no BitmapData asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:145,className:"openfl.Assets",methodName:"getBitmapData"});
else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:151,className:"openfl.Assets",methodName:"getBitmapData"});return null};c.Assets.getBytes=function(a){c.Assets.initialize();var b=a.substring(0,a.indexOf(":")),f;f=a.indexOf(":")+1;f=w.substr(a,f,null);var d=c.Assets.getLibrary(b);if(null!=d)if(d.exists(f,c.AssetType.BINARY)){if(d.isLocal(f,c.AssetType.BINARY))return d.getBytes(f);m.Log.trace('[openfl.Assets] String or ByteArray asset "'+a+
'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:188,className:"openfl.Assets",methodName:"getBytes"})}else m.Log.trace('[openfl.Assets] There is no String or ByteArray asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:194,className:"openfl.Assets",methodName:"getBytes"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+b+'"',{fileName:"Assets.hx",lineNumber:200,className:"openfl.Assets",methodName:"getBytes"});return null};c.Assets.getFont=function(a,
b){null==b&&(b=!0);c.Assets.initialize();if(b&&c.Assets.cache.enabled&&c.Assets.cache.font.exists(a))return c.Assets.cache.font.get(a);var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=e)if(e.exists(d,c.AssetType.FONT)){if(e.isLocal(d,c.AssetType.FONT))return f=e.getFont(d),b&&c.Assets.cache.enabled&&c.Assets.cache.font.set(a,f),f;m.Log.trace('[openfl.Assets] Font asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",
lineNumber:251,className:"openfl.Assets",methodName:"getFont"})}else m.Log.trace('[openfl.Assets] There is no Font asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:257,className:"openfl.Assets",methodName:"getFont"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:263,className:"openfl.Assets",methodName:"getFont"});return null};c.Assets.getLibrary=function(a){if(null==a||""==a)a="default";return c.Assets.libraries.get(a)};c.Assets.getMovieClip=
function(a){c.Assets.initialize();var b=a.substring(0,a.indexOf(":")),f;f=a.indexOf(":")+1;f=w.substr(a,f,null);var d=c.Assets.getLibrary(b);if(null!=d)if(d.exists(f,c.AssetType.MOVIE_CLIP)){if(d.isLocal(f,c.AssetType.MOVIE_CLIP))return d.getMovieClip(f);m.Log.trace('[openfl.Assets] MovieClip asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:313,className:"openfl.Assets",methodName:"getMovieClip"})}else m.Log.trace('[openfl.Assets] There is no MovieClip asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:319,className:"openfl.Assets",methodName:"getMovieClip"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+b+'"',{fileName:"Assets.hx",lineNumber:325,className:"openfl.Assets",methodName:"getMovieClip"});return null};c.Assets.getMusic=function(a,b){null==b&&(b=!0);c.Assets.initialize();if(b&&c.Assets.cache.enabled&&c.Assets.cache.sound.exists(a)){var f=c.Assets.cache.sound.get(a);if(c.Assets.isValidSound(f))return f}var f=a.substring(0,a.indexOf(":")),
d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=e)if(e.exists(d,c.AssetType.MUSIC)){if(e.isLocal(d,c.AssetType.MUSIC))return f=e.getMusic(d),b&&c.Assets.cache.enabled&&c.Assets.cache.sound.set(a,f),f;m.Log.trace('[openfl.Assets] Sound asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:382,className:"openfl.Assets",methodName:"getMusic"})}else m.Log.trace('[openfl.Assets] There is no Sound asset with an ID of "'+a+'"',{fileName:"Assets.hx",
lineNumber:388,className:"openfl.Assets",methodName:"getMusic"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:394,className:"openfl.Assets",methodName:"getMusic"});return null};c.Assets.getPath=function(a){c.Assets.initialize();var b=a.substring(0,a.indexOf(":")),f;f=a.indexOf(":")+1;f=w.substr(a,f,null);var d=c.Assets.getLibrary(b);if(null!=d){if(d.exists(f,null))return d.getPath(f);m.Log.trace('[openfl.Assets] There is no asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:429,className:"openfl.Assets",methodName:"getPath"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+b+'"',{fileName:"Assets.hx",lineNumber:435,className:"openfl.Assets",methodName:"getPath"});return null};c.Assets.getSound=function(a,b){null==b&&(b=!0);c.Assets.initialize();if(b&&c.Assets.cache.enabled&&c.Assets.cache.sound.exists(a)){var f=c.Assets.cache.sound.get(a);if(c.Assets.isValidSound(f))return f}var f=a.substring(0,a.indexOf(":")),
d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=e)if(e.exists(d,c.AssetType.SOUND)){if(e.isLocal(d,c.AssetType.SOUND))return f=e.getSound(d),b&&c.Assets.cache.enabled&&c.Assets.cache.sound.set(a,f),f;m.Log.trace('[openfl.Assets] Sound asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:492,className:"openfl.Assets",methodName:"getSound"})}else m.Log.trace('[openfl.Assets] There is no Sound asset with an ID of "'+a+'"',{fileName:"Assets.hx",
lineNumber:498,className:"openfl.Assets",methodName:"getSound"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:504,className:"openfl.Assets",methodName:"getSound"});return null};c.Assets.getText=function(a){c.Assets.initialize();var b=a.substring(0,a.indexOf(":")),f;f=a.indexOf(":")+1;f=w.substr(a,f,null);var d=c.Assets.getLibrary(b);if(null!=d)if(d.exists(f,c.AssetType.TEXT)){if(d.isLocal(f,c.AssetType.TEXT))return d.getText(f);m.Log.trace('[openfl.Assets] String asset "'+
a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:541,className:"openfl.Assets",methodName:"getText"})}else m.Log.trace('[openfl.Assets] There is no String asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:547,className:"openfl.Assets",methodName:"getText"});else m.Log.trace('[openfl.Assets] There is no asset library named "'+b+'"',{fileName:"Assets.hx",lineNumber:553,className:"openfl.Assets",methodName:"getText"});return null};c.Assets.hasEventListener=function(a){c.Assets.initialize();
return c.Assets.dispatcher.hasEventListener(a)};c.Assets.initialize=function(){c.Assets.initialized||(c.Assets.registerLibrary("default",new S),c.Assets.initialized=!0)};c.Assets.isLocal=function(a,b,f){null==f&&(f=!0);c.Assets.initialize();if(f&&c.Assets.cache.enabled&&((b==c.AssetType.IMAGE||null==b)&&c.Assets.cache.bitmapData.exists(a)||(b==c.AssetType.FONT||null==b)&&c.Assets.cache.font.exists(a)||(b==c.AssetType.SOUND||b==c.AssetType.MUSIC||null==b)&&c.Assets.cache.sound.exists(a)))return!0;
var f=a.substring(0,a.indexOf(":")),d=a.indexOf(":")+1,a=w.substr(a,d,null),f=c.Assets.getLibrary(f);return null!=f?f.isLocal(a,b):!1};c.Assets.isValidBitmapData=function(a){return null!=a.__sourceImage||null!=a.__sourceCanvas};c.Assets.isValidSound=function(){return!0};c.Assets.list=function(a){c.Assets.initialize();for(var b=[],f=c.Assets.libraries.iterator();f.hasNext();){var d=f.next().list(a);null!=d&&(b=b.concat(d))}return b};c.Assets.loadBitmapData=function(a,b,f){null==f&&(f=!0);c.Assets.initialize();
if(f&&c.Assets.cache.enabled&&c.Assets.cache.bitmapData.exists(a)){var d=c.Assets.cache.bitmapData.get(a);if(c.Assets.isValidBitmapData(d)){b(d);return}}var d=a.substring(0,a.indexOf(":")),e;e=a.indexOf(":")+1;e=w.substr(a,e,null);var j=c.Assets.getLibrary(d);if(null!=j){if(j.exists(e,c.AssetType.IMAGE)){f&&c.Assets.cache.enabled?j.loadBitmapData(e,function(f){c.Assets.cache.bitmapData.set(a,f);b(f)}):j.loadBitmapData(e,b);return}m.Log.trace('[openfl.Assets] There is no BitmapData asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:750,className:"openfl.Assets",methodName:"loadBitmapData"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+d+'"',{fileName:"Assets.hx",lineNumber:756,className:"openfl.Assets",methodName:"loadBitmapData"});b(null)};c.Assets.loadBytes=function(a,b){c.Assets.initialize();var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=e){if(e.exists(d,c.AssetType.BINARY)){e.loadBytes(d,b);
return}m.Log.trace('[openfl.Assets] There is no String or ByteArray asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:786,className:"openfl.Assets",methodName:"loadBytes"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:792,className:"openfl.Assets",methodName:"loadBytes"});b(null)};c.Assets.loadFont=function(a,b,f){null==f&&(f=!0);c.Assets.initialize();if(f&&c.Assets.cache.enabled&&c.Assets.cache.font.exists(a))b(c.Assets.cache.font.get(a));
else{var d=a.substring(0,a.indexOf(":")),e;e=a.indexOf(":")+1;e=w.substr(a,e,null);var j=c.Assets.getLibrary(d);if(null!=j){if(j.exists(e,c.AssetType.FONT)){f&&c.Assets.cache.enabled?j.loadFont(e,function(f){c.Assets.cache.font.set(a,f);b(f)}):j.loadFont(e,b);return}m.Log.trace('[openfl.Assets] There is no Font asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:843,className:"openfl.Assets",methodName:"loadFont"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+d+'"',
{fileName:"Assets.hx",lineNumber:849,className:"openfl.Assets",methodName:"loadFont"});b(null)}};c.Assets.loadLibrary=function(a,b){c.Assets.initialize();var f=c.Assets.getText("libraries/"+a+".dat");null!=f&&""!=f?(f=new m.Unserializer(f),f.setResolver({resolveEnum:c.Assets.resolveEnum,resolveClass:c.Assets.resolveClass}),f=f.unserialize(),c.Assets.libraries.set(a,f),f.eventCallback=c.Assets.library_onEvent,f.load(b)):m.Log.trace('[openfl.Assets] There is no asset library named "'+a+'"',{fileName:"Assets.hx",
lineNumber:880,className:"openfl.Assets",methodName:"loadLibrary"})};c.Assets.loadMusic=function(a,b,f){null==f&&(f=!0);c.Assets.initialize();if(f&&c.Assets.cache.enabled&&c.Assets.cache.sound.exists(a)){var d=c.Assets.cache.sound.get(a);if(c.Assets.isValidSound(d)){b(d);return}}var d=a.substring(0,a.indexOf(":")),e;e=a.indexOf(":")+1;e=w.substr(a,e,null);var j=c.Assets.getLibrary(d);if(null!=j){if(j.exists(e,c.AssetType.MUSIC)){f&&c.Assets.cache.enabled?j.loadMusic(e,function(f){c.Assets.cache.sound.set(a,
f);b(f)}):j.loadMusic(e,b);return}m.Log.trace('[openfl.Assets] There is no Sound asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:935,className:"openfl.Assets",methodName:"loadMusic"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+d+'"',{fileName:"Assets.hx",lineNumber:941,className:"openfl.Assets",methodName:"loadMusic"});b(null)};c.Assets.loadMovieClip=function(a,b){c.Assets.initialize();var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,
null);var e=c.Assets.getLibrary(f);if(null!=e){if(e.exists(d,c.AssetType.MOVIE_CLIP)){e.loadMovieClip(d,b);return}m.Log.trace('[openfl.Assets] There is no MovieClip asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:971,className:"openfl.Assets",methodName:"loadMovieClip"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:977,className:"openfl.Assets",methodName:"loadMovieClip"});b(null)};c.Assets.loadSound=function(a,b,f){null==
f&&(f=!0);c.Assets.initialize();if(f&&c.Assets.cache.enabled&&c.Assets.cache.sound.exists(a)){var d=c.Assets.cache.sound.get(a);if(c.Assets.isValidSound(d)){b(d);return}}var d=a.substring(0,a.indexOf(":")),e;e=a.indexOf(":")+1;e=w.substr(a,e,null);var j=c.Assets.getLibrary(d);if(null!=j){if(j.exists(e,c.AssetType.SOUND)){f&&c.Assets.cache.enabled?j.loadSound(e,function(f){c.Assets.cache.sound.set(a,f);b(f)}):j.loadSound(e,b);return}m.Log.trace('[openfl.Assets] There is no Sound asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:1034,className:"openfl.Assets",methodName:"loadSound"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+d+'"',{fileName:"Assets.hx",lineNumber:1040,className:"openfl.Assets",methodName:"loadSound"});b(null)};c.Assets.loadText=function(a,b){c.Assets.initialize();var f=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=w.substr(a,d,null);var e=c.Assets.getLibrary(f);if(null!=e){if(e.exists(d,c.AssetType.TEXT)){e.loadText(d,b);return}m.Log.trace('[openfl.Assets] There is no String asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:1070,className:"openfl.Assets",methodName:"loadText"})}else m.Log.trace('[openfl.Assets] There is no asset library named "'+f+'"',{fileName:"Assets.hx",lineNumber:1076,className:"openfl.Assets",methodName:"loadText"});b(null)};c.Assets.registerLibrary=function(a,b){c.Assets.libraries.exists(a)&&c.Assets.unloadLibrary(a);null!=b&&(b.eventCallback=c.Assets.library_onEvent);c.Assets.libraries.set(a,b)};c.Assets.removeEventListener=function(a,b,f){null==f&&(f=!1);
c.Assets.initialize();c.Assets.dispatcher.removeEventListener(a,b,f)};c.Assets.resolveClass=function(a){return B.resolveClass(a)};c.Assets.resolveEnum=function(a){return B.resolveEnum(a)};c.Assets.unloadLibrary=function(a){c.Assets.initialize();var b=c.Assets.libraries.get(a);null!=b&&(c.Assets.cache.clear(a+":"),b.eventCallback=null);c.Assets.libraries.remove(a)};c.Assets.library_onEvent=function(a,b){"change"==b&&(c.Assets.cache.clear(),c.Assets.dispatchEvent(new c.events.Event(c.events.Event.CHANGE)))};
c.AssetData=function(){};h["openfl.AssetData"]=c.AssetData;c.AssetData.__name__=["openfl","AssetData"];c.AssetData.prototype={__class__:c.AssetData};c.AssetType=h["openfl.AssetType"]={__ename__:!0,__constructs__:"BINARY FONT IMAGE MOVIE_CLIP MUSIC SOUND TEMPLATE TEXT".split(" ")};c.AssetType.BINARY=["BINARY",0];c.AssetType.BINARY.toString=u;c.AssetType.BINARY.__enum__=c.AssetType;c.AssetType.FONT=["FONT",1];c.AssetType.FONT.toString=u;c.AssetType.FONT.__enum__=c.AssetType;c.AssetType.IMAGE=["IMAGE",
2];c.AssetType.IMAGE.toString=u;c.AssetType.IMAGE.__enum__=c.AssetType;c.AssetType.MOVIE_CLIP=["MOVIE_CLIP",3];c.AssetType.MOVIE_CLIP.toString=u;c.AssetType.MOVIE_CLIP.__enum__=c.AssetType;c.AssetType.MUSIC=["MUSIC",4];c.AssetType.MUSIC.toString=u;c.AssetType.MUSIC.__enum__=c.AssetType;c.AssetType.SOUND=["SOUND",5];c.AssetType.SOUND.toString=u;c.AssetType.SOUND.__enum__=c.AssetType;c.AssetType.TEMPLATE=["TEMPLATE",6];c.AssetType.TEMPLATE.toString=u;c.AssetType.TEMPLATE.__enum__=c.AssetType;c.AssetType.TEXT=
["TEXT",7];c.AssetType.TEXT.toString=u;c.AssetType.TEXT.__enum__=c.AssetType;c.Lib=function(){};h["openfl.Lib"]=c.Lib;c.Lib.__name__=["openfl","Lib"];c.Lib.current=null;c.Lib.as=function(a,b){return s.Boot.__instanceof(a,b)?a:null};c.Lib.attach=function(){return new c.display.MovieClip};c.Lib.create=function(a,b,f,d){null==b&&(b=0);null==f&&(f=0);for(var e=0,j=["ms","moz","webkit","o"],g=0;g<j.length&&!window.requestAnimationFrame;++g)window.requestAnimationFrame=window[j[g]+"RequestAnimationFrame"],
window.cancelAnimationFrame=window[j[g]+"CancelAnimationFrame"]||window[j[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-e)),f=window.setTimeout(function(){a(b+c)},c);e=b+c;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;a=new c.display.Stage(b,f,a,d);null==c.Lib.current&&(c.Lib.current=new c.display.MovieClip,
a.addChild(c.Lib.current))};c.Lib.getTimer=function(){return k["int"](1E3*(m.Timer.stamp()-c.Lib.__startTime))};c.Lib.getURL=function(a,b){null==b&&(b="_blank");window.open(a.url,b)};c.Lib.notImplemented=function(a){c.Lib.__sentWarnings.exists(a)||(c.Lib.__sentWarnings.set(a,!0),m.Log.trace("Warning: "+a+" is not implemented",{fileName:"Lib.hx",lineNumber:114,className:"openfl.Lib",methodName:"notImplemented"}))};c.Lib.preventDefaultTouchMove=function(){window.document.addEventListener("touchmove",
function(a){a.preventDefault()},!1)};c.Lib.trace=function(a){m.Log.trace(a,{fileName:"Lib.hx",lineNumber:134,className:"openfl.Lib",methodName:"trace"})};c.Memory=function(){};h["openfl.Memory"]=c.Memory;c.Memory.__name__=["openfl","Memory"];c.Memory.gcRef=null;c.Memory.len=null;c.Memory._setPositionTemporarily=function(a,b){var f=c.Memory.gcRef.position;c.Memory.gcRef.position=a;var d=b();c.Memory.gcRef.position=f;return d};c.Memory.getByte=function(a){return c.Memory.gcRef.__get(a)};c.Memory.getDouble=
function(a){return c.Memory._setPositionTemporarily(a,function(){return c.Memory.gcRef.readDouble()})};c.Memory.getFloat=function(a){return c.Memory._setPositionTemporarily(a,function(){return c.Memory.gcRef.readFloat()})};c.Memory.getI32=function(a){return c.Memory._setPositionTemporarily(a,function(){return c.Memory.gcRef.readInt()})};c.Memory.getUI16=function(a){return c.Memory._setPositionTemporarily(a,function(){return c.Memory.gcRef.readUnsignedShort()})};c.Memory.select=function(a){c.Memory.gcRef=
a;c.Memory.len=null!=a?a.length:0};c.Memory.setByte=function(a,b){c.Memory.gcRef.__set(a,b)};c.Memory.setDouble=function(a,b){c.Memory._setPositionTemporarily(a,function(){c.Memory.gcRef.writeDouble(b)})};c.Memory.setFloat=function(a,b){c.Memory._setPositionTemporarily(a,function(){c.Memory.gcRef.writeFloat(b)})};c.Memory.setI16=function(a,b){c.Memory._setPositionTemporarily(a,function(){c.Memory.gcRef.writeUnsignedShort(b)})};c.Memory.setI32=function(a,b){c.Memory._setPositionTemporarily(a,function(){c.Memory.gcRef.writeInt(b)})};
c.VectorDataIterator=function(a){this.index=0;this.vectorData=a};h["openfl.VectorDataIterator"]=c.VectorDataIterator;c.VectorDataIterator.__name__=["openfl","VectorDataIterator"];c.VectorDataIterator.prototype={hasNext:function(){return this.index<this.vectorData.length},next:function(){var a=this.index++;return this.vectorData.data[a]},__class__:c.VectorDataIterator};c.display.Bitmap=function(a,b,f){null==f&&(f=!1);c.display.DisplayObjectContainer.call(this);this.bitmapData=a;this.pixelSnapping=
b;this.smoothing=f;null==b&&(this.pixelSnapping=c.display.PixelSnapping.AUTO)};h["openfl.display.Bitmap"]=c.display.Bitmap;c.display.Bitmap.__name__=["openfl","display","Bitmap"];c.display.Bitmap.__super__=c.display.DisplayObjectContainer;c.display.Bitmap.prototype=q(c.display.DisplayObjectContainer.prototype,{__getBounds:function(a){if(null!=this.bitmapData){var b=new c.geom.Rectangle(0,0,this.bitmapData.width,this.bitmapData.height),b=b.transform(this.__worldTransform);a.__expand(b.x,b.y,b.width,
b.height)}},__hitTest:function(a,b,f,d){if(!this.get_visible()||null==this.bitmapData)return!1;a=this.globalToLocal(new c.geom.Point(a,b));return 0<a.x&&0<a.y&&a.x<=this.bitmapData.width&&a.y<=this.bitmapData.height?(null!=d&&d.push(this),!0):!1},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){var b=a.context;if(null!=this.bitmapData&&this.bitmapData.__valid){null!=this.__mask&&a.maskManager.pushMask(this.__mask);this.bitmapData.__syncImageData();b.globalAlpha=this.__worldAlpha;
var c=this.__worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,c.tx|0,c.ty|0):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);this.smoothing||(b.mozImageSmoothingEnabled=!1,b.webkitImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1);null==this.get_scrollRect()?null!=this.bitmapData.__sourceImage?b.drawImage(this.bitmapData.__sourceImage,0,0):b.drawImage(this.bitmapData.__sourceCanvas,0,0):null!=this.bitmapData.__sourceImage?b.drawImage(this.bitmapData.__sourceImage,this.get_scrollRect().x,this.get_scrollRect().y,
this.get_scrollRect().width,this.get_scrollRect().height,this.get_scrollRect().x,this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height):b.drawImage(this.bitmapData.__sourceCanvas,this.get_scrollRect().x,this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height,this.get_scrollRect().x,this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height);this.smoothing||(b.mozImageSmoothingEnabled=!0,b.webkitImageSmoothingEnabled=!0,b.imageSmoothingEnabled=
!0);null!=this.__mask&&a.maskManager.popMask()}}},__renderDOM:function(a){if(null!=this.stage&&this.__worldVisible&&this.__renderable&&null!=this.bitmapData&&this.bitmapData.__valid)null!=this.bitmapData.__sourceImage?this.__renderDOMImage(a):this.__renderDOMCanvas(a);else if(null!=this.__image&&(a.element.removeChild(this.__image),this.__style=this.__image=null),null!=this.__canvas)a.element.removeChild(this.__canvas),this.__style=this.__canvas=null},__renderDOMCanvas:function(a){null!=this.__image&&
(a.element.removeChild(this.__image),this.__image=null);null==this.__canvas&&(this.__canvas=window.document.createElement("canvas"),this.__canvasContext=this.__canvas.getContext("2d"),this.smoothing||(this.__canvasContext.mozImageSmoothingEnabled=!1,this.__canvasContext.webkitImageSmoothingEnabled=!1,this.__canvasContext.imageSmoothingEnabled=!1),this.__initializeElement(this.__canvas,a));this.bitmapData.__syncImageData();this.__canvas.width=this.bitmapData.width;this.__canvas.height=this.bitmapData.height;
this.__canvasContext.globalAlpha=this.__worldAlpha;this.__canvasContext.drawImage(this.bitmapData.__sourceCanvas,0,0);this.__applyStyle(a,!0,!1,!0)},__renderDOMImage:function(a){null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__canvas=null);null==this.__image&&(this.__image=window.document.createElement("img"),this.__image.src=this.bitmapData.__sourceImage.src,this.__initializeElement(this.__image,a));this.__applyStyle(a,!0,!0,!0)},__renderMask:function(a){a.context.rect(0,0,this.get_width(),
this.get_height())},get_height:function(){return null!=this.bitmapData?this.bitmapData.height*this.get_scaleY():0},set_height:function(a){return null!=this.bitmapData?(a!=this.bitmapData.height&&(this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),this.set_scaleY(a/this.bitmapData.height)),a):0},get_width:function(){return null!=this.bitmapData?this.bitmapData.width*this.get_scaleX():0},set_width:function(a){return null!=this.bitmapData?(a!=this.bitmapData.width&&
(this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),this.set_scaleX(a/this.bitmapData.width)),a):0},__class__:c.display.Bitmap});c.display.BitmapData=function(a,b,f,d){null==d&&(d=-1);null==f&&(f=!0);this.transparent=f;0<a&&0<b&&(this.width=a,this.height=b,this.rect=new c.geom.Rectangle(0,0,a,b),this.__createCanvas(a,b),f||(d=-16777216|d&16777215),this.__fillRect(new c.geom.Rectangle(0,0,a,b),d))};h["openfl.display.BitmapData"]=c.display.BitmapData;c.display.BitmapData.__name__=
["openfl","display","BitmapData"];c.display.BitmapData.__interfaces__=[c.display.IBitmapDrawable];c.display.BitmapData.__base64Encoder=null;c.display.BitmapData.fromBase64=function(a,b,f){var d=new c.display.BitmapData(0,0,!0);d.__loadFromBase64(a,b,f);return d};c.display.BitmapData.fromBytes=function(a,b,f){var d=new c.display.BitmapData(0,0,!0);d.__loadFromBytes(a,b,f);return d};c.display.BitmapData.fromFile=function(a,b,f){var d=new c.display.BitmapData(0,0,!0);d.__sourceImage=new Image;d.__sourceImage.onload=
function(){d.width=d.__sourceImage.width;d.height=d.__sourceImage.height;d.rect=new c.geom.Rectangle(0,0,d.__sourceImage.width,d.__sourceImage.height);d.__valid=!0;null!=b&&b(d)};d.__sourceImage.onerror=function(){d.__valid=!1;null!=f&&f()};d.__sourceImage.src=a;return d};c.display.BitmapData.fromImage=function(a,b){null==b&&(b=!0);var f=new c.display.BitmapData(0,0,b);f.__sourceImage=a;f.width=a.width;f.height=a.height;f.rect=new c.geom.Rectangle(0,0,a.width,a.height);f.__valid=!0;return f};c.display.BitmapData.fromCanvas=
function(a,b){null==b&&(b=!0);var f=new c.display.BitmapData(0,0,b);f.width=a.width;f.height=a.height;f.rect=new c.geom.Rectangle(0,0,a.width,a.height);f.__createCanvas(a.width,a.height);f.__sourceContext.drawImage(a,0,0);return f};c.display.BitmapData.__base64Encode=function(a){var b;switch(a.length%3){case 1:b="==";break;case 2:b="=";break;default:b=""}null==c.display.BitmapData.__base64Encoder&&(c.display.BitmapData.__base64Encoder=new m.crypto.BaseCode(m.io.Bytes.ofString(c.display.BitmapData.__base64Chars)));
return c.display.BitmapData.__base64Encoder.encodeBytes(m.io.Bytes.ofData(a.byteView)).toString()+b};c.display.BitmapData.__flipPixel=function(a){return(a&255)<<24|(a>>8&255)<<16|(a>>16&255)<<8|a>>24&255};c.display.BitmapData.__isJPG=function(a){a.position=0;return 255==a.readUnsignedByte()&&216==a.readUnsignedByte()};c.display.BitmapData.__isPNG=function(a){a.position=0;return 137==a.readUnsignedByte()&&80==a.readUnsignedByte()&&78==a.readUnsignedByte()&&71==a.readUnsignedByte()&&13==a.readUnsignedByte()&&
10==a.readUnsignedByte()&&26==a.readUnsignedByte()&&10==a.readUnsignedByte()};c.display.BitmapData.__isGIF=function(a){a.position=0;if(71==a.readUnsignedByte()&&73==a.readUnsignedByte()&&70==a.readUnsignedByte()&&38==a.readUnsignedByte()){var b=a.readUnsignedByte();return(7==b||9==b)&&97==a.readUnsignedByte()}return!1};c.display.BitmapData.__ucompare=function(a,b){var c,d;c=a>>24&255;d=b>>24&255;if(c!=d)return c>d?1:-1;c=a>>16&255;d=b>>16&255;if(c!=d)return c>d?1:-1;c=a>>8&255;d=b>>8&255;if(c!=d)return c>
d?1:-1;c=a&255;d=b&255;return c!=d?c>d?1:-1:0};c.display.BitmapData.prototype={applyFilter:function(a,b,c,d){this.__valid&&(null!=a&&a.__valid)&&(this.__convertToCanvas(),this.__createImageData(),a.__convertToCanvas(),a.__createImageData(),d.__applyFilter(this.__sourceImageData,a.__sourceImageData,b,c),this.__sourceImageDataChanged=!0)},clone:function(){this.__syncImageData();return this.__valid?null!=this.__sourceImage?c.display.BitmapData.fromImage(this.__sourceImage,this.transparent):c.display.BitmapData.fromCanvas(this.__sourceCanvas,
this.transparent):new c.display.BitmapData(this.width,this.height,this.transparent)},colorTransform:function(a,b){a=this.__clipRect(a);if(this.__valid&&null!=a){this.__convertToCanvas();this.__createImageData();for(var c=this.__sourceImageData.data,d=4*this.width,e,j=a.y|0,g=a.height|0;j<g;)for(var o=j++,h=a.x|0,k=a.width|0;h<k;)e=h++,e=o*d+4*e,c[e]=c[e]*b.redMultiplier+b.redOffset|0,c[e+1]=c[e+1]*b.greenMultiplier+b.greenOffset|0,c[e+2]=c[e+2]*b.blueMultiplier+b.blueOffset|0,c[e+3]=c[e+3]*b.alphaMultiplier+
b.alphaOffset|0;this.__sourceImageDataChanged=!0}},copyChannel:function(a,b,c,d,e){b=this.__clipRect(b);if(this.__valid&&null!=b&&(8!=e||this.transparent))if(!(0>=b.width||0>=b.height)){b.x+b.width>a.width&&(b.width=a.width-b.x);b.y+b.height>a.height&&(b.height=a.height-b.y);var j=-1;if(8==e)j=3;else if(4==e)j=2;else if(2==e)j=1;else if(1==e)j=0;else throw"Invalid destination BitmapDataChannel passed to BitmapData::copyChannel.";e=-1;if(8==d)e=3;else if(4==d)e=2;else if(2==d)e=1;else if(1==d)e=0;
else throw"Invalid source BitmapDataChannel passed to BitmapData::copyChannel.";a.__convertToCanvas();a.__createImageData();var d=a.__sourceImageData.data,a=4*a.width|0,e=4*b.x+a*b.y+e|0,g=a-(4*b.width|0),o=4*(b.x+b.width)|0;this.__convertToCanvas();this.__createImageData();for(var h=this.__sourceImageData.data,k=4*this.width|0,j=4*c.x+k*c.y+j|0,n=k-(4*b.width|0),c=4*(c.x+b.width)|0,b=b.width*b.height|0,l=0;l<b;)l++,h[j]=d[e],e+=4,j+=4,e%a>o&&(e+=g),j%k>c&&(j+=n);this.__sourceImageDataChanged=!0}},
copyPixels:function(a,b,f,d,e,j){null==j&&(j=!1);if(this.__valid&&null!=a&&(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),!(0>=b.width||0>=b.height)))null!=d&&d.transparent&&(null==e&&(e=new c.geom.Point),a=this.clone(),a.copyChannel(d,new c.geom.Rectangle(e.x,e.y,b.width,b.height),new c.geom.Point(b.x,b.y),8,8)),this.__syncImageData(),j||this.transparent&&a.transparent&&this.__sourceContext.clearRect(f.x,f.y,b.width,b.height),a.__syncImageData(),null!=
a.__sourceImage?this.__sourceContext.drawImage(a.__sourceImage,b.x|0,b.y|0,b.width|0,b.height|0,f.x|0,f.y|0,b.width|0,b.height|0):null!=a.__sourceCanvas&&this.__sourceContext.drawImage(a.__sourceCanvas,b.x|0,b.y|0,b.width|0,b.height|0,f.x|0,f.y|0,b.width|0,b.height|0)},dispose:function(){this.__sourceContext=this.__sourceCanvas=this.__sourceImage=null;this.height=this.width=0;this.rect=null;this.__valid=!1},draw:function(a,b,f,d,e,j){null==j&&(j=!1);this.__valid&&(this.__convertToCanvas(),this.__syncImageData(),
f=new c.display.RenderSession,f.context=this.__sourceContext,f.roundPixels=!0,j||(this.__sourceContext.mozImageSmoothingEnabled=!1,this.__sourceContext.webkitImageSmoothingEnabled=!1,this.__sourceContext.imageSmoothingEnabled=!1),d=a.__worldTransform,a.__worldTransform=null!=b?b:new c.geom.Matrix,a.__updateChildren(!1),a.__renderCanvas(f),a.__worldTransform=d,a.__updateChildren(!0),j||(this.__sourceContext.mozImageSmoothingEnabled=!0,this.__sourceContext.webkitImageSmoothingEnabled=!0,this.__sourceContext.imageSmoothingEnabled=
!0),this.__sourceContext.setTransform(1,0,0,1,0,0))},encode:function(){c.Lib.notImplemented("BitmapData.encode");return null},fillRect:function(a,b){a=this.__clipRect(a);this.__valid&&null!=a&&(this.__convertToCanvas(),this.__syncImageData(),0==a.x&&0==a.y&&a.width==this.width&&a.height==this.height&&this.transparent&&0==(b&-16777216)?this.__sourceCanvas.width=this.width:this.__fillRect(a,b))},floodFill:function(a,b,c){if(this.__valid){this.__convertToCanvas();this.__createImageData();var d=this.__sourceImageData.data,
e=b*4*this.width+4*a,j=d[e],g=d[e+1],o=d[e+2],e=this.transparent?d[e+3]:255,h=(c&16711680)>>>16,k=(c&65280)>>>8,n=c&255,c=this.transparent?(c&-16777216)>>>24:255;if(!(j==h&&g==k&&o==n&&e==c)){var l=[0,-1,1,0],m=[-1,0,0,1],q=[];q.push(a);for(q.push(b);0<q.length;)for(var a=q.pop(),b=q.pop(),r=0;4>r;){var s=r++,u=b+l[s],s=a+m[s];if(!(0>u||0>s||u>=this.width||s>=this.height)){var t=4*(s*this.width+u);d[t]==j&&(d[t+1]==g&&d[t+2]==o&&d[t+3]==e)&&(d[t]=h,d[t+1]=k,d[t+2]=n,d[t+3]=c,q.push(u),q.push(s))}}this.__sourceImageDataChanged=
!0}}},generateFilterRect:function(a){return a.clone()},getColorBoundsRect:function(){return this.rect.clone()},getPixel:function(a,b){if(!this.__valid||0>a||0>b||a>=this.width||b>=this.height)return 0;this.__convertToCanvas();this.__createImageData();var c=4*b*this.width+4*a;return this.__sourceImageData.data[c]<<16|this.__sourceImageData.data[c+1]<<8|this.__sourceImageData.data[c+2]},getPixel32:function(a,b){if(!this.__valid||0>a||0>b||a>=this.width||b>=this.height)return 0;this.__convertToCanvas();
this.__createImageData();return this.__getInt32(4*b*this.width+4*a,this.__sourceImageData.data)},getPixels:function(a){if(!this.__valid)return null;this.__convertToCanvas();this.__createImageData();var b=new c.utils.ByteArray;if(null==a||a.equals(this.rect))b.set_length(this.__sourceImageData.data.length),b.byteView.set(this.__sourceImageData.data);else{var f=this.__sourceImageData.data,d=4*this.width|0,e=4*a.x+d*a.y|0,j=d-(4*a.width|0),g=4*(a.x+a.width)|0,a=4*a.width*a.height|0;b.allocated<a?b.___resizeBuffer(b.allocated=
k["int"](Math.max(a,2*b.allocated))):b.allocated>a&&b.___resizeBuffer(b.allocated=a);b.length=a;a;for(var o=0;o<a;){var h=o++;b.__set(h,f[e++]);e%d>g&&(e+=j)}}b.position=0;return b},getVector:function(a){for(var a=this.getPixels(a),b=a.length/4|0,f=c._Vector.Vector_Impl_._new(b),d=0;d<b;){var e=d++,j=a.readUnsignedInt();e>=f.length&&!f.fixed&&(f.length=e+1);f.data[e]=j}return f},histogram:function(a){for(var a=null!=a?a:new c.geom.Rectangle(0,0,this.width,this.height),a=this.getPixels(a),b=[],f=0;4>
f;)f++,b.push(function(){for(var a=[],b=0;256>b;)b++,a.push(0);return a}(this));for(var f=0,d=a.length;f<d;){var e=f++;++b[e%4][a.readUnsignedByte()]}return b},hitTest:function(){if(!this.__valid)return!1;c.Lib.notImplemented("BitmapData.hitTest");return!1},lock:function(){},noise:function(){this.__valid&&c.Lib.notImplemented("BitmapData.noise")},paletteMap:function(a,b,f,d,e,j){var a=new c.utils.ByteArray,g=b.width|0,o=b.height|0;a.set_length(4*g*o);a=this.getPixels(b);a.position=0;c.Memory.select(a);
for(var h,k,n,l=0,m=o*g;l<m;)b=4*l++,h=c.Memory._setPositionTemporarily(b,function(){return c.Memory.gcRef.readInt()}),k=h>>8&255,n=h>>16&255,h=h>>24&255,k=c.display.BitmapData.__flipPixel(-16777216|d[k]|e[n]|j[h]),c.Memory.setI32(b,k);a.position=0;f=new c.geom.Rectangle(f.x,f.y,g,o);this.setPixels(f,a);c.Memory.select(null)},perlinNoise:function(){c.Lib.notImplemented("BitmapData.perlinNoise")},scroll:function(){c.Lib.notImplemented("BitmapData.scroll")},setVector:function(a,b){var f=new c.utils.ByteArray;
f.set_length(4*b.length);for(var d=0;d<b.length;){var e=b.data[d];++d;f.writeUnsignedInt(e)}f.position=0;this.setPixels(a,f)},setPixel:function(a,b,c){if(this.__valid&&!(0>a||0>b||a>=this.width||b>=this.height))this.__convertToCanvas(),this.__createImageData(),a=4*b*this.width+4*a,this.__sourceImageData.data[a]=(c&16711680)>>>16,this.__sourceImageData.data[a+1]=(c&65280)>>>8,this.__sourceImageData.data[a+2]=c&255,this.transparent&&(this.__sourceImageData.data[a+3]=255),this.__sourceImageDataChanged=
!0},setPixel32:function(a,b,c){if(this.__valid&&!(0>a||0>b||a>=this.width||b>=this.height))this.__convertToCanvas(),this.__createImageData(),a=4*b*this.width+4*a,this.__sourceImageData.data[a]=(c&16711680)>>>16,this.__sourceImageData.data[a+1]=(c&65280)>>>8,this.__sourceImageData.data[a+2]=c&255,this.__sourceImageData.data[a+3]=this.transparent?(c&-16777216)>>>24:255,this.__sourceImageDataChanged=!0},setPixels:function(a,b){a=this.__clipRect(a);if(this.__valid&&null!=a){this.__convertToCanvas();var c=
Math.round(4*a.width*a.height);if(0==a.x&&0==a.y&&a.width==this.width&&a.height==this.height)null==this.__sourceImageData&&(this.__sourceImageData=this.__sourceContext.createImageData(this.width,this.height)),this.__sourceImageData.data.set(b.byteView);else{this.__createImageData();for(var d=Math.round(4*this.width*a.y+4*a.x),e=Math.round(4*(a.x+a.width)),j=this.__sourceImageData.data,g=0;g<c;)g++,d%(4*this.width)>e-1&&(d+=4*this.width-e),j[d]=b.readByte(),d++}this.__sourceImageDataChanged=!0}},threshold:function(a,
b,f,d,e,j,g,o){null==o&&(o=!1);null==g&&(g=-1);null==j&&(j=0);if(a==this&&b.equals(this.rect)&&0==f.x&&0==f.y){b=0;e=(e&255)<<24|(e>>8&255)<<16|(e>>16&255)<<8|e>>24&255;j=(j&255)<<24|(j>>8&255)<<16|(j>>16&255)<<8|j>>24&255;f=new c.utils.ByteArray;f.set_length(4*this.width*this.height);f=this.getPixels(this.rect);f.position=0;c.Memory.select(f);for(var o=e&g,h,l,n,m,q=0,r=this.height;q<r;){h=q++;h*=this.width;for(var s=0,u=this.width;s<u;)l=s++,l=4*(h+l),n=c.Memory._setPositionTemporarily(l,function(){return c.Memory.gcRef.readInt()}),
n&=g,n=c.display.BitmapData.__ucompare(n,o),m=!1,"=="==d?m=0==n:"<"==d?m=-1==n:">"==d?m=1==n:"!="==d?m=0!=n:"<="==d?m=0==n||-1==n:">="==d&&(m=0==n||1==n),m&&(c.Memory.setI32(l,j),b++)}f.position=0;this.setPixels(this.rect,f);c.Memory.select(null);return b}q=b.x|0;r=b.y|0;h=a.width|0;m=a.height|0;s=f.x|0;u=f.y|0;l=this.width-h-s;s=0>l?h+(this.width-h-s):h;u=0>l?m+(this.height-m-u):m;l=0;e=(e&255)<<24|(e>>8&255)<<16|(e>>16&255)<<8|e>>24&255;j=(j&255)<<24|(j>>8&255)<<16|(j>>16&255)<<8|j>>24&255;n=4*
h*m;var t=0;o&&(t=4*h*m);t=n+t;m=new c.utils.ByteArray;m.allocated<t?m.___resizeBuffer(m.allocated=k["int"](Math.max(t,2*m.allocated))):m.allocated>t&&m.___resizeBuffer(m.allocated=t);m.length=t;t;m.position=0;a=a.clone();t=a.getPixels(b);m.writeBytes(t);m.position=n;o&&m.writeBytes(t);m.position=0;c.Memory.select(m);for(var e=e&g,v,w,x=0;x<u;)for(var y=x++,B=0;B<s;)t=4*(B++ +q+(y+r)*h),v=c.Memory._setPositionTemporarily(t,function(){return c.Memory.gcRef.readInt()}),v&=g,v=c.display.BitmapData.__ucompare(v,
e),w=!1,"=="==d?w=0==v:"<"==d?w=-1==v:">"==d?w=1==v:"!="==d?w=0!=v:"<="==d?w=0==v||-1==v:">="==d&&(w=0==v||1==v),w?(c.Memory.setI32(t,j),l++):o&&c.Memory.setI32(t,c.Memory._setPositionTemporarily(n+t,function(){return c.Memory.gcRef.readInt()}));m.position=0;a.setPixels(b,m);this.copyPixels(a,a.rect,f);c.Memory.select(null);return l},unlock:function(){},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&
(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__convertToCanvas:function(){!this.__loading&&null!=this.__sourceImage&&(null==this.__sourceCanvas&&(this.__createCanvas(this.__sourceImage.width,this.__sourceImage.height),this.__sourceContext.drawImage(this.__sourceImage,0,0)),this.__sourceImage=null)},__createCanvas:function(a,b){null==this.__sourceCanvas&&(this.__sourceCanvas=window.document.createElement("canvas"),
this.__sourceCanvas.width=a,this.__sourceCanvas.height=b,this.transparent?this.__sourceContext=this.__sourceCanvas.getContext("2d"):(this.transparent||this.__sourceCanvas.setAttribute("moz-opaque","true"),this.__sourceContext=this.__sourceCanvas.getContext("2d",{alpha:!1})),this.__sourceContext.mozImageSmoothingEnabled=!1,this.__sourceContext.webkitImageSmoothingEnabled=!1,this.__sourceContext.imageSmoothingEnabled=!1,this.__valid=!0)},__createImageData:function(){null==this.__sourceImageData&&(this.__sourceImageData=
this.__sourceContext.getImageData(0,0,this.width,this.height))},__fillRect:function(a,b){this.__sourceContext.fillStyle="rgba("+((b&16711680)>>>16)+", "+((b&65280)>>>8)+", "+(b&255)+", "+(this.transparent?(b&-16777216)>>>24:255)/255+")";this.__sourceContext.fillRect(a.x,a.y,a.width,a.height)},__getInt32:function(a,b){return(this.transparent?b[a+3]:255)<<24|b[a]<<16|b[a+1]<<8|b[a+2]},__loadFromBase64:function(a,b,f){var d=this;this.__sourceImage=window.document.createElement("img");this.__sourceImage.addEventListener("load",
function(a){null==d.__sourceImage&&(d.__sourceImage=a.target);d.width=d.__sourceImage.width;d.height=d.__sourceImage.height;d.rect=new c.geom.Rectangle(0,0,d.width,d.height);d.__valid=!0;null!=f&&f(d)},!1);this.__sourceImage.src="data:"+b+";base64,"+a},__loadFromBytes:function(a,b,f){var d=this,e="";if(c.display.BitmapData.__isPNG(a))e="image/png";else if(c.display.BitmapData.__isJPG(a))e="image/jpeg";else if(c.display.BitmapData.__isGIF(a))e="image/gif";else throw new c.errors.IOError("BitmapData tried to read a PNG/JPG ByteArray, but found an invalid header.");
null!=b?this.__loadFromBase64(c.display.BitmapData.__base64Encode(a),e,function(){d.__convertToCanvas();d.__createImageData();for(var a=d.__sourceImageData.data,c=0,e=b.length;c<e;){var i=c++;a[4*i+3]=b.readUnsignedByte()}d.__sourceImageDataChanged=!0;null!=f&&f(d)}):this.__loadFromBase64(c.display.BitmapData.__base64Encode(a),e,f)},__renderCanvas:function(a){if(this.__valid){this.__syncImageData();var b=a.context;null==this.__worldTransform&&(this.__worldTransform=new c.geom.Matrix);b.globalAlpha=
1;var f=this.__worldTransform;a.roundPixels?b.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):b.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty);null!=this.__sourceImage?b.drawImage(this.__sourceImage,0,0):b.drawImage(this.__sourceCanvas,0,0)}},__renderMask:function(){},__syncImageData:function(){this.__sourceImageDataChanged&&(this.__sourceContext.putImageData(this.__sourceImageData,0,0),this.__sourceImageData=null,this.__sourceImageDataChanged=!1)},__updateChildren:function(){},__class__:c.display.BitmapData};
c.display.BitmapDataChannel=function(){};h["openfl.display.BitmapDataChannel"]=c.display.BitmapDataChannel;c.display.BitmapDataChannel.__name__=["openfl","display","BitmapDataChannel"];c.display.BlendMode=h["openfl.display.BlendMode"]={__ename__:!0,__constructs__:"ADD ALPHA DARKEN DIFFERENCE ERASE HARDLIGHT INVERT LAYER LIGHTEN MULTIPLY NORMAL OVERLAY SCREEN SUBTRACT".split(" ")};c.display.BlendMode.ADD=["ADD",0];c.display.BlendMode.ADD.toString=u;c.display.BlendMode.ADD.__enum__=c.display.BlendMode;
c.display.BlendMode.ALPHA=["ALPHA",1];c.display.BlendMode.ALPHA.toString=u;c.display.BlendMode.ALPHA.__enum__=c.display.BlendMode;c.display.BlendMode.DARKEN=["DARKEN",2];c.display.BlendMode.DARKEN.toString=u;c.display.BlendMode.DARKEN.__enum__=c.display.BlendMode;c.display.BlendMode.DIFFERENCE=["DIFFERENCE",3];c.display.BlendMode.DIFFERENCE.toString=u;c.display.BlendMode.DIFFERENCE.__enum__=c.display.BlendMode;c.display.BlendMode.ERASE=["ERASE",4];c.display.BlendMode.ERASE.toString=u;c.display.BlendMode.ERASE.__enum__=
c.display.BlendMode;c.display.BlendMode.HARDLIGHT=["HARDLIGHT",5];c.display.BlendMode.HARDLIGHT.toString=u;c.display.BlendMode.HARDLIGHT.__enum__=c.display.BlendMode;c.display.BlendMode.INVERT=["INVERT",6];c.display.BlendMode.INVERT.toString=u;c.display.BlendMode.INVERT.__enum__=c.display.BlendMode;c.display.BlendMode.LAYER=["LAYER",7];c.display.BlendMode.LAYER.toString=u;c.display.BlendMode.LAYER.__enum__=c.display.BlendMode;c.display.BlendMode.LIGHTEN=["LIGHTEN",8];c.display.BlendMode.LIGHTEN.toString=
u;c.display.BlendMode.LIGHTEN.__enum__=c.display.BlendMode;c.display.BlendMode.MULTIPLY=["MULTIPLY",9];c.display.BlendMode.MULTIPLY.toString=u;c.display.BlendMode.MULTIPLY.__enum__=c.display.BlendMode;c.display.BlendMode.NORMAL=["NORMAL",10];c.display.BlendMode.NORMAL.toString=u;c.display.BlendMode.NORMAL.__enum__=c.display.BlendMode;c.display.BlendMode.OVERLAY=["OVERLAY",11];c.display.BlendMode.OVERLAY.toString=u;c.display.BlendMode.OVERLAY.__enum__=c.display.BlendMode;c.display.BlendMode.SCREEN=
["SCREEN",12];c.display.BlendMode.SCREEN.toString=u;c.display.BlendMode.SCREEN.__enum__=c.display.BlendMode;c.display.BlendMode.SUBTRACT=["SUBTRACT",13];c.display.BlendMode.SUBTRACT.toString=u;c.display.BlendMode.SUBTRACT.__enum__=c.display.BlendMode;c.display._CapsStyle={};c.display._CapsStyle.CapsStyle_Impl_=function(){};h["openfl.display._CapsStyle.CapsStyle_Impl_"]=c.display._CapsStyle.CapsStyle_Impl_;c.display._CapsStyle.CapsStyle_Impl_.__name__=["openfl","display","_CapsStyle","CapsStyle_Impl_"];
c.display.DirectRenderer=function(){c.display.DisplayObject.call(this)};h["openfl.display.DirectRenderer"]=c.display.DirectRenderer;c.display.DirectRenderer.__name__=["openfl","display","DirectRenderer"];c.display.DirectRenderer.__super__=c.display.DisplayObject;c.display.DirectRenderer.prototype=q(c.display.DisplayObject.prototype,{get_render:function(){return this.__render},set_render:function(a){return this.__render=a},__class__:c.display.DirectRenderer,__properties__:q(c.display.DisplayObject.prototype.__properties__,
{set_render:"set_render",get_render:"get_render"})});c.display.FrameLabel=function(a,b){c.events.EventDispatcher.call(this);this.__name=a;this.__frame=b};h["openfl.display.FrameLabel"]=c.display.FrameLabel;c.display.FrameLabel.__name__=["openfl","display","FrameLabel"];c.display.FrameLabel.__super__=c.events.EventDispatcher;c.display.FrameLabel.prototype=q(c.events.EventDispatcher.prototype,{get_frame:function(){return this.__frame},get_name:function(){return this.__name},__class__:c.display.FrameLabel,
__properties__:{get_name:"get_name",get_frame:"get_frame"}});c.display.GradientType=h["openfl.display.GradientType"]={__ename__:!0,__constructs__:["RADIAL","LINEAR"]};c.display.GradientType.RADIAL=["RADIAL",0];c.display.GradientType.RADIAL.toString=u;c.display.GradientType.RADIAL.__enum__=c.display.GradientType;c.display.GradientType.LINEAR=["LINEAR",1];c.display.GradientType.LINEAR.toString=u;c.display.GradientType.LINEAR.__enum__=c.display.GradientType;c.display.Graphics=function(){this.__commands=
[];this.__positionY=this.__positionX=this.__halfStrokeWidth=0};h["openfl.display.Graphics"]=c.display.Graphics;c.display.Graphics.__name__=["openfl","display","Graphics"];c.display.Graphics.prototype={beginBitmapFill:function(a,b,f,d){null==d&&(d=!1);null==f&&(f=!0);this.__commands.push(c.display.DrawCommand.BeginBitmapFill(a,b,f,d));this.__visible=!0},beginFill:function(a,b){null==b&&(b=1);this.__commands.push(c.display.DrawCommand.BeginFill(a&16777215,b));0<b&&(this.__visible=!0)},beginGradientFill:function(){c.Lib.notImplemented("Graphics.beginGradientFill")},
clear:function(){this.__commands=[];this.__halfStrokeWidth=0;null!=this.__bounds&&(this.__dirty=!0,this.__bounds=null);this.__visible=!1},curveTo:function(a,b,f,d){this.__inflateBounds(this.__positionX-this.__halfStrokeWidth,this.__positionY-this.__halfStrokeWidth);this.__inflateBounds(this.__positionX+this.__halfStrokeWidth,this.__positionY+this.__halfStrokeWidth);this.__inflateBounds(a,b);this.__positionX=f;this.__positionY=d;this.__inflateBounds(this.__positionX-this.__halfStrokeWidth,this.__positionY-
this.__halfStrokeWidth);this.__inflateBounds(this.__positionX+this.__halfStrokeWidth,this.__positionY+this.__halfStrokeWidth);this.__commands.push(c.display.DrawCommand.CurveTo(a,b,f,d));this.__dirty=!0},drawCircle:function(a,b,f){0>=f||(this.__inflateBounds(a-f-this.__halfStrokeWidth,b-f-this.__halfStrokeWidth),this.__inflateBounds(a+f+this.__halfStrokeWidth,b+f+this.__halfStrokeWidth),this.__commands.push(c.display.DrawCommand.DrawCircle(a,b,f)),this.__dirty=!0)},drawEllipse:function(a,b,f,d){0>=
f||0>=d||(this.__inflateBounds(a-this.__halfStrokeWidth,b-this.__halfStrokeWidth),this.__inflateBounds(a+f+this.__halfStrokeWidth,b+d+this.__halfStrokeWidth),this.__commands.push(c.display.DrawCommand.DrawEllipse(a,b,f,d)),this.__dirty=!0)},drawGraphicsData:function(){c.Lib.notImplemented("Graphics.drawGraphicsData")},drawPath:function(){c.Lib.notImplemented("Graphics.drawPath")},drawRect:function(a,b,f,d){0>=f||0>=d||(this.__inflateBounds(a-this.__halfStrokeWidth,b-this.__halfStrokeWidth),this.__inflateBounds(a+
f+this.__halfStrokeWidth,b+d+this.__halfStrokeWidth),this.__commands.push(c.display.DrawCommand.DrawRect(a,b,f,d)),this.__dirty=!0)},drawRoundRect:function(a,b,f,d,e,j){null==j&&(j=-1);0>=f||0>=d||(e>f/2&&(e=f/2),j>d/2&&(j=d/2),0>j&&(j=e),this.__inflateBounds(a-this.__halfStrokeWidth,b-this.__halfStrokeWidth),this.__inflateBounds(a+f+this.__halfStrokeWidth,b+d+this.__halfStrokeWidth),this.__commands.push(c.display.DrawCommand.DrawRoundRect(a,b,f,d,e,j)),this.__dirty=!0)},drawRoundRectComplex:function(){c.Lib.notImplemented("Graphics.drawRoundRectComplex")},
drawTiles:function(a,b,f,d,e){null==e&&(e=-1);null==d&&(d=0);null==f&&(f=!1);this.__inflateBounds(0,0);this.__inflateBounds(c.Lib.current.stage.stageWidth,c.Lib.current.stage.stageHeight);this.__commands.push(c.display.DrawCommand.DrawTiles(a,b,f,d,e));this.__visible=this.__dirty=!0},drawTriangles:function(){c.Lib.notImplemented("Graphics.drawTriangles")},endFill:function(){this.__commands.push(c.display.DrawCommand.EndFill)},lineBitmapStyle:function(){c.Lib.notImplemented("Graphics.lineBitmapStyle")},
lineGradientStyle:function(){c.Lib.notImplemented("Graphics.lineGradientStyle")},lineStyle:function(a,b,f,d,e,j,g,o){this.__halfStrokeWidth=null!=a?a/2:0;this.__commands.push(c.display.DrawCommand.LineStyle(a,b,f,d,e,j,g,o));null!=a&&(this.__visible=!0)},lineTo:function(a,b){this.__inflateBounds(this.__positionX-this.__halfStrokeWidth,this.__positionY-this.__halfStrokeWidth);this.__inflateBounds(this.__positionX+this.__halfStrokeWidth,this.__positionY+this.__halfStrokeWidth);this.__positionX=a;this.__positionY=
b;this.__inflateBounds(this.__positionX-this.__halfStrokeWidth,this.__positionY-this.__halfStrokeWidth);this.__inflateBounds(this.__positionX+this.__halfStrokeWidth,this.__positionY+this.__halfStrokeWidth);this.__commands.push(c.display.DrawCommand.LineTo(a,b));this.__dirty=!0},moveTo:function(a,b){this.__commands.push(c.display.DrawCommand.MoveTo(a,b));this.__positionX=a;this.__positionY=b},__beginPath:function(){this.__inPath||(this.__context.beginPath(),this.__inPath=!0)},__beginPatternFill:function(a,
b){this.__setFill||null==a||(null==this.__pattern&&(this.__pattern=null!=a.__sourceImage?this.__context.createPattern(a.__sourceImage,b?"repeat":"no-repeat"):this.__context.createPattern(a.__sourceCanvas,b?"repeat":"no-repeat")),this.__context.fillStyle=this.__pattern,this.__setFill=!0)},__closePath:function(a){this.__inPath&&(this.__hasFill&&(this.__context.translate(-this.__bounds.x,-this.__bounds.y),null!=this.__pendingMatrix?(this.__context.transform(this.__pendingMatrix.a,this.__pendingMatrix.b,
this.__pendingMatrix.c,this.__pendingMatrix.d,this.__pendingMatrix.tx,this.__pendingMatrix.ty),this.__context.fill(),this.__context.transform(this.__inversePendingMatrix.a,this.__inversePendingMatrix.b,this.__inversePendingMatrix.c,this.__inversePendingMatrix.d,this.__inversePendingMatrix.tx,this.__inversePendingMatrix.ty)):this.__context.fill(),this.__context.translate(this.__bounds.x,this.__bounds.y)),this.__context.closePath(),this.__hasStroke&&this.__context.stroke());this.__inPath=!1;a&&(this.__hasStroke=
this.__hasFill=!1,this.__inversePendingMatrix=this.__pendingMatrix=null)},__getBounds:function(a,b){if(null!=this.__bounds){var c=this.__bounds.clone().transform(b);a.__expand(c.x,c.y,c.width,c.height)}},__hitTest:function(a,b,c,d){if(null==this.__bounds)return!1;c=this.__bounds.clone().transform(d);return a>c.x&&b>c.y&&a<=c.get_right()&&b<=c.get_bottom()},__inflateBounds:function(a,b){if(null==this.__bounds)this.__bounds=new c.geom.Rectangle(a,b,0,0);else if(a<this.__bounds.x&&(this.__bounds.width+=
this.__bounds.x-a,this.__bounds.x=a),b<this.__bounds.y&&(this.__bounds.height+=this.__bounds.y-b,this.__bounds.y=b),a>this.__bounds.x+this.__bounds.width&&(this.__bounds.width=a-this.__bounds.x),b>this.__bounds.y+this.__bounds.height)this.__bounds.height=b-this.__bounds.y},__render:function(){if(this.__dirty){this.__inPath=this.__hasStroke=this.__hasFill=!1;this.__positionY=this.__positionX=0;if(!this.__visible||0==this.__commands.length||null==this.__bounds||0==this.__bounds.width||0==this.__bounds.height)this.__context=
this.__canvas=null;else{null==this.__canvas&&(this.__canvas=window.document.createElement("canvas"),this.__context=this.__canvas.getContext("2d"));this.__canvas.width=Math.ceil(this.__bounds.width);this.__canvas.height=Math.ceil(this.__bounds.height);for(var a=this.__bounds.x,b=this.__bounds.y,f=null,d=!1,e=0,j=this.__commands;e<j.length;){var g=j[e];++e;switch(g[1]){case 0:var o=g[4],h=g[3],g=g[2];this.__closePath(!1);if(g!=f||o!=d)f=g,d=o,this.__pattern=null,this.__setFill=!1,g.__syncImageData();
null!=h?(this.__pendingMatrix=h,this.__inversePendingMatrix=new c.geom.Matrix(h.a,h.b,h.c,h.d,h.tx,h.ty),this.__inversePendingMatrix.invert()):this.__inversePendingMatrix=this.__pendingMatrix=null;this.__hasFill=!0;break;case 1:f=g[3];g=g[2];this.__closePath(!1);this.__context.fillStyle=1==f?"#"+C.hex(g,6):"rgba("+((g&16711680)>>>16)+", "+((g&65280)>>>8)+", "+(g&255)+", "+f+")";f=null;this.__hasFill=this.__setFill=!0;break;case 2:var o=g[5],h=g[4],k=g[3],g=g[2];this.__beginPatternFill(f,d);this.__beginPath();
this.__context.quadraticCurveTo(g-a,k-b,h-a,o-b);this.__positionX=h;this.__positionY=o;break;case 3:o=g[4];h=g[3];g=g[2];this.__beginPatternFill(f,d);this.__beginPath();this.__context.moveTo(g-a+o,h-b);this.__context.arc(g-a,h-b,o,0,2*Math.PI,!0);break;case 4:var h=g[5],n=g[4],o=g[3],g=g[2],g=g-a,o=o-b,k=0.5522848*(n/2),l=0.5522848*(h/2),m=g+n,q=o+h,n=g+n/2,h=o+h/2;this.__beginPatternFill(f,d);this.__beginPath();this.__context.moveTo(g,h);this.__context.bezierCurveTo(g,h-l,n-k,o,n,o);this.__context.bezierCurveTo(n+
k,o,m,h-l,m,h);this.__context.bezierCurveTo(m,h+l,n+k,q,n,q);this.__context.bezierCurveTo(n-k,q,g,h+l,g,h);break;case 5:o=g[5];h=g[4];k=g[3];g=g[2];l=!1;if(null!=f){var r=m=0,s=n=0,q=!0;null!=this.__pendingMatrix?0!=this.__pendingMatrix.b||0!=this.__pendingMatrix.c?q=!1:(n=this.__inversePendingMatrix.transformPoint(new c.geom.Point(g,k)),r=this.__inversePendingMatrix.transformPoint(new c.geom.Point(g+h,k+o)),m=n.y,s=n.x,n=r.y,r=r.x):(m=k,s=g,n=k+o,r=g+h);q&&(0<=m&&0<=s&&r<=f.width&&n<=f.height)&&
(l=!0,null!=f.__sourceImage?this.__context.drawImage(f.__sourceImage,s,m,r-s,n-m,g,k,h,o):this.__context.drawImage(f.__sourceCanvas,s,m,r-s,n-m,g,k,h,o))}l||(this.__beginPatternFill(f,d),this.__beginPath(),this.__context.rect(g-a,k-b,h,o));break;case 6:o=g[7];h=g[6];k=g[5];l=g[4];m=g[3];g=g[2];this.__beginPatternFill(f,d);this.__beginPath();this.__drawRoundRect(g,m,l,k,h,o);break;case 7:var t=g[6],m=g[5],o=g[3],g=g[2];this.__closePath(!1);var h=0<(m&1),k=0<(m&2),l=0<(m&16),u=0<(m&4),m=0<(m&8);l&&
(k=h=!1);var r=s=n=q=0,v=3;h&&(q=v,v++);k&&(n=v,v++);l&&(r=v,v+=4);u&&(v+=3);m&&(s=v,v++);u=o.length;0<=t&&u>t&&(u=t);var t=0,w=null,x=null,y=-1,B;g.__bitmap.__syncImageData();for(B=null!=g.__bitmap.__sourceImage?g.__bitmap.__sourceImage:g.__bitmap.__sourceCanvas;t<u;){var E=o[t+2]|0;E!=y&&(w=g.__tileRects[E],x=g.__centerPoints[E],y=E);null!=w&&(0<w.width&&0<w.height&&null!=x)&&(this.__context.save(),this.__context.translate(o[t],o[t+1]),k&&this.__context.rotate(o[t+n]),E=1,h&&(E=o[t+q]),l&&this.__context.transform(o[t+
r],o[t+r+1],o[t+r+2],o[t+r+3],0,0),m&&(this.__context.globalAlpha=o[t+s]),this.__context.drawImage(B,w.x,w.y,w.width,w.height,-x.x*E,-x.y*E,w.width*E,w.height*E),this.__context.restore());t+=v}break;case 8:this.__closePath(!0);break;case 9:o=g[9];h=g[8];k=g[7];l=g[3];g=g[2];this.__closePath(!1);null==g?this.__hasStroke=!1:(this.__context.lineWidth=g,this.__context.lineJoin=h,this.__context.lineCap=k,this.__context.miterLimit=o,this.__context.strokeStyle="#"+C.hex(l,6),this.__hasStroke=!0);break;case 10:o=
g[3];g=g[2];this.__beginPatternFill(f,d);this.__beginPath();this.__context.lineTo(g-a,o-b);this.__positionX=g;this.__positionY=o;break;case 11:o=g[3],g=g[2],this.__beginPath(),this.__context.moveTo(g-a,o-b),this.__positionX=g,this.__positionY=o}}}this.__dirty=!1;this.__closePath(!1)}},__renderMask:function(a){if(0!=this.__commands.length)for(var a=a.context,b=0,c=this.__commands;b<c.length;){var d=c[b];++b;switch(d[1]){case 2:a.quadraticCurveTo(d[2],d[3],d[4],d[5]);break;case 3:a.arc(d[2]-0,d[3]-
0,d[4],0,2*Math.PI,!0);break;case 4:var e=d[5],j=d[4],g=d[3],d=d[2],d=d-0,g=g-0,o=0.5522848*(j/2),h=0.5522848*(e/2),k=d+j,n=g+e,j=d+j/2,e=g+e/2;a.moveTo(d,e);a.bezierCurveTo(d,e-h,j-o,g,j,g);a.bezierCurveTo(j+o,g,k,e-h,k,e);a.bezierCurveTo(k,e+h,j+o,n,j,n);a.bezierCurveTo(j-o,n,d,e+h,d,e);break;case 6:this.__drawRoundRect(d[2]-0,d[3]-0,d[4],d[5],d[6],d[7]);break;case 5:a.rect(d[2]-0,d[3]-0,d[4],d[5]);break;case 10:a.lineTo(d[2]-0,d[3]-0);break;case 11:a.moveTo(d[2]-0,d[3]-0)}}},__drawRoundRect:function(a,
b,c,d,e,j){var g=0.5522848*e,o=0.5522848*j,c=a+c,d=b+d,h=a+e,k=b+j,e=c-e,j=d-j;this.__context.moveTo(a,k);this.__context.bezierCurveTo(a,k-o,h-g,b,h,b);this.__context.lineTo(e,b);this.__context.bezierCurveTo(e+g,b,c,k-o,c,k);this.__context.lineTo(c,j);this.__context.bezierCurveTo(c,j+o,e+g,d,e,d);this.__context.lineTo(h,d);this.__context.bezierCurveTo(h-g,d,a,j+o,a,j);this.__context.lineTo(a,k)},__class__:c.display.Graphics};c.display.DrawCommand=h["openfl.display.DrawCommand"]={__ename__:!0,__constructs__:"BeginBitmapFill BeginFill CurveTo DrawCircle DrawEllipse DrawRect DrawRoundRect DrawTiles EndFill LineStyle LineTo MoveTo".split(" ")};
c.display.DrawCommand.BeginBitmapFill=function(a,b,f,d){a=["BeginBitmapFill",0,a,b,f,d];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.BeginFill=function(a,b){var f=["BeginFill",1,a,b];f.__enum__=c.display.DrawCommand;f.toString=u;return f};c.display.DrawCommand.CurveTo=function(a,b,f,d){a=["CurveTo",2,a,b,f,d];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.DrawCircle=function(a,b,f){a=["DrawCircle",3,a,b,f];a.__enum__=c.display.DrawCommand;
a.toString=u;return a};c.display.DrawCommand.DrawEllipse=function(a,b,f,d){a=["DrawEllipse",4,a,b,f,d];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.DrawRect=function(a,b,f,d){a=["DrawRect",5,a,b,f,d];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.DrawRoundRect=function(a,b,f,d,e,j){a=["DrawRoundRect",6,a,b,f,d,e,j];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.DrawTiles=function(a,b,f,d,e){a=["DrawTiles",
7,a,b,f,d,e];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.EndFill=["EndFill",8];c.display.DrawCommand.EndFill.toString=u;c.display.DrawCommand.EndFill.__enum__=c.display.DrawCommand;c.display.DrawCommand.LineStyle=function(a,b,f,d,e,j,g,o){a=["LineStyle",9,a,b,f,d,e,j,g,o];a.__enum__=c.display.DrawCommand;a.toString=u;return a};c.display.DrawCommand.LineTo=function(a,b){var f=["LineTo",10,a,b];f.__enum__=c.display.DrawCommand;f.toString=u;return f};c.display.DrawCommand.MoveTo=
function(a,b){var f=["MoveTo",11,a,b];f.__enum__=c.display.DrawCommand;f.toString=u;return f};c.display.GraphicsPathWinding=h["openfl.display.GraphicsPathWinding"]={__ename__:!0,__constructs__:["EVEN_ODD","NON_ZERO"]};c.display.GraphicsPathWinding.EVEN_ODD=["EVEN_ODD",0];c.display.GraphicsPathWinding.EVEN_ODD.toString=u;c.display.GraphicsPathWinding.EVEN_ODD.__enum__=c.display.GraphicsPathWinding;c.display.GraphicsPathWinding.NON_ZERO=["NON_ZERO",1];c.display.GraphicsPathWinding.NON_ZERO.toString=
u;c.display.GraphicsPathWinding.NON_ZERO.__enum__=c.display.GraphicsPathWinding;c.display.IGraphicsData=function(){};h["openfl.display.IGraphicsData"]=c.display.IGraphicsData;c.display.IGraphicsData.__name__=["openfl","display","IGraphicsData"];c.display.IGraphicsData.prototype={__class__:c.display.IGraphicsData};c.display.GraphicsDataType=h["openfl.display.GraphicsDataType"]={__ename__:!0,__constructs__:"STROKE SOLID GRADIENT PATH BITMAP END".split(" ")};c.display.GraphicsDataType.STROKE=["STROKE",
0];c.display.GraphicsDataType.STROKE.toString=u;c.display.GraphicsDataType.STROKE.__enum__=c.display.GraphicsDataType;c.display.GraphicsDataType.SOLID=["SOLID",1];c.display.GraphicsDataType.SOLID.toString=u;c.display.GraphicsDataType.SOLID.__enum__=c.display.GraphicsDataType;c.display.GraphicsDataType.GRADIENT=["GRADIENT",2];c.display.GraphicsDataType.GRADIENT.toString=u;c.display.GraphicsDataType.GRADIENT.__enum__=c.display.GraphicsDataType;c.display.GraphicsDataType.PATH=["PATH",3];c.display.GraphicsDataType.PATH.toString=
u;c.display.GraphicsDataType.PATH.__enum__=c.display.GraphicsDataType;c.display.GraphicsDataType.BITMAP=["BITMAP",4];c.display.GraphicsDataType.BITMAP.toString=u;c.display.GraphicsDataType.BITMAP.__enum__=c.display.GraphicsDataType;c.display.GraphicsDataType.END=["END",5];c.display.GraphicsDataType.END.toString=u;c.display.GraphicsDataType.END.__enum__=c.display.GraphicsDataType;c.display.InterpolationMethod=h["openfl.display.InterpolationMethod"]={__ename__:!0,__constructs__:["RGB","LINEAR_RGB"]};
c.display.InterpolationMethod.RGB=["RGB",0];c.display.InterpolationMethod.RGB.toString=u;c.display.InterpolationMethod.RGB.__enum__=c.display.InterpolationMethod;c.display.InterpolationMethod.LINEAR_RGB=["LINEAR_RGB",1];c.display.InterpolationMethod.LINEAR_RGB.toString=u;c.display.InterpolationMethod.LINEAR_RGB.__enum__=c.display.InterpolationMethod;c.display._JointStyle={};c.display._JointStyle.JointStyle_Impl_=function(){};h["openfl.display._JointStyle.JointStyle_Impl_"]=c.display._JointStyle.JointStyle_Impl_;
c.display._JointStyle.JointStyle_Impl_.__name__=["openfl","display","_JointStyle","JointStyle_Impl_"];c.display.LineScaleMode=h["openfl.display.LineScaleMode"]={__ename__:!0,__constructs__:["HORIZONTAL","NONE","NORMAL","VERTICAL"]};c.display.LineScaleMode.HORIZONTAL=["HORIZONTAL",0];c.display.LineScaleMode.HORIZONTAL.toString=u;c.display.LineScaleMode.HORIZONTAL.__enum__=c.display.LineScaleMode;c.display.LineScaleMode.NONE=["NONE",1];c.display.LineScaleMode.NONE.toString=u;c.display.LineScaleMode.NONE.__enum__=
c.display.LineScaleMode;c.display.LineScaleMode.NORMAL=["NORMAL",2];c.display.LineScaleMode.NORMAL.toString=u;c.display.LineScaleMode.NORMAL.__enum__=c.display.LineScaleMode;c.display.LineScaleMode.VERTICAL=["VERTICAL",3];c.display.LineScaleMode.VERTICAL.toString=u;c.display.LineScaleMode.VERTICAL.__enum__=c.display.LineScaleMode;c.display.Loader=function(){c.display.Sprite.call(this);this.contentLoaderInfo=c.display.LoaderInfo.create(this)};h["openfl.display.Loader"]=c.display.Loader;c.display.Loader.__name__=
["openfl","display","Loader"];c.display.Loader.__super__=c.display.Sprite;c.display.Loader.prototype=q(c.display.Sprite.prototype,{load:function(a){var b="",f=a.url.split(".");0<f.length&&(b=f[f.length-1].toLowerCase());this.contentLoaderInfo.url=a.url;if(null==a.contentType&&""!=a.contentType)switch(b){case "swf":this.contentLoaderInfo.contentType="application/x-shockwave-flash";break;case "jpg":case "jpeg":this.contentLoaderInfo.contentType="image/jpeg";break;case "png":this.contentLoaderInfo.contentType=
"image/png";break;case "gif":this.contentLoaderInfo.contentType="image/gif";break;default:this.contentLoaderInfo.contentType="application/x-www-form-urlencoded"}else this.contentLoaderInfo.contentType=a.contentType;c.display.BitmapData.fromFile(a.url,r(this,this.BitmapData_onLoad),r(this,this.BitmapData_onError))},loadBytes:function(a){c.display.BitmapData.fromBytes(a,null,r(this,this.BitmapData_onLoad))},unload:function(){if(0<this.get_numChildren()){for(;0<this.get_numChildren();)this.removeChildAt(0);
this.content=null;this.contentLoaderInfo.url=null;this.contentLoaderInfo.contentType=null;this.contentLoaderInfo.content=null;this.contentLoaderInfo.bytesLoaded=0;this.contentLoaderInfo.bytesTotal=0;this.contentLoaderInfo.width=0;this.contentLoaderInfo.height=0;var a=new c.events.Event(c.events.Event.UNLOAD);a.currentTarget=this;this.dispatchEvent(a)}},BitmapData_onLoad:function(a){this.contentLoaderInfo.content=new c.display.Bitmap(a);this.content=this.contentLoaderInfo.content;this.addChild(this.contentLoaderInfo.content);
a=new c.events.Event(c.events.Event.COMPLETE);a.target=this.contentLoaderInfo;a.currentTarget=this.contentLoaderInfo;this.contentLoaderInfo.dispatchEvent(a)},BitmapData_onError:function(){var a=new c.events.IOErrorEvent(c.events.IOErrorEvent.IO_ERROR);a.target=this.contentLoaderInfo;a.currentTarget=this.contentLoaderInfo;this.contentLoaderInfo.dispatchEvent(a)},__class__:c.display.Loader});c.display.LoaderInfo=function(){c.events.EventDispatcher.call(this);this.applicationDomain=c.system.ApplicationDomain.currentDomain;
this.bytesTotal=this.bytesLoaded=0;this.childAllowsParent=!0;this.parameters={}};h["openfl.display.LoaderInfo"]=c.display.LoaderInfo;c.display.LoaderInfo.__name__=["openfl","display","LoaderInfo"];c.display.LoaderInfo.create=function(a){var b=new c.display.LoaderInfo;null!=a?b.loader=a:b.url="";return b};c.display.LoaderInfo.__super__=c.events.EventDispatcher;c.display.LoaderInfo.prototype=q(c.events.EventDispatcher.prototype,{__class__:c.display.LoaderInfo});c.display.MovieClip=function(){c.display.Sprite.call(this);
this.__currentFrame=0;this.__currentLabels=[];this.__totalFrames=0;this.enabled=!0;this.loaderInfo=c.display.LoaderInfo.create(null)};h["openfl.display.MovieClip"]=c.display.MovieClip;c.display.MovieClip.__name__=["openfl","display","MovieClip"];c.display.MovieClip.__super__=c.display.Sprite;c.display.MovieClip.prototype=q(c.display.Sprite.prototype,{gotoAndPlay:function(){},gotoAndStop:function(){},nextFrame:function(){},play:function(){},prevFrame:function(){},stop:function(){},get_currentFrame:function(){return this.__currentFrame},
get_currentFrameLabel:function(){return this.__currentFrameLabel},get_currentLabel:function(){return this.__currentLabel},get_currentLabels:function(){return this.__currentLabels},get_framesLoaded:function(){return this.__totalFrames},get_totalFrames:function(){return this.__totalFrames},__class__:c.display.MovieClip,__properties__:q(c.display.Sprite.prototype.__properties__,{get_totalFrames:"get_totalFrames",get_framesLoaded:"get_framesLoaded",get_currentLabels:"get_currentLabels",get_currentLabel:"get_currentLabel",
get_currentFrameLabel:"get_currentFrameLabel",get_currentFrame:"get_currentFrame"})});c.display.OpenGLView=function(){c.display.DirectRenderer.call(this,"OpenGLView");this.__canvas=window.document.createElement("canvas");this.__canvas.width=c.Lib.current.stage.stageWidth;this.__canvas.height=c.Lib.current.stage.stageHeight;c.Lib.current.stage.addEventListener(c.events.Event.RESIZE,r(this,this.onResize));var a={alpha:!1,premultipliedAlpha:!1,antialias:!1};this.__context=s.html._CanvasElement.CanvasUtil.getContextWebGL(this.__canvas,
a);null==this.__context&&(this.__context=s.html._CanvasElement.CanvasUtil.getContextWebGL(this.__canvas,a));c.gl.GL.__context=this.__context;this.__posUpdated=!0};h["openfl.display.OpenGLView"]=c.display.OpenGLView;c.display.OpenGLView.__name__=["openfl","display","OpenGLView"];c.display.OpenGLView.__properties__={get_isSupported:"get_isSupported"};c.display.OpenGLView.isSupported=null;c.display.OpenGLView.get_isSupported=function(){return!window.WebGLRenderingContext||null==(new c.display.OpenGLView).__context?
!1:!0};c.display.OpenGLView.__super__=c.display.DirectRenderer;c.display.OpenGLView.prototype=q(c.display.DirectRenderer.prototype,{__renderCanvas:function(){this.__added||(this.__added=!0,m.Log.trace("Warning: openfl-html5 only can run OpenGLView content using the DOM rendering mode",{fileName:"OpenGLView.hx",lineNumber:66,className:"openfl.display.OpenGLView",methodName:"__renderCanvas"}),m.Log.trace('Please compile your project using -Ddom (on the command-line) or <haxedef name="dom" /> to enable',
{fileName:"OpenGLView.hx",lineNumber:67,className:"openfl.display.OpenGLView",methodName:"__renderCanvas"}))},__renderDOM:function(a){if(null!=this.stage&&this.__worldVisible&&this.__renderable){if(this.__added||(a.element.appendChild(this.__canvas),this.__added=!0,this.__initializeElement(this.__canvas,a)),null!=this.__context)c.gl.GL.__context=this.__context,a=null,null==this.get_scrollRect()?(this.__posUpdated&&(this.__canvas.style.left="0px",this.__canvas.style.top="0px",this.__canvas.width=c.Lib.current.stage.stageWidth|
0,this.__canvas.height=c.Lib.current.stage.stageHeight|0,this.__posUpdated=!1),a=new c.geom.Rectangle(0,0,this.__canvas.width,this.__canvas.height)):(this.__posUpdated&&(this.__canvas.style.left=this.get_x()+this.get_scrollRect().x+"px",this.__canvas.style.top=this.get_y()+this.get_scrollRect().y+"px",this.__canvas.width=this.get_scrollRect().width|0,this.__canvas.height=this.get_scrollRect().height|0,this.__posUpdated=!1),a=new c.geom.Rectangle(this.get_x()+this.get_scrollRect().x,this.get_y()+this.get_scrollRect().y,
this.__canvas.width,this.__canvas.height)),null!=this.__render&&this.__render(a)}else this.__added&&(a.element.removeChild(this.__canvas),this.__added=!1)},__renderGL:function(){if(null!=this.stage&&this.__renderable){var a=null,a=null==this.get_scrollRect()?new c.geom.Rectangle(0,0,this.stage.stageWidth,this.stage.stageHeight):new c.geom.Rectangle(this.get_x()+this.get_scrollRect().x,this.get_y()+this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height);null!=this.__render&&
this.__render(a)}},onResize:function(){this.__posUpdated=!0},set_x:function(a){this.__posUpdated=!0;return c.display.DirectRenderer.prototype.set_x.call(this,a)},set_y:function(a){this.__posUpdated=!0;return c.display.DirectRenderer.prototype.set_y.call(this,a)},__class__:c.display.OpenGLView});c.display.PixelSnapping=h["openfl.display.PixelSnapping"]={__ename__:!0,__constructs__:["NEVER","AUTO","ALWAYS"]};c.display.PixelSnapping.NEVER=["NEVER",0];c.display.PixelSnapping.NEVER.toString=u;c.display.PixelSnapping.NEVER.__enum__=
c.display.PixelSnapping;c.display.PixelSnapping.AUTO=["AUTO",1];c.display.PixelSnapping.AUTO.toString=u;c.display.PixelSnapping.AUTO.__enum__=c.display.PixelSnapping;c.display.PixelSnapping.ALWAYS=["ALWAYS",2];c.display.PixelSnapping.ALWAYS.toString=u;c.display.PixelSnapping.ALWAYS.__enum__=c.display.PixelSnapping;c.display.SpreadMethod=h["openfl.display.SpreadMethod"]={__ename__:!0,__constructs__:["REPEAT","REFLECT","PAD"]};c.display.SpreadMethod.REPEAT=["REPEAT",0];c.display.SpreadMethod.REPEAT.toString=
u;c.display.SpreadMethod.REPEAT.__enum__=c.display.SpreadMethod;c.display.SpreadMethod.REFLECT=["REFLECT",1];c.display.SpreadMethod.REFLECT.toString=u;c.display.SpreadMethod.REFLECT.__enum__=c.display.SpreadMethod;c.display.SpreadMethod.PAD=["PAD",2];c.display.SpreadMethod.PAD.toString=u;c.display.SpreadMethod.PAD.__enum__=c.display.SpreadMethod;c.display.Stage=function(a,b,f,d){this.__mouseX=this.__mouseY=0;c.display.Sprite.call(this);this.__element=f;null==d?(this.__transparent=!0,this.set_color(0)):
this.set_color(d);this.set_name(null);this.__mouseY=this.__mouseX=0;this.__initializeDOM();this.__originalWidth=a;this.__originalHeight=b;0==a&&0==b&&(null!=f?(a=f.clientWidth,b=f.clientHeight):(a=window.innerWidth,b=window.innerHeight),this.__fullscreen=!0);this.stageWidth=a;this.stageHeight=b;null!=this.__canvas?(this.__canvas.width=a,this.__canvas.height=b):(this.__div.style.width=a+"px",this.__div.style.height=b+"px");this.__resize();window.addEventListener("resize",r(this,this.window_onResize));
window.addEventListener("focus",r(this,this.window_onFocus));window.addEventListener("blur",r(this,this.window_onBlur));null!=f&&(null!=this.__canvas?f!=this.__canvas&&f.appendChild(this.__canvas):f.appendChild(this.__div));this.stage=this;this.align=c.display.StageAlign.TOP_LEFT;this.allowsFullScreen=!1;this.set_displayState(c.display.StageDisplayState.NORMAL);this.frameRate=60;this.quality="high";this.scaleMode=c.display.StageScaleMode.NO_SCALE;this.__clearBeforeRender=this.stageFocusRect=!0;this.__stack=
[];for(var e=["keydown","keyup"],d=["touchstart","touchmove","touchend"],f=["mousedown","mousemove","mouseup","dblclick","wheel"],a=["focus","blur"],b=null!=this.__canvas?this.__canvas:this.__div,j=0;j<e.length;){var g=e[j];++j;window.addEventListener(g,r(this,this.window_onKey),!1)}for(e=0;e<d.length;)j=d[e],++e,b.addEventListener(j,r(this,this.element_onTouch),!0);for(d=0;d<f.length;)e=f[d],++d,b.addEventListener(e,r(this,this.element_onMouse),!0);for(f=0;f<a.length;)d=a[f],++f,b.addEventListener(d,
r(this,this.element_onFocus),!0);window.requestAnimationFrame(r(this,this.__render))};h["openfl.display.Stage"]=c.display.Stage;c.display.Stage.__name__=["openfl","display","Stage"];c.display.Stage.__super__=c.display.Sprite;c.display.Stage.prototype=q(c.display.Sprite.prototype,{globalToLocal:function(a){return a},invalidate:function(){this.__invalidated=!0},localToGlobal:function(a){return a},__drag:function(a){var b=this.__dragObject.parent;null!=b&&(a=b.globalToLocal(a));b=a.x+this.__dragOffsetX;
a=a.y+this.__dragOffsetY;null!=this.__dragBounds&&(b<this.__dragBounds.x?b=this.__dragBounds.x:b>this.__dragBounds.get_right()&&(b=this.__dragBounds.get_right()),a<this.__dragBounds.y?a=this.__dragBounds.y:a>this.__dragBounds.get_bottom()&&(a=this.__dragBounds.get_bottom()));this.__dragObject.set_x(b);this.__dragObject.set_y(a)},__fireEvent:function(a,b){var c=b.length;if(0==c)a.eventPhase=1,a.target.__broadcast(a,!1);else{a.eventPhase=0;a.target=b[b.length-1];for(var d=0,e=c-1;d<e;){var j=d++;b[j].__broadcast(a,
!1);if(a.__isCancelled)return}a.eventPhase=1;a.target.__broadcast(a,!1);if(!a.__isCancelled&&a.bubbles){a.eventPhase=2;for(c-=2;0<=c;){b[c].__broadcast(a,!1);if(a.__isCancelled)break;c--}}}},__getInteractive:function(a){a.push(this)},__initializeCanvas:function(){this.__canvas=s.Boot.__instanceof(this.__element,HTMLCanvasElement)?this.__element:window.document.createElement("canvas");this.__transparent?this.__context=this.__canvas.getContext("2d"):(this.__canvas.setAttribute("moz-opaque","true"),
this.__context=this.__canvas.getContext("2d",{alpha:!1}));var a=this.__canvas.style;a.setProperty("-webkit-transform","translateZ(0)",null);a.setProperty("transform","translateZ(0)",null);this.__renderSession=new c.display.RenderSession;this.__renderSession.context=this.__context;this.__renderSession.roundPixels=!0},__initializeDOM:function(){this.__div=window.document.createElement("div");var a=this.__div.style;this.__transparent||(a.backgroundColor=this.__colorString);a.setProperty("-webkit-transform",
"translate3D(0,0,0)",null);a.setProperty("transform","translate3D(0,0,0)",null);a.position="relative";a.overflow="hidden";a.setProperty("-webkit-user-select","none",null);a.setProperty("-moz-user-select","none",null);a.setProperty("-ms-user-select","none",null);a.setProperty("-o-user-select","none",null);window.document.addEventListener("dragstart",function(a){if(a.target.nodeName.toLowerCase()=="img"){a.preventDefault();return false}return true},!1);this.__renderSession=new c.display.RenderSession;
this.__renderSession.element=this.__div;this.__renderSession.roundPixels=!0;a=window.getComputedStyle(document.documentElement,"");a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(RegExp("("+a+")","i"));a[0].toUpperCase();a.substr(1);this.__renderSession.vendorPrefix=a;this.__renderSession.transformProperty="webkit"==a?"-webkit-transform":"transform";this.__renderSession.isWebkitDOM="webkit"==a;this.__renderSession.transformOriginProperty=
"webkit"==a?"-webkit-transform-origin":"transform-origin"},__initializeGL:function(){return!1},__render:function(){this.__broadcast(new c.events.Event(c.events.Event.ENTER_FRAME),!0);this.__invalidated&&(this.__invalidated=!1,this.__broadcast(new c.events.Event(c.events.Event.RENDER),!0));this.__renderable=!0;this.__update(!1,!0);if(null!=this.__canvas){if(!this.__fullscreen||this.__element!=this.__canvas){if(this.stageWidth!=this.__canvas.width||this.stageHeight!=this.__canvas.height)this.__canvas.width=
this.stageWidth,this.__canvas.height=this.stageHeight}else this.stageWidth=this.__canvas.width,this.stageHeight=this.__canvas.height;null!=this.__gl?this.__glContextLost||(this.__gl.viewport(0,0,this.stageWidth,this.stageHeight),this.__gl.bindFramebuffer(36160,null),this.__transparent?this.__gl.clearColor(0,0,0,0):this.__gl.clearColor(this.__colorSplit[0],this.__colorSplit[1],this.__colorSplit[2],1),this.__gl.clear(16384),this.__renderGL(this.__renderSession)):(this.__context.setTransform(1,0,0,1,
0,0),this.__context.globalAlpha=1,!this.__transparent&&this.__clearBeforeRender?(this.__context.fillStyle=this.__colorString,this.__context.fillRect(0,0,this.stageWidth,this.stageHeight)):this.__transparent&&this.__clearBeforeRender&&this.__context.clearRect(0,0,this.stageWidth,this.stageHeight),this.__renderCanvas(this.__renderSession))}else this.__renderSession.z=1,this.__renderDOM(this.__renderSession);window.requestAnimationFrame(r(this,this.__render))},__resize:function(){if(null!=this.__element&&
(null==this.__div||null!=this.__div&&this.__fullscreen))if(this.__fullscreen)this.stageWidth=this.__element.clientWidth,this.stageHeight=this.__element.clientHeight,null!=this.__canvas?this.__element!=this.__canvas&&(this.__canvas.width=this.stageWidth,this.__canvas.height=this.stageHeight):(this.__div.style.width=this.stageWidth+"px",this.__div.style.height=this.stageHeight+"px");else{var a=Math.min(this.__element.clientWidth/this.__originalWidth,this.__element.clientHeight/this.__originalHeight);
null!=this.__canvas?this.__element!=this.__canvas&&(this.__canvas.style.width=this.__originalWidth*a+"px",this.__canvas.style.height=this.__originalHeight*a+"px",this.__canvas.style.marginLeft=(this.__element.clientWidth-this.__originalWidth*a)/2+"px",this.__canvas.style.marginTop=(this.__element.clientHeight-this.__originalHeight*a)/2+"px"):(this.__div.style.width=this.__originalWidth*a+"px",this.__div.style.height=this.__originalHeight*a+"px",this.__div.style.marginLeft=(this.__element.clientWidth-
this.__originalWidth*a)/2+"px",this.__div.style.marginTop=(this.__element.clientHeight-this.__originalHeight*a)/2+"px")}},__setCursor:function(a){this.__cursor!=a&&(this.__cursor=a,this.__cursorHidden||((null!=this.__canvas?this.__canvas:this.__div).style.cursor=a))},__setCursorHidden:function(a){this.__cursorHidden!=a&&(this.__cursorHidden=a,(null!=this.__canvas?this.__canvas:this.__div).style.cursor=a?"none":this.__cursor)},__startDrag:function(a,b,f){this.__dragBounds=null==f?null:f.clone();this.__dragObject=
a;null!=this.__dragObject&&(b?(this.__dragOffsetX=-this.__dragObject.get_width()/2,this.__dragOffsetY=-this.__dragObject.get_height()/2):(a=new c.geom.Point(this.get_mouseX(),this.get_mouseY()),b=this.__dragObject.parent,null!=b&&(a=b.globalToLocal(a)),this.__dragOffsetX=this.__dragObject.get_x()-a.x,this.__dragOffsetY=this.__dragObject.get_y()-a.y))},__stopDrag:function(){this.__dragObject=this.__dragBounds=null},__update:function(a,b){a?0<c.display.DisplayObject.__worldTransformDirty&&(c.display.Sprite.prototype.__update.call(this,
!0,b),b&&(c.display.DisplayObject.__worldTransformDirty=0,this.__dirty=!0)):0<c.display.DisplayObject.__worldTransformDirty||this.__dirty||0<c.display.DisplayObject.__worldRenderDirty?(c.display.Sprite.prototype.__update.call(this,!1,b),b&&(this.__wasDirty=!0,c.display.DisplayObject.__worldTransformDirty=0,c.display.DisplayObject.__worldRenderDirty=0,this.__dirty=!1)):this.__wasDirty&&(c.display.Sprite.prototype.__update.call(this,!1,b),b&&(this.__wasDirty=!1))},get_mouseX:function(){return this.__mouseX},
get_mouseY:function(){return this.__mouseY},canvas_onContextLost:function(){this.__glContextLost=!0},canvas_onContextRestored:function(){this.__glContextLost=!1},element_onFocus:function(){},element_onTouch:function(a){a.preventDefault();var b;b=null!=this.__canvas?this.__canvas.getBoundingClientRect():this.__div.getBoundingClientRect();var f=a.changedTouches[0];b=new c.geom.Point((f.pageX-b.left)*(this.stageWidth/b.width),(f.pageY-b.top)*(this.stageHeight/b.height));this.__mouseX=b.x;this.__mouseY=
b.y;this.__stack=[];var d=null,e=null;switch(a.type){case "touchstart":d="touchBegin";e=c.events.MouseEvent.MOUSE_DOWN;break;case "touchmove":d="touchMove";e=c.events.MouseEvent.MOUSE_MOVE;break;case "touchend":d="touchEnd",e=c.events.MouseEvent.MOUSE_UP}if(this.__hitTest(this.get_mouseX(),this.get_mouseY(),!1,this.__stack,!0)){var j=this.__stack[this.__stack.length-1],g=j.globalToLocal(b),o=c.events.TouchEvent.__create(d,a,f,g,j);o.touchPointID=f.identifier;o.isPrimaryTouchPoint=!0;a=c.events.MouseEvent.__create(e,
a,g,j);a.buttonDown="touchEnd"!=d;this.__fireEvent(o,this.__stack);this.__fireEvent(a,this.__stack)}else o=c.events.TouchEvent.__create(d,a,f,b,this),o.touchPointID=f.identifier,o.isPrimaryTouchPoint=!0,a=c.events.MouseEvent.__create(e,a,b,this),a.buttonDown="touchEnd"!=d,this.__fireEvent(o,[this]),this.__fireEvent(a,[this]);"touchMove"==d&&null!=this.__dragObject&&this.__drag(b)},element_onMouse:function(a){var b;null!=this.__canvas?(b=this.__canvas.getBoundingClientRect(),this.__mouseX=(a.clientX-
b.left)*(this.stageWidth/b.width),this.__mouseY=(a.clientY-b.top)*(this.stageHeight/b.height)):(b=this.__div.getBoundingClientRect(),this.__mouseX=a.clientX-b.left,this.__mouseY=a.clientY-b.top);this.__stack=[];switch(a.type){case "mousedown":b=c.events.MouseEvent.MOUSE_DOWN;break;case "mouseup":b=c.events.MouseEvent.MOUSE_UP;break;case "mousemove":b=c.events.MouseEvent.MOUSE_MOVE;break;case "dblclick":b=c.events.MouseEvent.DOUBLE_CLICK;break;case "wheel":b=c.events.MouseEvent.MOUSE_WHEEL;break;default:b=
null}if(this.__hitTest(this.get_mouseX(),this.get_mouseY(),!1,this.__stack,!0)){var f=this.__stack[this.__stack.length-1];this.__setCursor(f.buttonMode?"pointer":"default");this.__fireEvent(c.events.MouseEvent.__create(b,a,f.globalToLocal(new c.geom.Point(this.get_mouseX(),this.get_mouseY())),f),this.__stack);b==c.events.MouseEvent.MOUSE_UP&&this.__fireEvent(c.events.MouseEvent.__create(c.events.MouseEvent.CLICK,a,f.globalToLocal(new c.geom.Point(this.get_mouseX(),this.get_mouseY())),f),this.__stack)}else this.__setCursor(this.buttonMode?
"pointer":"default"),this.__fireEvent(c.events.MouseEvent.__create(b,a,new c.geom.Point(this.get_mouseX(),this.get_mouseY()),this),[this]),b==c.events.MouseEvent.MOUSE_UP&&this.__fireEvent(c.events.MouseEvent.__create(c.events.MouseEvent.CLICK,a,new c.geom.Point(this.get_mouseX(),this.get_mouseY()),this),[this]);null!=this.__dragObject&&this.__drag(new c.geom.Point(this.get_mouseX(),this.get_mouseY()))},window_onKey:function(a){var b;b=null!=a.keyCode?a.keyCode:a.which;b=c.ui.Keyboard.__convertMozillaCode(b);
var f;f=s.Boot.__cast(null!=a.location?a.location:a.keyLocation,ca);var d=[];null==this.__focus?this.__getInteractive(d):this.__focus.__getInteractive(d);0<d.length&&(d.reverse(),this.__fireEvent(new c.events.KeyboardEvent("keydown"==a.type?c.events.KeyboardEvent.KEY_DOWN:c.events.KeyboardEvent.KEY_UP,!0,!1,a.charCode,b,f,a.ctrlKey,a.altKey,a.shiftKey),d))},window_onResize:function(){this.__resize();var a=new c.events.Event(c.events.Event.RESIZE);this.__broadcast(a,!1)},window_onFocus:function(){var a=
new c.events.Event(c.events.Event.ACTIVATE);this.__broadcast(a,!0)},window_onBlur:function(){var a=new c.events.Event(c.events.Event.DEACTIVATE);this.__broadcast(a,!0)},get_color:function(){return this.__color},set_color:function(a){this.__colorSplit=[((a&16711680)>>>16)/255,((a&65280)>>>8)/255,(a&255)/255];this.__colorString="#"+C.hex(a,6);return this.__color=a},get_focus:function(){return this.__focus},set_focus:function(a){if(a!=this.__focus){if(null!=this.__focus){var b=new c.events.FocusEvent(c.events.FocusEvent.FOCUS_OUT,
!0,!1,a,!1,0);this.__stack=[];this.__focus.__getInteractive(this.__stack);this.__stack.reverse();this.__fireEvent(b,this.__stack)}null!=a&&(b=new c.events.FocusEvent(c.events.FocusEvent.FOCUS_IN,!0,!1,this.__focus,!1,0),this.__stack=[],a.__getInteractive(this.__stack),this.__stack.reverse(),this.__fireEvent(b,this.__stack));this.__focus=a}return this.__focus},set_displayState:function(a){switch(a[1]){case 0:document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():
document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();break;case 1:case 2:var b=this.__element;b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()}return this.displayState=a},__class__:c.display.Stage,__properties__:q(c.display.Sprite.prototype.__properties__,{set_focus:"set_focus",get_focus:"get_focus",
set_displayState:"set_displayState",set_color:"set_color",get_color:"get_color"})});c.display.RenderSession=function(){this.maskManager=new c.display.MaskManager(this)};h["openfl.display.RenderSession"]=c.display.RenderSession;c.display.RenderSession.__name__=["openfl","display","RenderSession"];c.display.RenderSession.prototype={__class__:c.display.RenderSession};c.display.MaskManager=function(a){this.renderSession=a};h["openfl.display.MaskManager"]=c.display.MaskManager;c.display.MaskManager.__name__=
["openfl","display","MaskManager"];c.display.MaskManager.prototype={pushMask:function(a){var b=this.renderSession.context;b.save();var f=a.__worldTransform;null==f&&(f=new c.geom.Matrix);b.setTransform(f.a,f.c,f.b,f.d,f.tx,f.ty);b.beginPath();a.__renderMask(this.renderSession);b.clip()},pushRect:function(a,b){var c=this.renderSession.context;c.save();c.setTransform(b.a,b.c,b.b,b.d,b.tx,b.ty);c.beginPath();c.rect(a.x,a.y,a.width,a.height);c.clip()},popMask:function(){this.renderSession.context.restore()},
__class__:c.display.MaskManager};c.display.Stage3D=function(){c.events.EventDispatcher.call(this)};h["openfl.display.Stage3D"]=c.display.Stage3D;c.display.Stage3D.__name__=["openfl","display","Stage3D"];c.display.Stage3D.__super__=c.events.EventDispatcher;c.display.Stage3D.prototype=q(c.events.EventDispatcher.prototype,{requestContext3D:function(){c.display.OpenGLView.get_isSupported()?(this.ogl=new c.display.OpenGLView,this.ogl.set_x(this.x),this.ogl.set_y(this.y),this.context3D=new c.display3D.Context3D(this.ogl),
this.dispatchEvent(new c.events.Event(c.events.Event.CONTEXT3D_CREATE))):this.dispatchEvent(new c.events.ErrorEvent(c.events.ErrorEvent.ERROR))},requestAGLSLContext3D:function(){c.display.OpenGLView.get_isSupported()?(this.ogl=new c.display.OpenGLView,this.ogl.set_x(this.x),this.ogl.set_y(this.y),this.context3D=new c.display3D.AGLSLContext3D(this.ogl),this.dispatchEvent(new c.events.Event(c.events.Event.CONTEXT3D_CREATE))):this.dispatchEvent(new c.events.ErrorEvent(c.events.ErrorEvent.ERROR))},set_x:function(a){this.x=
a;null!=this.ogl&&this.ogl.set_x(this.x);return this.x},set_y:function(a){this.y=a;null!=this.ogl&&this.ogl.set_y(this.y);return this.y},__class__:c.display.Stage3D,__properties__:{set_y:"set_y",set_x:"set_x"}});c.display.StageAlign=h["openfl.display.StageAlign"]={__ename__:!0,__constructs__:"TOP_RIGHT TOP_LEFT TOP RIGHT LEFT BOTTOM_RIGHT BOTTOM_LEFT BOTTOM".split(" ")};c.display.StageAlign.TOP_RIGHT=["TOP_RIGHT",0];c.display.StageAlign.TOP_RIGHT.toString=u;c.display.StageAlign.TOP_RIGHT.__enum__=
c.display.StageAlign;c.display.StageAlign.TOP_LEFT=["TOP_LEFT",1];c.display.StageAlign.TOP_LEFT.toString=u;c.display.StageAlign.TOP_LEFT.__enum__=c.display.StageAlign;c.display.StageAlign.TOP=["TOP",2];c.display.StageAlign.TOP.toString=u;c.display.StageAlign.TOP.__enum__=c.display.StageAlign;c.display.StageAlign.RIGHT=["RIGHT",3];c.display.StageAlign.RIGHT.toString=u;c.display.StageAlign.RIGHT.__enum__=c.display.StageAlign;c.display.StageAlign.LEFT=["LEFT",4];c.display.StageAlign.LEFT.toString=u;
c.display.StageAlign.LEFT.__enum__=c.display.StageAlign;c.display.StageAlign.BOTTOM_RIGHT=["BOTTOM_RIGHT",5];c.display.StageAlign.BOTTOM_RIGHT.toString=u;c.display.StageAlign.BOTTOM_RIGHT.__enum__=c.display.StageAlign;c.display.StageAlign.BOTTOM_LEFT=["BOTTOM_LEFT",6];c.display.StageAlign.BOTTOM_LEFT.toString=u;c.display.StageAlign.BOTTOM_LEFT.__enum__=c.display.StageAlign;c.display.StageAlign.BOTTOM=["BOTTOM",7];c.display.StageAlign.BOTTOM.toString=u;c.display.StageAlign.BOTTOM.__enum__=c.display.StageAlign;
c.display.StageDisplayState=h["openfl.display.StageDisplayState"]={__ename__:!0,__constructs__:["NORMAL","FULL_SCREEN","FULL_SCREEN_INTERACTIVE"]};c.display.StageDisplayState.NORMAL=["NORMAL",0];c.display.StageDisplayState.NORMAL.toString=u;c.display.StageDisplayState.NORMAL.__enum__=c.display.StageDisplayState;c.display.StageDisplayState.FULL_SCREEN=["FULL_SCREEN",1];c.display.StageDisplayState.FULL_SCREEN.toString=u;c.display.StageDisplayState.FULL_SCREEN.__enum__=c.display.StageDisplayState;c.display.StageDisplayState.FULL_SCREEN_INTERACTIVE=
["FULL_SCREEN_INTERACTIVE",2];c.display.StageDisplayState.FULL_SCREEN_INTERACTIVE.toString=u;c.display.StageDisplayState.FULL_SCREEN_INTERACTIVE.__enum__=c.display.StageDisplayState;c.display._StageQuality={};c.display._StageQuality.StageQuality_Impl_=function(){};h["openfl.display._StageQuality.StageQuality_Impl_"]=c.display._StageQuality.StageQuality_Impl_;c.display._StageQuality.StageQuality_Impl_.__name__=["openfl","display","_StageQuality","StageQuality_Impl_"];c.display.StageScaleMode=h["openfl.display.StageScaleMode"]=
{__ename__:!0,__constructs__:["SHOW_ALL","NO_SCALE","NO_BORDER","EXACT_FIT"]};c.display.StageScaleMode.SHOW_ALL=["SHOW_ALL",0];c.display.StageScaleMode.SHOW_ALL.toString=u;c.display.StageScaleMode.SHOW_ALL.__enum__=c.display.StageScaleMode;c.display.StageScaleMode.NO_SCALE=["NO_SCALE",1];c.display.StageScaleMode.NO_SCALE.toString=u;c.display.StageScaleMode.NO_SCALE.__enum__=c.display.StageScaleMode;c.display.StageScaleMode.NO_BORDER=["NO_BORDER",2];c.display.StageScaleMode.NO_BORDER.toString=u;c.display.StageScaleMode.NO_BORDER.__enum__=
c.display.StageScaleMode;c.display.StageScaleMode.EXACT_FIT=["EXACT_FIT",3];c.display.StageScaleMode.EXACT_FIT.toString=u;c.display.StageScaleMode.EXACT_FIT.__enum__=c.display.StageScaleMode;c.display.Tilesheet=function(a){this.__bitmap=a;this.__centerPoints=[];this.__tileRects=[];this.__tileUVs=[]};h["openfl.display.Tilesheet"]=c.display.Tilesheet;c.display.Tilesheet.__name__=["openfl","display","Tilesheet"];c.display.Tilesheet.prototype={addTileRect:function(a,b){this.__tileRects.push(a);null==
b&&(b=new c.geom.Point);this.__centerPoints.push(b);this.__tileUVs.push(new c.geom.Rectangle(a.get_left()/this.__bitmap.width,a.get_top()/this.__bitmap.height,a.get_right()/this.__bitmap.width,a.get_bottom()/this.__bitmap.height));return this.__tileRects.length-1},drawTiles:function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=0);null==c&&(c=!1);a.drawTiles(this,b,c,d,e)},getTileCenter:function(a){return this.__centerPoints[a]},getTileRect:function(a){return this.__tileRects[a]},getTileUVs:function(a){return this.__tileUVs[a]},
__class__:c.display.Tilesheet};c.display.TriangleCulling=h["openfl.display.TriangleCulling"]={__ename__:!0,__constructs__:["NEGATIVE","NONE","POSITIVE"]};c.display.TriangleCulling.NEGATIVE=["NEGATIVE",0];c.display.TriangleCulling.NEGATIVE.toString=u;c.display.TriangleCulling.NEGATIVE.__enum__=c.display.TriangleCulling;c.display.TriangleCulling.NONE=["NONE",1];c.display.TriangleCulling.NONE.toString=u;c.display.TriangleCulling.NONE.__enum__=c.display.TriangleCulling;c.display.TriangleCulling.POSITIVE=
["POSITIVE",2];c.display.TriangleCulling.POSITIVE.toString=u;c.display.TriangleCulling.POSITIVE.__enum__=c.display.TriangleCulling;c.display3D={};c.display3D.Context3D=function(a){c.gl.GL.pixelStorei(37440,1);this.renderToTexture=this.disposed=!1;this.vertexBuffersCreated=[];this.indexBuffersCreated=[];this.programsCreated=[];this.texturesCreated=[];this.samplerParameters=[];for(var b=0,f=c.display3D.Context3D.MAX_SAMPLERS;b<f;){var d=b++;this.samplerParameters[d]=new c.display3D.SamplerState;this.samplerParameters[d].wrap=
c.display3D.Context3DWrapMode.REPEAT;this.samplerParameters[d].filter=c.display3D.Context3DTextureFilter.LINEAR;this.samplerParameters[d].mipfilter=c.display3D.Context3DMipFilter.MIPNONE}b=c.Lib.current.stage;this.ogl=a;this.ogl.set_scrollRect(new c.geom.Rectangle(0,0,b.stageWidth,b.stageHeight));this.scrollRect=this.ogl.get_scrollRect().clone();this.ogl.set_width(b.stageWidth);this.ogl.set_height(b.stageHeight);b.addChildAt(this.ogl,0)};h["openfl.display3D.Context3D"]=c.display3D.Context3D;c.display3D.Context3D.__name__=
["openfl","display3D","Context3D"];c.display3D.Context3D.prototype={clear:function(a,b,f,d,e,j,g){null==g&&(g=17664);null==j&&(j=0);null==e&&(e=1);null==d&&(d=1);null==f&&(f=0);null==b&&(b=0);null==a&&(a=0);this.drawing||(this.updateBlendStatus(),this.drawing=!0);null!=this.scissorRectangle&&c.gl.GL.disable(3089);c.gl.GL.clearColor(a,b,f,d);c.gl.GL.clearDepth(e);c.gl.GL.clearStencil(j);c.gl.GL.clear(g);null!=this.scissorRectangle&&c.gl.GL.enable(3089)},configureBackBuffer:function(a,b,f,d){null==
d&&(d=!0);d&&(c.gl.GL.enable(2929),c.gl.GL.enable(2960));this.ogl.set_scrollRect(new c.geom.Rectangle(0,0,a,b));this.scrollRect=this.ogl.get_scrollRect().clone();c.gl.GL.viewport(this.scrollRect.x|0,this.scrollRect.y|0,this.scrollRect.width|0,this.scrollRect.height|0);this.updateScissorRectangle()},createCubeTexture:function(a){a=new c.display3D.textures.CubeTexture(c.gl.GL.createTexture(),a);this.texturesCreated.push(a);return a},createIndexBuffer:function(a){a=new c.display3D.IndexBuffer3D(c.gl.GL.createBuffer(),
a);this.indexBuffersCreated.push(a);return a},createProgram:function(){var a=new c.display3D.Program3D(c.gl.GL.createProgram());this.programsCreated.push(a);return a},createTexture:function(a,b,f,d){a=new c.display3D.textures.Texture(c.gl.GL.createTexture(),d,a,b);this.texturesCreated.push(a);return a},createRectangleTexture:function(a,b,f,d){a=new c.display3D.textures.RectangleTexture(c.gl.GL.createTexture(),d,a,b);this.texturesCreated.push(a);return a},createVertexBuffer:function(a,b){var f=new c.display3D.VertexBuffer3D(c.gl.GL.createBuffer(),
a,b);this.vertexBuffersCreated.push(f);return f},dispose:function(){for(var a=0,b=this.vertexBuffersCreated;a<b.length;){var c=b[a];++a;c.dispose()}this.vertexBuffersCreated=null;a=0;for(b=this.indexBuffersCreated;a<b.length;)c=b[a],++a,c.dispose();this.indexBuffersCreated=null;a=0;for(b=this.programsCreated;a<b.length;)c=b[a],++a,c.dispose();this.samplerParameters=this.programsCreated=null;a=0;for(b=this.texturesCreated;a<b.length;)c=b[a],++a,c.dispose();this.texturesCreated=null;this.disposed=!0},
drawToBitmapData:function(){},drawTriangles:function(a,b,f){null==f&&(f=-1);null==b&&(b=0);if(!this.drawing)throw new c.errors.Error("Need to clear before drawing if the buffer has not been cleared since the last present() call.");f=-1==f?a.numIndices:3*f;b*=2;c.gl.GL.bindBuffer(34963,a.glBuffer);c.gl.GL.drawElements(4,f,5123,b)},present:function(){this.drawing=!1;c.gl.GL.useProgram(null);c.gl.GL.bindBuffer(34962,null);c.gl.GL.disable(2884)},setBlendFactors:function(a,b){this.blendEnabled=!0;this.blendSourceFactor=
a;this.blendDestinationFactor=b;this.updateBlendStatus()},setColorMask:function(a,b,f,d){c.gl.GL.colorMask(a,b,f,d)},setCulling:function(a){if(0==a)c.gl.GL.disable(2884);else switch(c.gl.GL.enable(2884),a){case 1029:c.gl.GL.cullFace(1029);break;case 1028:c.gl.GL.cullFace(1028);break;case 1032:c.gl.GL.cullFace(1032);break;default:throw"Unknown Context3DTriangleFace type.";}},setDepthTest:function(a,b){c.gl.GL.depthFunc(b);c.gl.GL.depthMask(a)},setProgram:function(a){var b=null;null!=a&&(b=a.glProgram);
c.gl.GL.useProgram(b);this.currentProgram=a},getUniformLocationNameFromAgalRegisterIndex:function(a,b){if(a==c.display3D.Context3DProgramType.VERTEX)return"vc"+b;if(a==c.display3D.Context3DProgramType.FRAGMENT)return"fc"+b;throw"Program Type "+k.string(a)+" not supported";},setProgramConstantsFromByteArray:function(a,b,f,d,e){d.position=e;for(e=0;e<f;){var j=e++;this.setGLSLProgramConstantsFromByteArray(a==c.display3D.Context3DProgramType.VERTEX?this.currentProgram.glVCLocationMap[b+j]:this.currentProgram.glFCLocationMap[b+
j],d)}},setProgramConstantsFromMatrix:function(a,b,c,d){null==d&&(d=!1);this.setProgramConstantsFromVector(a,b,function(){for(var a=c.rawData,b=[],d=0,e=a.data.length;d<e;){var p=d++;b.push(a.data[p])}return b}(this),16)},setProgramConstantsFromVector:function(a,b,f,d){null==d&&(d=1);for(var e=0;e<d;){var j=e++,g=4*j;this.setGLSLProgramConstantsFromVector4(a==c.display3D.Context3DProgramType.VERTEX?this.currentProgram.glVCLocationMap[b+j]:this.currentProgram.glFCLocationMap[b+j],function(){var a=
new c.VectorData;a.length=f.length;a.fixed=!0;var b;b=Array(f.length);for(var d=0,e=f.length;d<e;){var p=d++;b[p]=f[p]}a.data=b;return a}(this),g)}},setGLSLProgramConstantsFromByteArray:function(a,b,f){null==f&&(f=-1);-1!=f&&(b.position=f);c.gl.GL.uniform4f(a,b.readFloat(),b.readFloat(),b.readFloat(),b.readFloat())},setGLSLProgramConstantsFromMatrix:function(a,b,f){null==f&&(f=!1);c.gl.GL.uniformMatrix3D(a,!f,b)},setGLSLProgramConstantsFromVector4:function(a,b,f){null==f&&(f=0);c.gl.GL.uniform4f(a,
b.data[f],b.data[f+1],b.data[f+2],b.data[f+3])},setRenderMethod:function(a){this.ogl.set_render(function(){a(null)})},removeRenderMethod:function(){this.ogl.set_render(null)},setRenderToBackBuffer:function(){c.gl.GL.bindFramebuffer(36160,null);c.gl.GL.viewport(this.scrollRect.x|0,this.scrollRect.y|0,this.scrollRect.width|0,this.scrollRect.height|0);this.renderToTexture=!1;this.updateScissorRectangle()},setRenderToTexture:function(a,b){null==b&&(b=!1);var f=a.renderTarget;null==a.renderTarget&&(f=
a.renderTarget=new c.display3D.RenderTarget,f.framebuffer=c.gl.GL.createFramebuffer(),f.renderbuffer=c.gl.GL.createRenderbuffer());c.gl.GL.bindFramebuffer(36160,f.framebuffer);c.gl.GL.bindRenderbuffer(36161,f.renderbuffer);c.gl.GL.renderbufferStorage(36161,34041,a.width,a.height);c.gl.GL.framebufferTexture2D(36160,36064,3553,a.glTexture,0);b&&(c.gl.GL.enable(2929),c.gl.GL.enable(2960),c.gl.GL.framebufferRenderbuffer(36160,33306,36161,f.renderbuffer));c.gl.GL.viewport(0,0,a.width,a.height);this.renderToTexture=
!0;this.rttWidth=a.width;this.rttHeight=a.height;this.updateScissorRectangle()},setSamplerStateAt:function(a,b,f,d){if(0<=a&&a<c.display3D.Context3D.MAX_SAMPLERS)this.samplerParameters[a].wrap=b,this.samplerParameters[a].filter=f,this.samplerParameters[a].mipfilter=d;else throw"Sampler is out of bounds.";},setTextureParameters:function(a,b,f,d){if(s.Boot.__instanceof(a,c.display3D.textures.Texture)){c.gl.GL.bindTexture(3553,s.Boot.__cast(a,c.display3D.textures.Texture).glTexture);switch(b[1]){case 0:c.gl.GL.texParameteri(3553,
10242,33071);c.gl.GL.texParameteri(3553,10243,33071);break;case 1:c.gl.GL.texParameteri(3553,10242,10497),c.gl.GL.texParameteri(3553,10243,10497)}switch(f[1]){case 0:c.gl.GL.texParameteri(3553,10240,9729);break;case 1:c.gl.GL.texParameteri(3553,10240,9728)}switch(d[1]){case 0:c.gl.GL.texParameteri(3553,10241,9987);break;case 1:c.gl.GL.texParameteri(3553,10241,9984);break;case 2:c.gl.GL.texParameteri(3553,10241,9729)}}else if(s.Boot.__instanceof(a,c.display3D.textures.RectangleTexture)){c.gl.GL.bindTexture(3553,
s.Boot.__cast(a,c.display3D.textures.RectangleTexture).glTexture);c.gl.GL.texParameteri(3553,10242,33071);c.gl.GL.texParameteri(3553,10243,33071);switch(f[1]){case 0:c.gl.GL.texParameteri(3553,10240,9729);break;case 1:c.gl.GL.texParameteri(3553,10240,9728)}c.gl.GL.texParameteri(3553,10241,9729)}else if(s.Boot.__instanceof(a,c.display3D.textures.CubeTexture)){c.gl.GL.bindTexture(34067,s.Boot.__cast(a,c.display3D.textures.CubeTexture).glTexture);switch(b[1]){case 0:c.gl.GL.texParameteri(34067,10242,
33071);c.gl.GL.texParameteri(34067,10243,33071);break;case 1:c.gl.GL.texParameteri(34067,10242,10497),c.gl.GL.texParameteri(34067,10243,10497)}switch(f[1]){case 0:c.gl.GL.texParameteri(34067,10240,9729);break;case 1:c.gl.GL.texParameteri(34067,10240,9728)}switch(d[1]){case 0:c.gl.GL.texParameteri(34067,10241,9987);break;case 1:c.gl.GL.texParameteri(34067,10241,9984);break;case 2:c.gl.GL.texParameteri(34067,10241,9729)}}else throw"Texture of type "+B.getClassName(B.getClass(a))+" not supported yet";
},setScissorRectangle:function(a){this.scissorRectangle=a;null==this.scissorRectangle?c.gl.GL.disable(3089):(c.gl.GL.enable(3089),this.updateScissorRectangle())},updateScissorRectangle:function(){null!=this.scissorRectangle&&c.gl.GL.scissor(this.scissorRectangle.x|0,(this.renderToTexture?this.rttHeight:this.scrollRect.height)-this.scissorRectangle.y-this.scissorRectangle.height|0,this.scissorRectangle.width|0,this.scissorRectangle.height|0)},setStencilActions:function(a,b,f,d,e){this.stencilCompareMode=
b;c.gl.GL.stencilOp(f,d,e);c.gl.GL.stencilFunc(this.stencilCompareMode,this.stencilRef,this.stencilReadMask)},setStencilReferenceValue:function(a,b,f){null==f&&(f=255);null==b&&(b=255);this.stencilReadMask=b;this.stencilRef=a;c.gl.GL.stencilFunc(this.stencilCompareMode,this.stencilRef,this.stencilReadMask);c.gl.GL.stencilMask(f)},setTextureAt:function(a,b){this.setGLSLTextureAt(this.currentProgram.glFSLocationMap[a],b,a)},setGLSLTextureAt:function(a,b,f){switch(f){case 0:c.gl.GL.activeTexture(33984);
break;case 1:c.gl.GL.activeTexture(33985);break;case 2:c.gl.GL.activeTexture(33986);break;case 3:c.gl.GL.activeTexture(33987);break;case 4:c.gl.GL.activeTexture(33988);break;case 5:c.gl.GL.activeTexture(33989);break;case 6:c.gl.GL.activeTexture(33990);break;case 7:c.gl.GL.activeTexture(33991);break;default:throw"Does not support texture8 or more";}if(null==b)c.gl.GL.bindTexture(3553,null),c.gl.GL.bindTexture(34067,null);else{if(s.Boot.__instanceof(b,c.display3D.textures.Texture))c.gl.GL.bindTexture(3553,
s.Boot.__cast(b,c.display3D.textures.Texture).glTexture),c.gl.GL.uniform1i(a,f);else if(s.Boot.__instanceof(b,c.display3D.textures.RectangleTexture))c.gl.GL.bindTexture(3553,s.Boot.__cast(b,c.display3D.textures.RectangleTexture).glTexture),c.gl.GL.uniform1i(a,f);else if(s.Boot.__instanceof(b,c.display3D.textures.CubeTexture))c.gl.GL.bindTexture(34067,s.Boot.__cast(b,c.display3D.textures.CubeTexture).glTexture),c.gl.GL.uniform1i(a,f);else throw"Texture of type "+B.getClassName(B.getClass(b))+" not supported yet";
a=this.samplerParameters[f];null!=a?this.setTextureParameters(b,a.wrap,a.filter,a.mipfilter):this.setTextureParameters(b,c.display3D.Context3DWrapMode.REPEAT,c.display3D.Context3DTextureFilter.NEAREST,c.display3D.Context3DMipFilter.MIPNONE)}},setVertexBufferAt:function(a,b,c,d){null==c&&(c=0);this.setGLSLVertexBufferAt(this.currentProgram.glVALocationMap[a],b,c,d)},setGLSLVertexBufferAt:function(a,b,f,d){null==f&&(f=0);if(null==b)-1<a&&c.gl.GL.disableVertexAttribArray(a);else{c.gl.GL.bindBuffer(34962,
b.glBuffer);var e=4,j=5126,g=4;if(d==c.display3D.Context3DVertexBufferFormat.BYTES_4)e=4,j=5126,g=4;else if(d==c.display3D.Context3DVertexBufferFormat.FLOAT_1)e=1,j=5126,g=4;else if(d==c.display3D.Context3DVertexBufferFormat.FLOAT_2)e=2,j=5126,g=4;else if(d==c.display3D.Context3DVertexBufferFormat.FLOAT_3)e=3,j=5126,g=4;else if(d==c.display3D.Context3DVertexBufferFormat.FLOAT_4)e=4,j=5126,g=4;else throw"Buffer format "+k.string(d)+" is not supported";c.gl.GL.enableVertexAttribArray(a);c.gl.GL.vertexAttribPointer(a,
e,j,!1,b.data32PerVertex*g,f*g)}},updateBlendStatus:function(){this.blendEnabled?(c.gl.GL.enable(3042),c.gl.GL.blendEquation(32774),c.gl.GL.blendFunc(this.blendSourceFactor,this.blendDestinationFactor)):c.gl.GL.disable(3042)},__class__:c.display3D.Context3D};c.display3D.AGLSLContext3D=function(a){c.display3D.Context3D.call(this,a);this._yFlip=-1};h["openfl.display3D.AGLSLContext3D"]=c.display3D.AGLSLContext3D;c.display3D.AGLSLContext3D.__name__=["openfl","display3D","AGLSLContext3D"];c.display3D.AGLSLContext3D.__super__=
c.display3D.Context3D;c.display3D.AGLSLContext3D.prototype=q(c.display3D.Context3D.prototype,{setCulling:function(a){c.display3D.Context3D.prototype.setCulling.call(this,a);switch(a){case 1029:this._yFlip=-1;break;case 1028:this._yFlip=1;break;case 1032:this._yFlip=1;break;case 0:this._yFlip=1;break;default:throw"Unknown culling mode "+a+".";}},setProgramConstantsFromMatrix:function(a,b,c,d){null==d&&(d=!1);c=c.rawData;d?(this.setProgramConstantsFromVector(a,b,[c.data[0],c.data[4],c.data[8],c.data[12]],
1),this.setProgramConstantsFromVector(a,b+1,[c.data[1],c.data[5],c.data[9],c.data[13]],1),this.setProgramConstantsFromVector(a,b+2,[c.data[2],c.data[6],c.data[10],c.data[14]],1),this.setProgramConstantsFromVector(a,b+3,[c.data[3],c.data[7],c.data[11],c.data[15]],1)):(this.setProgramConstantsFromVector(a,b,[c.data[0],c.data[1],c.data[2],c.data[3]],1),this.setProgramConstantsFromVector(a,b+1,[c.data[4],c.data[5],c.data[6],c.data[7]],1),this.setProgramConstantsFromVector(a,b+2,[c.data[8],c.data[9],c.data[10],
c.data[11]],1),this.setProgramConstantsFromVector(a,b+3,[c.data[12],c.data[13],c.data[14],c.data[15]],1))},drawTriangles:function(a,b,f){null==f&&(f=-1);null==b&&(b=0);c.gl.GL.uniform1f(this.currentProgram.yFlip,this._yFlip);c.display3D.Context3D.prototype.drawTriangles.call(this,a,b,f)},present:function(){this.drawing=!1},__class__:c.display3D.AGLSLContext3D});c.display3D._Context3DBlendFactor={};c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_=function(){};h["openfl.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_"]=
c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.__name__=["openfl","display3D","_Context3DBlendFactor","Context3DBlendFactor_Impl_"];c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_._new=function(a){return a};c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.fromInt=function(a){return a};c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.toInt=function(a){return a};c.display3D.Context3DClearMask=
function(){};h["openfl.display3D.Context3DClearMask"]=c.display3D.Context3DClearMask;c.display3D.Context3DClearMask.__name__=["openfl","display3D","Context3DClearMask"];c.display3D._Context3DCompareMode={};c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_=function(){};h["openfl.display3D._Context3DCompareMode.Context3DCompareMode_Impl_"]=c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.__name__=["openfl","display3D",
"_Context3DCompareMode","Context3DCompareMode_Impl_"];c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_._new=function(a){return a};c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.fromInt=function(a){return a};c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.toInt=function(a){return a};c.display3D.Context3DMipFilter=h["openfl.display3D.Context3DMipFilter"]={__ename__:!0,__constructs__:["MIPLINEAR","MIPNEAREST","MIPNONE"]};c.display3D.Context3DMipFilter.MIPLINEAR=
["MIPLINEAR",0];c.display3D.Context3DMipFilter.MIPLINEAR.toString=u;c.display3D.Context3DMipFilter.MIPLINEAR.__enum__=c.display3D.Context3DMipFilter;c.display3D.Context3DMipFilter.MIPNEAREST=["MIPNEAREST",1];c.display3D.Context3DMipFilter.MIPNEAREST.toString=u;c.display3D.Context3DMipFilter.MIPNEAREST.__enum__=c.display3D.Context3DMipFilter;c.display3D.Context3DMipFilter.MIPNONE=["MIPNONE",2];c.display3D.Context3DMipFilter.MIPNONE.toString=u;c.display3D.Context3DMipFilter.MIPNONE.__enum__=c.display3D.Context3DMipFilter;
c.display3D.Context3DProgramType=h["openfl.display3D.Context3DProgramType"]={__ename__:!0,__constructs__:["VERTEX","FRAGMENT"]};c.display3D.Context3DProgramType.VERTEX=["VERTEX",0];c.display3D.Context3DProgramType.VERTEX.toString=u;c.display3D.Context3DProgramType.VERTEX.__enum__=c.display3D.Context3DProgramType;c.display3D.Context3DProgramType.FRAGMENT=["FRAGMENT",1];c.display3D.Context3DProgramType.FRAGMENT.toString=u;c.display3D.Context3DProgramType.FRAGMENT.__enum__=c.display3D.Context3DProgramType;
c.display3D.Context3DRenderMode=h["openfl.display3D.Context3DRenderMode"]={__ename__:!0,__constructs__:["AUTO","SOFTWARE"]};c.display3D.Context3DRenderMode.AUTO=["AUTO",0];c.display3D.Context3DRenderMode.AUTO.toString=u;c.display3D.Context3DRenderMode.AUTO.__enum__=c.display3D.Context3DRenderMode;c.display3D.Context3DRenderMode.SOFTWARE=["SOFTWARE",1];c.display3D.Context3DRenderMode.SOFTWARE.toString=u;c.display3D.Context3DRenderMode.SOFTWARE.__enum__=c.display3D.Context3DRenderMode;c.display3D.Context3DTextureFilter=
h["openfl.display3D.Context3DTextureFilter"]={__ename__:!0,__constructs__:["LINEAR","NEAREST"]};c.display3D.Context3DTextureFilter.LINEAR=["LINEAR",0];c.display3D.Context3DTextureFilter.LINEAR.toString=u;c.display3D.Context3DTextureFilter.LINEAR.__enum__=c.display3D.Context3DTextureFilter;c.display3D.Context3DTextureFilter.NEAREST=["NEAREST",1];c.display3D.Context3DTextureFilter.NEAREST.toString=u;c.display3D.Context3DTextureFilter.NEAREST.__enum__=c.display3D.Context3DTextureFilter;c.display3D.Context3DTextureFormat=
h["openfl.display3D.Context3DTextureFormat"]={__ename__:!0,__constructs__:["BGRA","COMPRESSED","COMPRESSED_ALPHA"]};c.display3D.Context3DTextureFormat.BGRA=["BGRA",0];c.display3D.Context3DTextureFormat.BGRA.toString=u;c.display3D.Context3DTextureFormat.BGRA.__enum__=c.display3D.Context3DTextureFormat;c.display3D.Context3DTextureFormat.COMPRESSED=["COMPRESSED",1];c.display3D.Context3DTextureFormat.COMPRESSED.toString=u;c.display3D.Context3DTextureFormat.COMPRESSED.__enum__=c.display3D.Context3DTextureFormat;
c.display3D.Context3DTextureFormat.COMPRESSED_ALPHA=["COMPRESSED_ALPHA",2];c.display3D.Context3DTextureFormat.COMPRESSED_ALPHA.toString=u;c.display3D.Context3DTextureFormat.COMPRESSED_ALPHA.__enum__=c.display3D.Context3DTextureFormat;c.display3D._Context3DTriangleFace={};c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_=function(){};h["openfl.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_"]=c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_;c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.__name__=
["openfl","display3D","_Context3DTriangleFace","Context3DTriangleFace_Impl_"];c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_._new=function(a){return a};c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.fromInt=function(a){return a};c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.toInt=function(a){return a};c.display3D.Context3DVertexBufferFormat=h["openfl.display3D.Context3DVertexBufferFormat"]={__ename__:!0,__constructs__:["BYTES_4","FLOAT_1","FLOAT_2",
"FLOAT_3","FLOAT_4"]};c.display3D.Context3DVertexBufferFormat.BYTES_4=["BYTES_4",0];c.display3D.Context3DVertexBufferFormat.BYTES_4.toString=u;c.display3D.Context3DVertexBufferFormat.BYTES_4.__enum__=c.display3D.Context3DVertexBufferFormat;c.display3D.Context3DVertexBufferFormat.FLOAT_1=["FLOAT_1",1];c.display3D.Context3DVertexBufferFormat.FLOAT_1.toString=u;c.display3D.Context3DVertexBufferFormat.FLOAT_1.__enum__=c.display3D.Context3DVertexBufferFormat;c.display3D.Context3DVertexBufferFormat.FLOAT_2=
["FLOAT_2",2];c.display3D.Context3DVertexBufferFormat.FLOAT_2.toString=u;c.display3D.Context3DVertexBufferFormat.FLOAT_2.__enum__=c.display3D.Context3DVertexBufferFormat;c.display3D.Context3DVertexBufferFormat.FLOAT_3=["FLOAT_3",3];c.display3D.Context3DVertexBufferFormat.FLOAT_3.toString=u;c.display3D.Context3DVertexBufferFormat.FLOAT_3.__enum__=c.display3D.Context3DVertexBufferFormat;c.display3D.Context3DVertexBufferFormat.FLOAT_4=["FLOAT_4",4];c.display3D.Context3DVertexBufferFormat.FLOAT_4.toString=
u;c.display3D.Context3DVertexBufferFormat.FLOAT_4.__enum__=c.display3D.Context3DVertexBufferFormat;c.display3D.Context3DWrapMode=h["openfl.display3D.Context3DWrapMode"]={__ename__:!0,__constructs__:["CLAMP","REPEAT"]};c.display3D.Context3DWrapMode.CLAMP=["CLAMP",0];c.display3D.Context3DWrapMode.CLAMP.toString=u;c.display3D.Context3DWrapMode.CLAMP.__enum__=c.display3D.Context3DWrapMode;c.display3D.Context3DWrapMode.REPEAT=["REPEAT",1];c.display3D.Context3DWrapMode.REPEAT.toString=u;c.display3D.Context3DWrapMode.REPEAT.__enum__=
c.display3D.Context3DWrapMode;c.display3D.IndexBuffer3D=function(a,b){this.glBuffer=a;this.numIndices=b};h["openfl.display3D.IndexBuffer3D"]=c.display3D.IndexBuffer3D;c.display3D.IndexBuffer3D.__name__=["openfl","display3D","IndexBuffer3D"];c.display3D.IndexBuffer3D.prototype={uploadFromByteArray:function(a,b,f,d){c.gl.GL.bindBuffer(34963,this.glBuffer);d*=2;b+=2*f;f=new Int16Array(d);a.position=b;for(var e=0;a.position<d+b;)f[e]=a.readUnsignedByte(),e++;this.uploadFromInt16Array(f)},uploadFromVector:function(a,
b,f){c.gl.GL.bindBuffer(34963,this.glBuffer);var d;d=new Int16Array(f);for(var e=b,b=b+f;e<b;)f=e++,d[f]=a.data[f];this.uploadFromInt16Array(d)},uploadFromInt16Array:function(a){c.gl.GL.bufferData(34963,a,35044)},dispose:function(){c.gl.GL.deleteBuffer(this.glBuffer)},__class__:c.display3D.IndexBuffer3D};c.display3D.OpenFLStage3D=function(){};h["openfl.display3D.OpenFLStage3D"]=c.display3D.OpenFLStage3D;c.display3D.OpenFLStage3D.__name__=["openfl","display3D","OpenFLStage3D"];c.display3D.OpenFLStage3D.getStage3D=
function(a,b){if(c.display3D.OpenFLStage3D.stage3Ds.length>b)return c.display3D.OpenFLStage3D.stage3Ds[b];if(0<b)throw"Only 1 Stage3D supported for now";var f=new c.display.Stage3D;return c.display3D.OpenFLStage3D.stage3Ds[b]=f};c.display3D.OpenFLStage3D.setRenderCallback=function(a,b){a.setRenderMethod(b)};c.display3D.OpenFLStage3D.removeRenderCallback=function(a,b){a.removeRenderMethod(b)};c.display3D.Program3D=function(a){this.yFlipSet=!1;this.glProgram=a;this.glFCLocationMap=[];this.glVCLocationMap=
[];this.glFSLocationMap=[];this.glVALocationMap=[]};h["openfl.display3D.Program3D"]=c.display3D.Program3D;c.display3D.Program3D.__name__=["openfl","display3D","Program3D"];c.display3D.Program3D.prototype={dispose:function(){c.gl.GL.deleteProgram(this.glProgram)},upload:function(a,b){c.gl.GL.attachShader(this.glProgram,a);c.gl.GL.attachShader(this.glProgram,b);c.gl.GL.linkProgram(this.glProgram);if(0==c.gl.GL.getProgramParameter(this.glProgram,35714)){var f=c.gl.GL.getProgramInfoLog(this.glProgram);
if(""!=f)throw f;}for(var f=0,d=c.gl.GL.getProgramParameter(this.glProgram,35718);f<d;){var e=f++,e=c.gl.GL.getActiveUniform(this.glProgram,e),j=c.gl.GL.getUniformLocation(this.glProgram,e.name);if(!this.yFlipSet&&"yflip"==e.name)this.yFlip=j,this.yFlipSet=!0;else{w.substr(e.name,0,2);var g=k.parseInt(w.substr(e.name,2,null));switch(w.substr(e.name,0,2)){case "fc":this.glFCLocationMap[g]=j;break;case "vc":this.glVCLocationMap[g]=j;break;case "fs":this.glFSLocationMap[g]=j}}}f=0;for(d=c.gl.GL.getProgramParameter(this.glProgram,
35721);f<d;)e=f++,g=c.gl.GL.getActiveAttrib(this.glProgram,e),j=w.substr(g.name,0,2),g=k.parseInt(w.substr(g.name,2,null)),"va"==j&&(this.glVALocationMap[g]=e)},yFlipLoc:function(){return this.yFlip},fsUniformLocationFromAgal:function(a){return this.glFCLocationMap[a]},vsUniformLocationFromAgal:function(a){return this.glVCLocationMap[a]},fsampUniformLocationFromAgal:function(a){return this.glFSLocationMap[a]},vaUniformLocationFromAgal:function(a){return this.glVALocationMap[a]},__class__:c.display3D.Program3D};
c.display3D.RenderTarget=function(){};h["openfl.display3D.RenderTarget"]=c.display3D.RenderTarget;c.display3D.RenderTarget.__name__=["openfl","display3D","RenderTarget"];c.display3D.RenderTarget.prototype={dispose:function(){c.gl.GL.deleteFramebuffer(this.framebuffer);c.gl.GL.deleteRenderbuffer(this.renderbuffer)},__class__:c.display3D.RenderTarget};c.display3D.SamplerState=function(){};h["openfl.display3D.SamplerState"]=c.display3D.SamplerState;c.display3D.SamplerState.__name__=["openfl","display3D",
"SamplerState"];c.display3D.SamplerState.prototype={__class__:c.display3D.SamplerState};c.display3D.VertexBuffer3D=function(a,b,c){this.glBuffer=a;this.numVertices=b;this.data32PerVertex=c};h["openfl.display3D.VertexBuffer3D"]=c.display3D.VertexBuffer3D;c.display3D.VertexBuffer3D.__name__=["openfl","display3D","VertexBuffer3D"];c.display3D.VertexBuffer3D.prototype={dispose:function(){c.gl.GL.deleteBuffer(this.glBuffer)},uploadFromByteArray:function(a,b,f,d){var e=4*this.data32PerVertex;c.gl.GL.bindBuffer(34962,
this.glBuffer);d*=e;b+=f*e;f=new Float32Array(d);a.position=b;for(e=0;a.position<d+b;)f[e]=a.readUnsignedByte(),e++;c.gl.GL.bufferData(34962,f,35044)},uploadFromVector:function(a,b,f){c.gl.GL.bindBuffer(34962,this.glBuffer);for(var d=f*this.data32PerVertex,f=new Float32Array(d),e=b,b=b+d;e<b;)d=e++,f[d]=a[d];c.gl.GL.bufferData(34962,f,35044)},uploadFromFloat32Array:function(a){c.gl.GL.bindBuffer(34962,this.glBuffer);c.gl.GL.bufferData(34962,a,35044)},__class__:c.display3D.VertexBuffer3D};c.display3D.shaders=
{};c.display3D.shaders.AGLSLShaderUtils=function(){};h["openfl.display3D.shaders.AGLSLShaderUtils"]=c.display3D.shaders.AGLSLShaderUtils;c.display3D.shaders.AGLSLShaderUtils.__name__=["openfl","display3D","shaders","AGLSLShaderUtils"];c.display3D.shaders.AGLSLShaderUtils.compile=function(a,b){var c=new l.assembler.AGALMiniAssembler,d=null;switch(a){case "vertex":c.assemble("part vertex 1 \n"+b+"endpart");d=c.r.get("vertex").data;break;case "fragment":c.assemble("part fragment 1 \n"+b+"endpart");d=
c.r.get("fragment").data;break;default:throw"Unknown Context3DProgramType";}return d};c.display3D.shaders.AGLSLShaderUtils.createShader=function(a,b){var f=new l.AGLSLCompiler,d,e;switch(a[1]){case 0:d=35633;e="vertex";break;case 1:d=35632,e="fragment"}m.Log.trace("--- AGAL ---\n"+b,{fileName:"AGLSLShaderUtils.hx",lineNumber:60,className:"openfl.display3D.shaders.AGLSLShaderUtils",methodName:"createShader"});f=f.compile(e,b);d=c.gl.GL.createShader(d);c.gl.GL.shaderSource(d,f);c.gl.GL.compileShader(d);
if(0==c.gl.GL.getShaderParameter(d,35713)&&(m.Log.trace("--- ERR ---\n"+f,{fileName:"AGLSLShaderUtils.hx",lineNumber:69,className:"openfl.display3D.shaders.AGLSLShaderUtils",methodName:"createShader"}),e=c.gl.GL.getShaderInfoLog(d),""!=e))throw e;m.Log.trace("--- GLSL ---\n"+f,{fileName:"AGLSLShaderUtils.hx",lineNumber:75,className:"openfl.display3D.shaders.AGLSLShaderUtils",methodName:"createShader"});return d};c.display3D.textures={};c.display3D.textures.TextureBase=function(a,b,f){null==f&&(f=
0);null==b&&(b=0);c.events.EventDispatcher.call(this);this.width=b;this.height=f;this.glTexture=a};h["openfl.display3D.textures.TextureBase"]=c.display3D.textures.TextureBase;c.display3D.textures.TextureBase.__name__=["openfl","display3D","textures","TextureBase"];c.display3D.textures.TextureBase.__super__=c.events.EventDispatcher;c.display3D.textures.TextureBase.prototype=q(c.events.EventDispatcher.prototype,{dispose:function(){c.gl.GL.deleteTexture(this.glTexture);null!=this.renderTarget&&this.renderTarget.dispose()},
__class__:c.display3D.textures.TextureBase});c.display3D.textures.CubeTexture=function(a,b){c.display3D.textures.TextureBase.call(this,a,b,b);this.size=b;this._textures=[];for(var f=0;6>f;){var d=f++;this._textures[d]=c.gl.GL.createTexture()}};h["openfl.display3D.textures.CubeTexture"]=c.display3D.textures.CubeTexture;c.display3D.textures.CubeTexture.__name__=["openfl","display3D","textures","CubeTexture"];c.display3D.textures.CubeTexture.__super__=c.display3D.textures.TextureBase;c.display3D.textures.CubeTexture.prototype=
q(c.display3D.textures.TextureBase.prototype,{uploadCompressedTextureFromByteArray:function(){},uploadFromBitmapData:function(a,b,f){null==f&&(f=0);for(var d=a.getPixels(new c.geom.Rectangle(0,0,a.width,a.height)),e=null,e=new Uint8Array(d.length),j=d.position=0;d.position<d.length;)e[j]=d.readUnsignedByte(),j++;c.gl.GL.bindTexture(34067,this.glTexture);switch(b){case 0:c.gl.GL.texImage2D(34069,f,6408,a.width,a.height,0,6408,5121,e);break;case 1:c.gl.GL.texImage2D(34070,f,6408,a.width,a.height,0,
6408,5121,e);break;case 2:c.gl.GL.texImage2D(34071,f,6408,a.width,a.height,0,6408,5121,e);break;case 3:c.gl.GL.texImage2D(34072,f,6408,a.width,a.height,0,6408,5121,e);break;case 4:c.gl.GL.texImage2D(34073,f,6408,a.width,a.height,0,6408,5121,e);break;case 5:c.gl.GL.texImage2D(34074,f,6408,a.width,a.height,0,6408,5121,e);break;default:throw"unknown side type";}c.gl.GL.bindTexture(34067,null)},uploadFromByteArray:function(){},glTextureAt:function(a){return this._textures[a]},__class__:c.display3D.textures.CubeTexture});
c.display3D.textures.RectangleTexture=function(a,b,f,d){null==b&&(b=!1);this.optimizeForRenderToTexture=b;c.display3D.textures.TextureBase.call(this,a,f,d);this.uploadFromUInt8Array(null)};h["openfl.display3D.textures.RectangleTexture"]=c.display3D.textures.RectangleTexture;c.display3D.textures.RectangleTexture.__name__=["openfl","display3D","textures","RectangleTexture"];c.display3D.textures.RectangleTexture.__super__=c.display3D.textures.TextureBase;c.display3D.textures.RectangleTexture.prototype=
q(c.display3D.textures.TextureBase.prototype,{uploadFromBitmapData:function(a){var b=a.getPixels(new c.geom.Rectangle(0,0,a.width,a.height));this.width=a.width;this.height=a.height;this.uploadFromUInt8Array(b.byteView)},uploadFromByteArray:function(a,b){var c=new Uint8Array(a.length);a.position=b;for(var d=0;a.position<a.length;)c[d]=a.readUnsignedByte(),d++;this.uploadFromUInt8Array(c)},uploadFromUInt8Array:function(a){c.gl.GL.bindTexture(3553,this.glTexture);c.gl.GL.texParameteri(3553,10240,9728);
c.gl.GL.texParameteri(3553,10241,9728);c.gl.GL.texParameteri(3553,10242,33071);c.gl.GL.texParameteri(3553,10243,33071);c.gl.GL.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,a);c.gl.GL.bindTexture(3553,null)},__class__:c.display3D.textures.RectangleTexture});c.display3D.textures.Texture=function(a,b,f,d){null==b&&(b=!1);this.optimizeForRenderToTexture=b;c.display3D.textures.TextureBase.call(this,a,f,d);this.uploadFromUInt8Array(null,0)};h["openfl.display3D.textures.Texture"]=c.display3D.textures.Texture;
c.display3D.textures.Texture.__name__=["openfl","display3D","textures","Texture"];c.display3D.textures.Texture.__super__=c.display3D.textures.TextureBase;c.display3D.textures.Texture.prototype=q(c.display3D.textures.TextureBase.prototype,{uploadCompressedTextureFromByteArray:function(){},uploadFromBitmapData:function(a,b){null==b&&(b=0);var f=a.getPixels(new c.geom.Rectangle(0,0,a.width,a.height));this.width=a.width;this.height=a.height;this.uploadFromUInt8Array(f.byteView,b)},uploadFromByteArray:function(a,
b,c){var d=new Uint8Array(a.length);a.position=b;for(b=0;a.position<a.length;)d[b]=a.readUnsignedByte(),b++;this.uploadFromUInt8Array(d,c)},uploadFromUInt8Array:function(a,b){c.gl.GL.bindTexture(3553,this.glTexture);c.gl.GL.texParameteri(3553,10240,9728);c.gl.GL.texParameteri(3553,10241,9728);c.gl.GL.texParameteri(3553,10242,33071);c.gl.GL.texParameteri(3553,10243,33071);c.gl.GL.texImage2D(3553,b,6408,this.width,this.height,0,6408,5121,a);c.gl.GL.bindTexture(3553,null)},__class__:c.display3D.textures.Texture});
c.errors.ArgumentError=function(a){null==a&&(a="");c.errors.Error.call(this,a)};h["openfl.errors.ArgumentError"]=c.errors.ArgumentError;c.errors.ArgumentError.__name__=["openfl","errors","ArgumentError"];c.errors.ArgumentError.__super__=c.errors.Error;c.errors.ArgumentError.prototype=q(c.errors.Error.prototype,{__class__:c.errors.ArgumentError});c.errors.IOError=function(a){null==a&&(a="");c.errors.Error.call(this,a)};h["openfl.errors.IOError"]=c.errors.IOError;c.errors.IOError.__name__=["openfl",
"errors","IOError"];c.errors.IOError.__super__=c.errors.Error;c.errors.IOError.prototype=q(c.errors.Error.prototype,{__class__:c.errors.IOError});c.errors.IllegalOperationError=function(a){null==a&&(a="");c.errors.Error.call(this,a,0)};h["openfl.errors.IllegalOperationError"]=c.errors.IllegalOperationError;c.errors.IllegalOperationError.__name__=["openfl","errors","IllegalOperationError"];c.errors.IllegalOperationError.__super__=c.errors.Error;c.errors.IllegalOperationError.prototype=q(c.errors.Error.prototype,
{__class__:c.errors.IllegalOperationError});c.errors.RangeError=function(a){null==a&&(a="");c.errors.Error.call(this,a,0)};h["openfl.errors.RangeError"]=c.errors.RangeError;c.errors.RangeError.__name__=["openfl","errors","RangeError"];c.errors.RangeError.__super__=c.errors.Error;c.errors.RangeError.prototype=q(c.errors.Error.prototype,{__class__:c.errors.RangeError});c.errors.TypeError=function(a){null==a&&(a="");c.errors.Error.call(this,a,0)};h["openfl.errors.TypeError"]=c.errors.TypeError;c.errors.TypeError.__name__=
["openfl","errors","TypeError"];c.errors.TypeError.__super__=c.errors.Error;c.errors.TypeError.prototype=q(c.errors.Error.prototype,{__class__:c.errors.TypeError});c.events.TextEvent=function(a,b,f,d){null==d&&(d="");null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f);this.text=d};h["openfl.events.TextEvent"]=c.events.TextEvent;c.events.TextEvent.__name__=["openfl","events","TextEvent"];c.events.TextEvent.__super__=c.events.Event;c.events.TextEvent.prototype=q(c.events.Event.prototype,
{__class__:c.events.TextEvent});c.events.ErrorEvent=function(a,b,f,d,e){null==e&&(e=0);null==d&&(d="");null==f&&(f=!1);null==b&&(b=!1);c.events.TextEvent.call(this,a,b,f);this.text=d;this.errorID=e};h["openfl.events.ErrorEvent"]=c.events.ErrorEvent;c.events.ErrorEvent.__name__=["openfl","events","ErrorEvent"];c.events.ErrorEvent.__super__=c.events.TextEvent;c.events.ErrorEvent.prototype=q(c.events.TextEvent.prototype,{__class__:c.events.ErrorEvent});c.events._EventDispatcher={};c.events._EventDispatcher.Listener=
function(a,b,c){this.callback=a;this.useCapture=b;this.priority=c};h["openfl.events._EventDispatcher.Listener"]=c.events._EventDispatcher.Listener;c.events._EventDispatcher.Listener.__name__=["openfl","events","_EventDispatcher","Listener"];c.events._EventDispatcher.Listener.prototype={match:function(a,b){return this.callback==a&&this.useCapture==b},__class__:c.events._EventDispatcher.Listener};c.events._EventPhase={};c.events._EventPhase.EventPhase_Impl_=function(){};h["openfl.events._EventPhase.EventPhase_Impl_"]=
c.events._EventPhase.EventPhase_Impl_;c.events._EventPhase.EventPhase_Impl_.__name__=["openfl","events","_EventPhase","EventPhase_Impl_"];c.events.FocusEvent=function(a,b,f,d,e,j){null==j&&(j=0);null==e&&(e=!1);null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f);this.keyCode=j;this.shiftKey=null==e?!1:e;this.relatedObject=d};h["openfl.events.FocusEvent"]=c.events.FocusEvent;c.events.FocusEvent.__name__=["openfl","events","FocusEvent"];c.events.FocusEvent.__super__=c.events.Event;c.events.FocusEvent.prototype=
q(c.events.Event.prototype,{clone:function(){var a=new c.events.FocusEvent(this.type,this.bubbles,this.cancelable,this.relatedObject,this.shiftKey,this.keyCode);a.target=this.target;a.currentTarget=this.currentTarget;a.eventPhase=this.eventPhase;return a},__class__:c.events.FocusEvent});c.events.HTTPStatusEvent=function(a,b,f,d){null==d&&(d=0);null==f&&(f=!1);null==b&&(b=!1);this.status=d;c.events.Event.call(this,a,b,f)};h["openfl.events.HTTPStatusEvent"]=c.events.HTTPStatusEvent;c.events.HTTPStatusEvent.__name__=
["openfl","events","HTTPStatusEvent"];c.events.HTTPStatusEvent.__super__=c.events.Event;c.events.HTTPStatusEvent.prototype=q(c.events.Event.prototype,{__class__:c.events.HTTPStatusEvent});c.events.IOErrorEvent=function(a,b,f,d,e){null==e&&(e=0);null==d&&(d="");null==f&&(f=!1);null==b&&(b=!0);c.events.ErrorEvent.call(this,a,b,f,d,e)};h["openfl.events.IOErrorEvent"]=c.events.IOErrorEvent;c.events.IOErrorEvent.__name__=["openfl","events","IOErrorEvent"];c.events.IOErrorEvent.__super__=c.events.ErrorEvent;
c.events.IOErrorEvent.prototype=q(c.events.ErrorEvent.prototype,{clone:function(){return new c.events.IOErrorEvent(this.type,this.bubbles,this.cancelable,this.text,this.errorID)},toString:function(){return"[IOErrorEvent type="+this.type+" bubbles="+k.string(this.bubbles)+" cancelable="+k.string(this.cancelable)+" text="+this.text+" errorID="+this.errorID+"]"},__class__:c.events.IOErrorEvent});c.events.KeyboardEvent=function(a,b,f,d,e,j,g,o,h,k,n){null==n&&(n=!1);null==k&&(k=!1);null==h&&(h=!1);null==
o&&(o=!1);null==g&&(g=!1);null==e&&(e=0);null==d&&(d=0);null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f);this.charCode=d;this.keyCode=e;this.keyLocation=null!=j?j:0;this.ctrlKey=g;this.altKey=o;this.shiftKey=h;this.controlKey=k;this.commandKey=n};h["openfl.events.KeyboardEvent"]=c.events.KeyboardEvent;c.events.KeyboardEvent.__name__=["openfl","events","KeyboardEvent"];c.events.KeyboardEvent.__super__=c.events.Event;c.events.KeyboardEvent.prototype=q(c.events.Event.prototype,{__class__:c.events.KeyboardEvent});
c.events.MouseEvent=function(a,b,f,d,e,j,g,o,h,k,n,l,m){null==m&&(m=0);null==l&&(l=!1);null==n&&(n=0);null==k&&(k=!1);null==h&&(h=!1);null==o&&(o=!1);null==g&&(g=!1);null==e&&(e=0);null==d&&(d=0);null==f&&(f=!1);null==b&&(b=!0);c.events.Event.call(this,a,b,f);this.shiftKey=h;this.altKey=o;this.ctrlKey=g;this.bubbles=b;this.relatedObject=j;this.delta=n;this.localX=d;this.localY=e;this.buttonDown=k;this.commandKey=l;this.clickCount=m};h["openfl.events.MouseEvent"]=c.events.MouseEvent;c.events.MouseEvent.__name__=
["openfl","events","MouseEvent"];c.events.MouseEvent.__buttonDown=null;c.events.MouseEvent.__create=function(a,b,f,d){var e=2;a==c.events.MouseEvent.MOUSE_WHEEL&&(e=0<b.deltaY?1:-1);a==c.events.MouseEvent.MOUSE_DOWN?c.events.MouseEvent.__buttonDown=!0:a==c.events.MouseEvent.MOUSE_UP&&(c.events.MouseEvent.__buttonDown=!1);a=new c.events.MouseEvent(a,!0,!1,f.x,f.y,null,b.ctrlKey,b.altKey,b.shiftKey,c.events.MouseEvent.__buttonDown,e);a.stageX=c.Lib.current.stage.get_mouseX();a.stageY=c.Lib.current.stage.get_mouseY();
a.target=d;return a};c.events.MouseEvent.__super__=c.events.Event;c.events.MouseEvent.prototype=q(c.events.Event.prototype,{updateAfterEvent:function(){},__class__:c.events.MouseEvent});c.events.ProgressEvent=function(a,b,f,d,e){null==e&&(e=0);null==d&&(d=0);null==f&&(f=!1);null==b&&(b=!1);c.events.Event.call(this,a,b,f);this.bytesLoaded=d;this.bytesTotal=e};h["openfl.events.ProgressEvent"]=c.events.ProgressEvent;c.events.ProgressEvent.__name__=["openfl","events","ProgressEvent"];c.events.ProgressEvent.__super__=
c.events.Event;c.events.ProgressEvent.prototype=q(c.events.Event.prototype,{__class__:c.events.ProgressEvent});c.events.SecurityErrorEvent=function(a,b,f,d){null==d&&(d="");null==f&&(f=!1);null==b&&(b=!1);c.events.ErrorEvent.call(this,a,b,f);this.text=d};h["openfl.events.SecurityErrorEvent"]=c.events.SecurityErrorEvent;c.events.SecurityErrorEvent.__name__=["openfl","events","SecurityErrorEvent"];c.events.SecurityErrorEvent.__super__=c.events.ErrorEvent;c.events.SecurityErrorEvent.prototype=q(c.events.ErrorEvent.prototype,
{__class__:c.events.SecurityErrorEvent});c.events.TouchEvent=function(a,b,f,d,e,j,g,o,h,k,n,l,m,q){null==q&&(q=!1);null==m&&(m=0);null==l&&(l=!1);null==n&&(n=!1);null==k&&(k=!1);null==h&&(h=!1);null==g&&(g=1);null==j&&(j=1);null==e&&(e=0);null==d&&(d=0);null==f&&(f=!1);null==b&&(b=!0);c.events.Event.call(this,a,b,f);this.shiftKey=n;this.altKey=k;this.ctrlKey=h;this.bubbles=b;this.relatedObject=o;this.delta=m;this.localX=d;this.localY=e;this.sizeX=j;this.sizeY=g;this.buttonDown=l;this.commandKey=q;
this.pressure=1;this.touchPointID=0;this.isPrimaryTouchPoint=!0};h["openfl.events.TouchEvent"]=c.events.TouchEvent;c.events.TouchEvent.__name__=["openfl","events","TouchEvent"];c.events.TouchEvent.__create=function(a,b,f,d,e){a=new c.events.TouchEvent(a,!0,!1,d.x,d.y,null,null,null,b.ctrlKey,b.altKey,b.shiftKey,!1,0,null,0);a.stageX=c.Lib.current.stage.get_mouseX();a.stageY=c.Lib.current.stage.get_mouseY();a.target=e;return a};c.events.TouchEvent.__super__=c.events.Event;c.events.TouchEvent.prototype=
q(c.events.Event.prototype,{updateAfterEvent:function(){},__class__:c.events.TouchEvent});c.filters={};c.filters.BitmapFilter=function(){};h["openfl.filters.BitmapFilter"]=c.filters.BitmapFilter;c.filters.BitmapFilter.__name__=["openfl","filters","BitmapFilter"];c.filters.BitmapFilter.prototype={clone:function(){return new c.filters.BitmapFilter},__applyFilter:function(){},__class__:c.filters.BitmapFilter};c.filters.BlurFilter=function(a,b,f){null==f&&(f=1);null==b&&(b=4);null==a&&(a=4);c.filters.BitmapFilter.call(this);
this.blurX=a;this.blurY=b;this.quality=f};h["openfl.filters.BlurFilter"]=c.filters.BlurFilter;c.filters.BlurFilter.__name__=["openfl","filters","BlurFilter"];c.filters.BlurFilter.__super__=c.filters.BitmapFilter;c.filters.BlurFilter.prototype=q(c.filters.BitmapFilter.prototype,{clone:function(){return new c.filters.BlurFilter(this.blurX,this.blurY,this.quality)},__class__:c.filters.BlurFilter});c.filters.DropShadowFilter=function(a,b,f,d,e,j,g,o,h,k,n){null==n&&(n=!1);null==k&&(k=!1);null==h&&(h=
!1);null==o&&(o=1);null==g&&(g=1);null==j&&(j=4);null==e&&(e=4);null==d&&(d=1);null==f&&(f=0);null==b&&(b=45);null==a&&(a=4);c.filters.BitmapFilter.call(this);this.distance=a;this.angle=b;this.color=f;this.alpha=d;this.blurX=e;this.blurY=j;this.strength=g;this.quality=o;this.inner=h;this.knockout=k;this.hideObject=n};h["openfl.filters.DropShadowFilter"]=c.filters.DropShadowFilter;c.filters.DropShadowFilter.__name__=["openfl","filters","DropShadowFilter"];c.filters.DropShadowFilter.__super__=c.filters.BitmapFilter;
c.filters.DropShadowFilter.prototype=q(c.filters.BitmapFilter.prototype,{clone:function(){return new c.filters.DropShadowFilter(this.distance,this.angle,this.color,this.alpha,this.blurX,this.blurY,this.strength,this.quality,this.inner,this.knockout,this.hideObject)},__class__:c.filters.DropShadowFilter});c.geom.ColorTransform=function(a,b,c,d,e,j,g,o){null==o&&(o=0);null==g&&(g=0);null==j&&(j=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.redMultiplier=a;this.greenMultiplier=
b;this.blueMultiplier=c;this.alphaMultiplier=d;this.redOffset=e;this.greenOffset=j;this.blueOffset=g;this.alphaOffset=o};h["openfl.geom.ColorTransform"]=c.geom.ColorTransform;c.geom.ColorTransform.__name__=["openfl","geom","ColorTransform"];c.geom.ColorTransform.prototype={concat:function(a){this.redMultiplier+=a.redMultiplier;this.greenMultiplier+=a.greenMultiplier;this.blueMultiplier+=a.blueMultiplier;this.alphaMultiplier+=a.alphaMultiplier},get_color:function(){return(this.redOffset|0)<<16|(this.greenOffset|
0)<<8|this.blueOffset|0},set_color:function(a){this.redOffset=a>>16&255;this.greenOffset=a>>8&255;this.blueOffset=a&255;this.blueMultiplier=this.greenMultiplier=this.redMultiplier=0;return this.get_color()},__class__:c.geom.ColorTransform,__properties__:{set_color:"set_color",get_color:"get_color"}};c.geom.Matrix3D=function(a){if(null!=a&&16==a.length)this.rawData=a;else{var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=new c.VectorData;b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var d=0,e=a.length;d<
e;){var j=d++;f[j]=a[j]}b.data=f;this.rawData=b}};h["openfl.geom.Matrix3D"]=c.geom.Matrix3D;c.geom.Matrix3D.__name__=["openfl","geom","Matrix3D"];c.geom.Matrix3D.create2D=function(a,b,f,d){null==d&&(d=0);null==f&&(f=1);var d=d*Math.PI/180,e=Math.cos(d),j=Math.sin(d),d=c.geom.Matrix3D,a=[e*f,-j*f,0,0,j*f,e*f,0,0,0,0,1,0,a,b,0,1],b=new c.VectorData;b.length=a.length;b.fixed=!0;f=Array(a.length);e=0;for(j=a.length;e<j;){var g=e++;f[g]=a[g]}b.data=f;return new d(b)};c.geom.Matrix3D.createABCD=function(a,
b,f,d,e,j){var g=c.geom.Matrix3D,a=[a,b,0,0,f,d,0,0,0,0,1,0,e,j,0,1],b=new c.VectorData;b.length=a.length;b.fixed=!0;f=Array(a.length);d=0;for(e=a.length;d<e;)j=d++,f[j]=a[j];b.data=f;return new g(b)};c.geom.Matrix3D.createOrtho=function(a,b,f,d,e,j){var g=1/(b-a),o=1/(d-f),h=1/(j-e),k=c.geom.Matrix3D,a=[2*g,0,0,0,0,2*o,0,0,0,0,-2*h,0,-(a+b)*g,-(f+d)*o,-(e+j)*h,1],b=new c.VectorData;b.length=a.length;b.fixed=!0;f=Array(a.length);d=0;for(e=a.length;d<e;)j=d++,f[j]=a[j];b.data=f;return new k(b)};c.geom.Matrix3D.interpolate=
function(a,b,f){for(var d=new c.geom.Matrix3D,e=0;16>e;){var j=e++,g=d.rawData;j>=g.length&&!g.fixed&&(g.length=j+1);g.data[j]=a.rawData.data[j]+(b.rawData.data[j]-a.rawData.data[j])*f}return d};c.geom.Matrix3D.getAxisRotation=function(a,b,f,d){var e=new c.geom.Matrix3D,a=new c.geom.Vector3D(a,b,f),d=-d*(Math.PI/180),f=Math.cos(d),d=Math.sin(d),b=1-f,j=e.rawData;0>=j.length&&!j.fixed&&(j.length=1);j.data[0]=f+a.x*a.x*b;j=e.rawData;5>=j.length&&!j.fixed&&(j.length=6);j.data[5]=f+a.y*a.y*b;j=e.rawData;
10>=j.length&&!j.fixed&&(j.length=11);j.data[10]=f+a.z*a.z*b;var f=a.x*a.y*b,j=a.z*d,g=e.rawData;4>=g.length&&!g.fixed&&(g.length=5);g.data[4]=f+j;g=e.rawData;1>=g.length&&!g.fixed&&(g.length=2);g.data[1]=f-j;f=a.x*a.z*b;j=a.y*d;g=e.rawData;8>=g.length&&!g.fixed&&(g.length=9);g.data[8]=f-j;g=e.rawData;2>=g.length&&!g.fixed&&(g.length=3);g.data[2]=f+j;f=a.y*a.z*b;j=a.x*d;a=e.rawData;9>=a.length&&!a.fixed&&(a.length=10);a.data[9]=f+j;a=e.rawData;6>=a.length&&!a.fixed&&(a.length=7);a.data[6]=f-j;return e};
c.geom.Matrix3D.prototype={append:function(a){var b=this.rawData.data[0],c=this.rawData.data[4],d=this.rawData.data[8],e=this.rawData.data[12],j=this.rawData.data[1],g=this.rawData.data[5],o=this.rawData.data[9],h=this.rawData.data[13],k=this.rawData.data[2],n=this.rawData.data[6],l=this.rawData.data[10],m=this.rawData.data[14],q=this.rawData.data[3],r=this.rawData.data[7],s=this.rawData.data[11],t=this.rawData.data[15],u=a.rawData.data[0],v=a.rawData.data[4],w=a.rawData.data[8],x=a.rawData.data[12],
y=a.rawData.data[1],B=a.rawData.data[5],C=a.rawData.data[9],E=a.rawData.data[13],D=a.rawData.data[2],F=a.rawData.data[6],H=a.rawData.data[10],I=a.rawData.data[14],J=a.rawData.data[3],K=a.rawData.data[7],L=a.rawData.data[11],a=a.rawData.data[15],G=this.rawData;0>=G.length&&!G.fixed&&(G.length=1);G.data[0]=b*u+j*v+k*w+q*x;G=this.rawData;1>=G.length&&!G.fixed&&(G.length=2);G.data[1]=b*y+j*B+k*C+q*E;G=this.rawData;2>=G.length&&!G.fixed&&(G.length=3);G.data[2]=b*D+j*F+k*H+q*I;G=this.rawData;3>=G.length&&
!G.fixed&&(G.length=4);G.data[3]=b*J+j*K+k*L+q*a;b=this.rawData;4>=b.length&&!b.fixed&&(b.length=5);b.data[4]=c*u+g*v+n*w+r*x;b=this.rawData;5>=b.length&&!b.fixed&&(b.length=6);b.data[5]=c*y+g*B+n*C+r*E;b=this.rawData;6>=b.length&&!b.fixed&&(b.length=7);b.data[6]=c*D+g*F+n*H+r*I;b=this.rawData;7>=b.length&&!b.fixed&&(b.length=8);b.data[7]=c*J+g*K+n*L+r*a;c=this.rawData;8>=c.length&&!c.fixed&&(c.length=9);c.data[8]=d*u+o*v+l*w+s*x;c=this.rawData;9>=c.length&&!c.fixed&&(c.length=10);c.data[9]=d*y+o*
B+l*C+s*E;c=this.rawData;10>=c.length&&!c.fixed&&(c.length=11);c.data[10]=d*D+o*F+l*H+s*I;c=this.rawData;11>=c.length&&!c.fixed&&(c.length=12);c.data[11]=d*J+o*K+l*L+s*a;d=this.rawData;12>=d.length&&!d.fixed&&(d.length=13);d.data[12]=e*u+h*v+m*w+t*x;u=this.rawData;13>=u.length&&!u.fixed&&(u.length=14);u.data[13]=e*y+h*B+m*C+t*E;y=this.rawData;14>=y.length&&!y.fixed&&(y.length=15);y.data[14]=e*D+h*F+m*H+t*I;D=this.rawData;15>=D.length&&!D.fixed&&(D.length=16);D.data[15]=e*J+h*K+m*L+t*a},appendRotation:function(a,
b,f){a=c.geom.Matrix3D.getAxisRotation(b.x,b.y,b.z,a);null!=f&&a.appendTranslation(f.x,f.y,f.z);this.append(a)},appendScale:function(a,b,f){this.append(new c.geom.Matrix3D(function(){var d=[a,0,0,0,0,b,0,0,0,0,f,0,0,0,0,1],e=new c.VectorData;e.length=d.length;e.fixed=!0;var j;j=Array(d.length);for(var g=0,h=d.length;g<h;){var k=g++;j[k]=d[k]}e.data=j;return e}(this)))},appendTranslation:function(a,b,c){var d=this.rawData;12>=d.length&&!d.fixed&&(d.length=13);d.data[12]=this.rawData.data[12]+a;a=this.rawData;
13>=a.length&&!a.fixed&&(a.length=14);a.data[13]=this.rawData.data[13]+b;b=this.rawData;14>=b.length&&!b.fixed&&(b.length=15);b.data[14]=this.rawData.data[14]+c},clone:function(){return new c.geom.Matrix3D(c._Vector.Vector_Impl_.copy(this.rawData))},copyColumnFrom:function(a,b){switch(a){case 0:var f=this.rawData;0>=f.length&&!f.fixed&&(f.length=1);f.data[0]=b.x;f=this.rawData;1>=f.length&&!f.fixed&&(f.length=2);f.data[1]=b.y;f=this.rawData;2>=f.length&&!f.fixed&&(f.length=3);f.data[2]=b.z;f=this.rawData;
3>=f.length&&!f.fixed&&(f.length=4);f.data[3]=b.w;break;case 1:f=this.rawData;4>=f.length&&!f.fixed&&(f.length=5);f.data[4]=b.x;f=this.rawData;5>=f.length&&!f.fixed&&(f.length=6);f.data[5]=b.y;f=this.rawData;6>=f.length&&!f.fixed&&(f.length=7);f.data[6]=b.z;f=this.rawData;7>=f.length&&!f.fixed&&(f.length=8);f.data[7]=b.w;break;case 2:f=this.rawData;8>=f.length&&!f.fixed&&(f.length=9);f.data[8]=b.x;f=this.rawData;9>=f.length&&!f.fixed&&(f.length=10);f.data[9]=b.y;f=this.rawData;10>=f.length&&!f.fixed&&
(f.length=11);f.data[10]=b.z;f=this.rawData;11>=f.length&&!f.fixed&&(f.length=12);f.data[11]=b.w;break;case 3:f=this.rawData;12>=f.length&&!f.fixed&&(f.length=13);f.data[12]=b.x;f=this.rawData;13>=f.length&&!f.fixed&&(f.length=14);f.data[13]=b.y;f=this.rawData;14>=f.length&&!f.fixed&&(f.length=15);f.data[14]=b.z;f=this.rawData;15>=f.length&&!f.fixed&&(f.length=16);f.data[15]=b.w;break;default:throw new c.errors.Error("Error, Column "+a+" out of bounds [0, ..., 3]");}},copyColumnTo:function(a,b){switch(a){case 0:b.x=
this.rawData.data[0];b.y=this.rawData.data[1];b.z=this.rawData.data[2];b.w=this.rawData.data[3];break;case 1:b.x=this.rawData.data[4];b.y=this.rawData.data[5];b.z=this.rawData.data[6];b.w=this.rawData.data[7];break;case 2:b.x=this.rawData.data[8];b.y=this.rawData.data[9];b.z=this.rawData.data[10];b.w=this.rawData.data[11];break;case 3:b.x=this.rawData.data[12];b.y=this.rawData.data[13];b.z=this.rawData.data[14];b.w=this.rawData.data[15];break;default:throw new c.errors.Error("Error, Column "+a+" out of bounds [0, ..., 3]");
}},copyFrom:function(a){this.rawData=c._Vector.Vector_Impl_.copy(a.rawData)},copyRawDataFrom:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=a.length-b,e=0;e<d;){var j=e++,g=this.rawData;j>=g.length&&!g.fixed&&(g.length=j+1);g.data[j]=a.data[j+b]}c&&this.transpose()},copyRawDataTo:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);c&&this.transpose();for(var d=this.rawData.length,e=0;e<d;){var j=e++,g=j+b;g>=a.length&&!a.fixed&&(a.length=g+1);a.data[g]=this.rawData.data[j]}c&&
this.transpose()},copyRowFrom:function(a,b){switch(a){case 0:var f=this.rawData;0>=f.length&&!f.fixed&&(f.length=1);f.data[0]=b.x;f=this.rawData;4>=f.length&&!f.fixed&&(f.length=5);f.data[4]=b.y;f=this.rawData;8>=f.length&&!f.fixed&&(f.length=9);f.data[8]=b.z;f=this.rawData;12>=f.length&&!f.fixed&&(f.length=13);f.data[12]=b.w;break;case 1:f=this.rawData;1>=f.length&&!f.fixed&&(f.length=2);f.data[1]=b.x;f=this.rawData;5>=f.length&&!f.fixed&&(f.length=6);f.data[5]=b.y;f=this.rawData;9>=f.length&&!f.fixed&&
(f.length=10);f.data[9]=b.z;f=this.rawData;13>=f.length&&!f.fixed&&(f.length=14);f.data[13]=b.w;break;case 2:f=this.rawData;2>=f.length&&!f.fixed&&(f.length=3);f.data[2]=b.x;f=this.rawData;6>=f.length&&!f.fixed&&(f.length=7);f.data[6]=b.y;f=this.rawData;10>=f.length&&!f.fixed&&(f.length=11);f.data[10]=b.z;f=this.rawData;14>=f.length&&!f.fixed&&(f.length=15);f.data[14]=b.w;break;case 3:f=this.rawData;3>=f.length&&!f.fixed&&(f.length=4);f.data[3]=b.x;f=this.rawData;7>=f.length&&!f.fixed&&(f.length=
8);f.data[7]=b.y;f=this.rawData;11>=f.length&&!f.fixed&&(f.length=12);f.data[11]=b.z;f=this.rawData;15>=f.length&&!f.fixed&&(f.length=16);f.data[15]=b.w;break;default:throw new c.errors.Error("Error, Row "+k.string(0>a?4294967296+a:a+0)+" out of bounds [0, ..., 3]");}},copyRowTo:function(a,b){switch(a){case 0:b.x=this.rawData.data[0];b.y=this.rawData.data[4];b.z=this.rawData.data[8];b.w=this.rawData.data[12];break;case 1:b.x=this.rawData.data[1];b.y=this.rawData.data[5];b.z=this.rawData.data[9];b.w=
this.rawData.data[13];break;case 2:b.x=this.rawData.data[2];b.y=this.rawData.data[6];b.z=this.rawData.data[10];b.w=this.rawData.data[14];break;case 3:b.x=this.rawData.data[3];b.y=this.rawData.data[7];b.z=this.rawData.data[11];b.w=this.rawData.data[15];break;default:throw new c.errors.Error("Error, Row "+a+" out of bounds [0, ..., 3]");}},copyToMatrix3D:function(a){a.rawData=c._Vector.Vector_Impl_.copy(this.rawData)},decompose:function(a){null==a&&(a=c.geom.Orientation3D.EULER_ANGLES);var b=c._Vector.Vector_Impl_._new(),
f=new c.geom.Matrix3D(c._Vector.Vector_Impl_.copy(this.rawData)),d=c._Vector.Vector_Impl_.copy(f.rawData),e=new c.geom.Vector3D(d.data[12],d.data[13],d.data[14]);12>=d.length&&!d.fixed&&(d.length=13);d.data[12]=0;13>=d.length&&!d.fixed&&(d.length=14);d.data[13]=0;14>=d.length&&!d.fixed&&(d.length=15);d.data[14]=0;f=new c.geom.Vector3D;f.x=Math.sqrt(d.data[0]*d.data[0]+d.data[1]*d.data[1]+d.data[2]*d.data[2]);f.y=Math.sqrt(d.data[4]*d.data[4]+d.data[5]*d.data[5]+d.data[6]*d.data[6]);f.z=Math.sqrt(d.data[8]*
d.data[8]+d.data[9]*d.data[9]+d.data[10]*d.data[10]);0>d.data[0]*(d.data[5]*d.data[10]-d.data[6]*d.data[9])-d.data[1]*(d.data[4]*d.data[10]-d.data[6]*d.data[8])+d.data[2]*(d.data[4]*d.data[9]-d.data[5]*d.data[8])&&(f.z=-f.z);0>=d.length&&!d.fixed&&(d.length=1);d.data[0]/=f.x;1>=d.length&&!d.fixed&&(d.length=2);d.data[1]/=f.x;2>=d.length&&!d.fixed&&(d.length=3);d.data[2]/=f.x;4>=d.length&&!d.fixed&&(d.length=5);d.data[4]/=f.y;5>=d.length&&!d.fixed&&(d.length=6);d.data[5]/=f.y;6>=d.length&&!d.fixed&&
(d.length=7);d.data[6]/=f.y;8>=d.length&&!d.fixed&&(d.length=9);d.data[8]/=f.z;9>=d.length&&!d.fixed&&(d.length=10);d.data[9]/=f.z;10>=d.length&&!d.fixed&&(d.length=11);d.data[10]/=f.z;var j=new c.geom.Vector3D;switch(a[1]){case 0:j.w=Math.acos((d.data[0]+d.data[5]+d.data[10]-1)/2);a=Math.sqrt((d.data[6]-d.data[9])*(d.data[6]-d.data[9])+(d.data[8]-d.data[2])*(d.data[8]-d.data[2])+(d.data[1]-d.data[4])*(d.data[1]-d.data[4]));j.x=(d.data[6]-d.data[9])/a;j.y=(d.data[8]-d.data[2])/a;j.z=(d.data[1]-d.data[4])/
a;break;case 2:a=d.data[0]+d.data[5]+d.data[10];0<a?(j.w=Math.sqrt(1+a)/2,j.x=(d.data[6]-d.data[9])/(4*j.w),j.y=(d.data[8]-d.data[2])/(4*j.w),j.z=(d.data[1]-d.data[4])/(4*j.w)):d.data[0]>d.data[5]&&d.data[0]>d.data[10]?(j.x=Math.sqrt(1+d.data[0]-d.data[5]-d.data[10])/2,j.w=(d.data[6]-d.data[9])/(4*j.x),j.y=(d.data[1]+d.data[4])/(4*j.x),j.z=(d.data[8]+d.data[2])/(4*j.x)):d.data[5]>d.data[10]?(j.y=Math.sqrt(1+d.data[5]-d.data[0]-d.data[10])/2,j.x=(d.data[1]+d.data[4])/(4*j.y),j.w=(d.data[8]-d.data[2])/
(4*j.y),j.z=(d.data[6]+d.data[9])/(4*j.y)):(j.z=Math.sqrt(1+d.data[10]-d.data[0]-d.data[5])/2,j.x=(d.data[8]+d.data[2])/(4*j.z),j.y=(d.data[6]+d.data[9])/(4*j.z),j.w=(d.data[1]-d.data[4])/(4*j.z));break;case 1:j.y=Math.asin(-d.data[2]),1!=d.data[2]&&-1!=d.data[2]?(j.x=Math.atan2(d.data[6],d.data[10]),j.z=Math.atan2(d.data[1],d.data[0])):(j.z=0,j.x=Math.atan2(d.data[4],d.data[5]))}b.fixed||(b.length++,b.data.length<b.length&&(d=Array(b.data.length+10),m.ds._Vector.Vector_Impl_.blit(b.data,0,d,0,b.data.length),
b.data=d),b.data[b.length-1]=e);b.length;b.fixed||(b.length++,b.data.length<b.length&&(e=Array(b.data.length+10),m.ds._Vector.Vector_Impl_.blit(b.data,0,e,0,b.data.length),b.data=e),b.data[b.length-1]=j);b.length;b.fixed||(b.length++,b.data.length<b.length&&(j=Array(b.data.length+10),m.ds._Vector.Vector_Impl_.blit(b.data,0,j,0,b.data.length),b.data=j),b.data[b.length-1]=f);b.length;return b},deltaTransformVector:function(a){var b=a.x,f=a.y,a=a.z;return new c.geom.Vector3D(b*this.rawData.data[0]+f*
this.rawData.data[4]+a*this.rawData.data[8]+this.rawData.data[3],b*this.rawData.data[1]+f*this.rawData.data[5]+a*this.rawData.data[9]+this.rawData.data[7],b*this.rawData.data[2]+f*this.rawData.data[6]+a*this.rawData.data[10]+this.rawData.data[11],0)},identity:function(){var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],b=new c.VectorData;b.length=a.length;b.fixed=!0;var f;f=Array(a.length);for(var d=0,e=a.length;d<e;){var j=d++;f[j]=a[j]}b.data=f;this.rawData=b},interpolateTo:function(a,b){for(var c=0;16>c;){var d=
c++,e=this.rawData;d>=e.length&&!e.fixed&&(e.length=d+1);e.data[d]=this.rawData.data[d]+(a.rawData.data[d]-this.rawData.data[d])*b}},invert:function(){var a=(this.rawData.data[0]*this.rawData.data[5]-this.rawData.data[4]*this.rawData.data[1])*(this.rawData.data[10]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[11])-(this.rawData.data[0]*this.rawData.data[9]-this.rawData.data[8]*this.rawData.data[1])*(this.rawData.data[6]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[7])+
(this.rawData.data[0]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[1])*(this.rawData.data[6]*this.rawData.data[11]-this.rawData.data[10]*this.rawData.data[7])+(this.rawData.data[4]*this.rawData.data[9]-this.rawData.data[8]*this.rawData.data[5])*(this.rawData.data[2]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[3])-(this.rawData.data[4]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[5])*(this.rawData.data[2]*this.rawData.data[11]-this.rawData.data[10]*
this.rawData.data[3])+(this.rawData.data[8]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[9])*(this.rawData.data[2]*this.rawData.data[7]-this.rawData.data[6]*this.rawData.data[3]),b=1E-11<Math.abs(a);if(b){var a=1/a,c=this.rawData.data[0],d=this.rawData.data[4],e=this.rawData.data[8],j=this.rawData.data[12],g=this.rawData.data[1],h=this.rawData.data[5],k=this.rawData.data[9],l=this.rawData.data[13],n=this.rawData.data[2],m=this.rawData.data[6],q=this.rawData.data[10],r=this.rawData.data[14],
s=this.rawData.data[3],t=this.rawData.data[7],u=this.rawData.data[11],v=this.rawData.data[15],w=this.rawData;0>=w.length&&!w.fixed&&(w.length=1);w.data[0]=a*(h*(q*v-r*u)-k*(m*v-r*t)+l*(m*u-q*t));w=this.rawData;1>=w.length&&!w.fixed&&(w.length=2);w.data[1]=-a*(g*(q*v-r*u)-k*(n*v-r*s)+l*(n*u-q*s));w=this.rawData;2>=w.length&&!w.fixed&&(w.length=3);w.data[2]=a*(g*(m*v-r*t)-h*(n*v-r*s)+l*(n*t-m*s));w=this.rawData;3>=w.length&&!w.fixed&&(w.length=4);w.data[3]=-a*(g*(m*u-q*t)-h*(n*u-q*s)+k*(n*t-m*s));w=
this.rawData;4>=w.length&&!w.fixed&&(w.length=5);w.data[4]=-a*(d*(q*v-r*u)-e*(m*v-r*t)+j*(m*u-q*t));w=this.rawData;5>=w.length&&!w.fixed&&(w.length=6);w.data[5]=a*(c*(q*v-r*u)-e*(n*v-r*s)+j*(n*u-q*s));w=this.rawData;6>=w.length&&!w.fixed&&(w.length=7);w.data[6]=-a*(c*(m*v-r*t)-d*(n*v-r*s)+j*(n*t-m*s));w=this.rawData;7>=w.length&&!w.fixed&&(w.length=8);w.data[7]=a*(c*(m*u-q*t)-d*(n*u-q*s)+e*(n*t-m*s));w=this.rawData;8>=w.length&&!w.fixed&&(w.length=9);w.data[8]=a*(d*(k*v-l*u)-e*(h*v-l*t)+j*(h*u-k*
t));w=this.rawData;9>=w.length&&!w.fixed&&(w.length=10);w.data[9]=-a*(c*(k*v-l*u)-e*(g*v-l*s)+j*(g*u-k*s));w=this.rawData;10>=w.length&&!w.fixed&&(w.length=11);w.data[10]=a*(c*(h*v-l*t)-d*(g*v-l*s)+j*(g*t-h*s));v=this.rawData;11>=v.length&&!v.fixed&&(v.length=12);v.data[11]=-a*(c*(h*u-k*t)-d*(g*u-k*s)+e*(g*t-h*s));s=this.rawData;12>=s.length&&!s.fixed&&(s.length=13);s.data[12]=-a*(d*(k*r-l*q)-e*(h*r-l*m)+j*(h*q-k*m));s=this.rawData;13>=s.length&&!s.fixed&&(s.length=14);s.data[13]=a*(c*(k*r-l*q)-e*
(g*r-l*n)+j*(g*q-k*n));s=this.rawData;14>=s.length&&!s.fixed&&(s.length=15);s.data[14]=-a*(c*(h*r-l*m)-d*(g*r-l*n)+j*(g*m-h*n));j=this.rawData;15>=j.length&&!j.fixed&&(j.length=16);j.data[15]=a*(c*(h*q-k*m)-d*(g*q-k*n)+e*(g*m-h*n))}return b},pointAt:function(a,b,f){null==b&&(b=new c.geom.Vector3D(0,0,-1));null==f&&(f=new c.geom.Vector3D(0,-1,0));var b=new c.geom.Vector3D(b.x-a.x,b.y-a.y,b.z-a.z),f=new c.geom.Vector3D(f.x,f.y,f.z,f.w),d;b.normalize();f.normalize();d=new c.geom.Vector3D(b.x,b.y,b.z,
b.w);d.scaleBy(f.x*b.x+f.y*b.y+f.z*b.z);f=new c.geom.Vector3D(f.x-d.x,f.y-d.y,f.z-d.z);0<Math.sqrt(f.x*f.x+f.y*f.y+f.z*f.z)?f.normalize():f=0!=b.x?new c.geom.Vector3D(-b.y,b.x,0):new c.geom.Vector3D(1,0,0);d=new c.geom.Vector3D(f.y*b.z-f.z*b.y,f.z*b.x-f.x*b.z,f.x*b.y-f.y*b.x,1);d.normalize();var e=this.rawData;0>=e.length&&!e.fixed&&(e.length=1);e.data[0]=d.x;e=this.rawData;4>=e.length&&!e.fixed&&(e.length=5);e.data[4]=d.y;e=this.rawData;8>=e.length&&!e.fixed&&(e.length=9);e.data[8]=d.z;d=this.rawData;
12>=d.length&&!d.fixed&&(d.length=13);d.data[12]=0;d=this.rawData;1>=d.length&&!d.fixed&&(d.length=2);d.data[1]=f.x;d=this.rawData;5>=d.length&&!d.fixed&&(d.length=6);d.data[5]=f.y;d=this.rawData;9>=d.length&&!d.fixed&&(d.length=10);d.data[9]=f.z;f=this.rawData;13>=f.length&&!f.fixed&&(f.length=14);f.data[13]=0;f=this.rawData;2>=f.length&&!f.fixed&&(f.length=3);f.data[2]=b.x;f=this.rawData;6>=f.length&&!f.fixed&&(f.length=7);f.data[6]=b.y;f=this.rawData;10>=f.length&&!f.fixed&&(f.length=11);f.data[10]=
b.z;b=this.rawData;14>=b.length&&!b.fixed&&(b.length=15);b.data[14]=0;b=this.rawData;3>=b.length&&!b.fixed&&(b.length=4);b.data[3]=a.x;b=this.rawData;7>=b.length&&!b.fixed&&(b.length=8);b.data[7]=a.y;b=this.rawData;11>=b.length&&!b.fixed&&(b.length=12);b.data[11]=a.z;a=this.rawData;15>=a.length&&!a.fixed&&(a.length=16);a.data[15]=1},prepend:function(a){var b=a.rawData.data[0],c=a.rawData.data[4],d=a.rawData.data[8],e=a.rawData.data[12],j=a.rawData.data[1],g=a.rawData.data[5],h=a.rawData.data[9],k=
a.rawData.data[13],l=a.rawData.data[2],n=a.rawData.data[6],m=a.rawData.data[10],q=a.rawData.data[14],r=a.rawData.data[3],s=a.rawData.data[7],t=a.rawData.data[11],a=a.rawData.data[15],u=this.rawData.data[0],v=this.rawData.data[4],w=this.rawData.data[8],x=this.rawData.data[12],y=this.rawData.data[1],B=this.rawData.data[5],C=this.rawData.data[9],E=this.rawData.data[13],D=this.rawData.data[2],F=this.rawData.data[6],H=this.rawData.data[10],I=this.rawData.data[14],J=this.rawData.data[3],K=this.rawData.data[7],
M=this.rawData.data[11],L=this.rawData.data[15],G=this.rawData;0>=G.length&&!G.fixed&&(G.length=1);G.data[0]=b*u+j*v+l*w+r*x;G=this.rawData;1>=G.length&&!G.fixed&&(G.length=2);G.data[1]=b*y+j*B+l*C+r*E;G=this.rawData;2>=G.length&&!G.fixed&&(G.length=3);G.data[2]=b*D+j*F+l*H+r*I;G=this.rawData;3>=G.length&&!G.fixed&&(G.length=4);G.data[3]=b*J+j*K+l*M+r*L;b=this.rawData;4>=b.length&&!b.fixed&&(b.length=5);b.data[4]=c*u+g*v+n*w+s*x;b=this.rawData;5>=b.length&&!b.fixed&&(b.length=6);b.data[5]=c*y+g*B+
n*C+s*E;b=this.rawData;6>=b.length&&!b.fixed&&(b.length=7);b.data[6]=c*D+g*F+n*H+s*I;b=this.rawData;7>=b.length&&!b.fixed&&(b.length=8);b.data[7]=c*J+g*K+n*M+s*L;c=this.rawData;8>=c.length&&!c.fixed&&(c.length=9);c.data[8]=d*u+h*v+m*w+t*x;c=this.rawData;9>=c.length&&!c.fixed&&(c.length=10);c.data[9]=d*y+h*B+m*C+t*E;c=this.rawData;10>=c.length&&!c.fixed&&(c.length=11);c.data[10]=d*D+h*F+m*H+t*I;c=this.rawData;11>=c.length&&!c.fixed&&(c.length=12);c.data[11]=d*J+h*K+m*M+t*L;d=this.rawData;12>=d.length&&
!d.fixed&&(d.length=13);d.data[12]=e*u+k*v+q*w+a*x;d=this.rawData;13>=d.length&&!d.fixed&&(d.length=14);d.data[13]=e*y+k*B+q*C+a*E;y=this.rawData;14>=y.length&&!y.fixed&&(y.length=15);y.data[14]=e*D+k*F+q*H+a*I;D=this.rawData;15>=D.length&&!D.fixed&&(D.length=16);D.data[15]=e*J+k*K+q*M+a*L},prependRotation:function(a,b,f){a=c.geom.Matrix3D.getAxisRotation(b.x,b.y,b.z,a);null!=f&&a.appendTranslation(f.x,f.y,f.z);this.prepend(a)},prependScale:function(a,b,f){this.prepend(new c.geom.Matrix3D(function(){var d=
[a,0,0,0,0,b,0,0,0,0,f,0,0,0,0,1],e=new c.VectorData;e.length=d.length;e.fixed=!0;var j;j=Array(d.length);for(var g=0,h=d.length;g<h;){var k=g++;j[k]=d[k]}e.data=j;return e}(this)))},prependTranslation:function(a,b,f){var d=new c.geom.Matrix3D;d.set_position(new c.geom.Vector3D(a,b,f));this.prepend(d)},recompose:function(a,b){if(3>a.length||0==a.data[2].x||0==a.data[2].y||0==a.data[2].z)return!1;null==b&&(b=c.geom.Orientation3D.EULER_ANGLES);this.identity();var f=[];f[0]=f[1]=f[2]=a.data[2].x;f[4]=
f[5]=f[6]=a.data[2].y;f[8]=f[9]=f[10]=a.data[2].z;switch(b[1]){case 1:var d=Math.cos(a.data[1].x),e=Math.cos(a.data[1].y),j=Math.cos(a.data[1].z),g=Math.sin(a.data[1].x),h=Math.sin(a.data[1].y),k=Math.sin(a.data[1].z),l=this.rawData;0>=l.length&&!l.fixed&&(l.length=1);l.data[0]=e*j*f[0];l=this.rawData;1>=l.length&&!l.fixed&&(l.length=2);l.data[1]=e*k*f[1];l=this.rawData;2>=l.length&&!l.fixed&&(l.length=3);l.data[2]=-h*f[2];l=this.rawData;3>=l.length&&!l.fixed&&(l.length=4);l.data[3]=0;l=this.rawData;
4>=l.length&&!l.fixed&&(l.length=5);l.data[4]=(g*h*j-d*k)*f[4];l=this.rawData;5>=l.length&&!l.fixed&&(l.length=6);l.data[5]=(g*h*k+d*j)*f[5];l=this.rawData;6>=l.length&&!l.fixed&&(l.length=7);l.data[6]=g*e*f[6];l=this.rawData;7>=l.length&&!l.fixed&&(l.length=8);l.data[7]=0;l=this.rawData;8>=l.length&&!l.fixed&&(l.length=9);l.data[8]=(d*h*j+g*k)*f[8];l=this.rawData;9>=l.length&&!l.fixed&&(l.length=10);l.data[9]=(d*h*k-g*j)*f[9];j=this.rawData;10>=j.length&&!j.fixed&&(j.length=11);j.data[10]=d*e*f[10];
f=this.rawData;11>=f.length&&!f.fixed&&(f.length=12);f.data[11]=0;f=this.rawData;12>=f.length&&!f.fixed&&(f.length=13);f.data[12]=a.data[0].x;f=this.rawData;13>=f.length&&!f.fixed&&(f.length=14);f.data[13]=a.data[0].y;f=this.rawData;14>=f.length&&!f.fixed&&(f.length=15);f.data[14]=a.data[0].z;f=this.rawData;15>=f.length&&!f.fixed&&(f.length=16);f.data[15]=1;break;default:d=a.data[1].x,e=a.data[1].y,j=a.data[1].z,g=a.data[1].w,B.enumEq(b,c.geom.Orientation3D.AXIS_ANGLE)&&(d*=Math.sin(g/2),e*=Math.sin(g/
2),j*=Math.sin(g/2),g=Math.cos(g/2)),h=this.rawData,0>=h.length&&!h.fixed&&(h.length=1),h.data[0]=(1-2*e*e-2*j*j)*f[0],h=this.rawData,1>=h.length&&!h.fixed&&(h.length=2),h.data[1]=(2*d*e+2*g*j)*f[1],h=this.rawData,2>=h.length&&!h.fixed&&(h.length=3),h.data[2]=(2*d*j-2*g*e)*f[2],h=this.rawData,3>=h.length&&!h.fixed&&(h.length=4),h.data[3]=0,h=this.rawData,4>=h.length&&!h.fixed&&(h.length=5),h.data[4]=(2*d*e-2*g*j)*f[4],h=this.rawData,5>=h.length&&!h.fixed&&(h.length=6),h.data[5]=(1-2*d*d-2*j*j)*f[5],
h=this.rawData,6>=h.length&&!h.fixed&&(h.length=7),h.data[6]=(2*e*j+2*g*d)*f[6],h=this.rawData,7>=h.length&&!h.fixed&&(h.length=8),h.data[7]=0,h=this.rawData,8>=h.length&&!h.fixed&&(h.length=9),h.data[8]=(2*d*j+2*g*e)*f[8],h=this.rawData,9>=h.length&&!h.fixed&&(h.length=10),h.data[9]=(2*e*j-2*g*d)*f[9],j=this.rawData,10>=j.length&&!j.fixed&&(j.length=11),j.data[10]=(1-2*d*d-2*e*e)*f[10],f=this.rawData,11>=f.length&&!f.fixed&&(f.length=12),f.data[11]=0,f=this.rawData,12>=f.length&&!f.fixed&&(f.length=
13),f.data[12]=a.data[0].x,f=this.rawData,13>=f.length&&!f.fixed&&(f.length=14),f.data[13]=a.data[0].y,f=this.rawData,14>=f.length&&!f.fixed&&(f.length=15),f.data[14]=a.data[0].z,f=this.rawData,15>=f.length&&!f.fixed&&(f.length=16),f.data[15]=1}0==a.data[2].x&&(f=this.rawData,0>=f.length&&!f.fixed&&(f.length=1),f.data[0]=1E-15);0==a.data[2].y&&(f=this.rawData,5>=f.length&&!f.fixed&&(f.length=6),f.data[5]=1E-15);0==a.data[2].z&&(f=this.rawData,10>=f.length&&!f.fixed&&(f.length=11),f.data[10]=1E-15);
return!(0==a.data[2].x||0==a.data[2].y||0==a.data[2].y)},transformVector:function(a){var b=a.x,f=a.y,a=a.z;return new c.geom.Vector3D(b*this.rawData.data[0]+f*this.rawData.data[4]+a*this.rawData.data[8]+this.rawData.data[12],b*this.rawData.data[1]+f*this.rawData.data[5]+a*this.rawData.data[9]+this.rawData.data[13],b*this.rawData.data[2]+f*this.rawData.data[6]+a*this.rawData.data[10]+this.rawData.data[14],b*this.rawData.data[3]+f*this.rawData.data[7]+a*this.rawData.data[11]+this.rawData.data[15])},
transformVectors:function(a,b){for(var c=0;c+3<=a.length;){var d=a.data[c],e=a.data[c+1],j=a.data[c+2];c>=b.length&&!b.fixed&&(b.length=c+1);b.data[c]=d*this.rawData.data[0]+e*this.rawData.data[4]+j*this.rawData.data[8]+this.rawData.data[12];var g=c+1;g>=b.length&&!b.fixed&&(b.length=g+1);b.data[g]=d*this.rawData.data[1]+e*this.rawData.data[5]+j*this.rawData.data[9]+this.rawData.data[13];g=c+2;g>=b.length&&!b.fixed&&(b.length=g+1);b.data[g]=d*this.rawData.data[2]+e*this.rawData.data[6]+j*this.rawData.data[10]+
this.rawData.data[14];c+=3}},transpose:function(){var a=c._Vector.Vector_Impl_.copy(this.rawData),b=this.rawData;1>=b.length&&!b.fixed&&(b.length=2);b.data[1]=a.data[4];b=this.rawData;2>=b.length&&!b.fixed&&(b.length=3);b.data[2]=a.data[8];b=this.rawData;3>=b.length&&!b.fixed&&(b.length=4);b.data[3]=a.data[12];b=this.rawData;4>=b.length&&!b.fixed&&(b.length=5);b.data[4]=a.data[1];b=this.rawData;6>=b.length&&!b.fixed&&(b.length=7);b.data[6]=a.data[9];b=this.rawData;7>=b.length&&!b.fixed&&(b.length=
8);b.data[7]=a.data[13];b=this.rawData;8>=b.length&&!b.fixed&&(b.length=9);b.data[8]=a.data[2];b=this.rawData;9>=b.length&&!b.fixed&&(b.length=10);b.data[9]=a.data[6];b=this.rawData;11>=b.length&&!b.fixed&&(b.length=12);b.data[11]=a.data[14];b=this.rawData;12>=b.length&&!b.fixed&&(b.length=13);b.data[12]=a.data[3];b=this.rawData;13>=b.length&&!b.fixed&&(b.length=14);b.data[13]=a.data[7];b=this.rawData;14>=b.length&&!b.fixed&&(b.length=15);b.data[14]=a.data[11]},get_determinant:function(){return(this.rawData.data[0]*
this.rawData.data[5]-this.rawData.data[4]*this.rawData.data[1])*(this.rawData.data[10]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[11])-(this.rawData.data[0]*this.rawData.data[9]-this.rawData.data[8]*this.rawData.data[1])*(this.rawData.data[6]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[7])+(this.rawData.data[0]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[1])*(this.rawData.data[6]*this.rawData.data[11]-this.rawData.data[10]*this.rawData.data[7])+
(this.rawData.data[4]*this.rawData.data[9]-this.rawData.data[8]*this.rawData.data[5])*(this.rawData.data[2]*this.rawData.data[15]-this.rawData.data[14]*this.rawData.data[3])-(this.rawData.data[4]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[5])*(this.rawData.data[2]*this.rawData.data[11]-this.rawData.data[10]*this.rawData.data[3])+(this.rawData.data[8]*this.rawData.data[13]-this.rawData.data[12]*this.rawData.data[9])*(this.rawData.data[2]*this.rawData.data[7]-this.rawData.data[6]*
this.rawData.data[3])},get_position:function(){return new c.geom.Vector3D(this.rawData.data[12],this.rawData.data[13],this.rawData.data[14])},set_position:function(a){var b=this.rawData;12>=b.length&&!b.fixed&&(b.length=13);b.data[12]=a.x;b=this.rawData;13>=b.length&&!b.fixed&&(b.length=14);b.data[13]=a.y;b=this.rawData;14>=b.length&&!b.fixed&&(b.length=15);b.data[14]=a.z;return a},__class__:c.geom.Matrix3D,__properties__:{set_position:"set_position",get_position:"get_position",get_determinant:"get_determinant"}};
c.geom.Orientation3D=h["openfl.geom.Orientation3D"]={__ename__:!0,__constructs__:["AXIS_ANGLE","EULER_ANGLES","QUATERNION"]};c.geom.Orientation3D.AXIS_ANGLE=["AXIS_ANGLE",0];c.geom.Orientation3D.AXIS_ANGLE.toString=u;c.geom.Orientation3D.AXIS_ANGLE.__enum__=c.geom.Orientation3D;c.geom.Orientation3D.EULER_ANGLES=["EULER_ANGLES",1];c.geom.Orientation3D.EULER_ANGLES.toString=u;c.geom.Orientation3D.EULER_ANGLES.__enum__=c.geom.Orientation3D;c.geom.Orientation3D.QUATERNION=["QUATERNION",2];c.geom.Orientation3D.QUATERNION.toString=
u;c.geom.Orientation3D.QUATERNION.__enum__=c.geom.Orientation3D;c.geom.Transform=function(a){this.colorTransform=new c.geom.ColorTransform;this.concatenatedColorTransform=new c.geom.ColorTransform;this.concatenatedMatrix=new c.geom.Matrix;this.pixelBounds=new c.geom.Rectangle;this.__displayObject=a;this.__matrix=new c.geom.Matrix};h["openfl.geom.Transform"]=c.geom.Transform;c.geom.Transform.__name__=["openfl","geom","Transform"];c.geom.Transform.prototype={get_matrix:function(){return null!=this.__matrix?
(this.__matrix.identity(),this.__matrix.scale(this.__displayObject.get_scaleX(),this.__displayObject.get_scaleY()),this.__matrix.rotate(this.__displayObject.get_rotation()*(Math.PI/180)),this.__matrix.translate(this.__displayObject.get_x(),this.__displayObject.get_y()),this.__matrix.clone()):null},set_matrix:function(a){if(null==a)return this.__matrix=null;null!=this.__displayObject&&(this.__displayObject.set_x(a.tx),this.__displayObject.set_y(a.ty),this.__displayObject.set_scaleX(Math.sqrt(a.a*a.a+
a.b*a.b)),this.__displayObject.set_scaleY(Math.sqrt(a.c*a.c+a.d*a.d)),this.__displayObject.set_rotation(Math.atan2(a.b,a.a)*(180/Math.PI)));return a},__class__:c.geom.Transform,__properties__:{set_matrix:"set_matrix",get_matrix:"get_matrix"}};c.gl={};c.gl.GL=function(){};h["openfl.gl.GL"]=c.gl.GL;c.gl.GL.__name__=["openfl","gl","GL"];c.gl.GL.__properties__={get_version:"get_version",get_drawingBufferWidth:"get_drawingBufferWidth",get_drawingBufferHeight:"get_drawingBufferHeight"};c.gl.GL.drawingBufferHeight=
null;c.gl.GL.drawingBufferWidth=null;c.gl.GL.version=null;c.gl.GL.__context=null;c.gl.GL.activeTexture=function(a){c.gl.GL.__context.activeTexture(a)};c.gl.GL.attachShader=function(a,b){c.gl.GL.__context.attachShader(a,b)};c.gl.GL.bindAttribLocation=function(a,b,f){c.gl.GL.__context.bindAttribLocation(a,b,f)};c.gl.GL.bindBitmapDataTexture=function(a){null==a.__glTexture?(a.__glTexture=c.gl.GL.__context.createTexture(),c.gl.GL.__context.bindTexture(3553,a.__glTexture),c.gl.GL.__context.texParameteri(3553,
10242,33071),c.gl.GL.__context.texParameteri(3553,10243,33071),c.gl.GL.__context.texParameteri(3553,10241,9728),c.gl.GL.__context.texParameteri(3553,10240,9728),a.__syncImageData(),null!=a.__sourceImage?c.gl.GL.__context.texImage2D(3553,0,6408,6408,5121,a.__sourceImage):c.gl.GL.__context.texImage2D(3553,0,6408,6408,5121,a.__sourceCanvas)):c.gl.GL.__context.bindTexture(3553,a.__glTexture)};c.gl.GL.bindBuffer=function(a,b){c.gl.GL.__context.bindBuffer(a,b)};c.gl.GL.bindFramebuffer=function(a,b){c.gl.GL.__context.bindFramebuffer(a,
b)};c.gl.GL.bindRenderbuffer=function(a,b){c.gl.GL.__context.bindRenderbuffer(a,b)};c.gl.GL.bindTexture=function(a,b){c.gl.GL.__context.bindTexture(a,b)};c.gl.GL.blendColor=function(a,b,f,d){c.gl.GL.__context.blendColor(a,b,f,d)};c.gl.GL.blendEquation=function(a){c.gl.GL.__context.blendEquation(a)};c.gl.GL.blendEquationSeparate=function(a,b){c.gl.GL.__context.blendEquationSeparate(a,b)};c.gl.GL.blendFunc=function(a,b){c.gl.GL.__context.blendFunc(a,b)};c.gl.GL.blendFuncSeparate=function(a,b,f,d){c.gl.GL.__context.blendFuncSeparate(a,
b,f,d)};c.gl.GL.bufferData=function(a,b,f){c.gl.GL.__context.bufferData(a,b,f)};c.gl.GL.bufferSubData=function(a,b,f){c.gl.GL.__context.bufferSubData(a,b,f)};c.gl.GL.checkFramebufferStatus=function(a){return c.gl.GL.__context.checkFramebufferStatus(a)};c.gl.GL.clear=function(a){c.gl.GL.__context.clear(a)};c.gl.GL.clearColor=function(a,b,f,d){c.gl.GL.__context.clearColor(a,b,f,d)};c.gl.GL.clearDepth=function(a){c.gl.GL.__context.clearDepth(a)};c.gl.GL.clearStencil=function(a){c.gl.GL.__context.clearStencil(a)};
c.gl.GL.colorMask=function(a,b,f,d){c.gl.GL.__context.colorMask(a,b,f,d)};c.gl.GL.compileShader=function(a){c.gl.GL.__context.compileShader(a)};c.gl.GL.compressedTexImage2D=function(a,b,f,d,e,j,g){c.gl.GL.__context.compressedTexImage2D(a,b,f,d,e,j,g)};c.gl.GL.compressedTexSubImage2D=function(a,b,f,d,e,j,g,h){c.gl.GL.__context.compressedTexSubImage2D(a,b,f,d,e,j,g,h)};c.gl.GL.copyTexImage2D=function(a,b,f,d,e,j,g,h){c.gl.GL.__context.copyTexImage2D(a,b,f,d,e,j,g,h)};c.gl.GL.copyTexSubImage2D=function(a,
b,f,d,e,j,g,h){c.gl.GL.__context.copyTexSubImage2D(a,b,f,d,e,j,g,h)};c.gl.GL.createBuffer=function(){return c.gl.GL.__context.createBuffer()};c.gl.GL.createFramebuffer=function(){return c.gl.GL.__context.createFramebuffer()};c.gl.GL.createProgram=function(){return c.gl.GL.__context.createProgram()};c.gl.GL.createRenderbuffer=function(){return c.gl.GL.__context.createRenderbuffer()};c.gl.GL.createShader=function(a){return c.gl.GL.__context.createShader(a)};c.gl.GL.createTexture=function(){return c.gl.GL.__context.createTexture()};
c.gl.GL.cullFace=function(a){c.gl.GL.__context.cullFace(a)};c.gl.GL.deleteBuffer=function(a){c.gl.GL.__context.deleteBuffer(a)};c.gl.GL.deleteFramebuffer=function(a){c.gl.GL.__context.deleteFramebuffer(a)};c.gl.GL.deleteProgram=function(a){c.gl.GL.__context.deleteProgram(a)};c.gl.GL.deleteRenderbuffer=function(a){c.gl.GL.__context.deleteRenderbuffer(a)};c.gl.GL.deleteShader=function(a){c.gl.GL.__context.deleteShader(a)};c.gl.GL.deleteTexture=function(a){c.gl.GL.__context.deleteTexture(a)};c.gl.GL.depthFunc=
function(a){c.gl.GL.__context.depthFunc(a)};c.gl.GL.depthMask=function(a){c.gl.GL.__context.depthMask(a)};c.gl.GL.depthRange=function(a,b){c.gl.GL.__context.depthRange(a,b)};c.gl.GL.detachShader=function(a,b){c.gl.GL.__context.detachShader(a,b)};c.gl.GL.disable=function(a){c.gl.GL.__context.disable(a)};c.gl.GL.disableVertexAttribArray=function(a){c.gl.GL.__context.disableVertexAttribArray(a)};c.gl.GL.drawArrays=function(a,b,f){c.gl.GL.__context.drawArrays(a,b,f)};c.gl.GL.drawElements=function(a,b,
f,d){c.gl.GL.__context.drawElements(a,b,f,d)};c.gl.GL.enable=function(a){c.gl.GL.__context.enable(a)};c.gl.GL.enableVertexAttribArray=function(a){c.gl.GL.__context.enableVertexAttribArray(a)};c.gl.GL.finish=function(){c.gl.GL.__context.finish()};c.gl.GL.flush=function(){c.gl.GL.__context.flush()};c.gl.GL.framebufferRenderbuffer=function(a,b,f,d){c.gl.GL.__context.framebufferRenderbuffer(a,b,f,d)};c.gl.GL.framebufferTexture2D=function(a,b,f,d,e){c.gl.GL.__context.framebufferTexture2D(a,b,f,d,e)};c.gl.GL.frontFace=
function(a){c.gl.GL.__context.frontFace(a)};c.gl.GL.generateMipmap=function(a){c.gl.GL.__context.generateMipmap(a)};c.gl.GL.getActiveAttrib=function(a,b){return c.gl.GL.__context.getActiveAttrib(a,b)};c.gl.GL.getActiveUniform=function(a,b){return c.gl.GL.__context.getActiveUniform(a,b)};c.gl.GL.getAttachedShaders=function(a){return c.gl.GL.__context.getAttachedShaders(a)};c.gl.GL.getAttribLocation=function(a,b){return c.gl.GL.__context.getAttribLocation(a,b)};c.gl.GL.getBufferParameter=function(a,
b){return c.gl.GL.__context.getBufferParameter(a,b)};c.gl.GL.getContextAttributes=function(){return c.gl.GL.__context.getContextAttributes()};c.gl.GL.getError=function(){return c.gl.GL.__context.getError()};c.gl.GL.getExtension=function(a){return c.gl.GL.__context.getExtension(a)};c.gl.GL.getFramebufferAttachmentParameter=function(a,b,f){return c.gl.GL.__context.getFramebufferAttachmentParameter(a,b,f)};c.gl.GL.getParameter=function(a){return c.gl.GL.__context.getParameter(a)};c.gl.GL.getProgramInfoLog=
function(a){return c.gl.GL.__context.getProgramInfoLog(a)};c.gl.GL.getProgramParameter=function(a,b){return c.gl.GL.__context.getProgramParameter(a,b)};c.gl.GL.getRenderbufferParameter=function(a,b){return c.gl.GL.__context.getRenderbufferParameter(a,b)};c.gl.GL.getShaderInfoLog=function(a){return c.gl.GL.__context.getShaderInfoLog(a)};c.gl.GL.getShaderParameter=function(a,b){return c.gl.GL.__context.getShaderParameter(a,b)};c.gl.GL.getShaderPrecisionFormat=function(){c.Lib.notImplemented("GL.getShaderPrecisionFormat");
return null};c.gl.GL.getShaderSource=function(a){return c.gl.GL.__context.getShaderSource(a)};c.gl.GL.getSupportedExtensions=function(){return c.gl.GL.__context.getSupportedExtensions()};c.gl.GL.getTexParameter=function(a,b){return c.gl.GL.__context.getTexParameter(a,b)};c.gl.GL.getUniform=function(a,b){return c.gl.GL.__context.getUniform(a,b)};c.gl.GL.getUniformLocation=function(a,b){return c.gl.GL.__context.getUniformLocation(a,b)};c.gl.GL.getVertexAttrib=function(a,b){return c.gl.GL.__context.getVertexAttrib(a,
b)};c.gl.GL.getVertexAttribOffset=function(a,b){return c.gl.GL.__context.getVertexAttribOffset(a,b)};c.gl.GL.hint=function(a,b){c.gl.GL.__context.hint(a,b)};c.gl.GL.isBuffer=function(a){return c.gl.GL.__context.isBuffer(a)};c.gl.GL.isEnabled=function(a){return c.gl.GL.__context.isEnabled(a)};c.gl.GL.isFramebuffer=function(a){return c.gl.GL.__context.isFramebuffer(a)};c.gl.GL.isProgram=function(a){return c.gl.GL.__context.isProgram(a)};c.gl.GL.isRenderbuffer=function(a){return c.gl.GL.__context.isRenderbuffer(a)};
c.gl.GL.isShader=function(a){return c.gl.GL.__context.isShader(a)};c.gl.GL.isTexture=function(a){return c.gl.GL.__context.isTexture(a)};c.gl.GL.lineWidth=function(a){c.gl.GL.__context.lineWidth(a)};c.gl.GL.linkProgram=function(a){c.gl.GL.__context.linkProgram(a)};c.gl.GL.pixelStorei=function(a,b){c.gl.GL.__context.pixelStorei(a,b)};c.gl.GL.polygonOffset=function(a,b){c.gl.GL.__context.polygonOffset(a,b)};c.gl.GL.readPixels=function(a,b,f,d,e,j,g){c.gl.GL.__context.readPixels(a,b,f,d,e,j,g)};c.gl.GL.renderbufferStorage=
function(a,b,f,d){c.gl.GL.__context.renderbufferStorage(a,b,f,d)};c.gl.GL.sampleCoverage=function(a,b){c.gl.GL.__context.sampleCoverage(a,b)};c.gl.GL.scissor=function(a,b,f,d){c.gl.GL.__context.scissor(a,b,f,d)};c.gl.GL.shaderSource=function(a,b){c.gl.GL.__context.shaderSource(a,b)};c.gl.GL.stencilFunc=function(a,b,f){c.gl.GL.__context.stencilFunc(a,b,f)};c.gl.GL.stencilFuncSeparate=function(a,b,f,d){c.gl.GL.__context.stencilFuncSeparate(a,b,f,d)};c.gl.GL.stencilMask=function(a){c.gl.GL.__context.stencilMask(a)};
c.gl.GL.stencilMaskSeparate=function(a,b){c.gl.GL.__context.stencilMaskSeparate(a,b)};c.gl.GL.stencilOp=function(a,b,f){c.gl.GL.__context.stencilOp(a,b,f)};c.gl.GL.stencilOpSeparate=function(a,b,f,d){c.gl.GL.__context.stencilOpSeparate(a,b,f,d)};c.gl.GL.texImage2D=function(a,b,f,d,e,j,g,h,k){c.gl.GL.__context.texImage2D(a,b,f,d,e,j,g,h,k)};c.gl.GL.texParameterf=function(a,b,f){c.gl.GL.__context.texParameterf(a,b,f)};c.gl.GL.texParameteri=function(a,b,f){c.gl.GL.__context.texParameteri(a,b,f)};c.gl.GL.texSubImage2D=
function(a,b,f,d,e,j,g,h,k){c.gl.GL.__context.texSubImage2D(a,b,f,d,e,j,g,h,k)};c.gl.GL.uniform1f=function(a,b){c.gl.GL.__context.uniform1f(a,b)};c.gl.GL.uniform1fv=function(a,b){c.gl.GL.__context.uniform1fv(a,b)};c.gl.GL.uniform1i=function(a,b){c.gl.GL.__context.uniform1i(a,b)};c.gl.GL.uniform1iv=function(a,b){c.gl.GL.__context.uniform1iv(a,b)};c.gl.GL.uniform2f=function(a,b,f){c.gl.GL.__context.uniform2f(a,b,f)};c.gl.GL.uniform2fv=function(a,b){c.gl.GL.__context.uniform2fv(a,b)};c.gl.GL.uniform2i=
function(a,b,f){c.gl.GL.__context.uniform2i(a,b,f)};c.gl.GL.uniform2iv=function(a,b){c.gl.GL.__context.uniform2iv(a,b)};c.gl.GL.uniform3f=function(a,b,f,d){c.gl.GL.__context.uniform3f(a,b,f,d)};c.gl.GL.uniform3fv=function(a,b){c.gl.GL.__context.uniform3fv(a,b)};c.gl.GL.uniform3i=function(a,b,f,d){c.gl.GL.__context.uniform3i(a,b,f,d)};c.gl.GL.uniform3iv=function(a,b){c.gl.GL.__context.uniform3iv(a,b)};c.gl.GL.uniform4f=function(a,b,f,d,e){c.gl.GL.__context.uniform4f(a,b,f,d,e)};c.gl.GL.uniform4fv=
function(a,b){c.gl.GL.__context.uniform4fv(a,b)};c.gl.GL.uniform4i=function(a,b,f,d,e){c.gl.GL.__context.uniform4i(a,b,f,d,e)};c.gl.GL.uniform4iv=function(a,b){c.gl.GL.__context.uniform4iv(a,b)};c.gl.GL.uniformMatrix2fv=function(a,b,f){c.gl.GL.__context.uniformMatrix2fv(a,b,f)};c.gl.GL.uniformMatrix3fv=function(a,b,f){c.gl.GL.__context.uniformMatrix3fv(a,b,f)};c.gl.GL.uniformMatrix4fv=function(a,b,f){c.gl.GL.__context.uniformMatrix4fv(a,b,f)};c.gl.GL.uniformMatrix3D=function(a,b,f){c.gl.GL.__context.uniformMatrix4fv(a,
b,new Float32Array(function(){for(var a=f.rawData,b=[],c=0,d=a.data.length;c<d;){var e=c++;b.push(a.data[e])}return b}(this)))};c.gl.GL.useProgram=function(a){c.gl.GL.__context.useProgram(a)};c.gl.GL.validateProgram=function(a){c.gl.GL.__context.validateProgram(a)};c.gl.GL.vertexAttrib1f=function(a,b){c.gl.GL.__context.vertexAttrib1f(a,b)};c.gl.GL.vertexAttrib1fv=function(a,b){c.gl.GL.__context.vertexAttrib1fv(a,b)};c.gl.GL.vertexAttrib2f=function(a,b,f){c.gl.GL.__context.vertexAttrib2f(a,b,f)};c.gl.GL.vertexAttrib2fv=
function(a,b){c.gl.GL.__context.vertexAttrib2fv(a,b)};c.gl.GL.vertexAttrib3f=function(a,b,f,d){c.gl.GL.__context.vertexAttrib3f(a,b,f,d)};c.gl.GL.vertexAttrib3fv=function(a,b){c.gl.GL.__context.vertexAttrib3fv(a,b)};c.gl.GL.vertexAttrib4f=function(a,b,f,d,e){c.gl.GL.__context.vertexAttrib4f(a,b,f,d,e)};c.gl.GL.vertexAttrib4fv=function(a,b){c.gl.GL.__context.vertexAttrib4fv(a,b)};c.gl.GL.vertexAttribPointer=function(a,b,f,d,e,j){c.gl.GL.__context.vertexAttribPointer(a,b,f,d,e,j)};c.gl.GL.viewport=
function(a,b,f,d){c.gl.GL.__context.viewport(a,b,f,d)};c.gl.GL.get_drawingBufferHeight=function(){return c.Lib.current.stage.stageHeight};c.gl.GL.get_drawingBufferWidth=function(){return c.Lib.current.stage.stageWidth};c.gl.GL.get_version=function(){return 7938};c.media={};c.media.ID3Info=function(){};h["openfl.media.ID3Info"]=c.media.ID3Info;c.media.ID3Info.__name__=["openfl","media","ID3Info"];c.media.ID3Info.prototype={__class__:c.media.ID3Info};c.media.Sound=function(a,b){c.events.EventDispatcher.call(this,
this);this.bytesTotal=this.bytesLoaded=0;this.id3=null;this.isBuffering=!1;this.length=0;this.url=null;null!=a&&this.load(a,b)};h["openfl.media.Sound"]=c.media.Sound;c.media.Sound.__name__=["openfl","media","Sound"];c.media.Sound.__super__=c.events.EventDispatcher;c.media.Sound.prototype=q(c.events.EventDispatcher.prototype,{close:function(){c.media.Sound.__registeredSounds.exists(this.__soundID)&&createjs.Sound.removeSound(this.__soundID)},load:function(a){this.url=a.url;this.__soundID=m.io.Path.withoutExtension(a.url);
c.media.Sound.__registeredSounds.exists(this.__soundID)?this.dispatchEvent(new c.events.Event(c.events.Event.COMPLETE)):(c.media.Sound.__registeredSounds.set(this.__soundID,!0),createjs.Sound.addEventListener("fileload",r(this,this.SoundJS_onFileLoad)),createjs.Sound.registerSound(this.url,this.__soundID))},loadCompressedDataFromByteArray:function(){c.Lib.notImplemented("Sound.loadCompressedDataFromByteArray")},loadPCMFromByteArray:function(){c.Lib.notImplemented("Sound.loadPCMFromByteArray")},play:function(a,
b,f){null==b&&(b=0);null==a&&(a=0);null==f&&(f=new c.media.SoundTransform(1,0));a=createjs.Sound.play(this.__soundID,"any",0,a|0,b,f.volume,f.pan);return new c.media.SoundChannel(a)},get_id3:function(){return new c.media.ID3Info},SoundJS_onFileLoad:function(a){a.id==this.__soundID&&(createjs.Sound.removeEventListener("fileload",r(this,this.SoundJS_onFileLoad)),this.dispatchEvent(new c.events.Event(c.events.Event.COMPLETE)))},__class__:c.media.Sound,__properties__:{get_id3:"get_id3"}});c.media.SoundChannel=
function(a){c.events.EventDispatcher.call(this,this);this.__soundInstance=a;this.__soundInstance.addEventListener("complete",r(this,this.soundInstance_onComplete))};h["openfl.media.SoundChannel"]=c.media.SoundChannel;c.media.SoundChannel.__name__=["openfl","media","SoundChannel"];c.media.SoundChannel.__super__=c.events.EventDispatcher;c.media.SoundChannel.prototype=q(c.events.EventDispatcher.prototype,{stop:function(){this.__soundInstance.stop()},__dispose:function(){this.__soundInstance.stop();this.__soundInstance=
null},get_position:function(){return this.__soundInstance.getPosition()},set_position:function(a){this.__soundInstance.setPosition(a|0);return this.__soundInstance.getPosition()},get_soundTransform:function(){return new c.media.SoundTransform(this.__soundInstance.getVolume(),this.__soundInstance.getPan())},set_soundTransform:function(a){this.__soundInstance.setVolume(a.volume);this.__soundInstance.setPan(a.pan);return a},soundInstance_onComplete:function(){this.dispatchEvent(new c.events.Event(c.events.Event.SOUND_COMPLETE))},
__class__:c.media.SoundChannel,__properties__:{set_soundTransform:"set_soundTransform",get_soundTransform:"get_soundTransform",set_position:"set_position",get_position:"get_position"}});c.media.SoundLoaderContext=function(a,b){null==b&&(b=!1);null==a&&(a=0);this.bufferTime=a;this.checkPolicyFile=b};h["openfl.media.SoundLoaderContext"]=c.media.SoundLoaderContext;c.media.SoundLoaderContext.__name__=["openfl","media","SoundLoaderContext"];c.media.SoundLoaderContext.prototype={__class__:c.media.SoundLoaderContext};
c.media.SoundTransform=function(a,b){null==b&&(b=0);null==a&&(a=1);this.volume=a;this.pan=b;this.rightToRight=this.rightToLeft=this.leftToRight=this.leftToLeft=0};h["openfl.media.SoundTransform"]=c.media.SoundTransform;c.media.SoundTransform.__name__=["openfl","media","SoundTransform"];c.media.SoundTransform.prototype={__class__:c.media.SoundTransform};c.net={};c.net.URLLoader=function(a){c.events.EventDispatcher.call(this);this.bytesTotal=this.bytesLoaded=0;this.set_dataFormat(c.net.URLLoaderDataFormat.TEXT);
null!=a&&this.load(a)};h["openfl.net.URLLoader"]=c.net.URLLoader;c.net.URLLoader.__name__=["openfl","net","URLLoader"];c.net.URLLoader.__super__=c.events.EventDispatcher;c.net.URLLoader.prototype=q(c.events.EventDispatcher.prototype,{close:function(){},getData:function(){return null},load:function(a){this.requestUrl(a.url,a.method,a.data,a.formatRequestHeaders())},registerEvents:function(a){var b=this;"undefined"!=typeof XMLHttpRequestProgressEvent&&a.addEventListener("progress",r(this,this.onProgress),
!1);a.onreadystatechange=function(){if(4==a.readyState){var c;try{c=a.status}catch(d){c=null}void 0==c&&(c=null);if(null!=c)b.onStatus(c);if(null!=c&&200<=c&&400>c)b.onData(a.response);else if(null==c)b.onError("Failed to connect or resolve host");else if(12029==c)b.onError("Failed to connect to host");else if(12007==c)b.onError("Unknown host");else if(0==c)b.onError("Unable to make request (may be blocked due to cross-domain permissions)"),b.onSecurityError("Unable to make request (may be blocked due to cross-domain permissions)");
else b.onError("Http Error #"+a.status)}}},requestUrl:function(a,b,f,d){var e=new XMLHttpRequest;this.registerEvents(e);var j="";if(s.Boot.__instanceof(f,c.utils.ByteArray))switch(this.dataFormat[1]){case 0:j=f.data.buffer;break;default:j=f.readUTFBytes(f.length)}else if(s.Boot.__instanceof(f,c.net.URLVariables))for(var g=0,h=E.fields(f);g<h.length;){var l=h[g];++g;0!=j.length&&(j+="&");j+=encodeURIComponent(l)+"="+C.urlEncode(E.field(f,l))}else null!=f&&(j=f.toString());try{if("GET"==b&&null!=j&&
""!=j){var m=1>=a.split("?").length;e.open(b,a+(m?"?":"&")+k.string(j),!0);j=""}else e.open(b,a,!0)}catch(n){this.onError(n.toString());return}switch(this.dataFormat[1]){case 0:e.responseType="arraybuffer"}for(a=0;a<d.length;)b=d[a],++a,e.setRequestHeader(b.name,b.value);e.send(j);this.onOpen();this.getData=function(){return null!=e.response?e.response:e.responseText}},onData:function(){var a=this.getData();switch(this.dataFormat[1]){case 0:this.data=c.utils.ByteArray.__ofBuffer(a);break;default:this.data=
k.string(a)}a=new c.events.Event(c.events.Event.COMPLETE);a.currentTarget=this;this.dispatchEvent(a)},onError:function(a){var b=new c.events.IOErrorEvent(c.events.IOErrorEvent.IO_ERROR);b.text=a;b.currentTarget=this;this.dispatchEvent(b)},onOpen:function(){var a=new c.events.Event(c.events.Event.OPEN);a.currentTarget=this;this.dispatchEvent(a)},onProgress:function(a){var b=new c.events.ProgressEvent(c.events.ProgressEvent.PROGRESS);b.currentTarget=this;b.bytesLoaded=a.loaded;b.bytesTotal=a.total;
this.dispatchEvent(b)},onSecurityError:function(a){var b=new c.events.SecurityErrorEvent(c.events.SecurityErrorEvent.SECURITY_ERROR);b.text=a;b.currentTarget=this;this.dispatchEvent(b)},onStatus:function(a){a=new c.events.HTTPStatusEvent(c.events.HTTPStatusEvent.HTTP_STATUS,!1,!1,a);a.currentTarget=this;this.dispatchEvent(a)},set_dataFormat:function(a){return this.dataFormat=a==c.net.URLLoaderDataFormat.BINARY&&!E.hasField(window,"ArrayBuffer")?c.net.URLLoaderDataFormat.TEXT:a},__class__:c.net.URLLoader,
__properties__:{set_dataFormat:"set_dataFormat"}});c.net.URLLoaderDataFormat=h["openfl.net.URLLoaderDataFormat"]={__ename__:!0,__constructs__:["BINARY","TEXT","VARIABLES"]};c.net.URLLoaderDataFormat.BINARY=["BINARY",0];c.net.URLLoaderDataFormat.BINARY.toString=u;c.net.URLLoaderDataFormat.BINARY.__enum__=c.net.URLLoaderDataFormat;c.net.URLLoaderDataFormat.TEXT=["TEXT",1];c.net.URLLoaderDataFormat.TEXT.toString=u;c.net.URLLoaderDataFormat.TEXT.__enum__=c.net.URLLoaderDataFormat;c.net.URLLoaderDataFormat.VARIABLES=
["VARIABLES",2];c.net.URLLoaderDataFormat.VARIABLES.toString=u;c.net.URLLoaderDataFormat.VARIABLES.__enum__=c.net.URLLoaderDataFormat;c.net.URLRequest=function(a){null!=a&&(this.url=a);this.requestHeaders=[];this.method=c.net.URLRequestMethod.GET;this.contentType=null};h["openfl.net.URLRequest"]=c.net.URLRequest;c.net.URLRequest.__name__=["openfl","net","URLRequest"];c.net.URLRequest.prototype={formatRequestHeaders:function(){var a=this.requestHeaders;null==a&&(a=[]);if(this.method==c.net.URLRequestMethod.GET||
null==this.data)return a;if("string"==typeof this.data||s.Boot.__instanceof(this.data,c.utils.ByteArray))a=a.slice(),a.push(new c.net.URLRequestHeader("Content-Type",null!=this.contentType?this.contentType:"application/x-www-form-urlencoded"));return a},__class__:c.net.URLRequest};c.net.URLRequestHeader=function(a,b){null==b&&(b="");null==a&&(a="");this.name=a;this.value=b};h["openfl.net.URLRequestHeader"]=c.net.URLRequestHeader;c.net.URLRequestHeader.__name__=["openfl","net","URLRequestHeader"];
c.net.URLRequestHeader.prototype={__class__:c.net.URLRequestHeader};c.net.URLRequestMethod=function(){};h["openfl.net.URLRequestMethod"]=c.net.URLRequestMethod;c.net.URLRequestMethod.__name__=["openfl","net","URLRequestMethod"];c.net.URLVariables=function(a){null!=a&&this.decode(a)};h["openfl.net.URLVariables"]=c.net.URLVariables;c.net.URLVariables.__name__=["openfl","net","URLVariables"];c.net.URLVariables.prototype={decode:function(a){for(var b=E.fields(this),c=0;c<b.length;){var d=b[c];++c;E.deleteField(this,
d)}a=a.split(";").join("&").split("&");for(b=0;b<a.length;)c=a[b],++b,d=c.indexOf("="),0<d?E.setField(this,C.urlDecode(w.substr(c,0,d)),C.urlDecode(w.substr(c,d+1,null))):0!=d&&E.setField(this,decodeURIComponent(c.split("+").join(" ")),"")},toString:function(){for(var a=[],b=E.fields(this),c=0;c<b.length;){var d=b[c];++c;a.push(encodeURIComponent(d)+"="+C.urlEncode(E.field(this,d)))}return a.join("&")},__class__:c.net.URLVariables};c.system={};c.system.ApplicationDomain=function(a){this.parentDomain=
null!=a?a:c.system.ApplicationDomain.currentDomain};h["openfl.system.ApplicationDomain"]=c.system.ApplicationDomain;c.system.ApplicationDomain.__name__=["openfl","system","ApplicationDomain"];c.system.ApplicationDomain.prototype={getDefinition:function(a){return B.resolveClass(a)},hasDefinition:function(a){return null!=B.resolveClass(a)},__class__:c.system.ApplicationDomain};c.system.Capabilities=function(){};h["openfl.system.Capabilities"]=c.system.Capabilities;c.system.Capabilities.__name__=["openfl",
"system","Capabilities"];c.system.Capabilities.__properties__={get_language:"get_language",get_screenResolutionY:"get_screenResolutionY",get_screenResolutionX:"get_screenResolutionX",get_screenDPI:"get_screenDPI",get_pixelAspectRatio:"get_pixelAspectRatio"};c.system.Capabilities.pixelAspectRatio=null;c.system.Capabilities.screenDPI=null;c.system.Capabilities.screenResolutionX=null;c.system.Capabilities.screenResolutionY=null;c.system.Capabilities.language=null;c.system.Capabilities.get_pixelAspectRatio=
function(){return 1};c.system.Capabilities.get_screenDPI=function(){if(0<c.system.Capabilities.screenDPI)return c.system.Capabilities.screenDPI;var a=window.document.getElementsByTagName("body")[0],b=window.document.createElement("div");b.style.width=b.style.height="1in";b.style.padding=b.style.margin="0px";b.style.position="absolute";b.style.top="-100%";a.appendChild(b);c.system.Capabilities.screenDPI=b.offsetWidth;a.removeChild(b);return c.system.Capabilities.screenDPI};c.system.Capabilities.get_screenResolutionX=
function(){return window.screen.width};c.system.Capabilities.get_screenResolutionY=function(){return window.screen.height};c.system.Capabilities.get_language=function(){return navigator.language};c.system.LoaderContext=function(a,b,c){null==a&&(a=!1);this.checkPolicyFile=a;this.securityDomain=c;this.applicationDomain=b;this.allowLoadBytesCodeExecution=this.allowCodeImport=!0};h["openfl.system.LoaderContext"]=c.system.LoaderContext;c.system.LoaderContext.__name__=["openfl","system","LoaderContext"];
c.system.LoaderContext.prototype={__class__:c.system.LoaderContext};c.system.SecurityDomain=function(){};h["openfl.system.SecurityDomain"]=c.system.SecurityDomain;c.system.SecurityDomain.__name__=["openfl","system","SecurityDomain"];c.system.SecurityDomain.prototype={__class__:c.system.SecurityDomain};c.system.System=function(){};h["openfl.system.System"]=c.system.System;c.system.System.__name__=["openfl","system","System"];c.system.System.__properties__={get_vmVersion:"get_vmVersion",get_totalMemory:"get_totalMemory"};
c.system.System.totalMemory=null;c.system.System.vmVersion=null;c.system.System.exit=function(){throw"System.exit is currently not supported for HTML5";};c.system.System.gc=function(){};c.system.System.pause=function(){throw"System.pause is currently not supported for HTML5";};c.system.System.resume=function(){throw"System.resume is currently not supported for HTML5";};c.system.System.setClipboard=function(){throw"System.setClipboard is currently not supported for HTML5";};c.system.System.get_totalMemory=
function(){return 0};c.system.System.get_vmVersion=function(){return"1.0.0"};c.text={};c.text._AntiAliasType={};c.text._AntiAliasType.AntiAliasType_Impl_=function(){};h["openfl.text._AntiAliasType.AntiAliasType_Impl_"]=c.text._AntiAliasType.AntiAliasType_Impl_;c.text._AntiAliasType.AntiAliasType_Impl_.__name__=["openfl","text","_AntiAliasType","AntiAliasType_Impl_"];c.text.Font=function(){};h["openfl.text.Font"]=c.text.Font;c.text.Font.__name__=["openfl","text","Font"];c.text.Font.enumerateFonts=
function(){return[]};c.text.Font.registerFont=function(){};c.text.Font.prototype={__class__:c.text.Font};c.text.FontStyle=h["openfl.text.FontStyle"]={__ename__:!0,__constructs__:["REGULAR","ITALIC","BOLD_ITALIC","BOLD"]};c.text.FontStyle.REGULAR=["REGULAR",0];c.text.FontStyle.REGULAR.toString=u;c.text.FontStyle.REGULAR.__enum__=c.text.FontStyle;c.text.FontStyle.ITALIC=["ITALIC",1];c.text.FontStyle.ITALIC.toString=u;c.text.FontStyle.ITALIC.__enum__=c.text.FontStyle;c.text.FontStyle.BOLD_ITALIC=["BOLD_ITALIC",
2];c.text.FontStyle.BOLD_ITALIC.toString=u;c.text.FontStyle.BOLD_ITALIC.__enum__=c.text.FontStyle;c.text.FontStyle.BOLD=["BOLD",3];c.text.FontStyle.BOLD.toString=u;c.text.FontStyle.BOLD.__enum__=c.text.FontStyle;c.text.FontType=h["openfl.text.FontType"]={__ename__:!0,__constructs__:["DEVICE","EMBEDDED","EMBEDDED_CFF"]};c.text.FontType.DEVICE=["DEVICE",0];c.text.FontType.DEVICE.toString=u;c.text.FontType.DEVICE.__enum__=c.text.FontType;c.text.FontType.EMBEDDED=["EMBEDDED",1];c.text.FontType.EMBEDDED.toString=
u;c.text.FontType.EMBEDDED.__enum__=c.text.FontType;c.text.FontType.EMBEDDED_CFF=["EMBEDDED_CFF",2];c.text.FontType.EMBEDDED_CFF.toString=u;c.text.FontType.EMBEDDED_CFF.__enum__=c.text.FontType;c.text.GridFitType=h["openfl.text.GridFitType"]={__ename__:!0,__constructs__:["NONE","PIXEL","SUBPIXEL"]};c.text.GridFitType.NONE=["NONE",0];c.text.GridFitType.NONE.toString=u;c.text.GridFitType.NONE.__enum__=c.text.GridFitType;c.text.GridFitType.PIXEL=["PIXEL",1];c.text.GridFitType.PIXEL.toString=u;c.text.GridFitType.PIXEL.__enum__=
c.text.GridFitType;c.text.GridFitType.SUBPIXEL=["SUBPIXEL",2];c.text.GridFitType.SUBPIXEL.toString=u;c.text.GridFitType.SUBPIXEL.__enum__=c.text.GridFitType;c.text.TextField=function(){c.display.InteractiveObject.call(this);this.__height=this.__width=100;this.__text="";this.set_type(c.text.TextFieldType.DYNAMIC);this.set_autoSize(c.text.TextFieldAutoSize.NONE);this.embedFonts=this.displayAsPassword=!1;this.selectable=!0;this.set_borderColor(0);this.set_border(!1);this.set_backgroundColor(16777215);
this.set_background(!1);this.gridFitType=c.text.GridFitType.PIXEL;this.maxChars=0;this.multiline=!1;this.scrollH=this.sharpness=0;this.scrollV=1;this.set_wordWrap(!1);null==c.text.TextField.__defaultTextFormat&&(c.text.TextField.__defaultTextFormat=new c.text.TextFormat("Times New Roman",12,0,!1,!1,!1,"","",c.text.TextFormatAlign.LEFT,0,0,0,0),c.text.TextField.__defaultTextFormat.blockIndent=0,c.text.TextField.__defaultTextFormat.bullet=!1,c.text.TextField.__defaultTextFormat.letterSpacing=0,c.text.TextField.__defaultTextFormat.kerning=
!1);this.__textFormat=c.text.TextField.__defaultTextFormat.clone()};h["openfl.text.TextField"]=c.text.TextField;c.text.TextField.__name__=["openfl","text","TextField"];c.text.TextField.__defaultTextFormat=null;c.text.TextField.__super__=c.display.InteractiveObject;c.text.TextField.prototype=q(c.display.InteractiveObject.prototype,{appendText:function(a){this.set_text(this.get_text()+a)},getCharBoundaries:function(){c.Lib.notImplemented("TextField.getCharBoundaries");return null},getCharIndexAtPoint:function(){c.Lib.notImplemented("TextField.getCharIndexAtPoint");
return 0},getLineIndexAtPoint:function(){c.Lib.notImplemented("TextField.getLineIndexAtPoint");return 0},getLineMetrics:function(){c.Lib.notImplemented("TextField.getLineMetrics");return null},getLineOffset:function(){c.Lib.notImplemented("TextField.getLineOffset");return 0},getLineText:function(){c.Lib.notImplemented("TextField.getLineText");return""},getTextFormat:function(){return this.__textFormat.clone()},setSelection:function(){c.Lib.notImplemented("TextField.setSelection")},setTextFormat:function(a){null!=
a.font&&(this.__textFormat.font=a.font);null!=a.size&&(this.__textFormat.size=a.size);null!=a.color&&(this.__textFormat.color=a.color);null!=a.bold&&(this.__textFormat.bold=a.bold);null!=a.italic&&(this.__textFormat.italic=a.italic);null!=a.underline&&(this.__textFormat.underline=a.underline);null!=a.url&&(this.__textFormat.url=a.url);null!=a.target&&(this.__textFormat.target=a.target);null!=a.align&&(this.__textFormat.align=a.align);null!=a.leftMargin&&(this.__textFormat.leftMargin=a.leftMargin);
null!=a.rightMargin&&(this.__textFormat.rightMargin=a.rightMargin);null!=a.indent&&(this.__textFormat.indent=a.indent);null!=a.leading&&(this.__textFormat.leading=a.leading);null!=a.blockIndent&&(this.__textFormat.blockIndent=a.blockIndent);null!=a.bullet&&(this.__textFormat.bullet=a.bullet);null!=a.kerning&&(this.__textFormat.kerning=a.kerning);null!=a.letterSpacing&&(this.__textFormat.letterSpacing=a.letterSpacing);null!=a.tabStops&&(this.__textFormat.tabStops=a.tabStops);this.__dirty=!0},__getBounds:function(a){var b=
new c.geom.Rectangle(0,0,this.__width,this.__height);b.transform(this.__worldTransform);a.__expand(b.x,b.y,b.width,b.height)},__getFont:function(a){var b;b=a.italic?"italic ":"normal ";b+="normal ";b=a.bold?b+"bold ":b+"normal ";b+=a.size+"px";b+="/"+(a.size+a.leading+4)+"px ";switch(a.font){case "_sans":a="sans-serif";break;case "_serif":a="serif";break;case "_typewriter":a="monospace";break;default:a=a.font}return b+("'"+a)+"'"},__hitTest:function(a,b,f,d,e){if(!this.get_visible()||e&&!this.mouseEnabled)return!1;
a=this.globalToLocal(new c.geom.Point(a,b));return 0<a.x&&0<a.y&&a.x<=this.__width&&a.y<=this.__height?(null!=d&&d.push(this),!0):!1},__measureText:function(){if(null==this.__ranges)return this.__context.font=this.__getFont(this.__textFormat),[this.__context.measureText(this.__text).width];for(var a=[],b=0,c=this.__ranges;b<c.length;){var d=c[b];++b;this.__context.font=this.__getFont(d.format);a.push(this.__context.measureText(this.get_text().substring(d.start,d.end)).width)}return a},__measureTextWithDOM:function(){var a=
this.__div;null==this.__div&&(a=window.document.createElement("div"),a.innerHTML=this.__text,a.style.setProperty("font",this.__getFont(this.__textFormat),null),a.style.position="absolute",a.style.top="110%",window.document.body.appendChild(a));this.__measuredWidth=a.clientWidth;null==this.__div&&(a.style.width=k.string(this.__width)+"px");this.__measuredHeight=a.clientHeight;null==this.__div&&window.document.body.removeChild(a)},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){if(this.__dirty){if((null==
this.__text||""==this.__text)&&!this.background&&!this.border||(0>=this.get_width()||0>=this.get_height())&&this.autoSize!=c.text.TextFieldAutoSize.LEFT)this.__context=this.__canvas=null;else if(null==this.__canvas&&(this.__canvas=window.document.createElement("canvas"),this.__context=this.__canvas.getContext("2d")),null!=this.__text&&""!=this.__text){for(var b=this.__measureText(),f=0,d=0;d<b.length;){var e=b[d];++d;f+=e}this.autoSize==c.text.TextFieldAutoSize.LEFT&&(this.__width=f+4);this.__canvas.width=
Math.ceil(this.__width);this.__canvas.height=Math.ceil(this.__height);if(this.border||this.background)if(this.__context.rect(0.5,0.5,this.__width-1,this.__height-1),this.background&&(this.__context.fillStyle="#"+C.hex(this.backgroundColor,6),this.__context.fill()),this.border)this.__context.lineWidth=1,this.__context.strokeStyle="#"+C.hex(this.borderColor,6),this.__context.stroke();if(null==this.__ranges)this.__renderText(this.get_text(),this.__textFormat,0);else for(var e=d=0,j=this.__ranges.length;e<
j;){var g=e++,f=this.__ranges[g];this.__renderText(this.get_text().substring(f.start,f.end),f.format,d);d+=b[g]}}else if(this.autoSize==c.text.TextFieldAutoSize.LEFT&&(this.__width=4),this.__canvas.width=Math.ceil(this.__width),this.__canvas.height=Math.ceil(this.__height),this.border||this.background)if(this.border?this.__context.rect(0.5,0.5,this.__width-1,this.__height-1):this.__context.rect(0,0,this.__width,this.__height),this.background&&(this.__context.fillStyle="#"+C.hex(this.backgroundColor,
6),this.__context.fill()),this.border)this.__context.lineWidth=1,this.__context.lineCap="square",this.__context.strokeStyle="#"+C.hex(this.borderColor,6),this.__context.stroke();this.__dirty=!1}null!=this.__canvas&&(b=a.context,b.globalAlpha=this.__worldAlpha,f=this.__worldTransform,a.roundPixels?b.setTransform(f.a,f.b,f.c,f.d,f.tx|0,f.ty|0):b.setTransform(f.a,f.b,f.c,f.d,f.tx,f.ty),null==this.get_scrollRect()?b.drawImage(this.__canvas,0,0):b.drawImage(this.__canvas,this.get_scrollRect().x,this.get_scrollRect().y,
this.get_scrollRect().width,this.get_scrollRect().height,this.get_scrollRect().x,this.get_scrollRect().y,this.get_scrollRect().width,this.get_scrollRect().height))}},__renderDOM:function(a){if(null!=this.stage&&this.__worldVisible&&this.__renderable){if(this.__dirty||null==this.__div)if(""!=this.__text||this.background||this.border){null==this.__div&&(this.__div=window.document.createElement("div"),this.__initializeElement(this.__div,a),this.__style.setProperty("cursor","inherit",null));this.__div.innerHTML=
this.__text;this.background?this.__style.setProperty("background-color","#"+C.hex(this.backgroundColor,6),null):this.__style.removeProperty("background-color");this.border?this.__style.setProperty("border","solid 1px #"+C.hex(this.borderColor,6),null):this.__style.removeProperty("border");this.__style.setProperty("font",this.__getFont(this.__textFormat),null);this.__style.setProperty("color","#"+C.hex(this.__textFormat.color,6),null);this.autoSize!=c.text.TextFieldAutoSize.NONE?this.__style.setProperty("width",
"auto",null):this.__style.setProperty("width",this.__width+"px",null);this.__style.setProperty("height",this.__height+"px",null);switch(this.__textFormat.align[1]){case 3:this.__style.setProperty("text-align","center",null);break;case 1:this.__style.setProperty("text-align","right",null);break;default:this.__style.setProperty("text-align","left",null)}this.__dirty=!1}else null!=this.__div&&(a.element.removeChild(this.__div),this.__div=null);null!=this.__div&&this.__applyStyle(a,!0,!0,!1)}else null!=
this.__div&&(a.element.removeChild(this.__div),this.__style=this.__div=null)},__renderText:function(a,b,c){this.__context.font=this.__getFont(b);this.__context.textBaseline="top";this.__context.fillStyle="#"+C.hex(b.color,6);for(var a=a.split("\n"),d=0,e=0;e<a.length;){var j=a[e];++e;switch(b.align[1]){case 3:this.__context.textAlign="center";this.__context.fillText(j,this.__width/2,2+d,this.__width-4);break;case 1:this.__context.textAlign="end";this.__context.fillText(j,this.__width-2,2+d,this.__width-
4);break;default:this.__context.textAlign="start",this.__context.fillText(j,2+c,2+d,this.__width-4)}d+=this.get_textHeight()}},set_autoSize:function(a){a!=this.autoSize&&(this.__dirty=!0);return this.autoSize=a},set_background:function(a){a!=this.background&&(this.__dirty=!0);return this.background=a},set_backgroundColor:function(a){a!=this.backgroundColor&&(this.__dirty=!0);return this.backgroundColor=a},set_border:function(a){a!=this.border&&(this.__dirty=!0);return this.border=a},set_borderColor:function(a){a!=
this.borderColor&&(this.__dirty=!0);return this.borderColor=a},get_bottomScrollV:function(){return this.get_numLines()},get_caretPos:function(){return 0},get_defaultTextFormat:function(){return this.__textFormat.clone()},set_defaultTextFormat:function(a){this.__textFormat.__merge(a);return a},get_height:function(){return this.__height*this.get_scaleY()},set_height:function(a){if(1!=this.get_scaleY()||a!=this.__height)this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),
this.__dirty=!0;this.set_scaleY(1);return this.__height=a},get_htmlText:function(){return this.__text},set_htmlText:function(a){if(!this.__isHTML||this.__text!=a)this.__dirty=!0;this.__ranges=null;this.__isHTML=!0;return this.__text=a},get_maxScrollH:function(){return 0},get_maxScrollV:function(){return 1},get_numLines:function(){if(""!=this.get_text()&&null!=this.get_text()){var a=this.get_text().split("\n").length;this.__isHTML&&(a+=this.get_text().split("<br>").length-1);return a}return 1},get_text:function(){return this.__text},
set_text:function(a){if(this.__isHTML||this.__text!=a)this.__dirty=!0;this.__ranges=null;this.__isHTML=!1;return this.__text=a},get_textColor:function(){return this.__textFormat.color},set_textColor:function(a){a!=this.__textFormat.color&&(this.__dirty=!0);if(null!=this.__ranges)for(var b=0,c=this.__ranges;b<c.length;){var d=c[b];++b;d.format.color=a}return this.__textFormat.color=a},get_textWidth:function(){if(null!=this.__canvas){for(var a=this.__measureText(),b=0,c=0;c<a.length;){var d=a[c];++c;
b+=d}return b}if(null!=this.__div)return this.__div.clientWidth;this.__measureTextWithDOM();return this.__measuredWidth},get_textHeight:function(){if(null!=this.__canvas)return this.__textFormat.size;if(null!=this.__div)return this.__div.clientHeight;this.__measureTextWithDOM();return this.__measuredHeight+0.185*this.__textFormat.size},set_type:function(a){return this.type=a},get_width:function(){return this.autoSize==c.text.TextFieldAutoSize.LEFT?(this.get_textWidth()+4)*this.get_scaleX():this.__width*
this.get_scaleX()},set_width:function(a){if(1!=this.get_scaleX()||this.__width!=a)this.__transformDirty||(this.__transformDirty=!0,c.display.DisplayObject.__worldTransformDirty++),this.__dirty=!0;this.set_scaleX(1);return this.__width=a},get_wordWrap:function(){return this.wordWrap},set_wordWrap:function(a){return this.wordWrap=a},__class__:c.text.TextField,__properties__:q(c.display.InteractiveObject.prototype.__properties__,{set_wordWrap:"set_wordWrap",get_wordWrap:"get_wordWrap",set_type:"set_type",
get_textWidth:"get_textWidth",get_textHeight:"get_textHeight",set_textColor:"set_textColor",get_textColor:"get_textColor",set_text:"set_text",get_text:"get_text",get_numLines:"get_numLines",get_maxScrollV:"get_maxScrollV",get_maxScrollH:"get_maxScrollH",set_htmlText:"set_htmlText",get_htmlText:"get_htmlText",set_defaultTextFormat:"set_defaultTextFormat",get_defaultTextFormat:"get_defaultTextFormat",get_caretPos:"get_caretPos",get_bottomScrollV:"get_bottomScrollV",set_borderColor:"set_borderColor",
set_border:"set_border",set_backgroundColor:"set_backgroundColor",set_background:"set_background",set_autoSize:"set_autoSize"})});c.text.TextFormatRange=function(a,b,c){this.format=a;this.start=b;this.end=c};h["openfl.text.TextFormatRange"]=c.text.TextFormatRange;c.text.TextFormatRange.__name__=["openfl","text","TextFormatRange"];c.text.TextFormatRange.prototype={__class__:c.text.TextFormatRange};c.text.TextFieldAutoSize=h["openfl.text.TextFieldAutoSize"]={__ename__:!0,__constructs__:["CENTER","LEFT",
"NONE","RIGHT"]};c.text.TextFieldAutoSize.CENTER=["CENTER",0];c.text.TextFieldAutoSize.CENTER.toString=u;c.text.TextFieldAutoSize.CENTER.__enum__=c.text.TextFieldAutoSize;c.text.TextFieldAutoSize.LEFT=["LEFT",1];c.text.TextFieldAutoSize.LEFT.toString=u;c.text.TextFieldAutoSize.LEFT.__enum__=c.text.TextFieldAutoSize;c.text.TextFieldAutoSize.NONE=["NONE",2];c.text.TextFieldAutoSize.NONE.toString=u;c.text.TextFieldAutoSize.NONE.__enum__=c.text.TextFieldAutoSize;c.text.TextFieldAutoSize.RIGHT=["RIGHT",
3];c.text.TextFieldAutoSize.RIGHT.toString=u;c.text.TextFieldAutoSize.RIGHT.__enum__=c.text.TextFieldAutoSize;c.text.TextFieldType=h["openfl.text.TextFieldType"]={__ename__:!0,__constructs__:["DYNAMIC","INPUT"]};c.text.TextFieldType.DYNAMIC=["DYNAMIC",0];c.text.TextFieldType.DYNAMIC.toString=u;c.text.TextFieldType.DYNAMIC.__enum__=c.text.TextFieldType;c.text.TextFieldType.INPUT=["INPUT",1];c.text.TextFieldType.INPUT.toString=u;c.text.TextFieldType.INPUT.__enum__=c.text.TextFieldType;c.text.TextFormat=
function(a,b,c,d,e,j,g,h,k,l,n,m,q){this.font=a;this.size=b;this.color=c;this.bold=d;this.italic=e;this.underline=j;this.url=g;this.target=h;this.align=k;this.leftMargin=l;this.rightMargin=n;this.indent=m;this.leading=q};h["openfl.text.TextFormat"]=c.text.TextFormat;c.text.TextFormat.__name__=["openfl","text","TextFormat"];c.text.TextFormat.prototype={clone:function(){var a=new c.text.TextFormat(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);a.align=this.align;
a.leftMargin=this.leftMargin;a.rightMargin=this.rightMargin;a.indent=this.indent;a.leading=this.leading;a.blockIndent=this.blockIndent;a.bullet=this.bullet;a.kerning=this.kerning;a.letterSpacing=this.letterSpacing;a.tabStops=this.tabStops;return a},__merge:function(a){null!=a.font&&(this.font=a.font);null!=a.size&&(this.size=a.size);null!=a.color&&(this.color=a.color);null!=a.bold&&(this.bold=a.bold);null!=a.italic&&(this.italic=a.italic);null!=a.underline&&(this.underline=a.underline);null!=a.url&&
(this.url=a.url);null!=a.target&&(this.target=a.target);null!=a.align&&(this.align=a.align);null!=a.leftMargin&&(this.leftMargin=a.leftMargin);null!=a.rightMargin&&(this.rightMargin=a.rightMargin);null!=a.indent&&(this.indent=a.indent);null!=a.leading&&(this.leading=a.leading);null!=a.blockIndent&&(this.blockIndent=a.blockIndent);null!=a.bullet&&(this.bullet=a.bullet);null!=a.kerning&&(this.kerning=a.kerning);null!=a.letterSpacing&&(this.letterSpacing=a.letterSpacing);null!=a.tabStops&&(this.tabStops=
a.tabStops)},__class__:c.text.TextFormat};c.text.TextFormatAlign=h["openfl.text.TextFormatAlign"]={__ename__:!0,__constructs__:["LEFT","RIGHT","JUSTIFY","CENTER"]};c.text.TextFormatAlign.LEFT=["LEFT",0];c.text.TextFormatAlign.LEFT.toString=u;c.text.TextFormatAlign.LEFT.__enum__=c.text.TextFormatAlign;c.text.TextFormatAlign.RIGHT=["RIGHT",1];c.text.TextFormatAlign.RIGHT.toString=u;c.text.TextFormatAlign.RIGHT.__enum__=c.text.TextFormatAlign;c.text.TextFormatAlign.JUSTIFY=["JUSTIFY",2];c.text.TextFormatAlign.JUSTIFY.toString=
u;c.text.TextFormatAlign.JUSTIFY.__enum__=c.text.TextFormatAlign;c.text.TextFormatAlign.CENTER=["CENTER",3];c.text.TextFormatAlign.CENTER.toString=u;c.text.TextFormatAlign.CENTER.__enum__=c.text.TextFormatAlign;c.text.TextLineMetrics=function(a,b,c,d,e,j){this.x=a;this.width=b;this.height=c;this.ascent=d;this.descent=e;this.leading=j};h["openfl.text.TextLineMetrics"]=c.text.TextLineMetrics;c.text.TextLineMetrics.__name__=["openfl","text","TextLineMetrics"];c.text.TextLineMetrics.prototype={__class__:c.text.TextLineMetrics};
c.ui={};c.ui._KeyLocation={};c.ui._KeyLocation.KeyLocation_Impl_=function(){};h["openfl.ui._KeyLocation.KeyLocation_Impl_"]=c.ui._KeyLocation.KeyLocation_Impl_;c.ui._KeyLocation.KeyLocation_Impl_.__name__=["openfl","ui","_KeyLocation","KeyLocation_Impl_"];c.ui.Keyboard=function(){};h["openfl.ui.Keyboard"]=c.ui.Keyboard;c.ui.Keyboard.__name__=["openfl","ui","Keyboard"];c.ui.Keyboard.capsLock=null;c.ui.Keyboard.numLock=null;c.ui.Keyboard.isAccessible=function(){return!1};c.ui.Keyboard.__convertMozillaCode=
function(a){switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 14:return 13;case 16:return 16;case 17:return 17;case 20:return 20;case 27:return 27;case 32:return 32;case 33:return 33;case 34:return 34;case 35:return 35;case 36:return 36;case 37:return 37;case 39:return 39;case 38:return 38;case 40:return 40;case 45:return 45;case 46:return 46;case 144:return 144;default:return a}};c.ui.Keyboard.__convertWebkitCode=function(a){switch(a.toLowerCase()){case "backspace":return 8;case "tab":return 9;
case "enter":return 13;case "shift":return 16;case "control":return 17;case "capslock":return 20;case "escape":return 27;case "space":return 32;case "pageup":return 33;case "pagedown":return 34;case "end":return 35;case "home":return 36;case "left":return 37;case "right":return 39;case "up":return 38;case "down":return 40;case "insert":return 45;case "delete":return 46;case "numlock":return 144;case "break":return 19}if(0==a.indexOf("U+"))return k.parseInt("0x"+w.substr(a,3,null));throw"Unrecognized key code: "+
a;};c.ui.Mouse=function(){};h["openfl.ui.Mouse"]=c.ui.Mouse;c.ui.Mouse.__name__=["openfl","ui","Mouse"];c.ui.Mouse.hide=function(){c.Lib.current.stage.__setCursorHidden(!0)};c.ui.Mouse.show=function(){c.Lib.current.stage.__setCursorHidden(!1)};c.ui.Multitouch=function(){};h["openfl.ui.Multitouch"]=c.ui.Multitouch;c.ui.Multitouch.__name__=["openfl","ui","Multitouch"];c.ui.Multitouch.__properties__={get_supportsTouchEvents:"get_supportsTouchEvents",set_inputMode:"set_inputMode",get_inputMode:"get_inputMode"};
c.ui.Multitouch.maxTouchPoints=null;c.ui.Multitouch.supportedGestures=null;c.ui.Multitouch.supportsGestureEvents=null;c.ui.Multitouch.supportsTouchEvents=null;c.ui.Multitouch.get_inputMode=function(){return c.ui.MultitouchInputMode.TOUCH_POINT};c.ui.Multitouch.set_inputMode=function(a){return a==c.ui.MultitouchInputMode.GESTURE?c.ui.Multitouch.get_inputMode():a};c.ui.Multitouch.get_supportsTouchEvents=function(){return"ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof
DocumentTouch?!0:!1};c.ui.MultitouchInputMode=h["openfl.ui.MultitouchInputMode"]={__ename__:!0,__constructs__:["NONE","TOUCH_POINT","GESTURE"]};c.ui.MultitouchInputMode.NONE=["NONE",0];c.ui.MultitouchInputMode.NONE.toString=u;c.ui.MultitouchInputMode.NONE.__enum__=c.ui.MultitouchInputMode;c.ui.MultitouchInputMode.TOUCH_POINT=["TOUCH_POINT",1];c.ui.MultitouchInputMode.TOUCH_POINT.toString=u;c.ui.MultitouchInputMode.TOUCH_POINT.__enum__=c.ui.MultitouchInputMode;c.ui.MultitouchInputMode.GESTURE=["GESTURE",
2];c.ui.MultitouchInputMode.GESTURE.toString=u;c.ui.MultitouchInputMode.GESTURE.__enum__=c.ui.MultitouchInputMode;c.utils={};c.utils.ByteArray=function(){this.littleEndian=!1;this.length=this.position=this.allocated=0;this.___resizeBuffer(this.allocated)};h["openfl.utils.ByteArray"]=c.utils.ByteArray;c.utils.ByteArray.__name__=["openfl","utils","ByteArray"];c.utils.ByteArray.fromBytes=function(a){var b=new c.utils.ByteArray;b.byteView=new Uint8Array(a.b);b.set_length(b.byteView.length);b.allocated=
b.length;return b};c.utils.ByteArray.__ofBuffer=function(a){var b=new c.utils.ByteArray;b.set_length(b.allocated=a.byteLength);b.data=new DataView(a);b.byteView=new Uint8Array(a);return b};c.utils.ByteArray.prototype={clear:function(){0>this.allocated?this.___resizeBuffer(this.allocated=k["int"](Math.max(0,2*this.allocated))):0<this.allocated&&this.___resizeBuffer(this.allocated=0);this.length=0;0;this.position=0},readBoolean:function(){return 0!=this.readByte()},readByte:function(){return this.data.getInt8(this.position++)},
readBytes:function(a,b,f){null==f&&(f=0);null==b&&(b=0);if(0>b||0>f)throw new c.errors.IOError("Read error - Out of bounds");0==f&&(f=this.length-this.position);var d=b+f;a.length<d&&(a.allocated<d?a.___resizeBuffer(a.allocated=k["int"](Math.max(d,2*a.allocated))):a.allocated>d&&a.___resizeBuffer(a.allocated=d),a.length=d,d);a.byteView.set(this.byteView.subarray(this.position,this.position+f),b);a.position=b;this.position+=f;a.position+f>a.length&&a.set_length(a.position+f)},readDouble:function(){var a=
this.data.getFloat64(this.position,this.littleEndian);this.position+=8;return a},readFloat:function(){var a=this.data.getFloat32(this.position,this.littleEndian);this.position+=4;return a},readFullBytes:function(a,b,c){this.length<c&&(this.allocated<c?this.___resizeBuffer(this.allocated=k["int"](Math.max(c,2*this.allocated))):this.allocated>c&&this.___resizeBuffer(this.allocated=c),this.length=c,c);for(var d=b,b=b+c;d<b;)c=d++,this.data.setInt8(this.position++,a.b[c])},readInt:function(){var a=this.data.getInt32(this.position,
this.littleEndian);this.position+=4;return a},readMultiByte:function(a){return this.readUTFBytes(a)},readShort:function(){var a=this.data.getInt16(this.position,this.littleEndian);this.position+=2;return a},readUnsignedByte:function(){return this.data.getUint8(this.position++)},readUnsignedInt:function(){var a=this.data.getUint32(this.position,this.littleEndian);this.position+=4;return a},readUnsignedShort:function(){var a=this.data.getUint16(this.position,this.littleEndian);this.position+=2;return a},
readUTF:function(){var a=this.readUnsignedShort();return this.readUTFBytes(a)},readUTFBytes:function(a){for(var b="",a=this.position+a;this.position<a;){var c=this.data,d=c.getUint8(this.position++);if(128>d){if(0==d)break;b+=String.fromCharCode(d)}else if(224>d)b+=String.fromCharCode((d&63)<<6|c.getUint8(this.position++)&127);else if(240>d)var e=c.getUint8(this.position++),b=b+String.fromCharCode((d&31)<<12|(e&127)<<6|c.getUint8(this.position++)&127);else var e=c.getUint8(this.position++),j=c.getUint8(this.position++),
b=b+String.fromCharCode((d&15)<<18|(e&127)<<12|j<<6&127|c.getUint8(this.position++)&127)}return b},toString:function(){var a=this.position;this.position=0;var b=this.readUTFBytes(this.length);this.position=a;return b},uncompress:function(){var a=m.io.Bytes.ofData(this.byteView),a=v.Inflate.run(a).getData();this.byteView=new Uint8Array(a);this.data=new DataView(this.byteView.buffer);this.set_length(this.allocated=this.byteView.buffer.byteLength)},writeBoolean:function(a){this.writeByte(a?1:0)},writeByte:function(a){var b=
this.position+1;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setInt8(this.position,a);this.position+=1},writeBytes:function(a,b,f){null==f&&(f=0);null==b&&(b=0);if(0>b||0>f)throw new c.errors.IOError("Write error - Out of bounds");0==f&&(f=a.length);var d=this.position+f;this.length<d&&(this.allocated<d?this.___resizeBuffer(this.allocated=k["int"](Math.max(d,
2*this.allocated))):this.allocated>d&&this.___resizeBuffer(this.allocated=d),this.length=d,d);this.byteView.set(a.byteView.subarray(b,b+f),this.position);this.position+=f},writeDouble:function(a){var b=this.position+8;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setFloat64(this.position,a,this.littleEndian);this.position+=8},writeFloat:function(a){var b=
this.position+4;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setFloat32(this.position,a,this.littleEndian);this.position+=4},writeInt:function(a){var b=this.position+4;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setInt32(this.position,
a,this.littleEndian);this.position+=4},writeShort:function(a){var b=this.position+2;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setInt16(this.position,a,this.littleEndian);this.position+=2},writeUnsignedInt:function(a){var b=this.position+4;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>
b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setUint32(this.position,a,this.littleEndian);this.position+=4},writeUnsignedShort:function(a){var b=this.position+2;this.length<b&&(this.allocated<b?this.___resizeBuffer(this.allocated=k["int"](Math.max(b,2*this.allocated))):this.allocated>b&&this.___resizeBuffer(this.allocated=b),this.length=b,b);this.data.setUint16(this.position,a,this.littleEndian);this.position+=2},writeUTF:function(a){this.writeUnsignedShort(this._getUTFBytesCount(a));
this.writeUTFBytes(a)},writeUTFBytes:function(a){for(var b=0,c=a.length;b<c;){var d=b++,d=a.charCodeAt(d);127>=d?this.writeByte(d):(2047>=d?this.writeByte(192|d>>6):(65535>=d?this.writeByte(224|d>>12):(this.writeByte(240|d>>18),this.writeByte(128|d>>12&63)),this.writeByte(128|d>>6&63)),this.writeByte(128|d&63))}},__fromBytes:function(a){this.byteView=new Uint8Array(a.b);this.set_length(this.byteView.length);this.allocated=this.length},__get:function(a){return this.data.getInt8(a)},_getUTFBytesCount:function(a){for(var b=
0,c=0,d=a.length;c<d;)var e=c++,e=a.charCodeAt(e),b=127>=e?b+1:2047>=e?b+2:65535>=e?b+3:b+4;return b},___resizeBuffer:function(a){var b=this.byteView,c=new Uint8Array(a);null!=b&&(b.length<=a?c.set(b):c.set(b.subarray(0,a)));this.byteView=c;this.data=new DataView(c.buffer)},__getBuffer:function(){return this.data.buffer},__set:function(a,b){this.data.setUint8(a,b)},get_bytesAvailable:function(){return this.length-this.position},get_endian:function(){return this.littleEndian?"littleEndian":"bigEndian"},
set_endian:function(a){this.littleEndian="littleEndian"==a;return a},set_length:function(a){this.allocated<a?this.___resizeBuffer(this.allocated=k["int"](Math.max(a,2*this.allocated))):this.allocated>a&&this.___resizeBuffer(this.allocated=a);return this.length=a},__class__:c.utils.ByteArray,__properties__:{set_length:"set_length",set_endian:"set_endian",get_endian:"get_endian",get_bytesAvailable:"get_bytesAvailable"}};c.utils.Endian=function(){};h["openfl.utils.Endian"]=c.utils.Endian;c.utils.Endian.__name__=
["openfl","utils","Endian"];var t={Scene:function(){e.display.Sprite.call(this);this.mBackButton=new e.display.Button(D.get_assets().getTexture("button_back"),"Back");this.mBackButton.set_fontName("assets/fonts/Ubuntu-R.woff");this.mBackButton.set_x(160-this.mBackButton.get_width()/2);this.mBackButton.set_y(480-this.mBackButton.get_height()+1);this.mBackButton.set_name("backButton");this.addChild(this.mBackButton)}};h["scenes.Scene"]=t.Scene;t.Scene.__name__=["scenes","Scene"];t.Scene.__super__=e.display.Sprite;
t.Scene.prototype=q(e.display.Sprite.prototype,{__class__:t.Scene});t.AnimationScene=function(){t.Scene.call(this);this.mTransitions=["linear","easeInOut","easeOutBack","easeOutBounce","easeOutElastic"];var a=D.get_assets().getTexture("button_normal");this.mStartButton=new e.display.Button(a,"Start animation");this.mStartButton.set_fontName("assets/fonts/Ubuntu-R.woff");this.mStartButton.addEventListener("triggered",r(this,this.onStartButtonTriggered));this.mStartButton.set_x(160-k["int"](this.mStartButton.get_width()/
2));this.mStartButton.set_y(20);this.addChild(this.mStartButton);this.mDelayButton=new e.display.Button(a,"Delayed call");this.mDelayButton.set_fontName("assets/fonts/Ubuntu-R.woff");this.mDelayButton.addEventListener("triggered",r(this,this.onDelayButtonTriggered));this.mDelayButton.set_x(this.mStartButton.get_x());this.mDelayButton.set_y(this.mStartButton.get_y()+40);this.addChild(this.mDelayButton);this.mEgg=new e.display.Image(D.get_assets().getTexture("starling_front"));this.addChild(this.mEgg);
this.resetEgg();this.mTransitionLabel=new e.text.TextField(320,30,"","Verdana",20,0,!0);this.mTransitionLabel.set_y(this.mDelayButton.get_y()+40);this.mTransitionLabel.set_alpha(0);this.addChild(this.mTransitionLabel)};h["scenes.AnimationScene"]=t.AnimationScene;t.AnimationScene.__name__=["scenes","AnimationScene"];t.AnimationScene.__super__=t.Scene;t.AnimationScene.prototype=q(t.Scene.prototype,{resetEgg:function(){this.mEgg.set_x(20);this.mEgg.set_y(100);this.mEgg.set_scaleX(this.mEgg.set_scaleY(1));
this.mEgg.set_rotation(0)},onStartButtonTriggered:function(){var a=this;this.mStartButton.set_enabled(!1);this.resetEgg();var b=this.mTransitions.shift();this.mTransitions.push(b);var c=new e.animation.Tween(this.mEgg,2,b);c.animate("rotation",e.utils.MathUtil.deg2rad(90));c.moveTo(300,360);c.scaleTo(0.5);c.set_onComplete(function(){a.mStartButton.set_enabled(!0)});e.core.Starling.get_current().get_juggler().add(c);this.mTransitionLabel.set_text(b);this.mTransitionLabel.set_alpha(1);b=new e.animation.Tween(this.mTransitionLabel,
2,"easeIn");b.animate("alpha",0);e.core.Starling.get_current().get_juggler().add(b)},onDelayButtonTriggered:function(){var a=this;this.mDelayButton.set_enabled(!1);e.core.Starling.get_current().get_juggler().delayCall(r(this,this.colorizeEgg),1,[!0]);e.core.Starling.get_current().get_juggler().delayCall(r(this,this.colorizeEgg),2,[!1]);e.core.Starling.get_current().get_juggler().delayCall(function(){a.mDelayButton.set_enabled(!0)},2,[])},colorizeEgg:function(a){this.mEgg.set_color(a[0]?16711680:16777215)},
dispose:function(){this.mStartButton.removeEventListener("triggered",r(this,this.onStartButtonTriggered));this.mDelayButton.removeEventListener("triggered",r(this,this.onDelayButtonTriggered));t.Scene.prototype.dispose.call(this)},__class__:t.AnimationScene});t.BenchmarkScene=function(){t.Scene.call(this);this.mContainer=new e.display.Sprite;this.mContainer.set_touchable(!1);this.addChildAt(this.mContainer,0);this.mStartButton=new e.display.Button(D.get_assets().getTexture("button_normal"),"Start benchmark");
this.mStartButton.set_fontName("assets/fonts/Ubuntu-R.woff");this.mStartButton.addEventListener("triggered",r(this,this.onStartButtonTriggered));this.mStartButton.set_x(160-k["int"](this.mStartButton.get_width()/2));this.mStartButton.set_y(20);this.addChild(this.mStartButton);this.mStarted=!1;this.mElapsed=0;this.addEventListener("enterFrame",r(this,this.onEnterFrame))};h["scenes.BenchmarkScene"]=t.BenchmarkScene;t.BenchmarkScene.__name__=["scenes","BenchmarkScene"];t.BenchmarkScene.__super__=t.Scene;
t.BenchmarkScene.prototype=q(t.Scene.prototype,{dispose:function(){this.removeEventListener("enterFrame",r(this,this.onEnterFrame));this.mStartButton.removeEventListener("triggered",r(this,this.onStartButtonTriggered));t.Scene.prototype.dispose.call(this)},onEnterFrame:function(a){if(this.mStarted){this.mElapsed+=a.get_passedTime();this.mFrameCount++;if(0==this.mFrameCount%this.mWaitFrames){var b=this.mWaitFrames/this.mElapsed,c=e.core.Starling.get_current().get_nativeStage().frameRate|0;Math.ceil(b)>=
c?(this.mFailCount=0,this.addTestObjects()):(this.mFailCount++,20<this.mFailCount&&(this.mWaitFrames=5),30<this.mFailCount&&(this.mWaitFrames=10),40==this.mFailCount&&this.benchmarkComplete());this.mElapsed=this.mFrameCount=0}b=this.mContainer.get_numChildren();a=a.get_passedTime();for(c=0;c<b;){var d=c++,d=this.mContainer.getChildAt(d);d.set_rotation(d.get_rotation()+Math.PI/2*a)}}},onStartButtonTriggered:function(){m.Log.trace("Starting benchmark",{fileName:"BenchmarkScene.hx",lineNumber:96,className:"scenes.BenchmarkScene",
methodName:"onStartButtonTriggered"});this.mStartButton.set_visible(!1);this.mStarted=!0;this.mFailCount=0;this.mWaitFrames=2;this.mFrameCount=0;null!=this.mResultText&&(this.mResultText.removeFromParent(!0),this.mResultText=null);this.addTestObjects()},addTestObjects:function(){var a;a=20<this.mFailCount?2:10;for(var b=0;b<a;){b++;var c=new e.display.Image(D.get_assets().getTexture("benchmark_object"));c.set_x(15+290*Math.random());c.set_y(15+450*Math.random());this.mContainer.addChild(c)}},benchmarkComplete:function(){this.mStarted=
!1;this.mStartButton.set_visible(!0);var a=e.core.Starling.get_current().get_nativeStage().frameRate|0;m.Log.trace("Benchmark complete!",{fileName:"BenchmarkScene.hx",lineNumber:134,className:"scenes.BenchmarkScene",methodName:"benchmarkComplete"});m.Log.trace("FPS: "+a,{fileName:"BenchmarkScene.hx",lineNumber:135,className:"scenes.BenchmarkScene",methodName:"benchmarkComplete"});m.Log.trace("Float of objects: "+this.mContainer.get_numChildren(),{fileName:"BenchmarkScene.hx",lineNumber:136,className:"scenes.BenchmarkScene",
methodName:"benchmarkComplete"});a=e.utils.StringUtil.formatString("Result:\n{0} objects\nwith {1} fps",[this.mContainer.get_numChildren(),a]);this.mResultText=new e.text.TextField(240,200,a);this.mResultText.set_fontName("assets/fonts/Ubuntu-R.woff");this.mResultText.set_fontSize(30);this.mResultText.set_x(160-this.mResultText.get_width()/2);this.mResultText.set_y(240-this.mResultText.get_height()/2);this.addChild(this.mResultText);this.mContainer.removeChildren()},__class__:t.BenchmarkScene});t.BlendModeScene=
function(){this.mBlendModes="normal multiply screen add erase none".split(" ");t.Scene.call(this);this.mButton=new e.display.Button(D.get_assets().getTexture("button_normal"),"Switch Mode");this.mButton.set_fontName("assets/fonts/Ubuntu-R.woff");this.mButton.set_x(k["int"](160-this.mButton.get_width()/2));this.mButton.set_y(15);this.mButton.addEventListener("triggered",r(this,this.onButtonTriggered));this.addChild(this.mButton);this.mImage=new e.display.Image(D.get_assets().getTexture("starling_rocket"));
this.mImage.set_x(k["int"](160-this.mImage.get_width()/2));this.mImage.set_y(170);this.addChild(this.mImage);this.mInfoText=new e.text.TextField(300,32,"","Verdana",19);this.mInfoText.set_x(10);this.mInfoText.set_y(330);this.addChild(this.mInfoText);this.onButtonTriggered(null)};h["scenes.BlendModeScene"]=t.BlendModeScene;t.BlendModeScene.__name__=["scenes","BlendModeScene"];t.BlendModeScene.__super__=t.Scene;t.BlendModeScene.prototype=q(t.Scene.prototype,{onButtonTriggered:function(){var a;a=s.Boot.__cast(this.mBlendModes.shift(),
String);this.mBlendModes.push(a);this.mInfoText.set_text(a);this.mImage.set_blendMode(a)},__class__:t.BlendModeScene});t.CustomHitTestScene=function(){t.Scene.call(this);var a=new e.text.TextField(300,100,"Pushing the bird only works when the touch occurs within a circle.This can be accomplished by overriding the method 'hitTest'.","assets/fonts/Ubuntu-R.woff");a.set_x(a.set_y(10));a.set_vAlign("top");a.set_hAlign("center");this.addChild(a);a=new I.RoundButton(D.get_assets().getTexture("starling_round"));
a.set_x(160-k["int"](a.get_width()/2));a.set_y(150);this.addChild(a)};h["scenes.CustomHitTestScene"]=t.CustomHitTestScene;t.CustomHitTestScene.__name__=["scenes","CustomHitTestScene"];t.CustomHitTestScene.__super__=t.Scene;t.CustomHitTestScene.prototype=q(t.Scene.prototype,{__class__:t.CustomHitTestScene});t.FilterScene=function(){t.Scene.call(this);this.mButton=new e.display.Button(D.get_assets().getTexture("button_normal"),"Switch Filter");this.mButton.set_fontName("assets/fonts/Ubuntu-R.woff");
this.mButton.set_x(k["int"](160-this.mButton.get_width()/2));this.mButton.set_y(15);this.mButton.addEventListener("triggered",r(this,this.onButtonTriggered));this.addChild(this.mButton);this.mImage=new e.display.Image(D.get_assets().getTexture("starling_rocket"));this.mImage.set_x(k["int"](160-this.mImage.get_width()/2));this.mImage.set_y(170);this.addChild(this.mImage);this.mInfoText=new e.text.TextField(300,32,"","Verdana",19);this.mInfoText.set_x(10);this.mInfoText.set_y(330);this.addChild(this.mInfoText);
this.initFilters();this.onButtonTriggered(null)};h["scenes.FilterScene"]=t.FilterScene;t.FilterScene.__name__=["scenes","FilterScene"];t.FilterScene.__super__=t.Scene;t.FilterScene.prototype=q(t.Scene.prototype,{onButtonTriggered:function(){var a;a=s.Boot.__cast(this.mFilterInfos.shift(),Array);this.mFilterInfos.push(a);this.mInfoText.set_text(a[0]);this.mImage.set_filter(a[1])},initFilters:function(){this.mFilterInfos=[["Identity",new e.filters.ColorMatrixFilter],["Blur",new e.filters.BlurFilter],
["Drop Shadow",e.filters.BlurFilter.createDropShadow()],["Glow",e.filters.BlurFilter.createGlow()]];var a=new e.filters.DisplacementMapFilter(this.createDisplacementMap(this.mImage.get_width(),this.mImage.get_height()),null,1,2,25,25);this.mFilterInfos.push(["Displacement Map",a]);a=new e.filters.ColorMatrixFilter;a.invert();this.mFilterInfos.push(["Invert",a]);a=new e.filters.ColorMatrixFilter;a.adjustSaturation(-1);this.mFilterInfos.push(["Grayscale",a]);a=new e.filters.ColorMatrixFilter;a.adjustSaturation(1);
this.mFilterInfos.push(["Saturation",a]);a=new e.filters.ColorMatrixFilter;a.adjustContrast(0.75);this.mFilterInfos.push(["Contrast",a]);a=new e.filters.ColorMatrixFilter;a.adjustBrightness(-0.25);this.mFilterInfos.push(["Brightness",a]);a=new e.filters.ColorMatrixFilter;a.adjustHue(1);this.mFilterInfos.push(["Hue",a])},createDisplacementMap:function(a,b){var f=e.core.Starling.get_current().get_contentScaleFactor(),d=new c.display.BitmapData(a*f|0,b*f|0,!1);d.perlinNoise(20*f,20*f,3,5,!1,!0);return e.textures.Texture.fromBitmapData(d,
!1,!1,f)},__class__:t.FilterScene});t.MaskScene=function(){t.Scene.call(this);this.mContents=new e.display.Sprite;this.addChild(this.mContents);var a=e.core.Starling.get_current().get_stage().get_stageWidth(),b=e.core.Starling.get_current().get_stage().get_stageHeight(),f=new e.display.Quad(a,b);f.set_alpha(0);this.addChildAt(f,0);f=new e.display.Image(D.get_assets().getTexture("flight_00"));f.set_x((a-f.get_width())/2);f.set_y(80);this.mContents.addChild(f);var d=new e.filters.ColorMatrixFilter;
d.adjustHue(-0.5);f.set_filter(d);f=new e.text.TextField(256,128,"Move the mouse (or a finger) over the screen to move the clipping rectangle.");f.set_x((a-f.get_width())/2);f.set_y(240);this.mContents.addChild(f);d=new e.text.TextField(256,128,"Currently, Starling supports only stage-aligned clipping; more complex masks will be supported in future versions.");d.set_x(f.get_x());d.set_y(290);this.mContents.addChild(d);f=new c.geom.Rectangle(0,0,150,150);f.x=(a-f.width)/2;f.y=(b-f.height)/2+5;this.mContents.set_clipRect(f);
this.mClipQuad=new e.display.Quad(f.width,f.height,16711680);this.mClipQuad.set_x(f.x);this.mClipQuad.set_y(f.y);this.mClipQuad.set_alpha(0.1);this.mClipQuad.set_touchable(!1);this.addChild(this.mClipQuad);this.addEventListener("touch",r(this,this.onTouch))};h["scenes.MaskScene"]=t.MaskScene;t.MaskScene.__name__=["scenes","MaskScene"];t.MaskScene.__super__=t.Scene;t.MaskScene.prototype=q(t.Scene.prototype,{onTouch:function(a){var b=a.getTouch(this,"hover");null==b&&(b=a.getTouch(this,"began"));null==
b&&(b=a.getTouch(this,"moved"));null!=b&&(a=b.getLocation(this),b=this.mContents.get_clipRect(),b.x=a.x-b.width/2,b.y=a.y-b.height/2,this.mClipQuad.set_x(b.x),this.mClipQuad.set_y(b.y))},__class__:t.MaskScene});t.MovieScene=function(){t.Scene.call(this);var a=D.get_assets().getTextures("flight");this.mMovie=new e.display.MovieClip(a,15);a=c.Assets.getSound("assets/audio/wing_flap.ogg");this.mMovie.setFrameSound(2,a);this.mMovie.set_x(160-k["int"](this.mMovie.get_width()/2));this.mMovie.set_y(240-
k["int"](this.mMovie.get_height()/2));this.addChild(this.mMovie);this.addEventListener("addedToStage",r(this,this.onAddedToStage));this.addEventListener("removedFromStage",r(this,this.onRemovedFromStage))};h["scenes.MovieScene"]=t.MovieScene;t.MovieScene.__name__=["scenes","MovieScene"];t.MovieScene.__super__=t.Scene;t.MovieScene.prototype=q(t.Scene.prototype,{onAddedToStage:function(){e.core.Starling.get_current().get_juggler().add(this.mMovie)},onRemovedFromStage:function(){e.core.Starling.get_current().get_juggler().remove(this.mMovie)},
dispose:function(){this.removeEventListener("removedFromStage",r(this,this.onRemovedFromStage));this.removeEventListener("addedToStage",r(this,this.onAddedToStage));t.Scene.prototype.dispose.call(this)},__class__:t.MovieScene});t.RenderTextureScene=function(){t.Scene.call(this);this.mColors=new m.ds.IntMap;this.mRenderTexture=new e.textures.RenderTexture(320,435);this.mCanvas=new e.display.Image(this.mRenderTexture);this.mCanvas.addEventListener("touch",r(this,this.onTouch));this.addChild(this.mCanvas);
this.mBrush=new e.display.Image(D.get_assets().getTexture("brush"));this.mBrush.set_pivotX(this.mBrush.get_width()/2);this.mBrush.set_pivotY(this.mBrush.get_height()/2);this.mBrush.set_blendMode("normal");var a=new e.text.TextField(256,128,"Touch the screen\nto draw!");a.set_fontSize(24);a.set_x(160-a.get_width()/2);a.set_y(240-a.get_height()/2);this.mRenderTexture.draw(a);this.mButton=new e.display.Button(D.get_assets().getTexture("button_normal"),"Mode: Draw");this.mButton.set_fontName("assets/fonts/Ubuntu-R.woff");
this.mButton.set_x(k["int"](160-this.mButton.get_width()/2));this.mButton.set_y(15);this.mButton.addEventListener("triggered",r(this,this.onButtonTriggered));this.addChild(this.mButton)};h["scenes.RenderTextureScene"]=t.RenderTextureScene;t.RenderTextureScene.__name__=["scenes","RenderTextureScene"];t.RenderTextureScene.__super__=t.Scene;t.RenderTextureScene.prototype=q(t.Scene.prototype,{onTouch:function(a){var b=this;this.mRenderTexture.drawBundled(function(){for(var c=a.getTouches(b.mCanvas),d=
0;d<c.length;){var e=c[d];++d;if("began"==e.get_phase()){var j=e.get_id(),g=k["int"](2147483647*Math.random());b.mColors.set(j,g);g}"hover"==e.get_phase()||"ended"==e.get_phase()||(j=e.getLocation(b.mCanvas),b.mBrush.set_x(j.x),b.mBrush.set_y(j.y),b.mBrush.set_color(function(){var a=e.get_id();return b.mColors.get(a)}(this)),b.mBrush.set_rotation(2*Math.random()*Math.PI),b.mRenderTexture.draw(b.mBrush))}})},onButtonTriggered:function(){"normal"==this.mBrush.get_blendMode()?(this.mBrush.set_blendMode("erase"),
this.mButton.set_text("Mode: Erase")):(this.mBrush.set_blendMode("normal"),this.mButton.set_text("Mode: Draw"))},dispose:function(){this.mRenderTexture.dispose();t.Scene.prototype.dispose.call(this)},__class__:t.RenderTextureScene});t.TextScene=function(){t.Scene.call(this);this.init()};h["scenes.TextScene"]=t.TextScene;t.TextScene.__name__=["scenes","TextScene"];t.TextScene.__super__=t.Scene;t.TextScene.prototype=q(t.Scene.prototype,{init:function(){var a=new e.text.TextField(300,80,"TextFields can have a border and a color. They can be aligned in different ways, ...",
"assets/fonts/Ubuntu-R.woff",19);a.set_x(a.set_y(10));a.set_border(!0);a.set_color(3355545);this.addChild(a);var b=new e.text.TextField(145,80,"... e.g.\ntop-left ...","assets/fonts/Ubuntu-R.woff",19);b.set_x(10);b.set_y(a.get_y()+a.get_height()+10);b.set_hAlign("left");b.set_vAlign("top");b.set_border(!0);b.set_color(10040115);this.addChild(b);a=new e.text.TextField(145,80,"... or\nbottom right ...","assets/fonts/Ubuntu-R.woff",19);a.set_x(20+b.get_width());a.set_y(b.get_y());a.set_hAlign("right");
a.set_vAlign("bottom");a.set_color(2263074);a.set_border(!0);this.addChild(a);a=new e.text.TextField(300,80,"... or centered. Embedded fonts are detected automatically.","assets/fonts/Ubuntu-R.woff",19,0,!0);a.set_x(10);a.set_y(b.get_y()+b.get_height()+10);a.set_border(!0);this.addChild(a);b=new e.text.TextField(300,150,"It is very easy to use Bitmap fonts,\nas well!","Desyrel");b.set_fontSize(-1);b.set_color(16777215);b.set_x(10);b.set_y(a.get_y()+a.get_height()+10);this.addChild(b)},__class__:t.TextScene});
t.TextureScene=function(){t.Scene.call(this);var a=new e.display.Image(D.get_assets().getTexture("flight_00"));a.set_x(-20);a.set_y(0);this.addChild(a);a=new e.display.Image(D.get_assets().getTexture("flight_04"));a.set_x(90);a.set_y(85);this.addChild(a);a=new e.display.Image(D.get_assets().getTexture("flight_08"));a.set_x(100);a.set_y(-60);this.addChild(a);try{var b=D.get_assets().getTexture("compressed_texture"),f=new e.display.Image(b);f.set_x(160-f.get_width()/2);f.set_y(280);this.addChild(f)}catch(d){if(s.Boot.__instanceof(d,
c.errors.Error))b=new e.text.TextField(220,128,"Update to Flash Player 11.4 or AIR 3.4 (swf-version=17) to see a compressed ATF texture instead of this boring text.","Verdana",14),b.set_x(160-b.get_width()/2),b.set_y(280),this.addChild(b);else throw d;}};h["scenes.TextureScene"]=t.TextureScene;t.TextureScene.__name__=["scenes","TextureScene"];t.TextureScene.__super__=t.Scene;t.TextureScene.prototype=q(t.Scene.prototype,{__class__:t.TextureScene});t.TouchScene=function(){t.Scene.call(this);var a=new e.text.TextField(300,
25,"[use Ctrl/Cmd & Shift to simulate multi-touch]","assets/fonts/Ubuntu-R.woff");a.set_x(a.set_y(10));this.addChild(a);a=new I.TouchSheet(new e.display.Image(D.get_assets().getTexture("starling_sheet")));a.set_x(160);a.set_y(240);a.set_rotation(e.utils.MathUtil.deg2rad(10));this.addChild(a)};h["scenes.TouchScene"]=t.TouchScene;t.TouchScene.__name__=["scenes","TouchScene"];t.TouchScene.__super__=t.Scene;t.TouchScene.prototype=q(t.Scene.prototype,{__class__:t.TouchScene});e.animation={};e.animation.IAnimatable=
function(){};h["starling.animation.IAnimatable"]=e.animation.IAnimatable;e.animation.IAnimatable.__name__=["starling","animation","IAnimatable"];e.animation.IAnimatable.prototype={__class__:e.animation.IAnimatable};e.animation.DelayedCall=function(a,b,c){this.reset(a,b,c)};h["starling.animation.DelayedCall"]=e.animation.DelayedCall;e.animation.DelayedCall.__name__=["starling","animation","DelayedCall"];e.animation.DelayedCall.__interfaces__=[e.animation.IAnimatable];e.animation.DelayedCall.fromPool=
function(a,b,c){return 0!=e.animation.DelayedCall.sPool.length?e.animation.DelayedCall.sPool.pop().reset(a,b,c):new e.animation.DelayedCall(a,b,c)};e.animation.DelayedCall.toPool=function(a){a.mCall=null;a.mArgs=null;a.removeEventListeners();e.animation.DelayedCall.sPool.push(a)};e.animation.DelayedCall.__super__=e.events.EventDispatcher;e.animation.DelayedCall.prototype=q(e.events.EventDispatcher.prototype,{reset:function(a,b,c){this.mCurrentTime=0;this.mTotalTime=Math.max(b,1E-4);this.mCall=a;this.mArgs=
c;this.mRepeatCount=1;return this},advanceTime:function(a){var b=this.mCurrentTime;this.mCurrentTime=Math.min(this.mTotalTime,this.mCurrentTime+a);b<this.mTotalTime&&this.mCurrentTime>=this.mTotalTime&&(0==this.mRepeatCount||1<this.mRepeatCount?(this.mCall(this.mArgs),0<this.mRepeatCount&&(this.mRepeatCount-=1),this.mCurrentTime=0,this.advanceTime(b+a-this.mTotalTime)):(a=this.mCall,b=this.mArgs,this.dispatchEventWith("removeFromJuggler"),a(b)))},get_isComplete:function(){return 1==this.mRepeatCount&&
this.mCurrentTime>=this.mTotalTime},get_totalTime:function(){return this.mTotalTime},get_currentTime:function(){return this.mCurrentTime},get_repeatCount:function(){return this.mRepeatCount},set_repeatCount:function(a){return this.mRepeatCount=a},__class__:e.animation.DelayedCall,__properties__:{set_repeatCount:"set_repeatCount",get_repeatCount:"get_repeatCount",get_currentTime:"get_currentTime",get_totalTime:"get_totalTime",get_isComplete:"get_isComplete"}});e.animation.Juggler=function(){this.mElapsedTime=
0;this.mObjects=[]};h["starling.animation.Juggler"]=e.animation.Juggler;e.animation.Juggler.__name__=["starling","animation","Juggler"];e.animation.Juggler.__interfaces__=[e.animation.IAnimatable];e.animation.Juggler.prototype={add:function(a){null!=a&&-1==w.indexOf(this.mObjects,a,0)&&(this.mObjects.push(a),a=s.Boot.__cast(a,e.events.EventDispatcher),null!=a&&a.addEventListener("removeFromJuggler",r(this,this.onRemove)))},contains:function(a){return-1!=w.indexOf(this.mObjects,a,0)},remove:function(a){if(null!=
a){var b;b=s.Boot.__cast(a,e.events.EventDispatcher);null!=b&&b.removeEventListener("removeFromJuggler",r(this,this.onRemove));a=w.indexOf(this.mObjects,a,0);-1!=a&&(this.mObjects[a]=null)}},removeTweens:function(a){if(null!=a)for(var b=this.mObjects.length-1;0<=b;){var c;c=s.Boot.__cast(this.mObjects[b],e.animation.Tween);null!=c&&c.get_target()==a&&(c.removeEventListener("removeFromJuggler",r(this,this.onRemove)),this.mObjects[b]=null);--b}},containsTweens:function(a){if(null==a)return!1;for(var b=
this.mObjects.length-1;0<=b;){var c;c=s.Boot.__cast(this.mObjects[b],e.animation.Tween);if(null!=c&&c.get_target()==a)return!0;--b}return!1},purge:function(){for(var a=this.mObjects.length-1;0<=a;){var b;b=s.Boot.__cast(this.mObjects[a],e.events.EventDispatcher);null!=b&&b.removeEventListener("removeFromJuggler",r(this,this.onRemove));this.mObjects[a]=null;--a}},delayCall:function(a,b,c){if(null==a)return null;a=e.animation.DelayedCall.fromPool(a,b,c);a.addEventListener("removeFromJuggler",r(this,
this.onPooledDelayedCallComplete));this.add(a);return a},repeatCall:function(a,b,c,d){null==c&&(c=0);if(null==a)return null;a=e.animation.DelayedCall.fromPool(a,b,d);a.set_repeatCount(c);a.addEventListener("removeFromJuggler",r(this,this.onPooledDelayedCallComplete));this.add(a);return a},onPooledDelayedCallComplete:function(a){e.animation.DelayedCall.toPool(s.Boot.__cast(a.get_target(),e.animation.DelayedCall))},tween:function(a,b,f){for(var b=e.animation.Tween.fromPool(a,b),d=0;d<f.length;){var i=
f[d];++d;var j=f[i];if(E.hasField(b,i))E.setProperty(b,i,j);else if(E.hasField(a,i))b.animate(i,s.Boot.__cast(j,Z));else throw new c.errors.ArgumentError("Invalid property: "+k.string(i));}b.addEventListener("removeFromJuggler",r(this,this.onPooledTweenComplete));this.add(b);return b},onPooledTweenComplete:function(a){e.animation.Tween.toPool(s.Boot.__cast(a.get_target(),e.animation.Tween))},advanceTime:function(a){var b=this.mObjects.length,c=0;this.mElapsedTime+=a;if(0!=b){for(var d=0;d<b;){var e=
d++,j=this.mObjects[e];null!=j&&(c!=e&&(this.mObjects[c]=j,this.mObjects[e]=null),j.advanceTime(a),++c)}if(c!=this.mObjects.length){for(a=b=this.mObjects.length;a<b;)this.mObjects[k["int"](c++)]=this.mObjects[k["int"](a++)];this.mObjects=this.mObjects.slice(0,c)}}},onRemove:function(a){this.remove(s.Boot.__cast(a.get_target(),e.animation.IAnimatable));a=k.is(a.get_target(),e.animation.Tween)?s.Boot.__cast(a.get_target(),e.animation.Tween):null;null!=a&&a.get_isComplete()&&this.add(a.get_nextTween())},
get_elapsedTime:function(){return this.mElapsedTime},get_objects:function(){return this.mObjects},__class__:e.animation.Juggler,__properties__:{get_objects:"get_objects",get_elapsedTime:"get_elapsedTime"}};e.animation.Transitions=function(){};h["starling.animation.Transitions"]=e.animation.Transitions;e.animation.Transitions.__name__=["starling","animation","Transitions"];e.animation.Transitions.sTransitions=null;e.animation.Transitions.getTransition=function(a){null==e.animation.Transitions.sTransitions&&
e.animation.Transitions.registerDefaults();return e.animation.Transitions.sTransitions.get(a)};e.animation.Transitions.register=function(a,b){null==e.animation.Transitions.sTransitions&&e.animation.Transitions.registerDefaults();e.animation.Transitions.sTransitions.set(a,b);b};e.animation.Transitions.registerDefaults=function(){e.animation.Transitions.sTransitions=new m.ds.StringMap;e.animation.Transitions.register("linear",e.animation.Transitions.linear);e.animation.Transitions.register("easeIn",
e.animation.Transitions.easeIn);e.animation.Transitions.register("easeOut",e.animation.Transitions.easeOut);e.animation.Transitions.register("easeInOut",e.animation.Transitions.easeInOut);e.animation.Transitions.register("easeOutIn",e.animation.Transitions.easeOutIn);e.animation.Transitions.register("easeInBack",e.animation.Transitions.easeInBack);e.animation.Transitions.register("easeOutBack",e.animation.Transitions.easeOutBack);e.animation.Transitions.register("easeInOutBack",e.animation.Transitions.easeInOutBack);
e.animation.Transitions.register("easeOutInBack",e.animation.Transitions.easeOutInBack);e.animation.Transitions.register("easeInElastic",e.animation.Transitions.easeInElastic);e.animation.Transitions.register("easeOutElastic",e.animation.Transitions.easeOutElastic);e.animation.Transitions.register("easeInOutElastic",e.animation.Transitions.easeInOutElastic);e.animation.Transitions.register("easeOutInElastic",e.animation.Transitions.easeOutInElastic);e.animation.Transitions.register("easeInBounce",
e.animation.Transitions.easeInBounce);e.animation.Transitions.register("easeOutBounce",e.animation.Transitions.easeOutBounce);e.animation.Transitions.register("easeInOutBounce",e.animation.Transitions.easeInOutBounce);e.animation.Transitions.register("easeOutInBounce",e.animation.Transitions.easeOutInBounce)};e.animation.Transitions.linear=function(a){return a};e.animation.Transitions.easeIn=function(a){return a*a*a};e.animation.Transitions.easeOut=function(a){a-=1;return a*a*a+1};e.animation.Transitions.easeInOut=
function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeIn,e.animation.Transitions.easeOut,a)};e.animation.Transitions.easeOutIn=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeOut,e.animation.Transitions.easeIn,a)};e.animation.Transitions.easeInBack=function(a){return Math.pow(a,2)*(2.70158*a-1.70158)};e.animation.Transitions.easeOutBack=function(a){a-=1;return Math.pow(a,2)*(2.70158*a+1.70158)+1};e.animation.Transitions.easeInOutBack=
function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeInBack,e.animation.Transitions.easeOutBack,a)};e.animation.Transitions.easeOutInBack=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeOutBack,e.animation.Transitions.easeInBack,a)};e.animation.Transitions.easeInElastic=function(a){if(0==a||1==a)return a;a-=1;return-1*Math.pow(2,10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)};e.animation.Transitions.easeOutElastic=function(a){return 0==a||
1==a?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)+1};e.animation.Transitions.easeInOutElastic=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeInElastic,e.animation.Transitions.easeOutElastic,a)};e.animation.Transitions.easeOutInElastic=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeOutElastic,e.animation.Transitions.easeInElastic,a)};e.animation.Transitions.easeInBounce=function(a){return 1-e.animation.Transitions.easeOutBounce(1-
a)};e.animation.Transitions.easeOutBounce=function(a){return a=a<1/2.75?7.5625*Math.pow(a,2):a<2/2.75?7.5625*Math.pow(a-1.5/2.75,2)+0.75:a<2.5/2.75?7.5625*Math.pow(a-2.25/2.75,2)+0.9375:7.5625*Math.pow(a-2.625/2.75,2)+0.984375};e.animation.Transitions.easeInOutBounce=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeInBounce,e.animation.Transitions.easeOutBounce,a)};e.animation.Transitions.easeOutInBounce=function(a){return e.animation.Transitions.easeCombined(e.animation.Transitions.easeOutBounce,
e.animation.Transitions.easeInBounce,a)};e.animation.Transitions.easeCombined=function(a,b,c){return 0.5>c?0.5*a(2*c):0.5*b(2*(c-0.5))+0.5};e.animation.Transitions.prototype={Transitions:function(){throw new e.errors.AbstractClassError;},__class__:e.animation.Transitions};e.animation.Tween=function(a,b,c){null==c&&(c="linear");this.reset(a,b,c)};h["starling.animation.Tween"]=e.animation.Tween;e.animation.Tween.__name__=["starling","animation","Tween"];e.animation.Tween.__interfaces__=[e.animation.IAnimatable];
e.animation.Tween.fromPool=function(a,b,c){null==c&&(c="linear");return 0!=e.animation.Tween.sTweenPool.length?e.animation.Tween.sTweenPool.pop().reset(a,b,c):new e.animation.Tween(a,b,c)};e.animation.Tween.toPool=function(a){a.mOnStart=a.mOnUpdate=a.mOnRepeat=a.mOnComplete=null;a.mOnStartArgs=a.mOnUpdateArgs=a.mOnRepeatArgs=a.mOnCompleteArgs=null;a.mTarget=null;a.mTransitionFunc=null;a.removeEventListeners();e.animation.Tween.sTweenPool.push(a)};e.animation.Tween.__super__=e.events.EventDispatcher;
e.animation.Tween.prototype=q(e.events.EventDispatcher.prototype,{reset:function(a,b,f){null==f&&(f="linear");this.mTarget=a;this.mCurrentTime=0;this.mTotalTime=Math.max(1E-4,b);this.mDelay=this.mRepeatDelay=this.mProgress=0;this.mOnStartArgs=this.mOnUpdateArgs=this.mOnCompleteArgs=this.mOnStart=this.mOnUpdate=this.mOnComplete=null;this.mRoundToInt=this.mReverse=!1;this.mRepeatCount=1;this.mCurrentCycle=-1;if("string"==typeof f)this.set_transition(s.Boot.__cast(f,String));else if(E.isFunction(f))this.set_transitionFunc(f);
else throw new c.errors.ArgumentError("Transition must be either a string or a function");this.mProperties=[];this.mStartValues=[];this.mEndValues=[];return this},animate:function(a,b){null!=this.mTarget&&(this.mProperties.push(a),this.mStartValues.push(Math.NaN),this.mEndValues.push(b))},scaleTo:function(a){this.animate("scaleX",a);this.animate("scaleY",a)},moveTo:function(a,b){this.animate("x",a);this.animate("y",b)},fadeTo:function(a){this.animate("alpha",a)},advanceTime:function(a){if(!(0==a||
1==this.mRepeatCount&&this.mCurrentTime==this.mTotalTime)){var b=this.mCurrentTime,c=this.mTotalTime-this.mCurrentTime,c=a>c?a-c:0;this.mCurrentTime+=a;if(!(0>=this.mCurrentTime)){this.mCurrentTime>this.mTotalTime&&(this.mCurrentTime=this.mTotalTime);0>this.mCurrentCycle&&(0>=b&&0<this.mCurrentTime)&&(this.mCurrentCycle++,null!=this.mOnStart&&this.mOnStart(this.mOnStartArgs));var d=this.mCurrentTime/this.mTotalTime,a=this.mStartValues.length;this.mProgress=this.mReverse&&1==this.mCurrentCycle%2?this.mTransitionFunc(1-
d):this.mTransitionFunc(d);for(d=0;d<a;){var e=d++;this.mStartValues[e]!=this.mStartValues[e]&&(this.mStartValues[e]=s.Boot.__cast(E.getProperty(this.mTarget,this.mProperties[e]),Z));var j=this.mStartValues[e],j=j+this.mProgress*(this.mEndValues[e]-j);this.mRoundToInt&&(j=Math.round(j));E.setProperty(this.mTarget,this.mProperties[e],j)}null!=this.mOnUpdate&&this.mOnUpdate(this.mOnUpdateArgs);b<this.mTotalTime&&this.mCurrentTime>=this.mTotalTime&&(0==this.mRepeatCount||1<this.mRepeatCount?(this.mCurrentTime=
-this.mRepeatDelay,this.mCurrentCycle++,1<this.mRepeatCount&&this.mRepeatCount--,null!=this.mOnRepeat&&this.mOnRepeat(this.mOnRepeatArgs)):(b=this.mOnComplete,a=this.mOnCompleteArgs,this.dispatchEventWith("removeFromJuggler"),null!=b&&b(a)));0!=c&&this.advanceTime(c)}}},getEndValue:function(a){var b=w.indexOf(this.mProperties,a,0);if(-1==b)throw new c.errors.ArgumentError("The property '"+a+"' is not animated");return this.mEndValues[b]},get_isComplete:function(){return this.mCurrentTime>=this.mTotalTime&&
1==this.mRepeatCount},get_target:function(){return this.mTarget},get_transition:function(){return this.mTransitionName},set_transition:function(a){this.mTransitionName=a;this.mTransitionFunc=e.animation.Transitions.getTransition(a);if(null==this.mTransitionFunc)throw new c.errors.ArgumentError("Invalid transiton: "+a);return this.mTransitionName},get_transitionFunc:function(){return this.mTransitionFunc},set_transitionFunc:function(a){this.mTransitionName="custom";return this.mTransitionFunc=a},get_totalTime:function(){return this.mTotalTime},
get_currentTime:function(){return this.mCurrentTime},get_progress:function(){return this.mProgress},get_delay:function(){return this.mDelay},set_delay:function(a){this.mCurrentTime=this.mCurrentTime+this.mDelay-a;return this.mDelay=a},get_repeatCount:function(){return this.mRepeatCount},set_repeatCount:function(a){return this.mRepeatCount=a},get_repeatDelay:function(){return this.mRepeatDelay},set_repeatDelay:function(a){return this.mRepeatDelay=a},get_reverse:function(){return this.mReverse},set_reverse:function(a){return this.mReverse=
a},get_roundToInt:function(){return this.mRoundToInt},set_roundToInt:function(a){return this.mRoundToInt=a},get_onStart:function(){return this.mOnStart},set_onStart:function(a){return this.mOnStart=a},get_onUpdate:function(){return this.mOnUpdate},set_onUpdate:function(a){return this.mOnUpdate=a},get_onRepeat:function(){return this.mOnRepeat},set_onRepeat:function(a){return this.mOnRepeat=a},get_onComplete:function(){return this.mOnComplete},set_onComplete:function(a){return this.mOnComplete=a},get_onStartArgs:function(){return this.mOnStartArgs},
set_onStartArgs:function(a){return this.mOnStartArgs=a},get_onUpdateArgs:function(){return this.mOnUpdateArgs},set_onUpdateArgs:function(a){this.mOnUpdateArgs=a},get_onRepeatArgs:function(){return this.mOnRepeatArgs},set_onRepeatArgs:function(a){return this.mOnRepeatArgs=a},get_onCompleteArgs:function(){return this.mOnCompleteArgs},set_onCompleteArgs:function(a){return this.mOnCompleteArgs=a},get_nextTween:function(){return this.mNextTween},set_nextTween:function(a){return this.mNextTween=a},__class__:e.animation.Tween,
__properties__:{set_nextTween:"set_nextTween",get_nextTween:"get_nextTween",set_onCompleteArgs:"set_onCompleteArgs",get_onCompleteArgs:"get_onCompleteArgs",set_onRepeatArgs:"set_onRepeatArgs",get_onRepeatArgs:"get_onRepeatArgs",set_onStartArgs:"set_onStartArgs",get_onStartArgs:"get_onStartArgs",set_onComplete:"set_onComplete",get_onComplete:"get_onComplete",set_onRepeat:"set_onRepeat",get_onRepeat:"get_onRepeat",set_onUpdate:"set_onUpdate",get_onUpdate:"get_onUpdate",set_onStart:"set_onStart",get_onStart:"get_onStart",
set_roundToInt:"set_roundToInt",get_roundToInt:"get_roundToInt",set_reverse:"set_reverse",get_reverse:"get_reverse",set_repeatDelay:"set_repeatDelay",get_repeatDelay:"get_repeatDelay",set_repeatCount:"set_repeatCount",get_repeatCount:"get_repeatCount",set_delay:"set_delay",get_delay:"get_delay",get_progress:"get_progress",get_currentTime:"get_currentTime",get_totalTime:"get_totalTime",set_transitionFunc:"set_transitionFunc",get_transitionFunc:"get_transitionFunc",set_transition:"set_transition",get_transition:"get_transition",
get_target:"get_target",get_isComplete:"get_isComplete"}});e.containers={};e.containers.View2D=function(a,b,d){null==d&&(d=1);null==b&&(b="baseline");null==a&&(a=!1);this._height=this._width=0;this._aspectRatio=d;c.display.Sprite.call(this);this._time=0;this._rightClickMenuEnabled=this._backBufferInvalid=!0;this._shareContext=!1;this._profile=b;this._forceSoftware=a;this.addEventListener(c.events.Event.ADDED_TO_STAGE,r(this,this.onAddedToStage),!1,0,!0);this.addEventListener(c.events.Event.ADDED,
r(this,this.onAdded),!1,0,!0)};h["starling.containers.View2D"]=e.containers.View2D;e.containers.View2D.__name__=["starling","containers","View2D"];e.containers.View2D.__super__=c.display.Sprite;e.containers.View2D.prototype=q(c.display.Sprite.prototype,{get_stage3DProxy:function(){return this._stage3DProxy},set_stage3DProxy:function(a){this._stage3DProxy=a;this._backBufferInvalid=!0;return this._stage3DProxy},get_starlingPtr:function(){return this._starling},set_starlingPtr:function(a){null!=this._starling&&
this._starling.dispose();return this._starling=a},get_deltaTime:function(){return this._deltaTime},get_aspectRatio:function(){return this._aspectRatio},set_aspectRatio:function(a){return this._aspectRatio=a},get_width:function(){return this._width},set_width:function(a){null!=this._stage3DProxy&&(this._stage3DProxy.get_usesSoftwareRendering()&&2048<a)&&(a=2048);if(this._width==a)return a;this._width=a;this._backBufferInvalid=!0;return a},get_height:function(){return this._height},set_height:function(a){null!=
this._stage3DProxy&&(this._stage3DProxy.get_usesSoftwareRendering()&&2048<a)&&(a=2048);if(this._height==a)return a;this._height=a;this._backBufferInvalid=!0;return a},set_visible:function(a){c.display.Sprite.prototype.set_visible.call(this,a);null!=this._stage3DProxy&&!this._shareContext&&this._stage3DProxy.set_visible(a);return a},get_antiAlias:function(){return this._antiAlias},set_antiAlias:function(a){this._antiAlias=a;this._starling.set_antiAliasing(a);this._backBufferInvalid=!0;return this._antiAlias},
get_shareContext:function(){return this._shareContext},set_shareContext:function(a){return this._shareContext==a?a:this._shareContext=a},updateBackBuffer:function(){if(null!=this._stage3DProxy.get_context3D()&&!this._shareContext)if(0<this._width&&0<this._height){if(this._stage3DProxy.get_usesSoftwareRendering()&&(2048<this._width&&(this._width=2048),2048<this._height))this._height=2048;var a=new c.geom.Rectangle;this._width/this.get_aspectRatio()>=this._height?(a.width=this._height*this.get_aspectRatio(),
a.height=this._height):(a.width=this._width,a.height=this._width/this.get_aspectRatio());a.x=(this._width-a.width)/2;a.y=(this._height-a.height)/2;this._starling.set_viewPort(a);this._stage3DProxy.set_x(a.x);this._stage3DProxy.set_y(a.y);this._stage3DProxy.configureBackBuffer(a.width|0,a.height|0,this._antiAlias,!1);this._backBufferInvalid=!1}else this.set_width(this.stage.stageWidth),this.set_height(this.stage.stageHeight)},setRenderCallback:function(a){null!=this._stage3DProxy&&this._stage3DProxy.setRenderCallback(a);
this._callbackMethod=a},render:function(){this.get_stage3DProxy().recoverFromDisposal()?(this._backBufferInvalid&&this.updateBackBuffer(),this.updateTime(),e.core.RenderSupport._clear(),this._starling.get_isStarted()&&this._starling.nextFrame(),this._shareContext||this.get_stage3DProxy().present(),this.get_stage3DProxy().set_bufferClear(!1)):this._backBufferInvalid=!0},updateTime:function(){var a=c.Lib.getTimer(),b=this._time;if(0==(0>b?4294967296+b:b+0))this._time=a;this._deltaTime=a-this._time;
this._time=a},dispose:function(){this.get_shareContext()||this._stage3DProxy.dispose();this._starling.dispose();this._starling=this._stage3DProxy=null},onAddedToStage:function(){this._addedToStage||(this._addedToStage=!0,null==this._stage3DProxy&&(this._stage3DProxy=d.core.managers.Stage3DManager.getInstance(this.stage).getFreeStage3DProxy(this._forceSoftware,this._profile),null!=this._callbackMethod&&this._stage3DProxy.setRenderCallback(this._callbackMethod)),0==this._width&&this.set_width(this.stage.stageWidth),
0==this._height&&this.set_height(this.stage.stageHeight))},onAdded:function(){this._parentIsStage=this.parent==this.stage},__class__:e.containers.View2D,__properties__:q(c.display.Sprite.prototype.__properties__,{set_shareContext:"set_shareContext",get_shareContext:"get_shareContext",set_antiAlias:"set_antiAlias",get_antiAlias:"get_antiAlias",set_aspectRatio:"set_aspectRatio",get_aspectRatio:"get_aspectRatio",get_deltaTime:"get_deltaTime",set_starlingPtr:"set_starlingPtr",get_starlingPtr:"get_starlingPtr",
set_stage3DProxy:"set_stage3DProxy",get_stage3DProxy:"get_stage3DProxy"})});e.core={};e.core.RenderSupport=function(){this.mProjectionMatrix=new c.geom.Matrix;this.mModelViewMatrix=new c.geom.Matrix;this.mMvpMatrix=new c.geom.Matrix;this.mMvpMatrix3D=new c.geom.Matrix3D;this.mMatrixStack=[];this.mDrawCount=this.mMatrixStackSize=0;this.mRenderTarget=null;this.mBlendMode="normal";this.mClipRectStack=[];this.mCurrentQuadBatchID=this.mClipRectStackSize=0;this.mQuadBatches=[new e.display.QuadBatch];this.loadIdentity();
this.setOrthographicProjection(0,0,400,300)};h["starling.core.RenderSupport"]=e.core.RenderSupport;e.core.RenderSupport.__name__=["starling","core","RenderSupport"];e.core.RenderSupport.transformMatrixForObject=function(a,b){e.utils.MatrixUtil.prependMatrix(a,b.get_transformationMatrix())};e.core.RenderSupport.setDefaultBlendFactors=function(a){e.core.RenderSupport.setBlendFactors(a)};e.core.RenderSupport.setBlendFactors=function(a,b){null==b&&(b="normal");var c=e.display.BlendMode.getBlendFactors(b,
a);e.core.Starling.get_current().get_context().setBlendFactors(c[0],c[1])};e.core.RenderSupport._clear=function(a,b){null==b&&(b=0);null==a&&(a=0);e.core.Starling.get_current().get_context().clear(e.utils.Color.getRed(a)/255,e.utils.Color.getGreen(a)/255,e.utils.Color.getBlue(a)/255,b)};e.core.RenderSupport.assembleAgal=function(a,b,d){if(null==d){d=e.core.Starling.get_current().get_context();if(null==d)throw new e.errors.MissingContextError;d=d.createProgram()}d.upload(c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.VERTEX,
a),c.display3D.shaders.AGLSLShaderUtils.createShader(c.display3D.Context3DProgramType.FRAGMENT,b));return d};e.core.RenderSupport.getTextureLookupFlags=function(a,b,c,d){null==d&&(d="bilinear");null==c&&(c=!1);c=["2d",c?"repeat":"clamp"];"compressed"==a?c.push("dxt1"):"compressedAlpha"==a&&c.push("dxt5");"none"==d?(c.push("nearest"),c.push(b?"mipnearest":"mipnone")):"bilinear"==d?(c.push("linear"),c.push(b?"mipnearest":"mipnone")):(c.push("linear"),c.push(b?"miplinear":"mipnone"));return"<"+c.join(",")+
">"};e.core.RenderSupport.prototype={dispose:function(){for(var a=0,b=this.mQuadBatches;a<b.length;){var c=b[a];++a;c.dispose()}},setOrthographicProjection:function(a,b,c,d){this.mProjectionMatrix.setTo(2/c,0,0,-2/d,-(2*a+c)/c,(2*b+d)/d);this.applyClipRect()},loadIdentity:function(){this.mModelViewMatrix.identity()},translateMatrix:function(a,b){e.utils.MatrixUtil.prependTranslation(this.mModelViewMatrix,a,b)},rotateMatrix:function(a){e.utils.MatrixUtil.prependRotation(this.mModelViewMatrix,a)},scaleMatrix:function(a,
b){e.utils.MatrixUtil.prependScale(this.mModelViewMatrix,a,b)},prependMatrix:function(a){e.utils.MatrixUtil.prependMatrix(this.mModelViewMatrix,a)},transformMatrix:function(a){e.utils.MatrixUtil.prependMatrix(this.mModelViewMatrix,a.get_transformationMatrix())},pushMatrix:function(){this.mMatrixStack.length<this.mMatrixStackSize+1&&this.mMatrixStack.push(new c.geom.Matrix);this.mMatrixStack[k["int"](this.mMatrixStackSize++)].copyFrom(this.mModelViewMatrix)},popMatrix:function(){this.mModelViewMatrix.copyFrom(this.mMatrixStack[k["int"](--this.mMatrixStackSize)])},
resetMatrix:function(){this.mMatrixStackSize=0;this.loadIdentity()},get_mvpMatrix:function(){this.mMvpMatrix.copyFrom(this.mModelViewMatrix);this.mMvpMatrix.concat(this.mProjectionMatrix);return this.mMvpMatrix},get_mvpMatrix3D:function(){return e.utils.MatrixUtil.convertTo3D(this.get_mvpMatrix(),this.mMvpMatrix3D)},get_modelViewMatrix:function(){return this.mModelViewMatrix},get_projectionMatrix:function(){return this.mProjectionMatrix},set_projectionMatrix:function(a){this.mProjectionMatrix.copyFrom(a);
this.applyClipRect();return this.mProjectionMatrix},applyBlendMode:function(a){e.core.RenderSupport.setBlendFactors(a,this.mBlendMode)},get_blendMode:function(){return this.mBlendMode},set_blendMode:function(a){"auto"!=a&&(this.mBlendMode=a);return this.mBlendMode},get_renderTarget:function(){return this.mRenderTarget},set_renderTarget:function(a){this.setRenderTarget(a);return this.mRenderTarget},setRenderTarget:function(a,b){null==b&&(b=0);this.mRenderTarget=a;this.applyClipRect();null!=a?e.core.Starling.get_current().get_context().setRenderToTexture(a.get_base(),
!1,b):e.core.Starling.get_current().get_context().setRenderToBackBuffer()},pushClipRect:function(a){this.mClipRectStack.length<this.mClipRectStackSize+1&&this.mClipRectStack.push(new c.geom.Rectangle);this.mClipRectStack[this.mClipRectStackSize].copyFrom(a);a=this.mClipRectStack[this.mClipRectStackSize];0<this.mClipRectStackSize&&e.utils.RectangleUtil.intersect(a,this.mClipRectStack[this.mClipRectStackSize-1],a);++this.mClipRectStackSize;this.applyClipRect();return a},popClipRect:function(){0<this.mClipRectStackSize&&
(--this.mClipRectStackSize,this.applyClipRect())},applyClipRect:function(){this.finishQuadBatch();var a=e.core.Starling.get_current().get_context();if(null!=a)if(0<this.mClipRectStackSize){var b,c,d=this.mClipRectStack[this.mClipRectStackSize-1];null!=this.mRenderTarget?(b=k["int"](this.mRenderTarget.get_root().get_nativeWidth()),c=k["int"](this.mRenderTarget.get_root().get_nativeHeight())):(b=e.core.Starling.get_current().get_backBufferWidth(),c=e.core.Starling.get_current().get_backBufferHeight());
e.utils.MatrixUtil.transformCoords(this.mProjectionMatrix,d.x,d.y,e.core.RenderSupport.sPoint);e.core.RenderSupport.sClipRect.x=(0.5*e.core.RenderSupport.sPoint.x+0.5)*b;e.core.RenderSupport.sClipRect.y=(0.5-0.5*e.core.RenderSupport.sPoint.y)*c;e.utils.MatrixUtil.transformCoords(this.mProjectionMatrix,d.get_right(),d.get_bottom(),e.core.RenderSupport.sPoint);e.core.RenderSupport.sClipRect.set_right((0.5*e.core.RenderSupport.sPoint.x+0.5)*b);e.core.RenderSupport.sClipRect.set_bottom((0.5-0.5*e.core.RenderSupport.sPoint.y)*
c);e.core.RenderSupport.sBufferRect.setTo(0,0,b,c);e.utils.RectangleUtil.intersect(e.core.RenderSupport.sClipRect,e.core.RenderSupport.sBufferRect,e.core.RenderSupport.sScissorRect);(1>e.core.RenderSupport.sScissorRect.width||1>e.core.RenderSupport.sScissorRect.height)&&e.core.RenderSupport.sScissorRect.setTo(0,0,1,1);a.setScissorRectangle(e.core.RenderSupport.sScissorRect)}else a.setScissorRectangle(null)},batchQuad:function(a,b,c,d){this.mQuadBatches[this.mCurrentQuadBatchID].isStateChange(a.get_tinted(),
b,c,d,this.mBlendMode)&&this.finishQuadBatch();this.mQuadBatches[this.mCurrentQuadBatchID].addQuad(a,b,c,d,this.mModelViewMatrix,this.mBlendMode)},batchQuadBatch:function(a,b){this.mQuadBatches[this.mCurrentQuadBatchID].isStateChange(a.get_tinted(),b,a.get_texture(),a.get_smoothing(),this.mBlendMode)&&this.finishQuadBatch();this.mQuadBatches[this.mCurrentQuadBatchID].addQuadBatch(a,b,this.mModelViewMatrix,this.mBlendMode)},finishQuadBatch:function(){var a=this.mQuadBatches[this.mCurrentQuadBatchID];
0!=a.get_numQuads()&&(a.renderCustom(this.mProjectionMatrix),a.reset(),++this.mCurrentQuadBatchID,++this.mDrawCount,this.mQuadBatches.length<=this.mCurrentQuadBatchID&&this.mQuadBatches.push(new e.display.QuadBatch))},nextFrame:function(){this.resetMatrix();this.trimQuadBatches();this.mCurrentQuadBatchID=0;this.mBlendMode="normal";this.mDrawCount=0},trimQuadBatches:function(){var a=this.mCurrentQuadBatchID+1,b=this.mQuadBatches.length;if(16<=b&&b>2*a){a=b-a;for(b=0;b<a;)b++,this.mQuadBatches.pop().dispose()}},
clear:function(a,b){null==b&&(b=0);null==a&&(a=0);e.core.Starling.get_current().get_context().clear(e.utils.Color.getRed(a)/255,e.utils.Color.getGreen(a)/255,e.utils.Color.getBlue(a)/255,b)},raiseDrawCount:function(a){null==a&&(a=1);this.mDrawCount+=a},get_drawCount:function(){return this.mDrawCount},__class__:e.core.RenderSupport,__properties__:{get_drawCount:"get_drawCount",set_renderTarget:"set_renderTarget",get_renderTarget:"get_renderTarget",set_blendMode:"set_blendMode",get_blendMode:"get_blendMode",
set_projectionMatrix:"set_projectionMatrix",get_projectionMatrix:"get_projectionMatrix",get_modelViewMatrix:"get_modelViewMatrix",get_mvpMatrix3D:"get_mvpMatrix3D",get_mvpMatrix:"get_mvpMatrix"}};e.core.Starling=function(a,b,d,p,i,j){null==j&&(j="baselineConstrained");null==i&&(i="auto");if(null==b)throw new c.errors.ArgumentError("Stage must not be null");if(null==a)throw new c.errors.ArgumentError("Root class must not be null");null==d&&(d=new c.geom.Rectangle(0,0,b.stageWidth,b.stageHeight));null==
p&&(p=c.display3D.OpenFLStage3D.getStage3D(b,0));e.utils.SystemUtil.initialize();e.core.Starling.sAll.push(this);this.makeCurrent();this.mRootClass=a;this.mViewPort=d;this.mPreviousViewPort=new c.geom.Rectangle;this.mStage3D=p;this.mStage=new e.display.Stage(d.width|0,d.height|0,b.get_color());this.mNativeOverlay=new c.display.Sprite;this.mNativeStage=b;this.mNativeStage.addChild(this.mNativeOverlay);this.mNativeStageContentScaleFactor=1;this.mTouchProcessor=new e.events.TouchProcessor(this.mStage);
this.mJuggler=new e.animation.Juggler;this.mAntiAliasing=0;this.mSupportHighResolutions=this.mEnableErrorChecking=this.mSimulateMultitouch=!1;this.mLastFrameTimestamp=c.Lib.getTimer()/1E3;this.mSupport=new e.core.RenderSupport;a=new m.ds.StringMap;e.core.Starling.sPrograms.set(p,a);b.scaleMode=c.display.StageScaleMode.NO_SCALE;b.align=c.display.StageAlign.TOP_LEFT;a=0;for(d=this.get_touchEventTypes();a<d.length;){var g=d[a];++a;b.addEventListener(g,r(this,this.onTouch),!1,0,!0)}b.addEventListener(c.events.Event.ENTER_FRAME,
r(this,this.onEnterFrame),!1,0,!0);b.addEventListener(c.events.KeyboardEvent.KEY_DOWN,r(this,this.onKey),!1,0,!0);b.addEventListener(c.events.KeyboardEvent.KEY_UP,r(this,this.onKey),!1,0,!0);b.addEventListener(c.events.Event.RESIZE,r(this,this.onResize),!1,0,!0);b.addEventListener(c.events.Event.MOUSE_LEAVE,r(this,this.onMouseLeave),!1,0,!0);this.mStage3D.addEventListener(c.events.Event.CONTEXT3D_CREATE,r(this,this.onContextCreated),!1,10,!0);this.mStage3D.addEventListener(c.events.ErrorEvent.ERROR,
r(this,this.onStage3DError),!1,10,!0);if(null!=this.mStage3D.context3D&&"Disposed"!=this.mStage3D.context3D.driverInfo){if("auto"==j||j instanceof Array&&null==j.__enum__)throw new c.errors.ArgumentError("When sharing the context3D, the actual profile has to be supplied");this.mProfile=j;this.mShareContext=!0;m.Timer.delay(r(this,this.initialize),1)}else this.mShareContext=!1,this.requestContext3D(p,i,j)};h["starling.core.Starling"]=e.core.Starling;e.core.Starling.__name__=["starling","core","Starling"];
e.core.Starling.__properties__={set_handleLostContext:"set_handleLostContext",get_handleLostContext:"get_handleLostContext",set_multitouchEnabled:"set_multitouchEnabled",get_multitouchEnabled:"get_multitouchEnabled",get_all:"get_all",get_current:"get_current"};e.core.Starling.sCurrent=null;e.core.Starling.sHandleLostContext=null;e.core.Starling.convertKeyLocationToUInt=function(a){switch(a){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return 3}};e.core.Starling.get_current=function(){return e.core.Starling.sCurrent};
e.core.Starling.get_all=function(){return e.core.Starling.sAll};e.core.Starling.get_multitouchEnabled=function(){return c.ui.Multitouch.get_inputMode()==c.ui.MultitouchInputMode.TOUCH_POINT};e.core.Starling.set_multitouchEnabled=function(a){if(null!=e.core.Starling.sCurrent)throw new c.errors.IllegalOperationError("'multitouchEnabled' must be set before Starling instance is created");c.ui.Multitouch.set_inputMode(a?c.ui.MultitouchInputMode.TOUCH_POINT:c.ui.MultitouchInputMode.NONE);return c.ui.Multitouch.get_inputMode()==
c.ui.MultitouchInputMode.TOUCH_POINT};e.core.Starling.get_handleLostContext=function(){return e.core.Starling.sHandleLostContext};e.core.Starling.set_handleLostContext=function(a){if(null!=e.core.Starling.sCurrent)throw new c.errors.IllegalOperationError("'handleLostContext' must be set before Starling instance is created");e.core.Starling.sHandleLostContext=a;return e.core.Starling.sHandleLostContext};e.core.Starling.__super__=e.events.EventDispatcher;e.core.Starling.prototype=q(e.events.EventDispatcher.prototype,
{dispose:function(){this.stop(!0);this.mNativeStage.removeEventListener(c.events.Event.ENTER_FRAME,r(this,this.onEnterFrame),!1);this.mNativeStage.removeEventListener(c.events.KeyboardEvent.KEY_DOWN,r(this,this.onKey),!1);this.mNativeStage.removeEventListener(c.events.KeyboardEvent.KEY_UP,r(this,this.onKey),!1);this.mNativeStage.removeEventListener(c.events.Event.RESIZE,r(this,this.onResize),!1);this.mNativeStage.removeEventListener(c.events.Event.MOUSE_LEAVE,r(this,this.onMouseLeave),!1);this.mNativeStage.removeChild(this.mNativeOverlay);
this.mStage3D.removeEventListener(c.events.Event.CONTEXT3D_CREATE,r(this,this.onContextCreated),!1);this.mStage3D.removeEventListener(c.events.ErrorEvent.ERROR,r(this,this.onStage3DError),!1);for(var a=0,b=this.get_touchEventTypes();a<b.length;){var d=b[a];++a;this.mNativeStage.removeEventListener(d,r(this,this.onTouch),!1)}null!=this.mStage&&this.mStage.dispose();null!=this.mSupport&&this.mSupport.dispose();null!=this.mTouchProcessor&&this.mTouchProcessor.dispose();e.core.Starling.sCurrent==this&&
(e.core.Starling.sCurrent=null);null!=this.mContext&&!this.mShareContext&&this.mContext.dispose();a=w.indexOf(e.core.Starling.sAll,this,0);-1!=a&&e.core.Starling.sAll.splice(a,1)},requestContext3D:function(a,b,d){var e=this,i=[],j;if("auto"==d)i=["baselineExtended","baseline","baselineConstrained"];else if("string"==typeof d)i=[s.Boot.__cast(d,String)];else if(d instanceof Array&&null==d.__enum__){a=s.Boot.__cast(d,Array);for(d=0;d<a.length;){var g=a[d];++d;i.push(g)}}else throw new c.errors.ArgumentError("Profile must be of type 'String' or 'Array'");
var h=null,k,l=null;k=l=function(){j=i.shift();try{e.mStage3D.requestContext3D(b)}catch(a){if(s.Boot.__instanceof(a,c.errors.Error))if(0!=i.length)l();else throw a;else throw a;}};var n=function(){e.mProfile=j;h()},m=function(a){0!=i.length?(a.stopImmediatePropagation(),k()):h()},h=function(){e.mStage3D.removeEventListener(c.events.Event.CONTEXT3D_CREATE,n);e.mStage3D.removeEventListener(c.events.ErrorEvent.ERROR,m)};this.mStage3D.addEventListener(c.events.Event.CONTEXT3D_CREATE,n,!1,100);this.mStage3D.addEventListener(c.events.ErrorEvent.ERROR,
m,!1,100);k()},initialize:function(){this.makeCurrent();this.initializeGraphicsAPI();this.initializeRoot();this.mTouchProcessor.set_simulateMultitouch(this.mSimulateMultitouch);this.mLastFrameTimestamp=c.Lib.getTimer()/1E3},initializeGraphicsAPI:function(){this.mContext=this.mStage3D.context3D;this.mContext.enableErrorChecking=this.mEnableErrorChecking;this.updateViewPort(!0);m.Log.trace("[Starling] Initialization complete.",{fileName:"Starling.hx",lineNumber:443,className:"starling.core.Starling",
methodName:"initializeGraphicsAPI"});m.Log.trace("[Starling] Display Driver:",{fileName:"Starling.hx",lineNumber:444,className:"starling.core.Starling",methodName:"initializeGraphicsAPI",customParams:[this.mContext.driverInfo]});this.dispatchEventWith(c.events.Event.CONTEXT3D_CREATE,!1,this.mContext)},initializeRoot:function(){if(null==this.mRoot){this.mRoot=B.createInstance(this.mRootClass,[]);if(null==this.mRoot)throw new c.errors.Error("Invalid root class: "+k.string(this.mRootClass));this.mStage.addChildAt(this.mRoot,
0);this.dispatchEventWith("rootCreated",!1,this.mRoot)}},nextFrame:function(){var a=c.Lib.getTimer()/1E3,b=a-this.mLastFrameTimestamp;this.mLastFrameTimestamp=a;1<b&&(b=1);this.advanceTime(b);this.render()},advanceTime:function(a){this.get_contextValid()&&(this.makeCurrent(),this.mTouchProcessor.advanceTime(a),this.mStage.advanceTime(a),this.mJuggler.advanceTime(a))},render:function(){if(this.get_contextValid()){this.makeCurrent();this.updateViewPort();this.updateNativeOverlay();this.mSupport.nextFrame();
var a=this.mViewPort.width/this.mStage.get_stageWidth(),b=this.mViewPort.height/this.mStage.get_stageHeight();this.mContext.setDepthTest(!1,519);this.mContext.setCulling(0);this.mSupport.set_renderTarget(null);this.mSupport.setOrthographicProjection(0>this.mViewPort.x?-this.mViewPort.x/a:0,0>this.mViewPort.y?-this.mViewPort.y/b:0,this.mClippedViewPort.width/a,this.mClippedViewPort.height/b);this.mShareContext||e.core.RenderSupport._clear(this.mStage.get_color(),1);this.mStage.render(this.mSupport,
1);this.mSupport.finishQuadBatch();null!=this.mStatsDisplay&&this.mStatsDisplay.set_drawCount(this.mSupport.get_drawCount());this.mShareContext||this.mContext.present()}},updateViewPort:function(a){null==a&&(a=!1);if(a||this.mPreviousViewPort.width!=this.mViewPort.width||this.mPreviousViewPort.height!=this.mViewPort.height||this.mPreviousViewPort.x!=this.mViewPort.x||this.mPreviousViewPort.y!=this.mViewPort.y)this.mPreviousViewPort.setTo(this.mViewPort.x,this.mViewPort.y,this.mViewPort.width,this.mViewPort.height),
this.mClippedViewPort=this.mViewPort.intersection(new c.geom.Rectangle(0,0,this.mNativeStage.stageWidth,this.mNativeStage.stageHeight)),this.mShareContext||("baselineConstrained"==this.mProfile&&this.configureBackBuffer(32,32,this.mAntiAliasing,!1),this.mStage3D.set_x(this.mClippedViewPort.x),this.mStage3D.set_y(this.mClippedViewPort.y),this.configureBackBuffer(this.mClippedViewPort.width|0,this.mClippedViewPort.height|0,this.mAntiAliasing,!1,this.mSupportHighResolutions),this.mNativeStageContentScaleFactor=
1)},configureBackBuffer:function(a,b,c,d){this.mContext.configureBackBuffer(a,b,c,d)},updateNativeOverlay:function(){this.mNativeOverlay.set_x(this.mViewPort.x);this.mNativeOverlay.set_y(this.mViewPort.y);this.mNativeOverlay.set_scaleX(this.mViewPort.width/this.mStage.get_stageWidth());this.mNativeOverlay.set_scaleY(this.mViewPort.height/this.mStage.get_stageHeight())},showFatalError:function(a){var b=new c.text.TextField,d=new c.text.TextFormat("Verdana",12,16777215);d.align=c.text.TextFormatAlign.CENTER;
b.set_defaultTextFormat(d);b.set_wordWrap(!0);b.set_width(0.75*this.mStage.get_stageWidth());b.set_autoSize(c.text.TextFieldAutoSize.CENTER);b.set_text(a);b.set_x((this.mStage.get_stageWidth()-b.get_width())/2);b.set_y((this.mStage.get_stageHeight()-b.get_height())/2);b.set_background(!0);b.set_backgroundColor(4456448);this.updateNativeOverlay();this.get_nativeOverlay().addChild(b)},makeCurrent:function(){e.core.Starling.sCurrent=this},start:function(){this.mStarted=this.mRendering=!0;this.mLastFrameTimestamp=
c.Lib.getTimer()/1E3},stop:function(a){null==a&&(a=!1);this.mStarted=!1;this.mRendering=!a},onStage3DError:function(a){this.showFatalError("Stage3D error: "+a.text)},onContextCreated:function(a){!e.core.Starling.get_handleLostContext()&&null!=this.mContext?(this.stop(),a.stopImmediatePropagation(),this.showFatalError("Fatal error: The application lost the device context!"),m.Log.trace("[Starling] The device context was lost. Enable 'Starling.handleLostContext' to avoid this error.",{fileName:"Starling.hx",
lineNumber:657,className:"starling.core.Starling",methodName:"onContextCreated"})):this.initialize()},onEnterFrame:function(){this.mShareContext||(this.mStarted?this.nextFrame():this.mRendering&&this.render())},onKey:function(a){this.mStarted&&(a=new e.events.KeyboardEvent(a.type,a.charCode,a.keyCode,0,a.ctrlKey,a.altKey,a.shiftKey),this.makeCurrent(),this.mStage.broadcastEvent(a))},onResize:function(a){var b=this,d=a.target.stageWidth,p=a.target.stageHeight,i=null,a=i=function(){b.makeCurrent();
b.removeEventListener(c.events.Event.CONTEXT3D_CREATE,i);b.mStage.dispatchEvent(new e.events.ResizeEvent(c.events.Event.RESIZE,d,p))};this.get_contextValid()?a():this.addEventListener(c.events.Event.CONTEXT3D_CREATE,a)},onMouseLeave:function(){this.mTouchProcessor.enqueueMouseLeftStage()},onTouch:function(a){if(this.mStarted){var b,d,e,i=null,j=1,g=1,h=1;s.Boot.__instanceof(a,c.events.MouseEvent)?(d=s.Boot.__cast(a,c.events.MouseEvent),b=d.stageX,d=d.stageY,e=0,a.type==c.events.MouseEvent.MOUSE_DOWN?
this.mLeftMouseDown=!0:a.type==c.events.MouseEvent.MOUSE_UP&&(this.mLeftMouseDown=!1)):(h=s.Boot.__cast(a,c.events.TouchEvent),b=h.stageX,d=h.stageY,e=h.touchPointID,j=h.pressure,g=h.sizeX,h=h.sizeY);switch(a.type){case "touchBegin":i="began";break;case "touchMove":i="moved";break;case "touchEnd":i="ended";break;case c.events.MouseEvent.MOUSE_DOWN:i="began";break;case c.events.MouseEvent.MOUSE_UP:i="ended";break;case c.events.MouseEvent.MOUSE_MOVE:i=this.mLeftMouseDown?"moved":"hover"}b=this.mStage.get_stageWidth()*
(b-this.mViewPort.x)/this.mViewPort.width;d=this.mStage.get_stageHeight()*(d-this.mViewPort.y)/this.mViewPort.height;this.mTouchProcessor.enqueue(e,i,b,d,j,g,h);a.type==c.events.MouseEvent.MOUSE_UP&&this.mTouchProcessor.enqueue(e,"hover",b,d)}},get_touchEventTypes:function(){var a=[];e.core.Starling.get_multitouchEnabled()&&(a.push("touchBegin"),a.push("touchMove"),a.push("touchEnd"));a.push(c.events.MouseEvent.MOUSE_DOWN);a.push(c.events.MouseEvent.MOUSE_MOVE);a.push(c.events.MouseEvent.MOUSE_UP);
return a},registerProgram:function(a,b,c){this.deleteProgram(a);var d=this.mContext.createProgram();d.upload(b,c);this.get_programs().set(a,d);d;return d},registerProgramFromSource:function(a,b,c){this.deleteProgram(a);b=e.core.RenderSupport.assembleAgal(b,c);this.get_programs().set(a,b);b;return b},deleteProgram:function(a){var b=this.getProgram(a);null!=b&&(b.dispose(),this.get_programs().remove(a))},getProgram:function(a){return this.get_programs().get(a)},hasProgram:function(a){return this.get_programs().exists(a)},
get_programs:function(){var a=this.get_stage3D();return e.core.Starling.sPrograms.h[a.__id__]},get_isStarted:function(){return this.mStarted},get_juggler:function(){return this.mJuggler},get_context:function(){return this.mContext},get_contextData:function(){return e.core.Starling.sContextData.h[this.mStage3D.__id__]},get_bitmapFonts:function(){return e.core.Starling.sBitmapFonts.h[this.mStage3D.__id__]},set_bitmapFonts:function(a){e.core.Starling.sBitmapFonts.set(this.mStage3D,a);return a},get_backBufferWidth:function(){return this.mClippedViewPort.width|
0},get_backBufferHeight:function(){return this.mClippedViewPort.height|0},get_simulateMultitouch:function(){return this.mSimulateMultitouch},set_simulateMultitouch:function(a){this.mSimulateMultitouch=a;null!=this.mContext&&this.mTouchProcessor.set_simulateMultitouch(a);return this.mSimulateMultitouch},get_enableErrorChecking:function(){return this.mEnableErrorChecking},set_enableErrorChecking:function(a){this.mEnableErrorChecking=a;null!=this.mContext&&(this.mContext.enableErrorChecking=a);return this.mEnableErrorChecking},
get_antiAliasing:function(){return this.mAntiAliasing},set_antiAliasing:function(a){this.mAntiAliasing!=a&&(this.mAntiAliasing=a,this.get_contextValid()&&this.updateViewPort(!0));return this.mAntiAliasing},get_viewPort:function(){return this.mViewPort},set_viewPort:function(a){return this.mViewPort=a.clone()},get_contentScaleFactor:function(){return this.mViewPort.width*this.mNativeStageContentScaleFactor/this.mStage.get_stageWidth()},get_nativeOverlay:function(){return this.mNativeOverlay},get_showStats:function(){return null!=
this.mStatsDisplay&&null!=this.mStatsDisplay.get_parent()},set_showStats:function(a){if(a==this.get_showStats())return null!=this.mStatsDisplay&&null!=this.mStatsDisplay.get_parent();a?null!=this.mStatsDisplay?this.mStage.addChild(this.mStatsDisplay):this.showStatsAt():this.mStatsDisplay.removeFromParent();return null!=this.mStatsDisplay&&null!=this.mStatsDisplay.get_parent()},showStatsAt:function(a,b,c){null==c&&(c=1);null==b&&(b="top");null==a&&(a="left");var d=this,i,j=null;i=j=function(){d.showStatsAt(a,
b,c);d.removeEventListener("rootCreated",j)};if(null==this.mContext)this.addEventListener("rootCreated",i);else{null==this.mStatsDisplay&&(this.mStatsDisplay=new e.core.StatsDisplay,this.mStatsDisplay.set_touchable(!1),this.mStage.addChild(this.mStatsDisplay));i=this.mStage.get_stageWidth();var g=this.mStage.get_stageHeight();this.mStatsDisplay.set_scaleX(this.mStatsDisplay.set_scaleY(c));"left"==a?this.mStatsDisplay.set_x(0):"right"==a?this.mStatsDisplay.set_x(i-this.mStatsDisplay.get_width()):this.mStatsDisplay.set_x(k["int"]((i-
this.mStatsDisplay.get_width())/2));"top"==b?this.mStatsDisplay.set_y(0):"bottom"==b?this.mStatsDisplay.set_y(g-this.mStatsDisplay.get_height()):this.mStatsDisplay.set_y(k["int"]((g-this.mStatsDisplay.get_height())/2))}},get_stage:function(){return this.mStage},get_stage3D:function(){return this.mStage3D},get_nativeStage:function(){return this.mNativeStage},get_root:function(){return this.mRoot},get_shareContext:function(){return this.mShareContext},set_shareContext:function(a){return this.mShareContext=
a},get_profile:function(){return this.mProfile},get_supportHighResolutions:function(){return this.mSupportHighResolutions},set_supportHighResolutions:function(a){this.mSupportHighResolutions!=a&&(this.mSupportHighResolutions=a,this.get_contextValid()&&this.updateViewPort(!0));return this.mSupportHighResolutions},get_touchProcessor:function(){return this.mTouchProcessor},set_touchProcessor:function(a){a!=this.mTouchProcessor&&(this.mTouchProcessor.dispose(),this.mTouchProcessor=a);return this.mTouchProcessor},
get_contextValid:function(){return null!=this.mContext&&"Disposed"!=this.mContext.driverInfo},__class__:e.core.Starling,__properties__:{get_contextValid:"get_contextValid",set_touchProcessor:"set_touchProcessor",get_touchProcessor:"get_touchProcessor",set_supportHighResolutions:"set_supportHighResolutions",get_supportHighResolutions:"get_supportHighResolutions",get_profile:"get_profile",set_shareContext:"set_shareContext",get_shareContext:"get_shareContext",get_root:"get_root",get_nativeStage:"get_nativeStage",
get_stage3D:"get_stage3D",get_stage:"get_stage",set_showStats:"set_showStats",get_showStats:"get_showStats",get_nativeOverlay:"get_nativeOverlay",get_contentScaleFactor:"get_contentScaleFactor",set_viewPort:"set_viewPort",get_viewPort:"get_viewPort",set_antiAliasing:"set_antiAliasing",get_antiAliasing:"get_antiAliasing",set_enableErrorChecking:"set_enableErrorChecking",get_enableErrorChecking:"get_enableErrorChecking",set_simulateMultitouch:"set_simulateMultitouch",get_simulateMultitouch:"get_simulateMultitouch",
get_backBufferHeight:"get_backBufferHeight",get_backBufferWidth:"get_backBufferWidth",set_bitmapFonts:"set_bitmapFonts",get_bitmapFonts:"get_bitmapFonts",get_contextData:"get_contextData",get_context:"get_context",get_juggler:"get_juggler",get_isStarted:"get_isStarted",get_programs:"get_programs",get_touchEventTypes:"get_touchEventTypes"}});e.core.StatsDisplay=function(){this.mFrameCount=this.mTotalTime=this.mFps=this.mMemory=this.mDrawCount=0;e.display.Sprite.call(this)};h["starling.core.StatsDisplay"]=
e.core.StatsDisplay;e.core.StatsDisplay.__name__=["starling","core","StatsDisplay"];e.core.StatsDisplay.__super__=e.display.Sprite;e.core.StatsDisplay.prototype=q(e.display.Sprite.prototype,{StatsDisplay:function(){this.mBackground=new e.display.Quad(50,25,0);this.mTextField=new e.text.TextField(48,25,"","mini",-1,16777215);this.mTextField.set_x(2);this.mTextField.set_hAlign("left");this.mTextField.set_vAlign("top");this.addChild(this.mBackground);this.addChild(this.mTextField);this.set_blendMode("none");
this.addEventListener("addedToStage",r(this,this.onAddedToStage));this.addEventListener("removedFromStage",r(this,this.onRemovedFromStage))},onAddedToStage:function(){this.addEventListener("enterFrame",r(this,this.onEnterFrame));this.mTotalTime=this.mFrameCount=0;this.update()},onRemovedFromStage:function(){this.removeEventListener("enterFrame",r(this,this.onEnterFrame))},onEnterFrame:function(a){a=s.Boot.__cast(a,e.events.EnterFrameEvent);this.mTotalTime+=a.get_passedTime();this.mFrameCount++;0.5<
this.mTotalTime&&(this.update(),this.mFrameCount=k["int"](this.mTotalTime=0))},update:function(){this.mFps=0<this.mTotalTime?this.mFrameCount/this.mTotalTime:0;this.mMemory=9.54E-7*c.system.System.get_totalMemory();this.mTextField.set_text("FPS: "+this.mFps+"\nMEM: "+this.mMemory+"\nDRW: "+(0<this.mTotalTime?this.mDrawCount-2:this.mDrawCount))},render:function(a,b){a.finishQuadBatch();e.display.Sprite.prototype.render.call(this,a,b)},get_drawCount:function(){return this.mDrawCount},set_drawCount:function(a){return this.mDrawCount=
a},get_fps:function(){return this.mFps},set_fps:function(a){return this.mFps=a},get_memory:function(){return this.mMemory},set_memory:function(a){return this.mMemory=a},__class__:e.core.StatsDisplay,__properties__:q(e.display.Sprite.prototype.__properties__,{set_memory:"set_memory",get_memory:"get_memory",set_fps:"set_fps",get_fps:"get_fps",set_drawCount:"set_drawCount",get_drawCount:"get_drawCount"})});e.display.BlendMode=function(){};h["starling.display.BlendMode"]=e.display.BlendMode;e.display.BlendMode.__name__=
["starling","display","BlendMode"];e.display.BlendMode.getBlendFactors=function(a,b){null==b&&(b=!0);var d=e.display.BlendMode.sBlendFactors[b?1:0];if(d.exists(a))return d.get(a);throw new c.errors.ArgumentError("Invalid blend mode");};e.display.BlendMode.register=function(a,b,c,d){null==d&&(d=!0);var i=[b,c];e.display.BlendMode.sBlendFactors[d?1:0].set(a,i);i;d=e.display.BlendMode.sBlendFactors[!d?1:0];d.exists(a)||(b=[b,c],d.set(a,b),b)};e.display.BlendMode.prototype={BlendMode:function(){throw new e.errors.AbstractClassError;
},__class__:e.display.BlendMode};e.display.Button=function(a,b,d){null==b&&(b="");e.display.DisplayObjectContainer.call(this);if(null==a)throw new c.errors.ArgumentError("Texture cannot be null");this.mUpState=a;this.mDownState=null!=d?d:a;this.mBackground=new e.display.Image(a);this.mScaleWhenDown=null!=d?1:0.9;this.mAlphaWhenDisabled=0.5;this.mEnabled=!0;this.mIsDown=!1;this.mUseHandCursor=!0;this.mTextBounds=new c.geom.Rectangle(0,0,a.get_width(),a.get_height());this.mContents=new e.display.Sprite;
this.mContents.addChild(this.mBackground);this.addChild(this.mContents);this.addEventListener("touch",r(this,this.onTouch));this.set_touchGroup(!0);this.set_text(b)};h["starling.display.Button"]=e.display.Button;e.display.Button.__name__=["starling","display","Button"];e.display.Button.__super__=e.display.DisplayObjectContainer;e.display.Button.prototype=q(e.display.DisplayObjectContainer.prototype,{dispose:function(){null!=this.mTextField&&this.mTextField.dispose();e.display.DisplayObjectContainer.prototype.dispose.call(this)},
resetContents:function(){this.mIsDown=!1;this.mBackground.set_texture(this.mUpState);this.mContents.set_x(this.mContents.set_y(0));this.mContents.set_scaleX(this.mContents.set_scaleY(1))},createTextField:function(){null==this.mTextField&&(this.mTextField=new e.text.TextField(this.mTextBounds.width|0,this.mTextBounds.height|0,""),this.mTextField.set_vAlign("center"),this.mTextField.set_hAlign("center"),this.mTextField.set_touchable(!1),this.mTextField.set_autoScale(!0),this.mTextField.set_batchable(!0));
this.mTextField.set_width(this.mTextBounds.width);this.mTextField.set_height(this.mTextBounds.height);this.mTextField.set_x(this.mTextBounds.x);this.mTextField.set_y(this.mTextBounds.y)},onTouch:function(a){a.interactsWith(this);a=a.getTouch(this);if(this.mEnabled&&null!=a)if("began"==a.get_phase()&&!this.mIsDown)this.mBackground.set_texture(this.mDownState),this.mContents.set_scaleX(this.mContents.set_scaleY(this.mScaleWhenDown)),this.mContents.set_x((1-this.mScaleWhenDown)/2*this.mBackground.get_width()),
this.mContents.set_y((1-this.mScaleWhenDown)/2*this.mBackground.get_height()),this.mIsDown=!0;else if("moved"==a.get_phase()&&this.mIsDown){var b=this.getBounds(this.get_stage());(a.get_globalX()<b.x-50||a.get_globalY()<b.y-50||a.get_globalX()>b.x+b.width+50||a.get_globalY()>b.y+b.height+50)&&this.resetContents()}else"ended"==a.get_phase()&&this.mIsDown&&(this.resetContents(),this.dispatchEventWith("triggered",!0))},get_scaleWhenDown:function(){return this.mScaleWhenDown},set_scaleWhenDown:function(a){return this.mScaleWhenDown=
a},get_alphaWhenDisabled:function(){return this.mAlphaWhenDisabled},set_alphaWhenDisabled:function(a){return this.mAlphaWhenDisabled=a},get_enabled:function(){return this.mEnabled},set_enabled:function(a){this.mEnabled!=a&&(this.mEnabled=a,this.mContents.set_alpha(a?1:this.mAlphaWhenDisabled),this.resetContents());return this.mEnabled},get_text:function(){return null!=this.mTextField?this.mTextField.get_text():""},set_text:function(a){0==a.length?null!=this.mTextField&&(this.mTextField.set_text(a),
this.mTextField.removeFromParent()):(this.createTextField(),this.mTextField.set_text(a),null==this.mTextField.get_parent()&&this.mContents.addChild(this.mTextField));return null!=this.mTextField?this.mTextField.get_text():""},get_fontName:function(){return null!=this.mTextField?this.mTextField.get_fontName():"Verdana"},set_fontName:function(a){this.createTextField();this.mTextField.set_fontName(a);return null!=this.mTextField?this.mTextField.get_fontName():"Verdana"},get_fontSize:function(){return null!=
this.mTextField?this.mTextField.get_fontSize():12},set_fontSize:function(a){this.createTextField();this.mTextField.set_fontSize(a);return null!=this.mTextField?this.mTextField.get_fontSize():12},get_fontColor:function(){return null!=this.mTextField?this.mTextField.get_color():0},set_fontColor:function(a){this.createTextField();this.mTextField.set_color(a);return null!=this.mTextField?this.mTextField.get_color():0},get_fontBold:function(){return null!=this.mTextField?this.mTextField.get_bold():!1},
set_fontBold:function(a){this.createTextField();this.mTextField.set_bold(a);return this.get_fontBold()},get_upState:function(){return this.mUpState},set_upState:function(a){this.mUpState!=a&&(this.mUpState=a,this.mIsDown||this.mBackground.set_texture(a));return this.mUpState},get_downState:function(){return this.mDownState},set_downState:function(a){this.mDownState!=a&&(this.mDownState=a,this.mIsDown&&this.mBackground.set_texture(a));return this.mDownState},get_textVAlign:function(){return null!=
this.mTextField?this.mTextField.get_vAlign():"center"},set_textVAlign:function(a){this.createTextField();this.mTextField.set_vAlign(a);return null!=this.mTextField?this.mTextField.get_vAlign():"center"},get_textHAlign:function(){return null!=this.mTextField?this.mTextField.get_hAlign():"center"},set_textHAlign:function(a){this.createTextField();this.mTextField.set_hAlign(a);return null!=this.mTextField?this.mTextField.get_hAlign():"center"},get_textBounds:function(){return this.mTextBounds.clone()},
set_textBounds:function(a){this.mTextBounds=a.clone();this.createTextField();return this.mTextBounds.clone()},get_useHandCursor:function(){return this.mUseHandCursor},set_useHandCursor:function(a){return this.mUseHandCursor=a},__class__:e.display.Button,__properties__:q(e.display.DisplayObjectContainer.prototype.__properties__,{set_textBounds:"set_textBounds",get_textBounds:"get_textBounds",set_textHAlign:"set_textHAlign",get_textHAlign:"get_textHAlign",set_textVAlign:"set_textVAlign",get_textVAlign:"get_textVAlign",
set_downState:"set_downState",get_downState:"get_downState",set_upState:"set_upState",get_upState:"get_upState",set_fontBold:"set_fontBold",get_fontBold:"get_fontBold",set_fontColor:"set_fontColor",get_fontColor:"get_fontColor",set_fontSize:"set_fontSize",get_fontSize:"get_fontSize",set_fontName:"set_fontName",get_fontName:"get_fontName",set_text:"set_text",get_text:"get_text",set_enabled:"set_enabled",get_enabled:"get_enabled",set_alphaWhenDisabled:"set_alphaWhenDisabled",get_alphaWhenDisabled:"get_alphaWhenDisabled",
set_scaleWhenDown:"set_scaleWhenDown",get_scaleWhenDown:"get_scaleWhenDown"})});e.display.Quad=function(a,b,d,p){null==p&&(p=!0);null==d&&(d=16777215);e.display.DisplayObject.call(this);if(0==a||0==b)throw new c.errors.ArgumentError("Invalid size: width and height must not be zero");var i=d;this.mTinted=16777215!=(0>i?4294967296+i:i+0);this.mVertexData=new e.utils.VertexData(4,p);this.mVertexData.setPosition(0,0,0);this.mVertexData.setPosition(1,a,0);this.mVertexData.setPosition(2,0,b);this.mVertexData.setPosition(3,
a,b);this.mVertexData.setUniformColor(d);this.onVertexDataChanged()};h["starling.display.Quad"]=e.display.Quad;e.display.Quad.__name__=["starling","display","Quad"];e.display.Quad.__super__=e.display.DisplayObject;e.display.Quad.prototype=q(e.display.DisplayObject.prototype,{onVertexDataChanged:function(){},getBounds:function(a,b){null==b&&(b=new c.geom.Rectangle);if(a==this)this.mVertexData.getPosition(3,e.display.Quad.sHelperPoint),b.setTo(0,0,e.display.Quad.sHelperPoint.x,e.display.Quad.sHelperPoint.y);
else if(a==this.get_parent()&&0==this.get_rotation()){var d=this.get_scaleX(),p=this.get_scaleY();this.mVertexData.getPosition(3,e.display.Quad.sHelperPoint);b.setTo(this.get_x()-this.get_pivotX()*d,this.get_y()-this.get_pivotY()*p,e.display.Quad.sHelperPoint.x*d,e.display.Quad.sHelperPoint.y*p);0>d&&(b.width*=-1,b.x-=b.width);0>p&&(b.height*=-1,b.y-=b.height)}else this.getTransformationMatrix(a,e.display.Quad.sHelperMatrix),this.mVertexData.getBounds(e.display.Quad.sHelperMatrix,0,4,b);return b},
getVertexColor:function(a){return this.mVertexData.getColor(a)},setVertexColor:function(a,b){this.mVertexData.setColor(a,b);this.onVertexDataChanged();this.mTinted=16777215!=(0>b?4294967296+b:b+0)?!0:this.mVertexData.get_tinted()},getVertexAlpha:function(a){return this.mVertexData.getAlpha(a)},setVertexAlpha:function(a,b){this.mVertexData.setAlpha(a,b);this.onVertexDataChanged();this.mTinted=1!=b?!0:this.mVertexData.get_tinted()},get_color:function(){return this.mVertexData.getColor(0)},set_color:function(a){this.mVertexData.setUniformColor(a);
this.onVertexDataChanged();this.mTinted=16777215!=(0>a?4294967296+a:a+0)||1!=this.get_alpha()?!0:this.mVertexData.get_tinted();return this.mVertexData.getColor(0)},set_alpha:function(a){e.display.DisplayObject.prototype.set_alpha.call(this,a);this.mTinted=1>a?!0:this.mVertexData.get_tinted();return this.mAlpha},copyVertexDataTo:function(a,b){null==b&&(b=0);this.mVertexData.copyTo(a,b)},copyVertexDataTransformedTo:function(a,b,c){null==b&&(b=0);this.mVertexData.copyTransformedTo(a,b,c,0,4)},render:function(a,
b){a.batchQuad(this,b)},get_tinted:function(){return this.mTinted},get_premultipliedAlpha:function(){return this.mVertexData.get_premultipliedAlpha()},__class__:e.display.Quad,__properties__:q(e.display.DisplayObject.prototype.__properties__,{get_premultipliedAlpha:"get_premultipliedAlpha",get_tinted:"get_tinted",set_color:"set_color",get_color:"get_color"})});e.display.Image=function(a){if(null!=a){var b=a.get_frame(),d;d=null!=b?b.width:a.get_width();var b=null!=b?b.height:a.get_height(),p=a.get_premultipliedAlpha();
e.display.Quad.call(this,d,b,16777215,p);this.mVertexData.setTexCoords(0,0,0);this.mVertexData.setTexCoords(1,1,0);this.mVertexData.setTexCoords(2,0,1);this.mVertexData.setTexCoords(3,1,1);this.mTexture=a;this.mSmoothing="bilinear";this.mVertexDataCache=new e.utils.VertexData(4,p);this.mVertexDataCacheInvalid=!0}else throw new c.errors.ArgumentError("Texture cannot be null");};h["starling.display.Image"]=e.display.Image;e.display.Image.__name__=["starling","display","Image"];e.display.Image.fromBitmap=
function(a,b,c){null==c&&(c=1);null==b&&(b=!0);return new e.display.Image(e.textures.Texture.fromBitmap(a,b,!1,c))};e.display.Image.__super__=e.display.Quad;e.display.Image.prototype=q(e.display.Quad.prototype,{onVertexDataChanged:function(){this.mVertexDataCacheInvalid=!0},readjustSize:function(){var a=this.get_texture().get_frame(),b;b=null!=a?a.width:this.get_texture().get_width();a=null!=a?a.height:this.get_texture().get_height();this.mVertexData.setPosition(0,0,0);this.mVertexData.setPosition(1,
b,0);this.mVertexData.setPosition(2,0,a);this.mVertexData.setPosition(3,b,a);this.onVertexDataChanged()},setTexCoords:function(a,b){this.mVertexData.setTexCoords(a,b.x,b.y);this.onVertexDataChanged()},setTexCoordsTo:function(a,b,c){this.mVertexData.setTexCoords(a,b,c);this.onVertexDataChanged()},getTexCoords:function(a,b){null==b&&(b=new c.geom.Point);this.mVertexData.getTexCoords(a,b);return b},copyVertexDataTo:function(a,b){null==b&&(b=0);this.copyVertexDataTransformedTo(a,b,null)},copyVertexDataTransformedTo:function(a,
b,c){null==b&&(b=0);this.mVertexDataCacheInvalid&&(this.mVertexDataCacheInvalid=!1,this.mVertexData.copyTo(this.mVertexDataCache),this.mTexture.adjustVertexData(this.mVertexDataCache,0,4));this.mVertexDataCache.copyTransformedTo(a,b,c,0,4)},get_texture:function(){return this.mTexture},set_texture:function(a){if(null==a)throw new c.errors.ArgumentError("Texture cannot be null");a!=this.mTexture&&(this.mTexture=a,this.mVertexData.setPremultipliedAlpha(this.mTexture.get_premultipliedAlpha()),this.mVertexDataCache.setPremultipliedAlpha(this.mTexture.get_premultipliedAlpha(),
!1),this.onVertexDataChanged());return this.mTexture},get_smoothing:function(){return this.mSmoothing},set_smoothing:function(a){if(e.textures.TextureSmoothing.isValid(a))this.mSmoothing=a;else throw new c.errors.ArgumentError("Invalid smoothing mode: "+a);return this.mSmoothing},render:function(a,b){a.batchQuad(this,b,this.mTexture,this.mSmoothing)},__class__:e.display.Image,__properties__:q(e.display.Quad.prototype.__properties__,{set_smoothing:"set_smoothing",get_smoothing:"get_smoothing",set_texture:"set_texture",
get_texture:"get_texture"})});e.display.MovieClip=function(a,b){null==b&&(b=12);if(0<a.length)e.display.Image.call(this,a[0]),this.init(a,b);else throw new c.errors.ArgumentError("Empty texture array");};h["starling.display.MovieClip"]=e.display.MovieClip;e.display.MovieClip.__name__=["starling","display","MovieClip"];e.display.MovieClip.__interfaces__=[e.animation.IAnimatable];e.display.MovieClip.__super__=e.display.Image;e.display.MovieClip.prototype=q(e.display.Image.prototype,{init:function(a,
b){if(0>=b)throw new c.errors.ArgumentError("Invalid fps: "+b);var f=a.length;this.mDefaultFrameDuration=1/b;this.mPlaying=this.mLoop=!0;this.mCurrentFrame=this.mCurrentTime=0;this.mTextures=a.slice();this.mSounds=[];this.mDurations=[];this.mStartTimes=[];d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this.mSounds),f);d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this.mDurations),f);d.utils.ArrayUtils.reSize(d.utils._ArrayUtils.AcceptEither_Impl_.fromA(this.mStartTimes),
f);for(var e=0;e<f;){var i=e++;this.mDurations[i]=this.mDefaultFrameDuration;this.mStartTimes[i]=i*this.mDefaultFrameDuration}},addFrame:function(a,b,c){null==c&&(c=-1);this.addFrameAt(this.get_numFrames(),a,b,c)},addFrameAt:function(a,b,d,e){null==e&&(e=-1);if(0>a||a>this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");0>e&&(e=this.mDefaultFrameDuration);this.mTextures.splice(a,0,b);this.mSounds.splice(a,0,d);this.mDurations.splice(a,0,e);0<a&&a==this.get_numFrames()?this.mStartTimes[a]=
this.mStartTimes[a-1|0]+this.mDurations[a-1|0]:this.updateStartTimes()},removeFrameAt:function(a){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");if(1==this.get_numFrames())throw new c.errors.IllegalOperationError("Movie clip must not be empty");this.mTextures.splice(a,1);this.mSounds.splice(a,1);this.mDurations.splice(a,1);this.updateStartTimes()},getFrameTexture:function(a){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");
return this.mTextures[a]},setFrameTexture:function(a,b){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");this.mTextures[a]=b},getFrameSound:function(a){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");return this.mSounds[a]},setFrameSound:function(a,b){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");this.mSounds[a]=b},getFrameDuration:function(a){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");
return this.mDurations[a]},setFrameDuration:function(a,b){if(0>a||a>=this.get_numFrames())throw new c.errors.ArgumentError("Invalid frame id");this.mDurations[a]=b;this.updateStartTimes()},play:function(){this.mPlaying=!0},pause:function(){this.mPlaying=!1},stop:function(){this.mPlaying=!1;this.set_currentFrame(0)},updateStartTimes:function(){var a=this.get_numFrames();this.mStartTimes[0]=0;for(var b=1;b<a;){var c=b++;this.mStartTimes[c]=this.mStartTimes[c-1|0]+this.mDurations[c-1|0]}},advanceTime:function(a){if(this.mPlaying&&
!(0>=a)){var b=this.mCurrentFrame,c=0,d=!1,e=this.hasEventListener("complete"),j=!1,g=this.get_totalTime();this.mLoop&&this.mCurrentTime>=g&&(this.mCurrentFrame=this.mCurrentTime=0);if(this.mCurrentTime<g){this.mCurrentTime+=a;for(a=this.mTextures.length-1;this.mCurrentTime>this.mStartTimes[this.mCurrentFrame]+this.mDurations[this.mCurrentFrame];){this.mCurrentFrame==a?this.mLoop&&!e?(this.mCurrentTime-=g,this.mCurrentFrame=0):(d=!0,c=this.mCurrentTime-g,j=e,this.mCurrentFrame=a,this.mCurrentTime=
g):this.mCurrentFrame++;var h=this.mSounds[this.mCurrentFrame];null!=h&&!this.mMuted&&h.play();if(d)break}this.mCurrentFrame==a&&this.mCurrentTime==g&&(j=e)}this.mCurrentFrame!=b&&this.set_texture(this.mTextures[this.mCurrentFrame]);j&&this.dispatchEventWith("complete");this.mLoop&&0<c&&this.advanceTime(c)}},get_totalTime:function(){var a=this.mTextures.length;return this.mStartTimes[a-1|0]+this.mDurations[a-1|0]},get_currentTime:function(){return this.mCurrentTime},get_numFrames:function(){return this.mTextures.length},
get_loop:function(){return this.mLoop},set_loop:function(a){return this.mLoop=a},get_muted:function(){return this.mMuted},set_muted:function(a){return this.mMuted=a},get_currentFrame:function(){return this.mCurrentFrame},set_currentFrame:function(a){this.mCurrentFrame=a;for(var b=this.mCurrentTime=0;b<a;){var c=b++;this.mCurrentTime+=this.getFrameDuration(c)}this.set_texture(this.mTextures[this.mCurrentFrame]);!this.mMuted&&null!=this.mSounds[this.mCurrentFrame]&&this.mSounds[this.mCurrentFrame].play();
return this.mCurrentFrame},get_fps:function(){return 1/this.mDefaultFrameDuration},set_fps:function(a){if(0>=a)throw new c.errors.ArgumentError("Invalid fps: "+a);var b=1/a,a=b/this.mDefaultFrameDuration;this.mCurrentTime*=a;this.mDefaultFrameDuration=b;for(var b=0,d=this.get_numFrames();b<d;){var e=b++;this.mDurations[e]*=a}this.updateStartTimes();return 1/this.mDefaultFrameDuration},get_isPlaying:function(){return this.mPlaying?this.mLoop||this.mCurrentTime<this.get_totalTime():!1},get_isComplete:function(){return!this.mLoop&&
this.mCurrentTime>=this.get_totalTime()},__class__:e.display.MovieClip,__properties__:q(e.display.Image.prototype.__properties__,{get_isComplete:"get_isComplete",get_isPlaying:"get_isPlaying",set_fps:"set_fps",get_fps:"get_fps",set_currentFrame:"set_currentFrame",get_currentFrame:"get_currentFrame",set_muted:"set_muted",get_muted:"get_muted",set_loop:"set_loop",get_loop:"get_loop",get_numFrames:"get_numFrames",get_currentTime:"get_currentTime",get_totalTime:"get_totalTime"})});e.display.QuadBatch=
function(){e.display.DisplayObject.call(this);this.mVertexData=new e.utils.VertexData(0,!0);this.mIndexData=c._Vector.Vector_Impl_._new(0,!1);this.mNumQuads=0;this.mBatchable=this.mSyncRequired=this.mTinted=!1;e.core.Starling.get_current().get_stage3D().addEventListener("context3DCreate",r(this,this.onContextCreated),!1,0,!0)};h["starling.display.QuadBatch"]=e.display.QuadBatch;e.display.QuadBatch.__name__=["starling","display","QuadBatch"];e.display.QuadBatch.compile=function(a,b){e.display.QuadBatch.compileObject(a,
b,-1,new c.geom.Matrix)};e.display.QuadBatch.compileObject=function(a,b,d,p,i,j,g){null==g&&(g=!1);null==i&&(i=1);var h=!1,k=a.get_alpha(),l;l=s.Boot.__instanceof(a,e.display.DisplayObjectContainer)?s.Boot.__cast(a,e.display.DisplayObjectContainer):null;var n;n=s.Boot.__instanceof(a,e.display.Quad)?s.Boot.__cast(a,e.display.Quad):null;var m;m=s.Boot.__instanceof(a,e.display.QuadBatch)?s.Boot.__cast(a,e.display.QuadBatch):null;var q=a.get_filter();-1==d&&(h=!0,d=0,k=1,j=a.get_blendMode(),g=!0,0==b.length?
b.push(new e.display.QuadBatch):b[0].reset());if(null!=q&&!g)"above"==q.get_mode()&&(d=e.display.QuadBatch.compileObject(a,b,d,p,i,j,!0)),d=e.display.QuadBatch.compileObject(q.compile(a),b,d,p,i,j),"below"==q.get_mode()&&(d=e.display.QuadBatch.compileObject(a,b,d,p,i,j,!0));else if(null!=l){n=l.get_numChildren();m=new c.geom.Matrix;for(a=0;a<n;)g=a++,g=l.getChildAt(g),g.get_hasVisibleArea()&&(q="auto"==g.get_blendMode()?j:g.get_blendMode(),m.copyFrom(p),e.core.RenderSupport.transformMatrixForObject(m,
g),d=e.display.QuadBatch.compileObject(g,b,d,m,i*k,q))}else if(null!=n||null!=m){var r;null!=n?(a=s.Boot.__instanceof(n,e.display.Image)?s.Boot.__cast(n,e.display.Image):null,l=null!=a?a.get_texture():null,g=null!=a?a.get_smoothing():null,q=n.get_tinted(),r=1):(l=m.mTexture,g=m.mSmoothing,q=m.mTinted,r=m.mNumQuads);a=b[d];a.isStateChange(q,i*k,l,g,j,r)&&(d++,b.length<=d&&b.push(new e.display.QuadBatch),a=b[d],a.reset());null!=n?a.addQuad(n,i,l,g,p,j):a.addQuadBatch(m,i,p,j)}else throw new c.errors.Error("Unsupported display object: "+
B.getClassName(B.getClass(a)));if(h)for(p=b.length-1;p>d;)b.pop().dispose(),--p;return d};e.display.QuadBatch.getImageProgramName=function(a,b,c,d,i){null==i&&(i="bilinear");null==d&&(d="bgra");null==c&&(c=!1);null==b&&(b=!0);var j=0;a&&(j|=1);b&&(j|=2);c&&(j|=4);"none"==i?j|=8:"trilinear"==i&&(j|=16);"compressed"==d?j|=32:"compressedAlpha"==d&&(j|=64);a=e.display.QuadBatch.sProgramNameCache.get(j);null==a&&(a="QB_i."+C.hex(j),e.display.QuadBatch.sProgramNameCache.set(j,a),a);return a};e.display.QuadBatch.__super__=
e.display.DisplayObject;e.display.QuadBatch.prototype=q(e.display.DisplayObject.prototype,{dispose:function(){e.core.Starling.get_current().get_stage3D().removeEventListener("context3DCreate",r(this,this.onContextCreated));this.destroyBuffers();this.mVertexData.set_numVertices(0);var a=[],b=new c.VectorData;b.length=a.length;b.fixed=!0;var d;d=Array(a.length);for(var p=0,i=a.length;p<i;){var j=p++;d[j]=a[j]}b.data=d;this.mIndexData=b;this.mNumQuads=0;e.display.DisplayObject.prototype.dispose.call(this)},
onContextCreated:function(){this.createBuffers()},onVertexDataChanged:function(){this.mSyncRequired=!0},clone:function(){var a=new e.display.QuadBatch;a.mVertexData=this.mVertexData.clone(0,4*this.mNumQuads);a.mIndexData=c._Vector.Vector_Impl_.slice(this.mIndexData,0,6*this.mNumQuads);a.mNumQuads=this.mNumQuads;a.mTinted=this.mTinted;a.mTexture=this.mTexture;a.mSmoothing=this.mSmoothing;a.mSyncRequired=!0;a.set_blendMode(this.get_blendMode());a.set_alpha(this.get_alpha());return a},expand:function(){var a=
this.get_capacity();this.set_capacity(8>a?16:2*a)},createBuffers:function(){this.destroyBuffers();var a=this.mVertexData.get_numVertices(),b=this.mIndexData.length,c=e.core.Starling.get_current().get_context();if(0!=a){if(null==c)throw new e.errors.MissingContextError;this.mVertexBuffer=c.createVertexBuffer(a,8);this.mVertexBuffer.uploadFromFloat32Array(this.mVertexData.get_rawData(),0,a);this.mIndexBuffer=c.createIndexBuffer(b);this.mIndexBuffer.uploadFromVector(this.mIndexData,0,b);this.mSyncRequired=
!1}},destroyBuffers:function(){null!=this.mVertexBuffer&&(this.mVertexBuffer.dispose(),this.mVertexBuffer=null);null!=this.mIndexBuffer&&(this.mIndexBuffer.dispose(),this.mIndexBuffer=null)},syncBuffers:function(){null==this.mVertexBuffer?this.createBuffers():(this.mVertexBuffer.uploadFromFloat32Array(this.mVertexData.get_rawData(),0,this.mVertexData.get_numVertices()),this.mSyncRequired=!1)},renderCustom:function(a,b,d){null==b&&(b=1);if(0!=this.mNumQuads){this.mSyncRequired&&this.syncBuffers();
var p=this.mVertexData.get_premultipliedAlpha(),i=e.core.Starling.get_current().get_context(),j=this.mTinted||1!=b;e.display.QuadBatch.sRenderAlpha[0]=e.display.QuadBatch.sRenderAlpha[1]=p?e.display.QuadBatch.sRenderAlpha[2]=b:e.display.QuadBatch.sRenderAlpha[2]=1;e.display.QuadBatch.sRenderAlpha[3]=b;e.utils.MatrixUtil.convertTo3D(a,e.display.QuadBatch.sRenderMatrix);e.core.RenderSupport.setBlendFactors(p,null!=d?d:this.get_blendMode());i.setProgram(this.getProgram(j));i.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,
0,e.display.QuadBatch.sRenderAlpha,1);i.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,1,e.display.QuadBatch.sRenderMatrix,!0);i.setVertexBufferAt(0,this.mVertexBuffer,0,c.display3D.Context3DVertexBufferFormat.FLOAT_2);(null==this.mTexture||j)&&i.setVertexBufferAt(1,this.mVertexBuffer,2,c.display3D.Context3DVertexBufferFormat.FLOAT_4);null!=this.mTexture&&(i.setTextureAt(0,this.mTexture.get_base()),i.setVertexBufferAt(2,this.mVertexBuffer,6,c.display3D.Context3DVertexBufferFormat.FLOAT_2));
i.drawTriangles(this.mIndexBuffer,0,2*this.mNumQuads);null!=this.mTexture&&(i.setTextureAt(0,null),i.setVertexBufferAt(2,null));i.setVertexBufferAt(1,null);i.setVertexBufferAt(0,null)}},reset:function(){this.mNumQuads=0;this.mSmoothing=this.mTexture=null;this.mSyncRequired=!0},addImage:function(a,b,c,d){null==b&&(b=1);this.addQuad(a,b,a.get_texture(),a.get_smoothing(),c,d)},addQuad:function(a,b,c,d,e,j){null==b&&(b=1);null==e&&(e=a.get_transformationMatrix());var g=b*a.get_alpha(),h=4*this.mNumQuads;
this.mNumQuads+1>this.mVertexData.get_numVertices()/4&&this.expand();0==this.mNumQuads&&(this.set_blendMode(null!=j?j:a.get_blendMode()),this.mTexture=c,this.mTinted=null!=c?a.get_tinted()||1!=b:!1,this.mSmoothing=d,this.mVertexData.setPremultipliedAlpha(a.get_premultipliedAlpha()));a.copyVertexDataTransformedTo(this.mVertexData,h,e);1!=g&&this.mVertexData.scaleAlpha(h,g,4);this.mSyncRequired=!0;this.mNumQuads++},addQuadBatch:function(a,b,c,d){null==b&&(b=1);null==c&&(c=a.get_transformationMatrix());
var e=a.mTinted||1!=b,b=b*a.get_alpha(),j=4*this.mNumQuads,g=a.get_numQuads();this.mNumQuads+g>this.get_capacity()&&this.set_capacity(this.mNumQuads+g);0==this.mNumQuads&&(this.set_blendMode(null!=d?d:a.get_blendMode()),this.mTexture=a.mTexture,this.mTinted=e,this.mSmoothing=a.mSmoothing,this.mVertexData.setPremultipliedAlpha(a.mVertexData.get_premultipliedAlpha(),!1));a.mVertexData.copyTransformedTo(this.mVertexData,j,c,0,4*g);1!=b&&this.mVertexData.scaleAlpha(j,b,4*g);this.mSyncRequired=!0;this.mNumQuads+=
g},isStateChange:function(a,b,c,d,e,j){null==j&&(j=1);return 0==this.mNumQuads?!1:16383<this.mNumQuads+j?!0:null==this.mTexture&&null==c?this.get_blendMode()!=e:null!=this.mTexture&&null!=c?this.mTexture.get_base()!=c.get_base()||this.mTexture.get_repeat()!=c.get_repeat()||this.mSmoothing!=d||this.mTinted!=(a||1!=b)||this.get_blendMode()!=e:!0},transformQuad:function(a,b){this.mVertexData.transformVertex(4*a,b,4);this.mSyncRequired=!0},getVertexColor:function(a,b){return this.mVertexData.getColor(4*
a+b)},setVertexColor:function(a,b,c){this.mVertexData.setColor(4*a+b,c);this.mSyncRequired=!0},getVertexAlpha:function(a,b){return this.mVertexData.getAlpha(4*a+b)},setVertexAlpha:function(a,b,c){this.mVertexData.setAlpha(4*a+b,c);this.mSyncRequired=!0},getQuadColor:function(a){return this.mVertexData.getColor(4*a)},setQuadColor:function(a,b){for(var c=0;4>c;){var d=c++;this.mVertexData.setColor(4*a+d,b)}this.mSyncRequired=!0},getQuadAlpha:function(a){return this.mVertexData.getAlpha(4*a)},setQuadAlpha:function(a,
b){for(var c=0;4>c;){var d=c++;this.mVertexData.setAlpha(4*a+d,b)}this.mSyncRequired=!0},getQuadBounds:function(a,b,c){return this.mVertexData.getBounds(b,4*a,4,c)},getBounds:function(a,b){null==b&&(b=new c.geom.Rectangle);var d;d=a==this?null:this.getTransformationMatrix(a,e.display.QuadBatch.sHelperMatrix);return this.mVertexData.getBounds(d,0,4*this.mNumQuads,b)},render:function(a,b){0!=this.mNumQuads&&(this.mBatchable?a.batchQuadBatch(this,b):(a.finishQuadBatch(),a.raiseDrawCount(),this.renderCustom(a.get_mvpMatrix(),
this.get_alpha()*b,a.get_blendMode())))},get_numQuads:function(){return this.mNumQuads},get_tinted:function(){return this.mTinted},get_texture:function(){return this.mTexture},get_smoothing:function(){return this.mSmoothing},get_premultipliedAlpha:function(){return this.mVertexData.get_premultipliedAlpha()},get_batchable:function(){return this.mBatchable},set_batchable:function(a){return this.mBatchable=a},get_capacity:function(){return k["int"](this.mVertexData.get_numVertices()/4)},set_capacity:function(a){var b=
this.get_capacity();if(a==b)return k["int"](this.mVertexData.get_numVertices()/4);if(0==a)throw new c.errors.Error("Capacity must be > 0");16383<a&&(a=16383);this.mNumQuads>a&&(this.mNumQuads=a);this.mVertexData.set_numVertices(4*a);var d=this.mIndexData,e=6*a;if(!d.fixed){if(e>d.length){var i;i=Array(e);m.ds._Vector.Vector_Impl_.blit(d.data,0,i,0,k["int"](Math.min(d.data.length,e)));d.data=i}d.length=e}for(e;b<a;)d=b++,e=this.mIndexData,i=6*d|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d,
e=this.mIndexData,i=6*d+1|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d+1,e=this.mIndexData,i=6*d+2|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d+2,e=this.mIndexData,i=6*d+3|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d+1,e=this.mIndexData,i=6*d+4|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d+3,e=this.mIndexData,i=6*d+5|0,i>=e.length&&!e.fixed&&(e.length=i+1),e.data[i]=4*d+2;this.destroyBuffers();this.mSyncRequired=!0;return k["int"](this.mVertexData.get_numVertices()/
4)},getProgram:function(a){var b=e.core.Starling.get_current(),c="QB_q";null!=this.mTexture&&(c=e.display.QuadBatch.getImageProgramName(a,this.mTexture.get_mipMapping(),this.mTexture.get_repeat(),this.mTexture.get_format(),this.mSmoothing));var d=b.getProgram(c);null==d&&(null==this.mTexture?(d="m44 op, va0, vc1 \nmul v0, va1, vc0 \n",a="mov oc, v0       \n"):(d=a?"m44 op, va0, vc1 \nmul v0, va1, vc0 \nmov v1, va2      \n":"m44 op, va0, vc1 \nmov v1, va2      \n",a=C.replace(a?"tex ft1,  v1, fs0 <???> \nmul  oc, ft1,  v0       \n":
"tex  oc,  v1, fs0 <???> \n","<???>",e.core.RenderSupport.getTextureLookupFlags(this.mTexture.get_format(),this.mTexture.get_mipMapping(),this.mTexture.get_repeat(),this.get_smoothing()))),d=b.registerProgramFromSource(c,d,a));return d},__class__:e.display.QuadBatch,__properties__:q(e.display.DisplayObject.prototype.__properties__,{set_capacity:"set_capacity",get_capacity:"get_capacity",set_batchable:"set_batchable",get_batchable:"get_batchable",get_premultipliedAlpha:"get_premultipliedAlpha",get_smoothing:"get_smoothing",
get_texture:"get_texture",get_tinted:"get_tinted",get_numQuads:"get_numQuads"})});e.display.Stage=function(a,b,c){null==c&&(c=0);e.display.DisplayObjectContainer.call(this);this.mWidth=a;this.mHeight=b;this.mColor=c;this.mEnterFrameEvent=new e.events.EnterFrameEvent("enterFrame",0);this.mEnterFrameListeners=[]};h["starling.display.Stage"]=e.display.Stage;e.display.Stage.__name__=["starling","display","Stage"];e.display.Stage.__super__=e.display.DisplayObjectContainer;e.display.Stage.prototype=q(e.display.DisplayObjectContainer.prototype,
{advanceTime:function(a){this.mEnterFrameEvent.reset("enterFrame",!1,a);this.broadcastEvent(this.mEnterFrameEvent)},hitTest:function(a,b){null==b&&(b=!1);if(b&&(!this.get_visible()||!this.get_touchable())||0>a.x||a.x>this.mWidth||0>a.y||a.y>this.mHeight)return null;var c=e.display.DisplayObjectContainer.prototype.hitTest.call(this,a,b);null==c&&(c=this);return c},drawToBitmapData:function(a,b){null==b&&(b=!0);var d=new e.core.RenderSupport,p=e.core.Starling.get_current();null==a&&(a=new c.display.BitmapData(p.get_backBufferWidth(),
p.get_backBufferHeight(),b));d.set_renderTarget(null);d.setOrthographicProjection(0,0,this.mWidth,this.mHeight);b?d.clear():d.clear(this.mColor,1);this.render(d,1);d.finishQuadBatch();e.core.Starling.get_current().get_context().drawToBitmapData(a);e.core.Starling.get_current().get_context().present();return a},addEnterFrameListener:function(a){this.mEnterFrameListeners.push(a)},removeEnterFrameListener:function(a){a=w.indexOf(this.mEnterFrameListeners,a,0);0<=a&&this.mEnterFrameListeners.splice(a,
1)},getChildEventListeners:function(a,b,c){if("enterFrame"==b&&a==this){a=this.mEnterFrameListeners.length;for(b=0;b<a;){var d=b++;c[c.length]=this.mEnterFrameListeners[d]}}else e.display.DisplayObjectContainer.prototype.getChildEventListeners.call(this,a,b,c)},set_width:function(){throw new c.errors.IllegalOperationError("Cannot set width of stage");},set_height:function(){throw new c.errors.IllegalOperationError("Cannot set height of stage");},set_x:function(){throw new c.errors.IllegalOperationError("Cannot set x-coordinate of stage");
},set_y:function(){throw new c.errors.IllegalOperationError("Cannot set y-coordinate of stage");},set_scaleX:function(){throw new c.errors.IllegalOperationError("Cannot scale stage");},set_scaleY:function(){throw new c.errors.IllegalOperationError("Cannot scale stage");},set_rotation:function(){throw new c.errors.IllegalOperationError("Cannot rotate stage");},set_skewX:function(){throw new c.errors.IllegalOperationError("Cannot skew stage");},set_skewY:function(){throw new c.errors.IllegalOperationError("Cannot skew stage");
},set_filter:function(){throw new c.errors.IllegalOperationError("Cannot add filter to stage. Add it to 'root' instead!");},get_color:function(){return this.mColor},set_color:function(a){return this.mColor=a},get_stageWidth:function(){return this.mWidth},set_stageWidth:function(a){return this.mWidth=a},get_stageHeight:function(){return this.mHeight},set_stageHeight:function(a){return this.mHeight=a},__class__:e.display.Stage,__properties__:q(e.display.DisplayObjectContainer.prototype.__properties__,
{set_stageHeight:"set_stageHeight",get_stageHeight:"get_stageHeight",set_stageWidth:"set_stageWidth",get_stageWidth:"get_stageWidth",set_color:"set_color",get_color:"get_color"})});e.errors={};e.errors.AbstractClassError=function(a,b){null==b&&(b=0);null==a&&(a="Cannot instantiate abstract class");c.errors.Error.call(this,a,b)};h["starling.errors.AbstractClassError"]=e.errors.AbstractClassError;e.errors.AbstractClassError.__name__=["starling","errors","AbstractClassError"];e.errors.AbstractClassError.__super__=
c.errors.Error;e.errors.AbstractClassError.prototype=q(c.errors.Error.prototype,{__class__:e.errors.AbstractClassError});e.errors.AbstractMethodError=function(a,b){null==b&&(b=0);null==a&&(a="Method needs to be implemented in subclass");c.errors.Error.call(this,a,b)};h["starling.errors.AbstractMethodError"]=e.errors.AbstractMethodError;e.errors.AbstractMethodError.__name__=["starling","errors","AbstractMethodError"];e.errors.AbstractMethodError.__super__=c.errors.Error;e.errors.AbstractMethodError.prototype=
q(c.errors.Error.prototype,{__class__:e.errors.AbstractMethodError});e.errors.MissingContextError=function(a,b){null==b&&(b=0);null==a&&(a="Starling context is missing");c.errors.Error.call(this,a,b)};h["starling.errors.MissingContextError"]=e.errors.MissingContextError;e.errors.MissingContextError.__name__=["starling","errors","MissingContextError"];e.errors.MissingContextError.__super__=c.errors.Error;e.errors.MissingContextError.prototype=q(c.errors.Error.prototype,{__class__:e.errors.MissingContextError});
e.events.Event=function(a,b,c){null==b&&(b=!1);this.mType=a;this.mBubbles=b;this.mData=c};h["starling.events.Event"]=e.events.Event;e.events.Event.__name__=["starling","events","Event"];e.events.Event.fromPool=function(a,b,c){null==b&&(b=!1);return 0!=e.events.Event.sEventPool.length?e.events.Event.sEventPool.pop().reset(a,b,c):new e.events.Event(a,b,c)};e.events.Event.toPool=function(a){a.mData=a.mTarget=a.mCurrentTarget=null;e.events.Event.sEventPool[e.events.Event.sEventPool.length]=a};e.events.Event.prototype=
{stopPropagation:function(){this.mStopsPropagation=!0},stopImmediatePropagation:function(){this.mStopsPropagation=this.mStopsImmediatePropagation=!0},toString:function(){return e.utils.StringUtil.formatString('[{0} type="{1}" bubbles={2}]',[B.getClassName(B.getClass(this)).split("::").pop(),this.mType,this.mBubbles])},get_bubbles:function(){return this.mBubbles},get_target:function(){return this.mTarget},get_currentTarget:function(){return this.mCurrentTarget},get_type:function(){return this.mType},
get_data:function(){return this.mData},setTarget:function(a){this.mTarget=a},setCurrentTarget:function(a){this.mCurrentTarget=a},setData:function(a){this.mData=a},get_stopsPropagation:function(){return this.mStopsPropagation},get_stopsImmediatePropagation:function(){return this.mStopsImmediatePropagation},reset:function(a,b,c){null==b&&(b=!1);this.mType=a;this.mBubbles=b;this.mData=c;this.mTarget=this.mCurrentTarget=null;this.mStopsPropagation=this.mStopsImmediatePropagation=!1;return this},__class__:e.events.Event,
__properties__:{get_stopsImmediatePropagation:"get_stopsImmediatePropagation",get_stopsPropagation:"get_stopsPropagation",get_data:"get_data",get_type:"get_type",get_currentTarget:"get_currentTarget",get_target:"get_target",get_bubbles:"get_bubbles"}};e.events.EnterFrameEvent=function(a,b,c){null==c&&(c=!1);e.events.Event.call(this,a,c,b)};h["starling.events.EnterFrameEvent"]=e.events.EnterFrameEvent;e.events.EnterFrameEvent.__name__=["starling","events","EnterFrameEvent"];e.events.EnterFrameEvent.__super__=
e.events.Event;e.events.EnterFrameEvent.prototype=q(e.events.Event.prototype,{get_passedTime:function(){return s.Boot.__cast(this.get_data(),Z)},__class__:e.events.EnterFrameEvent,__properties__:q(e.events.Event.prototype.__properties__,{get_passedTime:"get_passedTime"})});e.events.KeyboardEvent=function(a,b,c,d,i,j,g){null==g&&(g=!1);null==j&&(j=!1);null==i&&(i=!1);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);e.events.Event.call(this,a,!1,c);this.mCharCode=b;this.mKeyCode=c;this.mKeyLocation=d;this.mCtrlKey=
i;this.mAltKey=j;this.mShiftKey=g};h["starling.events.KeyboardEvent"]=e.events.KeyboardEvent;e.events.KeyboardEvent.__name__=["starling","events","KeyboardEvent"];e.events.KeyboardEvent.__super__=e.events.Event;e.events.KeyboardEvent.prototype=q(e.events.Event.prototype,{preventDefault:function(){this.mIsDefaultPrevented=!0},isDefaultPrevented:function(){return this.mIsDefaultPrevented},get_charCode:function(){return this.mCharCode},get_keyCode:function(){return this.mKeyCode},get_keyLocation:function(){return this.mKeyLocation},
get_altKey:function(){return this.mAltKey},get_ctrlKey:function(){return this.mCtrlKey},get_shiftKey:function(){return this.mShiftKey},__class__:e.events.KeyboardEvent,__properties__:q(e.events.Event.prototype.__properties__,{get_shiftKey:"get_shiftKey",get_ctrlKey:"get_ctrlKey",get_altKey:"get_altKey",get_keyLocation:"get_keyLocation",get_keyCode:"get_keyCode",get_charCode:"get_charCode"})});e.events.ResizeEvent=function(a,b,d,p){null==p&&(p=!1);e.events.Event.call(this,a,p,new c.geom.Point(b,d))};
h["starling.events.ResizeEvent"]=e.events.ResizeEvent;e.events.ResizeEvent.__name__=["starling","events","ResizeEvent"];e.events.ResizeEvent.__super__=e.events.Event;e.events.ResizeEvent.prototype=q(e.events.Event.prototype,{get_width:function(){return s.Boot.__cast(this.get_data(),c.geom.Point).x|0},get_height:function(){return s.Boot.__cast(this.get_data(),c.geom.Point).y|0},__class__:e.events.ResizeEvent,__properties__:q(e.events.Event.prototype.__properties__,{get_height:"get_height",get_width:"get_width"})});
e.events.Touch=function(a){this.mID=a;this.mTapCount=0;this.mPhase="hover";this.mPressure=this.mWidth=this.mHeight=1;this.mBubbleChain=[]};h["starling.events.Touch"]=e.events.Touch;e.events.Touch.__name__=["starling","events","Touch"];e.events.Touch.prototype={getLocation:function(a,b){null==b&&(b=new c.geom.Point);a.get_base().getTransformationMatrix(a,e.events.Touch.sHelperMatrix);return e.utils.MatrixUtil.transformCoords(e.events.Touch.sHelperMatrix,this.mGlobalX,this.mGlobalY,b)},getPreviousLocation:function(a,
b){null==b&&(b=new c.geom.Point);a.get_base().getTransformationMatrix(a,e.events.Touch.sHelperMatrix);return e.utils.MatrixUtil.transformCoords(e.events.Touch.sHelperMatrix,this.mPreviousGlobalX,this.mPreviousGlobalY,b)},getMovement:function(a,b){null==b&&(b=new c.geom.Point);this.getLocation(a,b);var d=b.x,e=b.y;this.getPreviousLocation(a,b);b.x=d-b.x;b.y=e-b.y;return b},isTouching:function(a){return-1!=w.indexOf(this.mBubbleChain,a,0)},toString:function(){return e.utils.StringUtil.formatString("Touch {0}: globalX={1}, globalY={2}, phase={3}",
[this.mID,this.mGlobalX,this.mGlobalY,this.mPhase])},clone:function(){var a=new e.events.Touch(this.mID);a.mGlobalX=this.mGlobalX;a.mGlobalY=this.mGlobalY;a.mPreviousGlobalX=this.mPreviousGlobalX;a.mPreviousGlobalY=this.mPreviousGlobalY;a.mPhase=this.mPhase;a.mTapCount=this.mTapCount;a.mTimestamp=this.mTimestamp;a.mPressure=this.mPressure;a.mWidth=this.mWidth;a.mHeight=this.mHeight;a.set_target(this.mTarget);return a},updateBubbleChain:function(){if(null!=this.mTarget){var a=1,b=this.mTarget;for(this.mBubbleChain=
[b];null!=(b=b.get_parent());)this.mBubbleChain[k["int"](a++)]=b}else this.mBubbleChain=[]},get_id:function(){return this.mID},get_previousGlobalX:function(){return this.mPreviousGlobalX},get_previousGlobalY:function(){return this.mPreviousGlobalY},get_globalX:function(){return this.mGlobalX},set_globalX:function(a){this.mPreviousGlobalX=this.mGlobalX!=this.mGlobalX?a:this.mGlobalX;return this.mGlobalX=a},get_globalY:function(){return this.mGlobalY},set_globalY:function(a){this.mPreviousGlobalY=this.mGlobalY!=
this.mGlobalY?a:this.mGlobalY;return this.mGlobalY=a},get_tapCount:function(){return this.mTapCount},set_tapCount:function(a){return this.mTapCount=a},get_phase:function(){return this.mPhase},set_phase:function(a){return this.mPhase=a},get_target:function(){return this.mTarget},set_target:function(a){this.mTarget!=a&&(this.mTarget=a,this.updateBubbleChain());return this.mTarget},get_timestamp:function(){return this.mTimestamp},set_timestamp:function(a){return this.mTimestamp=a},get_pressure:function(){return this.mPressure},
set_pressure:function(a){return this.mPressure=a},get_width:function(){return this.mWidth},set_width:function(a){return this.mWidth=a},get_height:function(){return this.mHeight},set_height:function(a){return this.mHeight=a},dispatchEvent:function(a){null!=this.mTarget&&a.dispatch(this.mBubbleChain)},get_bubbleChain:function(){return this.mBubbleChain.slice()},__class__:e.events.Touch,__properties__:{get_bubbleChain:"get_bubbleChain",set_height:"set_height",get_height:"get_height",set_width:"set_width",
get_width:"get_width",set_pressure:"set_pressure",get_pressure:"get_pressure",set_timestamp:"set_timestamp",get_timestamp:"get_timestamp",set_target:"set_target",get_target:"get_target",set_phase:"set_phase",get_phase:"get_phase",set_tapCount:"set_tapCount",get_tapCount:"get_tapCount",set_globalY:"set_globalY",get_globalY:"get_globalY",set_globalX:"set_globalX",get_globalX:"get_globalX",get_previousGlobalY:"get_previousGlobalY",get_previousGlobalX:"get_previousGlobalX",get_id:"get_id"}};e.events.TouchEvent=
function(a,b,c,d,i){null==i&&(i=!0);null==d&&(d=!1);null==c&&(c=!1);e.events.Event.call(this,a,i,b);this.mShiftKey=c;this.mCtrlKey=d;this.mTimestamp=-1;this.mVisitedObjects=[];a=b.length;for(c=0;c<a;)d=c++,b[d].get_timestamp()>this.mTimestamp&&(this.mTimestamp=b[d].get_timestamp())};h["starling.events.TouchEvent"]=e.events.TouchEvent;e.events.TouchEvent.__name__=["starling","events","TouchEvent"];e.events.TouchEvent.__super__=e.events.Event;e.events.TouchEvent.prototype=q(e.events.Event.prototype,
{getTouches:function(a,b,c){null==c&&(c=[]);var d;d=s.Boot.__cast(this.get_data(),Array);for(var i=d.length,j=0;j<i;){var g=j++,g=s.Boot.__cast(d[g],e.events.Touch),h=g.isTouching(a),k=null==b||b==g.get_phase();h&&k&&(c[c.length]=g)}return c},getTouch:function(a,b,c){null==c&&(c=-1);this.getTouches(a,b,e.events.TouchEvent.sTouches);a=e.events.TouchEvent.sTouches.length;if(0<a){b=null;if(0>c)b=e.events.TouchEvent.sTouches[0];else for(var d=0;d<a;){var i=d++;if(e.events.TouchEvent.sTouches[i].get_id()==
c){b=e.events.TouchEvent.sTouches[i];break}}e.events.TouchEvent.sTouches=[];return b}return null},interactsWith:function(a){var b=!1;this.getTouches(a,null,e.events.TouchEvent.sTouches);for(a=e.events.TouchEvent.sTouches.length-1;0<=a;){if("ended"!=e.events.TouchEvent.sTouches[a].get_phase()){b=!0;break}--a}e.events.TouchEvent.sTouches=[];return b},dispatch:function(a){if(null!=a&&0!=a.length){var b;b=this.get_bubbles()?a.length:1;var c=this.get_target();this.setTarget(s.Boot.__cast(a[0],e.events.EventDispatcher));
for(var d=0;d<b;){var i=d++,i=s.Boot.__cast(a[i],e.events.EventDispatcher);if(-1==w.indexOf(this.mVisitedObjects,i,0)){var j=i.invokeEvent(this);this.mVisitedObjects[this.mVisitedObjects.length]=i;if(j)break}}this.setTarget(c)}},get_timestamp:function(){return this.mTimestamp},get_touches:function(){var a;a=s.Boot.__cast(this.get_data(),Array);for(var b=[],c=0,d=a.length;c<d;){var i=c++;b.push(s.Boot.__cast(a[i],e.events.Touch))}return b},get_shiftKey:function(){return this.mShiftKey},get_ctrlKey:function(){return this.mCtrlKey},
__class__:e.events.TouchEvent,__properties__:q(e.events.Event.prototype.__properties__,{get_ctrlKey:"get_ctrlKey",get_shiftKey:"get_shiftKey",get_touches:"get_touches",get_timestamp:"get_timestamp"})});e.events.TouchMarker=function(){e.display.Sprite.call(this);this.mCenter=new c.geom.Point;this.mTexture=this.createTexture();for(var a=0;2>a;){a++;var b=new e.display.Image(this.mTexture);b.set_pivotX(this.mTexture.get_width()/2);b.set_pivotY(this.mTexture.get_height()/2);b.set_touchable(!1);this.addChild(b)}};
h["starling.events.TouchMarker"]=e.events.TouchMarker;e.events.TouchMarker.__name__=["starling","events","TouchMarker"];e.events.TouchMarker.__super__=e.display.Sprite;e.events.TouchMarker.prototype=q(e.display.Sprite.prototype,{dispose:function(){this.mTexture.dispose();e.display.Sprite.prototype.dispose.call(this)},moveMarker:function(a,b,c){null==c&&(c=!1);c&&(this.mCenter.x+=a-this.get_realMarker().get_x(),this.mCenter.y+=b-this.get_realMarker().get_y());this.get_realMarker().set_x(a);this.get_realMarker().set_y(b);
this.get_mockMarker().set_x(2*this.mCenter.x-a);this.get_mockMarker().set_y(2*this.mCenter.y-b)},moveCenter:function(a,b){this.mCenter.x=a;this.mCenter.y=b;this.moveMarker(this.get_realX(),this.get_realY())},createTexture:function(){var a=e.core.Starling.get_current().get_contentScaleFactor(),b=12*a,d=32*a|0,p=32*a|0,i=1.5*a,j=new c.display.Shape;j.get_graphics().lineStyle(i,0,0.3);j.get_graphics().drawCircle(d/2,p/2,b+i);j.get_graphics().beginFill(16777215,0.4);j.get_graphics().lineStyle(i,16777215);
j.get_graphics().drawCircle(d/2,p/2,b);j.get_graphics().endFill();b=new c.display.BitmapData(d,p,!0,0);b.draw(j);return e.textures.Texture.fromBitmapData(b,!1,!1,a)},get_realMarker:function(){return s.Boot.__cast(this.getChildAt(0),e.display.Image)},get_mockMarker:function(){return s.Boot.__cast(this.getChildAt(1),e.display.Image)},get_realX:function(){return this.get_realMarker().get_x()},get_realY:function(){return this.get_realMarker().get_y()},get_mockX:function(){return this.get_mockMarker().get_x()},
get_mockY:function(){return this.get_mockMarker().get_y()},__class__:e.events.TouchMarker,__properties__:q(e.display.Sprite.prototype.__properties__,{get_mockY:"get_mockY",get_mockX:"get_mockX",get_realY:"get_realY",get_realX:"get_realX",get_mockMarker:"get_mockMarker",get_realMarker:"get_realMarker"})});e.events.TouchPhase=function(){};h["starling.events.TouchPhase"]=e.events.TouchPhase;e.events.TouchPhase.__name__=["starling","events","TouchPhase"];e.events.TouchPhase.prototype={TouchPhase:function(){throw new e.errors.AbstractClassError;
},__class__:e.events.TouchPhase};e.events.TouchProcessor=function(a){this.mMultitapDistance=25;this.mMultitapTime=0.3;this.mShiftDown=this.mCtrlDown=!1;this.mRoot=this.mStage=a;this.mElapsedTime=0;this.mCurrentTouches=[];this.mQueue=[];this.mLastTaps=[];this.mStage.addEventListener("keyDown",r(this,this.onKey));this.mStage.addEventListener("keyUp",r(this,this.onKey));this.monitorInterruptions(!0)};h["starling.events.TouchProcessor"]=e.events.TouchProcessor;e.events.TouchProcessor.__name__=["starling",
"events","TouchProcessor"];e.events.TouchProcessor.prototype={dispose:function(){this.monitorInterruptions(!1);this.mStage.removeEventListener("keyDown",r(this,this.onKey));this.mStage.removeEventListener("keyUp",r(this,this.onKey));null!=this.mTouchMarker&&this.mTouchMarker.dispose()},advanceTime:function(a){this.mElapsedTime+=a;if(0<this.mLastTaps.length)for(a=this.mLastTaps.length-1;0<=a;)this.mElapsedTime-this.mLastTaps[a].get_timestamp()>this.mMultitapTime&&this.mLastTaps.splice(a,1),--a;for(;0<
this.mQueue.length;){for(var a=0,b=this.mCurrentTouches;a<b.length;){var c=b[a];++a;("began"==c.get_phase()||"moved"==c.get_phase())&&c.set_phase("stationary")}for(;0<this.mQueue.length&&!this.containsTouchWithID(e.events.TouchProcessor.sUpdatedTouches,this.mQueue[this.mQueue.length-1][0]);)a=this.mQueue.pop(),a=this.createOrUpdateTouch(a[0],a[1],a[2],a[3],a[4],a[5],a[6]),e.events.TouchProcessor.sUpdatedTouches[e.events.TouchProcessor.sUpdatedTouches.length]=a;this.processTouches(e.events.TouchProcessor.sUpdatedTouches,
this.mShiftDown,this.mCtrlDown);for(a=this.mCurrentTouches.length-1;0<=a;)"ended"==this.mCurrentTouches[a].get_phase()&&this.mCurrentTouches.splice(a,1),--a;e.events.TouchProcessor.sUpdatedTouches=[]}},processTouches:function(a,b,c){e.events.TouchProcessor.sHoveringTouchData=[];b=new e.events.TouchEvent("touch",this.mCurrentTouches,b,c);for(c=0;c<a.length;){var d=a[c];++c;"hover"==d.get_phase()&&null!=d.get_target()&&(e.events.TouchProcessor.sHoveringTouchData[e.events.TouchProcessor.sHoveringTouchData.length]=
{touch:d,target:d.get_target(),bubbleChain:d.get_bubbleChain()});if("hover"==d.get_phase()||"began"==d.get_phase())e.events.TouchProcessor.sHelperPoint.setTo(d.get_globalX(),d.get_globalY()),d.set_target(this.mRoot.hitTest(e.events.TouchProcessor.sHelperPoint,!0))}c=0;for(d=e.events.TouchProcessor.sHoveringTouchData;c<d.length;){var i=d[c];++c;i.touch.target!=i.target&&b.dispatch(i.bubbleChain)}for(c=0;c<a.length;)d=a[c],++c,d.dispatchEvent(b)},enqueue:function(a,b,c,d,e,j,g){null==g&&(g=1);null==
j&&(j=1);null==e&&(e=1);this.mQueue.unshift([a,b,c,d,e,j,g]);this.mCtrlDown&&(this.get_simulateMultitouch()&&0==a)&&(this.mTouchMarker.moveMarker(c,d,this.mShiftDown),this.mQueue.unshift([1,b,this.mTouchMarker.get_mockX(),this.mTouchMarker.get_mockY()]))},enqueueMouseLeftStage:function(){var a=this.getCurrentTouch(0);if(!(null==a||"hover"!=a.get_phase())){var b=a.get_globalX(),c=a.get_globalY(),d=a.get_globalX(),i=this.mStage.get_stageWidth()-d,a=a.get_globalY(),j=this.mStage.get_stageHeight()-a,
j=e.utils.MathUtil.min([d,i,a,j]);j==d?b=-1:j==i?b=this.mStage.get_stageWidth()+1:c=j==a?-1:this.mStage.get_stageHeight()+1;this.enqueue(0,"hover",b,c)}},createOrUpdateTouch:function(a,b,c,d,i,j,g){null==g&&(g=1);null==j&&(j=1);null==i&&(i=1);var h=this.getCurrentTouch(a);null==h&&(h=new e.events.Touch(a),this.addCurrentTouch(h));h.set_globalX(c);h.set_globalY(d);h.set_phase(b);h.set_timestamp(this.mElapsedTime);h.set_pressure(i);h.set_width(j);h.set_height(g);"began"==b&&this.updateTapCount(h);return h},
updateTapCount:function(a){for(var b=null,c=this.mMultitapDistance*this.mMultitapDistance,d=0,e=this.mLastTaps;d<e.length;){var j=e[d];++d;if(Math.pow(j.get_globalX()-a.get_globalX(),2)+Math.pow(j.get_globalY()-a.get_globalY(),2)<=c){b=j;break}}null!=b?(a.set_tapCount(b.get_tapCount()+1),this.mLastTaps.splice(w.indexOf(this.mLastTaps,b,0),1)):a.set_tapCount(1);this.mLastTaps.push(a.clone())},addCurrentTouch:function(a){for(var b=this.mCurrentTouches.length-1;0<=b;)this.mCurrentTouches[b].get_id()==
a.get_id()&&this.mCurrentTouches.splice(b,1),--b;this.mCurrentTouches.push(a)},getCurrentTouch:function(a){for(var b=0,c=this.mCurrentTouches;b<c.length;){var d=c[b];++b;if(d.get_id()==a)return d}return null},containsTouchWithID:function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;if(d.get_id()==b)return!0}return!1},get_simulateMultitouch:function(){return null!=this.mTouchMarker},set_simulateMultitouch:function(a){if(this.get_simulateMultitouch()==a)return null!=this.mTouchMarker;a?(this.mTouchMarker=
new e.events.TouchMarker,this.mTouchMarker.set_visible(!1),this.mStage.addChild(this.mTouchMarker)):(this.mTouchMarker.removeFromParent(!0),this.mTouchMarker=null);return null!=this.mTouchMarker},get_multitapTime:function(){return this.mMultitapTime},set_multitapTime:function(a){return this.mMultitapTime=a},get_multitapDistance:function(){return this.mMultitapDistance},set_multitapDistance:function(a){return this.mMultitapDistance=a},get_root:function(){return this.mRoot},set_root:function(a){return this.mRoot=
a},get_stage:function(){return this.mStage},get_numCurrentTouches:function(){return this.mCurrentTouches.length},onKey:function(a){var a=s.Boot.__cast(a,e.events.KeyboardEvent),b=a.get_keyCode();if(!(b=17==(0>b?4294967296+b:b+0)))b=a.get_keyCode(),b=15==(0>b?4294967296+b:b+0);if(b){if(b=this.mCtrlDown,this.mCtrlDown="keyDown"==a.get_type(),this.get_simulateMultitouch()&&b!=this.mCtrlDown){this.mTouchMarker.set_visible(this.mCtrlDown);this.mTouchMarker.moveCenter(this.mStage.get_stageWidth()/2,this.mStage.get_stageHeight()/
2);var a=this.getCurrentTouch(0),c=this.getCurrentTouch(1);null!=a&&this.mTouchMarker.moveMarker(a.get_globalX(),a.get_globalY());b&&null!=c&&"ended"!=c.get_phase()?this.mQueue.unshift([1,"ended",c.get_globalX(),c.get_globalY()]):this.mCtrlDown&&null!=a&&("hover"==a.get_phase()||"ended"==a.get_phase()?this.mQueue.unshift([1,"hover",this.mTouchMarker.get_mockX(),this.mTouchMarker.get_mockY()]):this.mQueue.unshift([1,"began",this.mTouchMarker.get_mockX(),this.mTouchMarker.get_mockY()]))}}else if(b=
a.get_keyCode(),16==(0>b?4294967296+b:b+0))this.mShiftDown="keyDown"==a.get_type()},monitorInterruptions:function(a){try{a?c.Lib.current.addEventListener("deactivate",r(this,this.onInterruption),!1,0,!0):c.Lib.current.removeEventListener("deactivate",r(this,this.onInterruption))}catch(b){if(!s.Boot.__instanceof(b,c.errors.Error))throw b;}},onInterruption:function(){if(0<this.mCurrentTouches.length){for(var a=0,b=this.mCurrentTouches;a<b.length;){var c=b[a];++a;("began"==c.get_phase()||"moved"==c.get_phase()||
"stationary"==c.get_phase())&&c.set_phase("ended")}this.processTouches(this.mCurrentTouches,this.mShiftDown,this.mCtrlDown)}this.mCurrentTouches=[];this.mQueue=[]},__class__:e.events.TouchProcessor,__properties__:{get_numCurrentTouches:"get_numCurrentTouches",get_stage:"get_stage",set_root:"set_root",get_root:"get_root",set_multitapDistance:"set_multitapDistance",get_multitapDistance:"get_multitapDistance",set_multitapTime:"set_multitapTime",get_multitapTime:"get_multitapTime",set_simulateMultitouch:"set_simulateMultitouch",
get_simulateMultitouch:"get_simulateMultitouch"}};e.filters={};e.filters.FragmentFilter=function(a,b){null==b&&(b=1);null==a&&(a=1);this.mProjMatrix=new c.geom.Matrix;this.mBaseTextureID=this.mMvpConstantID=0;this.mTexCoordsAtID=1;this.mVertexPosAtID=0;if(1>a)throw new c.errors.ArgumentError("At least one pass is required.");this.mNumPasses=a;this.mOffsetX=this.mOffsetY=this.mMarginX=this.mMarginY=0;this.mResolution=b;this.mMode="replace";this.mVertexData=new e.utils.VertexData(4);this.mVertexData.setTexCoords(0,
0,0);this.mVertexData.setTexCoords(1,1,0);this.mVertexData.setTexCoords(2,0,1);this.mVertexData.setTexCoords(3,1,1);this.mIndexData=[0,1,2,1,3,2];this.createPrograms();e.core.Starling.get_current().get_stage3D().addEventListener("context3DCreate",r(this,this.onContextCreated),!1,0,!0)};h["starling.filters.FragmentFilter"]=e.filters.FragmentFilter;e.filters.FragmentFilter.__name__=["starling","filters","FragmentFilter"];e.filters.FragmentFilter.prototype={dispose:function(){e.core.Starling.get_current().get_stage3D().removeEventListener("context3DCreate",
r(this,this.onContextCreated));null!=this.mVertexBuffer&&this.mVertexBuffer.dispose();null!=this.mIndexBuffer&&this.mIndexBuffer.dispose();this.disposePassTextures();this.disposeCache()},onContextCreated:function(){this.mPassTextures=this.mIndexBuffer=this.mVertexBuffer=null;this.createPrograms();null!=this.mCache&&this.cache()},render:function(a,b,c){"above"==this.get_mode()&&a.render(b,c);this.mCacheRequested&&(this.mCacheRequested=!1,this.mCache=this.renderPasses(a,b,1,!0),this.disposePassTextures());
null!=this.mCache?this.mCache.render(b,c):this.renderPasses(a,b,c,!1);"below"==this.get_mode()&&a.render(b,c)},renderPasses:function(a,b,d,h){null==h&&(h=!1);var i=null,j=a.get_stage(),g=e.core.Starling.get_current().get_context(),k=e.core.Starling.get_current().get_contentScaleFactor();if(null==j)throw new c.errors.Error("Filtered object must be on the stage.");if(null==g)throw new e.errors.MissingContextError;this.calculateBounds(a,j,this.mResolution*k,!h,e.filters.FragmentFilter.sBounds,e.filters.FragmentFilter.sBoundsPot);
if(e.filters.FragmentFilter.sBounds.isEmpty())return this.disposePassTextures(),h?new e.display.QuadBatch:null;this.updateBuffers(g,e.filters.FragmentFilter.sBoundsPot);this.updatePassTextures(e.filters.FragmentFilter.sBoundsPot.width|0,e.filters.FragmentFilter.sBoundsPot.height|0,this.mResolution*k);b.finishQuadBatch();b.raiseDrawCount(this.mNumPasses);b.pushMatrix();this.mProjMatrix.copyFrom(b.get_projectionMatrix());var l=b.get_renderTarget();if(null!=l)throw new c.errors.IllegalOperationError("It's currently not possible to stack filters! This limitation will be removed in a future Stage3D version.");
h&&(i=e.textures.Texture.empty(e.filters.FragmentFilter.sBoundsPot.width,e.filters.FragmentFilter.sBoundsPot.height,!1,!1,!0,this.mResolution*k));b.set_renderTarget(this.mPassTextures[0]);b.clear();b.set_blendMode("normal");b.setOrthographicProjection(e.filters.FragmentFilter.sBounds.x,e.filters.FragmentFilter.sBounds.y,e.filters.FragmentFilter.sBoundsPot.width,e.filters.FragmentFilter.sBoundsPot.height);a.render(b,d);b.finishQuadBatch();e.core.RenderSupport.setBlendFactors(!1);b.loadIdentity();b.pushClipRect(e.filters.FragmentFilter.sBounds);
for(var k=0,m=this.mNumPasses;k<m;){var n=k++;n<this.mNumPasses-1?(b.set_renderTarget(this.getPassTexture(n+1)),b.clear()):h?(b.set_renderTarget(i),b.clear()):(b.set_projectionMatrix(this.mProjMatrix),b.set_renderTarget(l),b.translateMatrix(this.mOffsetX,this.mOffsetY),b.set_blendMode(a.get_blendMode()),b.applyBlendMode(!1));d=this.getPassTexture(n);this.activate(n,g,d);g.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.VERTEX,this.mMvpConstantID,b.get_mvpMatrix3D(),!0);g.setTextureAt(this.mBaseTextureID,
d.get_base());g.setVertexBufferAt(this.mVertexPosAtID,this.mVertexBuffer,0,c.display3D.Context3DVertexBufferFormat.FLOAT_2);g.setVertexBufferAt(this.mTexCoordsAtID,this.mVertexBuffer,6,c.display3D.Context3DVertexBufferFormat.FLOAT_2);g.drawTriangles(this.mIndexBuffer,0,2);this.deactivate(n,g,d)}g.setVertexBufferAt(this.mVertexPosAtID,null);g.setVertexBufferAt(this.mTexCoordsAtID,null);g.setTextureAt(this.mBaseTextureID,null);b.popMatrix();b.popClipRect();return h?(b.set_renderTarget(l),b.get_projectionMatrix().copyFrom(this.mProjMatrix),
b=new e.display.QuadBatch,i=new e.display.Image(i),j.getTransformationMatrix(a,e.filters.FragmentFilter.sTransformationMatrix),e.utils.MatrixUtil.prependTranslation(e.filters.FragmentFilter.sTransformationMatrix,e.filters.FragmentFilter.sBounds.x+this.mOffsetX,e.filters.FragmentFilter.sBounds.y+this.mOffsetY),b.addImage(i,1,e.filters.FragmentFilter.sTransformationMatrix),b):null},updateBuffers:function(a,b){this.mVertexData.setPosition(0,b.x,b.y);this.mVertexData.setPosition(1,b.get_right(),b.y);
this.mVertexData.setPosition(2,b.x,b.get_bottom());this.mVertexData.setPosition(3,b.get_right(),b.get_bottom());null==this.mVertexBuffer&&(this.mVertexBuffer=a.createVertexBuffer(4,8),this.mIndexBuffer=a.createIndexBuffer(6),this.mIndexBuffer.uploadFromVector(function(a){var a=a.mIndexData,b=new c.VectorData;b.length=a.length;b.fixed=!0;var d;d=Array(a.length);for(var e=0,g=a.length;e<g;){var h=e++;d[h]=a[h]}b.data=d;return b}(this),0,6));this.mVertexBuffer.uploadFromFloat32Array(this.mVertexData.get_rawData(),
0,4)},updatePassTextures:function(a,b,c){var d;d=1<this.mNumPasses?2:1;if(null==this.mPassTextures||this.mPassTextures.length!=d||this.mPassTextures[0].get_width()!=a||this.mPassTextures[0].get_height()!=b){if(null!=this.mPassTextures){for(var i=0,j=this.mPassTextures;i<j.length;){var g=j[i];++i;g.dispose()}this.mPassTextures=this.mPassTextures.slice(0,d)}else this.mPassTextures=[];for(i=0;i<d;)j=i++,this.mPassTextures[j]=e.textures.Texture.empty(a,b,!1,!1,!0,c)}},getPassTexture:function(a){return this.mPassTextures[a%
2]},calculateBounds:function(a,b,c,d,i,j){var g,h;a==b||a==e.core.Starling.get_current().get_root()?(g=h=0,i.setTo(0,0,b.get_stageWidth(),b.get_stageHeight())):(g=this.mMarginX,h=this.mMarginY,a.getBounds(b,i));d&&(e.filters.FragmentFilter.sStageBounds.setTo(0,0,b.get_stageWidth(),b.get_stageHeight()),e.utils.RectangleUtil.intersect(i,e.filters.FragmentFilter.sStageBounds,i));i.isEmpty()||(i.inflate(g,h),b=64/c|0,a=i.width>b?i.width:b,b=i.height>b?i.height:b,j.setTo(i.x,i.y,e.utils.PowerOfTwo.getNextPowerOfTwo(a*
c|0)/c,e.utils.PowerOfTwo.getNextPowerOfTwo(b*c|0)/c))},disposePassTextures:function(){for(var a=0,b=this.mPassTextures;a<b.length;){var c=b[a];++a;c.dispose()}this.mPassTextures=null},disposeCache:function(){null!=this.mCache&&(null!=this.mCache.get_texture()&&this.mCache.get_texture().dispose(),this.mCache.dispose(),this.mCache=null)},createPrograms:function(){throw new c.errors.Error("Method has to be implemented in subclass!");},activate:function(){throw new c.errors.Error("Method has to be implemented in subclass!");
},deactivate:function(){},assembleAgal:function(a,b){null==a&&(a="tex oc, v0, fs0 <2d, clamp, linear, mipnone>");null==b&&(b="m44 op, va0, vc0 \nmov v0, va1      \n");return e.core.RenderSupport.assembleAgal(b,a)},cache:function(){this.mCacheRequested=!0;this.disposeCache()},clearCache:function(){this.mCacheRequested=!1;this.disposeCache()},compile:function(a){if(null!=this.mCache)return this.mCache;var b,d=a.get_stage();if(null==d)throw new c.errors.Error("Filtered object must be on the stage.");
b=new e.core.RenderSupport;a.getTransformationMatrix(d,b.get_modelViewMatrix());return this.renderPasses(a,b,1,!0)},get_isCached:function(){return null!=this.mCache||this.mCacheRequested},get_resolution:function(){return this.mResolution},set_resolution:function(a){if(0>=a)throw new c.errors.ArgumentError("Resolution must be > 0");return this.mResolution=a},get_mode:function(){return this.mMode},set_mode:function(a){return this.mMode=a},get_offsetX:function(){return this.mOffsetX},set_offsetX:function(a){return this.mOffsetX=
a},get_offsetY:function(){return this.mOffsetY},set_offsetY:function(a){return this.mOffsetY=a},get_marginX:function(){return this.mMarginX},set_marginX:function(a){return this.mMarginX=a},get_marginY:function(){return this.mMarginY},set_marginY:function(a){return this.mMarginY=a},set_numPasses:function(a){return this.mNumPasses=a},get_numPasses:function(){return this.mNumPasses},get_vertexPosAtID:function(){return this.mVertexPosAtID},set_vertexPosAtID:function(a){return this.mVertexPosAtID=a},get_texCoordsAtID:function(){return this.mTexCoordsAtID},
set_texCoordsAtID:function(a){return this.mTexCoordsAtID=a},get_baseTextureID:function(){return this.mBaseTextureID},set_baseTextureID:function(a){return this.mBaseTextureID=a},get_mvpConstantID:function(){return this.mMvpConstantID},set_mvpConstantID:function(a){return this.mMvpConstantID=a},__class__:e.filters.FragmentFilter,__properties__:{set_mvpConstantID:"set_mvpConstantID",get_mvpConstantID:"get_mvpConstantID",set_baseTextureID:"set_baseTextureID",get_baseTextureID:"get_baseTextureID",set_texCoordsAtID:"set_texCoordsAtID",
get_texCoordsAtID:"get_texCoordsAtID",set_vertexPosAtID:"set_vertexPosAtID",get_vertexPosAtID:"get_vertexPosAtID",set_numPasses:"set_numPasses",get_numPasses:"get_numPasses",set_marginY:"set_marginY",get_marginY:"get_marginY",set_marginX:"set_marginX",get_marginX:"get_marginX",set_offsetY:"set_offsetY",get_offsetY:"get_offsetY",set_offsetX:"set_offsetX",get_offsetX:"get_offsetX",set_mode:"set_mode",get_mode:"get_mode",set_resolution:"set_resolution",get_resolution:"get_resolution",get_isCached:"get_isCached"}};
e.filters.BlurFilter=function(a,b,c){null==c&&(c=1);null==b&&(b=1);null==a&&(a=1);this.sTmpWeights=[];this.mColor=[1,1,1,1];this.mWeights=[0,0,0,0];this.mOffsets=[0,0,0,0];e.filters.FragmentFilter.call(this,1,c);this.mBlurX=a;this.mBlurY=b;this.updateMarginsAndPasses();for(a=0;5>a;)b=a++,this.sTmpWeights[b]=0};h["starling.filters.BlurFilter"]=e.filters.BlurFilter;e.filters.BlurFilter.__name__=["starling","filters","BlurFilter"];e.filters.BlurFilter.createDropShadow=function(a,b,c,d,i,j){null==j&&
(j=0.5);null==i&&(i=1);null==d&&(d=0.5);null==c&&(c=0);null==b&&(b=0.785);null==a&&(a=4);i=new e.filters.BlurFilter(i,i,j);i.set_offsetX(Math.cos(b)*a);i.set_offsetY(Math.sin(b)*a);i.set_mode("below");i.setUniformColor(!0,c,d);return i};e.filters.BlurFilter.createGlow=function(a,b,c,d){null==d&&(d=0.5);null==c&&(c=1);null==b&&(b=1);null==a&&(a=16776960);c=new e.filters.BlurFilter(c,c,d);c.set_mode("below");c.setUniformColor(!0,a,b);return c};e.filters.BlurFilter.__super__=e.filters.FragmentFilter;
e.filters.BlurFilter.prototype=q(e.filters.FragmentFilter.prototype,{createPrograms:function(){this.mNormalProgram=this.createProgram(!1);this.mTintedProgram=this.createProgram(!0)},createProgram:function(a){var b;b=a?"BF_t":"BF_n";var c=e.core.Starling.get_current();if(c.hasProgram(b))return c.getProgram(b);var d="tex ft0,  v0, fs0 <2d, clamp, linear, mipnone> \nmul ft5, ft0, fc0.xxxx                         \ntex ft1,  v1, fs0 <2d, clamp, linear, mipnone> \nmul ft1, ft1, fc0.zzzz                         \nadd ft5, ft5, ft1                              \ntex ft2,  v2, fs0 <2d, clamp, linear, mipnone> \nmul ft2, ft2, fc0.yyyy                         \nadd ft5, ft5, ft2                              \ntex ft3,  v3, fs0 <2d, clamp, linear, mipnone> \nmul ft3, ft3, fc0.yyyy                         \nadd ft5, ft5, ft3                              \ntex ft4,  v4, fs0 <2d, clamp, linear, mipnone> \nmul ft4, ft4, fc0.zzzz                         \n";
return c.registerProgramFromSource(b,"m44 op, va0, vc0       \nmov v0, va1            \nsub v1, va1, vc4.zwxx  \nsub v2, va1, vc4.xyxx  \nadd v3, va1, vc4.xyxx  \nadd v4, va1, vc4.zwxx  \n",a?d+"add ft5, ft5, ft4                              \nmov ft5.xyz, fc1.xyzx\nmul ft5.w, ft5.w, fc1.w\nmov oc, ft5\n":d+"add  oc, ft5, ft4                              \n")},activate:function(a,b,d){this.mUniformColor&&a==this.get_numPasses()-1?b.setProgram(this.mTintedProgram):b.setProgram(this.mNormalProgram);
this.updateParameters(a,k["int"](d.get_nativeWidth()),k["int"](d.get_nativeHeight()));b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.VERTEX,4,this.mOffsets);b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this.mWeights);this.mUniformColor&&a==this.get_numPasses()-1&&b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,1,this.mColor)},updateParameters:function(a,b,c){var d=a<this.mBlurX;d?(a=2*Math.min(1,this.mBlurX-a),b=1/b):(a=2*
Math.min(1,this.mBlurY-(a-Math.ceil(this.mBlurX))),b=1/c);for(var c=2*a*a,a=1/Math.sqrt(c*Math.PI),e=0;5>e;){var j=e++;this.sTmpWeights[j]=a*Math.exp(-j*j/c)}this.mWeights[0]=this.sTmpWeights[0];this.mWeights[1]=this.sTmpWeights[1]+this.sTmpWeights[2];this.mWeights[2]=this.sTmpWeights[3]+this.sTmpWeights[4];c=1/(this.mWeights[0]+2*this.mWeights[1]+2*this.mWeights[2]);this.mWeights[0]*=c;this.mWeights[1]*=c;this.mWeights[2]*=c;c=(b*this.sTmpWeights[1]+2*b*this.sTmpWeights[2])/this.mWeights[1];b=(3*
b*this.sTmpWeights[3]+4*b*this.sTmpWeights[4])/this.mWeights[2];d?(this.mOffsets[0]=c,this.mOffsets[1]=0,this.mOffsets[2]=b,this.mOffsets[3]=0):(this.mOffsets[0]=0,this.mOffsets[1]=c,this.mOffsets[2]=0,this.mOffsets[3]=b)},updateMarginsAndPasses:function(){0==this.mBlurX&&0==this.mBlurY&&(this.mBlurX=0.001);this.set_numPasses(Math.ceil(this.mBlurX)+Math.ceil(this.mBlurY));this.set_marginX((3+Math.ceil(this.mBlurX))/this.get_resolution());this.set_marginY((3+Math.ceil(this.mBlurY))/this.get_resolution())},
setUniformColor:function(a,b,c){null==c&&(c=1);null==b&&(b=0);this.mColor[0]=e.utils.Color.getRed(b)/255;this.mColor[1]=e.utils.Color.getGreen(b)/255;this.mColor[2]=e.utils.Color.getBlue(b)/255;this.mColor[3]=c;this.mUniformColor=a},get_blurX:function(){return this.mBlurX},set_blurX:function(a){this.mBlurX=a;this.updateMarginsAndPasses();return this.mBlurX},get_blurY:function(){return this.mBlurY},set_blurY:function(a){this.mBlurY=a;this.updateMarginsAndPasses();return this.mBlurY},__class__:e.filters.BlurFilter,
__properties__:q(e.filters.FragmentFilter.prototype.__properties__,{set_blurY:"set_blurY",get_blurY:"get_blurY",set_blurX:"set_blurX",get_blurX:"get_blurX"})});e.filters.ColorMatrixFilter=function(a){e.filters.FragmentFilter.call(this);this.mUserMatrix=[];this.mShaderMatrix=[];this.set_matrix(a)};h["starling.filters.ColorMatrixFilter"]=e.filters.ColorMatrixFilter;e.filters.ColorMatrixFilter.__name__=["starling","filters","ColorMatrixFilter"];e.filters.ColorMatrixFilter.__super__=e.filters.FragmentFilter;
e.filters.ColorMatrixFilter.prototype=q(e.filters.FragmentFilter.prototype,{createPrograms:function(){var a=e.core.Starling.get_current();this.mShaderProgram=a.hasProgram("CMF")?a.getProgram("CMF"):a.registerProgramFromSource("CMF","m44 op, va0, vc0 \nmov v0, va1      \n","tex ft0, v0,  fs0 <2d, clamp, linear, mipnone>  \nmax ft0, ft0, fc5              \nm44 ft0, ft0, fc0              \nadd ft0, ft0, fc4              \nmov oc, ft0                    \n")},activate:function(a,b){b.setProgram(this.mShaderProgram);
b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,0,this.mShaderMatrix,5);b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,5,e.filters.ColorMatrixFilter.MIN_COLOR)},invert:function(){this.concatValues(-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0)},adjustSaturation:function(a){var a=a+1,b=1-a,c=0.299*b,d=0.587*b,b=0.114*b;this.concatValues(c+a,d,b,0,0,c,d+a,b,0,0,c,d,b+a,0,0,0,0,0,1,0)},adjustContrast:function(a){var a=a+1,b=128*(1-a);this.concatValues(a,
0,0,0,b,0,a,0,0,b,0,0,a,0,b,0,0,0,1,0)},adjustBrightness:function(a){a*=255;this.concatValues(1,0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0)},adjustHue:function(a){var a=a*Math.PI,b=Math.cos(a),a=Math.sin(a);this.concatValues(0.299+0.7010000000000001*b+-0.299*a,0.587+-0.587*b+-0.587*a,0.114+-0.114*b+0.886*a,0,0,0.299+-0.299*b+0.143*a,0.587+0.41300000000000003*b+0.14*a,0.114+-0.114*b+-0.283*a,0,0,0.299+-0.299*b+-0.7010000000000001*a,0.587+-0.587*b+0.587*a,0.114+0.886*b+0.114*a,0,0,0,0,0,1,0)},tint:function(a,
b){null==b&&(b=1);var c=e.utils.Color.getRed(a)/255,d=e.utils.Color.getGreen(a)/255,i=e.utils.Color.getBlue(a)/255,j=1-b,c=b*c,d=b*d,i=b*i;this.concatValues(j+0.299*c,0.587*c,0.114*c,0,0,0.299*d,j+0.587*d,0.114*d,0,0,0.299*i,0.587*i,j+0.114*i,0,0,0,0,0,1,0)},reset:function(){this.set_matrix(null)},concat:function(a){for(var b=0,c=0;4>c;){c++;for(var d=0;5>d;){var i=d++;e.filters.ColorMatrixFilter.sTmpMatrix1[b+i|0]=a[b]*this.mUserMatrix[i]+a[b+1|0]*this.mUserMatrix[i+5|0]+a[b+2|0]*this.mUserMatrix[i+
10|0]+a[b+3|0]*this.mUserMatrix[i+15|0]+(4==i?a[b+4|0]:0)}b+=5}this.copyMatrix(e.filters.ColorMatrixFilter.sTmpMatrix1,this.mUserMatrix);this.updateShaderMatrix()},concatValues:function(a,b,c,d,i,j,g,h,k,l,n,m,q,r,s,t,u,v,w,x){e.filters.ColorMatrixFilter.sTmpMatrix2=[a,b,c,d,i,j,g,h,k,l,n,m,q,r,s,t,u,v,w,x];this.concat(e.filters.ColorMatrixFilter.sTmpMatrix2)},copyMatrix:function(a,b){for(var c=0;20>c;){var d=c++;b[d]=a[d]}},updateShaderMatrix:function(){this.mShaderMatrix=[this.mUserMatrix[0],this.mUserMatrix[1],
this.mUserMatrix[2],this.mUserMatrix[3],this.mUserMatrix[5],this.mUserMatrix[6],this.mUserMatrix[7],this.mUserMatrix[8],this.mUserMatrix[10],this.mUserMatrix[11],this.mUserMatrix[12],this.mUserMatrix[13],this.mUserMatrix[15],this.mUserMatrix[16],this.mUserMatrix[17],this.mUserMatrix[18],this.mUserMatrix[4]/255,this.mUserMatrix[9]/255,this.mUserMatrix[14]/255,this.mUserMatrix[19]/255]},get_matrix:function(){return this.mUserMatrix},set_matrix:function(a){if(null!=a&&20!=a.length)throw new c.errors.ArgumentError("Invalid matrix length: must be 20");
null==a?this.mUserMatrix=e.filters.ColorMatrixFilter.IDENTITY.slice():this.copyMatrix(a,this.mUserMatrix);this.updateShaderMatrix();return this.mUserMatrix},__class__:e.filters.ColorMatrixFilter,__properties__:q(e.filters.FragmentFilter.prototype.__properties__,{set_matrix:"set_matrix",get_matrix:"get_matrix"})});e.filters.DisplacementMapFilter=function(a,b,d,h,i,j){null==j&&(j=0);null==i&&(i=0);null==h&&(h=0);null==d&&(d=0);this.mMapTexture=a;this.mMapPoint=new c.geom.Point;this.mComponentX=d;this.mComponentY=
h;this.mScaleX=i;this.mScaleY=j;this.set_mapPoint(b);e.filters.FragmentFilter.call(this)};h["starling.filters.DisplacementMapFilter"]=e.filters.DisplacementMapFilter;e.filters.DisplacementMapFilter.__name__=["starling","filters","DisplacementMapFilter"];e.filters.DisplacementMapFilter.__super__=e.filters.FragmentFilter;e.filters.DisplacementMapFilter.prototype=q(e.filters.FragmentFilter.prototype,{dispose:function(){null!=this.mMapTexCoordBuffer&&this.mMapTexCoordBuffer.dispose();e.filters.FragmentFilter.prototype.dispose.call(this)},
createPrograms:function(){null!=this.mMapTexCoordBuffer&&this.mMapTexCoordBuffer.dispose();this.mMapTexCoordBuffer=e.core.Starling.get_current().get_context().createVertexBuffer(4,2);var a=e.core.Starling.get_current(),b=e.core.RenderSupport.getTextureLookupFlags(this.get_mapTexture().get_format(),this.get_mapTexture().get_mipMapping(),this.get_mapTexture().get_repeat()),c=e.core.RenderSupport.getTextureLookupFlags("bgra",!1,this.mRepeat),d=e.utils.StringUtil.formatString("DMF_m{0}_i{1}",[b,c]);a.hasProgram(d)?
this.mShaderProgram=a.getProgram(d):(b=["tex ft0,  v1, fs1 "+b,"sub ft1, ft0, fc0\nm44 ft2, ft1, fc1\nadd ft3,  v0, ft2","tex  oc, ft3, fs0 "+c].join("\n"),this.mShaderProgram=a.registerProgramFromSource(d,"m44  op, va0, vc0\nmov  v0, va1\nmov  v1, va2",b))},activate:function(a,b,d){b.setProgram(this.mShaderProgram);this.updateParameters(k["int"](d.get_nativeWidth()),k["int"](d.get_nativeHeight()));b.setVertexBufferAt(2,this.mMapTexCoordBuffer,0,c.display3D.Context3DVertexBufferFormat.FLOAT_2);b.setProgramConstantsFromVector(c.display3D.Context3DProgramType.FRAGMENT,
0,e.filters.DisplacementMapFilter.sOneHalf);b.setProgramConstantsFromMatrix(c.display3D.Context3DProgramType.FRAGMENT,1,e.filters.DisplacementMapFilter.sMatrix,!0);b.setTextureAt(1,this.mMapTexture.get_base())},deactivate:function(a,b){b.setVertexBufferAt(2,null);b.setTextureAt(1,null)},updateParameters:function(a,b){var d=e.core.Starling.get_current().get_contentScaleFactor(),h,i;for(h=0;16>h;)i=h++,e.filters.DisplacementMapFilter.sMatrixData[i]=0;h=this.mComponentX;1==(0>h?4294967296+h:h+0)?h=0:
(h=this.mComponentX,2==(0>h?4294967296+h:h+0)?h=1:(h=this.mComponentX,h=4==(0>h?4294967296+h:h+0)?2:3));i=this.mComponentY;1==(0>i?4294967296+i:i+0)?i=0:(i=this.mComponentY,2==(0>i?4294967296+i:i+0)?i=1:(i=this.mComponentY,i=4==(0>i?4294967296+i:i+0)?2:3));e.filters.DisplacementMapFilter.sMatrixData[4*h|0]=this.mScaleX*d/a;e.filters.DisplacementMapFilter.sMatrixData[4*i+1|0]=this.mScaleY*d/b;e.filters.DisplacementMapFilter.sMatrix.copyRawDataFrom(function(){var a=e.filters.DisplacementMapFilter.sMatrixData,
b=new c.VectorData;b.length=a.length;b.fixed=true;var d;d=Array(a.length);for(var f=0,i=a.length;f<i;){var j=f++;d[j]=a[j]}b.data=d;return b}(this));d=this.mMapPoint.x/this.get_mapTexture().get_width();h=this.mMapPoint.y/this.get_mapTexture().get_height();i=a/this.get_mapTexture().get_nativeWidth();var j=b/this.get_mapTexture().get_nativeHeight();e.filters.DisplacementMapFilter.sMapTexCoords[0]=-d;e.filters.DisplacementMapFilter.sMapTexCoords[1]=-h;e.filters.DisplacementMapFilter.sMapTexCoords[2]=
-d+i;e.filters.DisplacementMapFilter.sMapTexCoords[3]=-h;e.filters.DisplacementMapFilter.sMapTexCoords[4]=-d;e.filters.DisplacementMapFilter.sMapTexCoords[5]=-h+j;e.filters.DisplacementMapFilter.sMapTexCoords[6]=-d+i;e.filters.DisplacementMapFilter.sMapTexCoords[7]=-h+j;this.mMapTexture.adjustTexCoords(e.filters.DisplacementMapFilter.sMapTexCoords);this.mMapTexCoordBuffer.uploadFromFloat32Array(e.filters.DisplacementMapFilter.sMapTexCoords,0,4)},get_componentX:function(){return this.mComponentX},
set_componentX:function(a){return this.mComponentX=a},get_componentY:function(){return this.mComponentY},set_componentY:function(a){return this.mComponentY=a},get_scaleX:function(){return this.mScaleX},set_scaleX:function(a){return this.mScaleX=a},get_scaleY:function(){return this.mScaleY},set_scaleY:function(a){return this.mScaleY=a},get_mapTexture:function(){return this.mMapTexture},set_mapTexture:function(a){this.mMapTexture!=a&&(this.mMapTexture=a,this.createPrograms());return this.mMapTexture},
get_mapPoint:function(){return this.mMapPoint},set_mapPoint:function(a){null!=a?this.mMapPoint.setTo(a.x,a.y):this.mMapPoint.setTo(0,0);return this.mMapPoint},get_repeat:function(){return this.mRepeat},set_repeat:function(a){this.mRepeat!=a&&(this.mRepeat=a,this.createPrograms());return this.mRepeat},__class__:e.filters.DisplacementMapFilter,__properties__:q(e.filters.FragmentFilter.prototype.__properties__,{set_repeat:"set_repeat",get_repeat:"get_repeat",set_mapPoint:"set_mapPoint",get_mapPoint:"get_mapPoint",
set_mapTexture:"set_mapTexture",get_mapTexture:"get_mapTexture",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_componentY:"set_componentY",get_componentY:"get_componentY",set_componentX:"set_componentX",get_componentX:"get_componentX"})});e.filters.FragmentFilterMode=function(){};h["starling.filters.FragmentFilterMode"]=e.filters.FragmentFilterMode;e.filters.FragmentFilterMode.__name__=["starling","filters","FragmentFilterMode"];e.filters.FragmentFilterMode.prototype=
{FragmentFilterMode:function(){throw new e.errors.AbstractClassError;},__class__:e.filters.FragmentFilterMode};e.text={};e.text.BitmapChar=function(a,b,c,d,e){this.mCharID=a;this.mTexture=b;this.mXOffset=c;this.mYOffset=d;this.mXAdvance=e;this.mKernings=null};h["starling.text.BitmapChar"]=e.text.BitmapChar;e.text.BitmapChar.__name__=["starling","text","BitmapChar"];e.text.BitmapChar.prototype={addKerning:function(a,b){null==this.mKernings&&(this.mKernings=new m.ds.IntMap);this.mKernings.set(a,b);
b},getKerning:function(a){return null==this.mKernings||null==this.mKernings.get(a)?0:this.mKernings.get(a)},createImage:function(){return new e.display.Image(this.mTexture)},get_charID:function(){return this.mCharID},get_xOffset:function(){return this.mXOffset},get_yOffset:function(){return this.mYOffset},get_xAdvance:function(){return this.mXAdvance},get_texture:function(){return this.mTexture},get_width:function(){return this.mTexture.get_width()},get_height:function(){return this.mTexture.get_height()},
__class__:e.text.BitmapChar,__properties__:{get_height:"get_height",get_width:"get_width",get_texture:"get_texture",get_xAdvance:"get_xAdvance",get_yOffset:"get_yOffset",get_xOffset:"get_xOffset",get_charID:"get_charID"}};e.text.BitmapFont=function(a,b){null==a&&null==b&&(a=e.text.MiniBitmapFont.get_texture(),b=e.text.MiniBitmapFont.get_xml());this.mName="unknown";this.mLineHeight=this.mSize=this.mBaseline=14;this.mOffsetX=this.mOffsetY=0;this.mTexture=a;this.mChars=new m.ds.IntMap;this.mHelperImage=
new e.display.Image(a);this.mCharLocationPool=[];null!=b&&this.parseFontXml(b)};h["starling.text.BitmapFont"]=e.text.BitmapFont;e.text.BitmapFont.__name__=["starling","text","BitmapFont"];e.text.BitmapFont.prototype={dispose:function(){null!=this.mTexture&&this.mTexture.dispose()},parseFontXml:function(a){var b=this.mTexture.get_scale(),d=this.mTexture.get_frame(),h;h=null!=d?d.x:0;var d=null!=d?d.y:0,i=a.elementsNamed("info").next(),j=a.elementsNamed("common").next();this.mName=i.get("face");this.mSize=
k.parseFloat(i.get("size"))/b;this.mLineHeight=k.parseFloat(j.get("lineHeight"))/b;this.mBaseline=k.parseFloat(j.get("base"))/b;"0"==i.get("smooth")&&this.set_smoothing("none");0>=this.mSize&&(m.Log.trace("[Starling] Warning: invalid font size in '"+this.mName+"' font.",{fileName:"BitmapFont.hx",lineNumber:128,className:"starling.text.BitmapFont",methodName:"parseFontXml"}),this.mSize=0==this.mSize?16:-1*this.mSize);for(i=a.elementsNamed("chars").next().elementsNamed("char");i.hasNext();){var g=i.next(),
j=k.parseInt(g.get("id")),l=k.parseFloat(g.get("xoffset"))/b,q=k.parseFloat(g.get("yoffset"))/b,r=k.parseFloat(g.get("xadvance"))/b,n=new c.geom.Rectangle;n.x=k.parseFloat(g.get("x"))/b+h;n.y=k.parseFloat(g.get("y"))/b+d;n.width=k.parseFloat(g.get("width"))/b;n.height=k.parseFloat(g.get("height"))/b;g=e.textures.Texture.fromTexture(this.mTexture,n);l=new e.text.BitmapChar(j,g,l,q,r);this.addChar(j,l)}for(a=a.elementsNamed("kernings").next().elementsNamed("kerning");a.hasNext();)i=a.next(),h=k.parseInt(i.get("first")),
d=k.parseInt(i.get("second")),i=k.parseFloat(i.get("amount"))/b,this.mChars.exists(d)&&this.getChar(d).addKerning(h,i)},getChar:function(a){return this.mChars.get(a)},addChar:function(a,b){this.mChars.set(a,b);b},createSprite:function(a,b,c,d,i,j,g,h,k){null==k&&(k=!0);null==h&&(h=!0);null==g&&(g="center");null==j&&(j="center");null==i&&(i=16777215);null==d&&(d=-1);a=this.arrangeChars(a,b,c,d,j,g,h,k);b=a.length;c=new e.display.Sprite;for(d=0;d<b;)j=d++,j=a[j],g=j["char"].createImage(),g.set_x(j.x),
g.set_y(j.y),g.set_scaleX(g.set_scaleY(j.scale)),g.set_color(i),c.addChild(g);return c},fillQuadBatch:function(a,b,d,e,i,j,g,h,k,l){null==l&&(l=!0);null==k&&(k=!0);null==h&&(h="center");null==g&&(g="center");null==j&&(j=16777215);null==i&&(i=-1);b=this.arrangeChars(b,d,e,i,g,h,k,l);d=b.length;this.mHelperImage.set_color(j);if(8192<d)throw new c.errors.ArgumentError("Bitmap Font text is limited to 8192 characters.");for(j=0;j<d;)e=j++,e=b[e],this.mHelperImage.set_texture(e["char"].get_texture()),this.mHelperImage.readjustSize(),
this.mHelperImage.set_x(e.x),this.mHelperImage.set_y(e.y),this.mHelperImage.set_scaleX(this.mHelperImage.set_scaleY(e.scale)),a.addImage(this.mHelperImage)},arrangeChars:function(a,b,c,d,i,j,g,h){null==h&&(h=!0);null==g&&(g=!0);null==j&&(j="center");null==i&&(i="center");null==d&&(d=-1);if(null==c||0==c.length)return[];0>d&&(d*=-this.mSize);for(var k=[],l=!1,n,q,r=0,s=0,t=0,u=0,v=0;!l;){k=[];t=d/this.mSize;r=a/t;s=b/t;if(this.mLineHeight<=s){var x=-1,y=-1,B=[];q=c.length;for(var C=0;C<q;){var E=!1,
D=w.cca(c,C),F=this.getChar(D);if(10==D||13==D)E=!0;else if(null==F)m.Log.trace("[Starling] Missing character: "+D,{fileName:"BitmapFont.hx",lineNumber:272,className:"starling.text.BitmapFont",methodName:"arrangeChars"});else{if(32==D||9==D)x=C;h&&(u+=F.getKerning(y));n=0!=this.mCharLocationPool.length?this.mCharLocationPool.pop():new e.text.CharLocation(F);n["char"]=F;n.x=u+F.get_xOffset();n.y=v+F.get_yOffset();B.push(n);u+=F.get_xAdvance();y=D;if(n.x+F.get_width()>r){if(g&&-1==x)break;n=-1==x?1:
C-x;B.splice(B.length-n,n);if(0==B.length)break;C-=n;E=!0}}if(C==q-1)k.push(B),l=!0;else if(E)if(k.push(B),x==C&&B.pop(),v+2*this.mLineHeight<=s)B=[],u=0,v+=this.mLineHeight,y=x=-1;else break;++C}}g&&!l&&3<d?d-=1:l=!0}a=[];b=k.length;q=v+this.mLineHeight;v=0;"bottom"==j?v=s-q|0:"center"==j&&(v=(s-q)/2|0);for(j=0;j<b;)if(q=j++,s=k[q],q=s.length,0!=q){c=0;n=s[s.length-1];n=n.x-n["char"].get_xOffset()+n["char"].get_xAdvance();"right"==i?c=r-n|0:"center"==i&&(c=(r-n)/2|0);for(d=0;d<q;)n=d++,n=s[n],n.x=
t*(n.x+c+this.mOffsetX),n.y=t*(n.y+v+this.mOffsetY),n.scale=t,0<n["char"].get_width()&&0<n["char"].get_height()&&a.push(n),this.mCharLocationPool.push(n)}return a},get_name:function(){return this.mName},get_size:function(){return this.mSize},get_lineHeight:function(){return this.mLineHeight},set_lineHeight:function(a){this.mLineHeight=a},get_smoothing:function(){return this.mHelperImage.get_smoothing()},set_smoothing:function(a){return this.mHelperImage.set_smoothing(a)},get_baseline:function(){return this.mBaseline},
set_baseline:function(a){return this.mBaseline=a},get_offsetX:function(){return this.mOffsetX},set_offsetX:function(a){return this.mOffsetX=a},get_offsetY:function(){return this.mOffsetY},set_offsetY:function(a){return this.mOffsetY=a},__class__:e.text.BitmapFont,__properties__:{set_offsetY:"set_offsetY",get_offsetY:"get_offsetY",set_offsetX:"set_offsetX",get_offsetX:"get_offsetX",set_baseline:"set_baseline",get_baseline:"get_baseline",set_smoothing:"set_smoothing",get_smoothing:"get_smoothing",get_lineHeight:"get_lineHeight",
get_size:"get_size",get_name:"get_name"}};e.text.CharLocation=function(a){this["char"]=a};h["starling.text.CharLocation"]=e.text.CharLocation;e.text.CharLocation.__name__=["starling","text","CharLocation"];e.text.CharLocation.prototype={__class__:e.text.CharLocation};e.text.MiniBitmapFont=function(){};h["starling.text.MiniBitmapFont"]=e.text.MiniBitmapFont;e.text.MiniBitmapFont.__name__=["starling","text","MiniBitmapFont"];e.text.MiniBitmapFont.__properties__={get_xml:"get_xml",get_texture:"get_texture"};
e.text.MiniBitmapFont.get_texture=function(){return null};e.text.MiniBitmapFont.get_xml=function(){return e.text.MiniBitmapFont.XML_DATA};e.text.TextField=function(a,b,d,h,i,j,g){null==g&&(g=!1);null==j&&(j=0);null==i&&(i=12);null==h&&(h="Verdana");e.display.DisplayObjectContainer.call(this);this.mText=null!=d?d:"";this.mFontSize=i;this.mColor=j;this.mVAlign=this.mHAlign="center";this.mBorder=null;this.mKerning=!0;this.mBold=g;this.mAutoSize="none";this.mHitArea=new c.geom.Rectangle(0,0,a,b);this.set_fontName(h);
this.addEventListener("flatten",r(this,this.onFlatten))};h["starling.text.TextField"]=e.text.TextField;e.text.TextField.__name__=["starling","text","TextField"];e.text.TextField.__properties__={get_bitmapFonts:"get_bitmapFonts",set_defaultTextureFormat:"set_defaultTextureFormat",get_defaultTextureFormat:"get_defaultTextureFormat"};e.text.TextField.get_defaultTextureFormat=function(){return e.text.TextField.sDefaultTextureFormat};e.text.TextField.set_defaultTextureFormat=function(a){return e.text.TextField.sDefaultTextureFormat=
a};e.text.TextField.registerBitmapFont=function(a,b){null==b&&(b=a.get_name());var c=e.text.TextField.get_bitmapFonts(),d=b.toLowerCase();c.set(d,a);a;return b};e.text.TextField.unregisterBitmapFont=function(a,b){null==b&&(b=!0);var a=a.toLowerCase(),c;if(c=b)c=null!=e.text.TextField.get_bitmapFonts().get(a);c&&e.text.TextField.get_bitmapFonts().get(a).dispose();e.text.TextField.get_bitmapFonts().remove(a)};e.text.TextField.getBitmapFont=function(a){var b=e.text.TextField.get_bitmapFonts(),a=a.toLowerCase();
return b.get(a)};e.text.TextField.get_bitmapFonts=function(){var a=e.core.Starling.get_current().get_bitmapFonts();null==a&&(a=new m.ds.StringMap,e.core.Starling.get_current().set_bitmapFonts(a));return a};e.text.TextField.__super__=e.display.DisplayObjectContainer;e.text.TextField.prototype=q(e.display.DisplayObjectContainer.prototype,{dispose:function(){this.removeEventListener("flatten",r(this,this.onFlatten));null!=this.mImage&&this.mImage.get_texture().dispose();null!=this.mQuadBatch&&this.mQuadBatch.dispose();
e.display.DisplayObjectContainer.prototype.dispose.call(this)},onFlatten:function(){this.mRequiresRedraw&&this.redraw()},render:function(a,b){this.mRequiresRedraw&&this.redraw();e.display.DisplayObjectContainer.prototype.render.call(this,a,b)},redraw:function(){this.mRequiresRedraw&&(this.mIsRenderedText?this.createRenderedContents():this.createComposedContents(),this.updateBorder(),this.mRequiresRedraw=!1)},createRenderedContents:function(){var a=this;null!=this.mQuadBatch&&(this.mQuadBatch.removeFromParent(!0),
this.mQuadBatch=null);null==this.mTextBounds&&(this.mTextBounds=new c.geom.Rectangle);var b=e.core.Starling.get_current().get_contentScaleFactor(),d=this.renderText(b,this.mTextBounds),h=e.text.TextField.sDefaultTextureFormat;this.mHitArea.width=d.width/b;this.mHitArea.height=d.height/b;var i=e.textures.Texture.fromBitmapData(d,!1,!1,b,h);i.get_root().set_onRestore(function(){if(a.mTextBounds==null)a.mTextBounds=new c.geom.Rectangle;i.get_root().uploadBitmapData(a.renderText(b,a.mTextBounds))});d.dispose();
null==this.mImage?(this.mImage=new e.display.Image(i),this.mImage.set_touchable(!1),this.addChild(this.mImage)):(this.mImage.get_texture().dispose(),this.mImage.set_texture(i),this.mImage.readjustSize())},formatText:function(){},renderText:function(a,b){var d=this.mHitArea.width*a,h=this.mHitArea.height*a,i=this.mHAlign,j=this.mVAlign;this.get_isHorizontalAutoSize()&&(d=2147483647,i="left");this.get_isVerticalAutoSize()&&(h=2147483647,j="top");var g;switch(i){case "left":g=c.text.TextFormatAlign.LEFT;
break;case "center":g=c.text.TextFormatAlign.CENTER;break;case "right":g=c.text.TextFormatAlign.RIGHT;break;default:g=c.text.TextFormatAlign.LEFT}g=new c.text.TextFormat(this.mFontName,this.mFontSize*a,this.mColor,this.mBold,this.mItalic,this.mUnderline,null,null,g);g.kerning=this.mKerning;e.text.TextField.sNativeTextField.set_defaultTextFormat(g);e.text.TextField.sNativeTextField.set_width(d);e.text.TextField.sNativeTextField.set_height(h);e.text.TextField.sNativeTextField.antiAliasType="advanced";
e.text.TextField.sNativeTextField.selectable=!1;e.text.TextField.sNativeTextField.multiline=!0;e.text.TextField.sNativeTextField.set_wordWrap(!0);e.text.TextField.sNativeTextField.set_text(this.mText);e.text.TextField.sNativeTextField.embedFonts=!0;e.text.TextField.sNativeTextField.set_filters(this.mNativeFilters);if(0==e.text.TextField.sNativeTextField.get_textWidth()||0==e.text.TextField.sNativeTextField.get_textHeight())e.text.TextField.sNativeTextField.embedFonts=!1;this.formatText(e.text.TextField.sNativeTextField,
g);this.mAutoScale&&this.autoScaleNativeTextField(e.text.TextField.sNativeTextField);g=e.text.TextField.sNativeTextField.get_textWidth();var k=e.text.TextField.sNativeTextField.get_textHeight();this.get_isHorizontalAutoSize()&&e.text.TextField.sNativeTextField.set_width(d=Math.ceil(g+5));this.get_isVerticalAutoSize()&&e.text.TextField.sNativeTextField.set_height(h=Math.ceil(k+4));1>d&&(d=1);1>h&&(h=1);var l=0;"left"==i?l=2:"center"==i?l=(d-g)/2:"right"==i&&(l=d-g-2);var m=0;"top"==j?m=2:"center"==
j?m=(h-k)/2:"bottom"==j&&(m=h-k-2);i=this.calculateFilterOffset(e.text.TextField.sNativeTextField,i,j);d=new c.display.BitmapData(d|0,h|0,!0,0);h=new c.geom.Matrix(1,0,0,1,i.x,i.y+(m|0)-2);d.draw(e.text.TextField.sNativeTextField,h);e.text.TextField.sNativeTextField.set_text("");b.setTo((l+i.x)/a,(m+i.y)/a,g/a,k/a);return d},autoScaleNativeTextField:function(a){for(var b=a.get_defaultTextFormat().size,c=k["int"](a.get_height()-4),d=k["int"](a.get_width()-4);(a.get_textWidth()>d||a.get_textHeight()>
c)&&!(4>=b);){var e=a.get_defaultTextFormat();e.size=b--;a.setTextFormat(e)}},calculateFilterOffset:function(a,b,d){var h=new c.geom.Point,i=a.get_filters();if(null!=i&&0<i.length){for(var j=a.get_textWidth(),a=a.get_textHeight(),g=new c.geom.Rectangle,k=0;k<i.length;){var l=i[k];++k;var m=0,n=0;s.Boot.__instanceof(l,c.filters.BlurFilter)?(l=s.Boot.__cast(l,c.filters.BlurFilter),m=l.blurX,n=l.blurY):s.Boot.__instanceof(l,c.filters.DropShadowFilter)&&(l=s.Boot.__cast(l,c.filters.DropShadowFilter),
m=l.blurX,n=l.blurY);var l=e.utils.MathUtil.deg2rad(0),m=1.33*m,n=1.33*n,q=0*Math.cos(l)-m/2,l=0*Math.sin(l)-n/2,m=new c.geom.Rectangle(q,l,j+m,a+n),g=g.union(m)}"left"==b&&0>g.x?h.x=-g.x:"right"==b&&0<g.y&&(h.x=-(g.get_right()-j));"top"==d&&0>g.y?h.y=-g.y:"bottom"==d&&0<g.y&&(h.y=-(g.get_bottom()-a))}return h},createComposedContents:function(){null!=this.mImage&&(this.mImage.removeFromParent(!0),this.mImage.get_texture().dispose(),this.mImage=null);null==this.mQuadBatch?(this.mQuadBatch=new e.display.QuadBatch,
this.mQuadBatch.set_touchable(!1),this.addChild(this.mQuadBatch)):this.mQuadBatch.reset();var a=e.text.TextField.getBitmapFont(this.mFontName);if(null==a)throw new c.errors.Error("Bitmap font not registered: "+this.mFontName);var b=this.mHitArea.width,d=this.mHitArea.height,h=this.mHAlign,i=this.mVAlign;this.get_isHorizontalAutoSize()&&(b=2147483647,h="left");this.get_isVerticalAutoSize()&&(d=2147483647,i="top");a.fillQuadBatch(this.mQuadBatch,b,d,this.mText,this.mFontSize,this.mColor,h,i,this.mAutoScale,
this.mKerning);this.mQuadBatch.set_batchable(this.mBatchable);if("none"!=this.mAutoSize){if(this.mTextBounds=this.mQuadBatch.getBounds(this.mQuadBatch,this.mTextBounds),this.get_isHorizontalAutoSize()&&(this.mHitArea.width=this.mTextBounds.x+this.mTextBounds.width),this.get_isVerticalAutoSize())this.mHitArea.height=this.mTextBounds.y+this.mTextBounds.height}else this.mTextBounds=null},updateBorder:function(){if(null!=this.mBorder){var a=this.mHitArea.width,b=this.mHitArea.height,c;c=s.Boot.__cast(this.mBorder.getChildAt(0),
e.display.Quad);var d;d=s.Boot.__cast(this.mBorder.getChildAt(1),e.display.Quad);var i;i=s.Boot.__cast(this.mBorder.getChildAt(2),e.display.Quad);var j;j=s.Boot.__cast(this.mBorder.getChildAt(3),e.display.Quad);c.set_width(a);c.set_height(1);i.set_width(a);i.set_height(1);j.set_width(1);j.set_height(b);d.set_width(1);d.set_height(b);d.set_x(a-1);i.set_y(b-1);c.set_color(d.set_color(i.set_color(j.set_color(this.mColor))))}},get_isHorizontalAutoSize:function(){return"horizontal"==this.mAutoSize||"bothDirections"==
this.mAutoSize},get_isVerticalAutoSize:function(){return"vertical"==this.mAutoSize||"bothDirections"==this.mAutoSize},get_textBounds:function(){this.mRequiresRedraw&&this.redraw();null==this.mTextBounds&&(this.mTextBounds=this.mQuadBatch.getBounds(this.mQuadBatch));return this.mTextBounds.clone()},getBounds:function(a,b){this.mRequiresRedraw&&this.redraw();this.getTransformationMatrix(a,e.text.TextField.sHelperMatrix);return e.utils.RectangleUtil.getBounds(this.mHitArea,e.text.TextField.sHelperMatrix,
b)},hitTest:function(a,b){null==b&&(b=!1);return b&&(!this.get_visible()||!this.get_touchable())?null:this.mHitArea.containsPoint(a)?this:null},set_width:function(a){this.mHitArea.width=a;this.mRequiresRedraw=!0;return e.display.DisplayObjectContainer.prototype.get_width.call(this)},set_height:function(a){this.mHitArea.height=a;this.mRequiresRedraw=!0;return e.display.DisplayObjectContainer.prototype.get_height.call(this)},get_text:function(){return this.mText},set_text:function(a){null==a&&(a="");
this.mText!=a&&(this.mText=a,this.mRequiresRedraw=!0);return this.mText},get_fontName:function(){return this.mFontName},set_fontName:function(a){if(this.mFontName!=a){var b;if(b="mini"==a)b=null==e.text.TextField.get_bitmapFonts().get(a);b&&e.text.TextField.registerBitmapFont(new e.text.BitmapFont);this.mFontName=a;this.mRequiresRedraw=!0;this.mIsRenderedText=null==e.text.TextField.getBitmapFont(a)}return this.mFontName},get_fontSize:function(){return this.mFontSize},set_fontSize:function(a){this.mFontSize!=
a&&(this.mFontSize=a,this.mRequiresRedraw=!0);return this.mFontSize},get_color:function(){return this.mColor},set_color:function(a){var b=this.mColor;if((0>b?4294967296+b:b+0)!=(0>a?4294967296+a:a+0))this.mColor=a,this.mRequiresRedraw=!0;return this.mColor},get_hAlign:function(){return this.mHAlign},set_hAlign:function(a){if(!e.utils.HAlign.isValid(a))throw new c.errors.ArgumentError("Invalid horizontal align: "+a);this.mHAlign!=a&&(this.mHAlign=a,this.mRequiresRedraw=!0);return this.mHAlign},get_vAlign:function(){return this.mVAlign},
set_vAlign:function(a){if(!e.utils.VAlign.isValid(a))throw new c.errors.ArgumentError("Invalid vertical align: "+a);this.mVAlign!=a&&(this.mVAlign=a,this.mRequiresRedraw=!0);return this.mVAlign},get_border:function(){return null!=this.mBorder},set_border:function(a){if(a&&null==this.mBorder){this.mBorder=new e.display.Sprite;this.addChild(this.mBorder);for(a=0;4>a;)a++,this.mBorder.addChild(new e.display.Quad(1,1));this.updateBorder()}else!a&&null!=this.mBorder&&(this.mBorder.removeFromParent(!0),
this.mBorder=null);return null!=this.mBorder},get_bold:function(){return this.mBold},set_bold:function(a){this.mBold!=a&&(this.mBold=a,this.mRequiresRedraw=!0);return this.mBold},get_italic:function(){return this.mItalic},set_italic:function(a){this.mItalic!=a&&(this.mItalic=a,this.mRequiresRedraw=!0);return this.mItalic},get_underline:function(){return this.mUnderline},set_underline:function(a){this.mUnderline!=a&&(this.mUnderline=a,this.mRequiresRedraw=!0);return this.mUnderline},get_kerning:function(){return this.mKerning},
set_kerning:function(a){this.mKerning!=a&&(this.mKerning=a,this.mRequiresRedraw=!0);return this.mKerning},get_autoScale:function(){return this.mAutoScale},set_autoScale:function(a){this.mAutoScale!=a&&(this.mAutoScale=a,this.mRequiresRedraw=!0);return this.mAutoScale},get_autoSize:function(){return this.mAutoSize},set_autoSize:function(a){this.mAutoSize!=a&&(this.mAutoSize=a,this.mRequiresRedraw=!0);return this.get_autoSize()},get_batchable:function(){return this.mBatchable},set_batchable:function(a){this.mBatchable=
a;null!=this.mQuadBatch&&this.mQuadBatch.set_batchable(a);return this.mBatchable},get_nativeFilters:function(){return this.mNativeFilters},set_nativeFilters:function(a){if(!this.mIsRenderedText)throw new c.errors.Error("The TextField.nativeFilters property cannot be used on Bitmap fonts.");this.mNativeFilters=a.slice();this.mRequiresRedraw=!0;return this.mNativeFilters},__class__:e.text.TextField,__properties__:q(e.display.DisplayObjectContainer.prototype.__properties__,{set_nativeFilters:"set_nativeFilters",
get_nativeFilters:"get_nativeFilters",set_batchable:"set_batchable",get_batchable:"get_batchable",set_autoSize:"set_autoSize",get_autoSize:"get_autoSize",set_autoScale:"set_autoScale",get_autoScale:"get_autoScale",set_kerning:"set_kerning",get_kerning:"get_kerning",set_underline:"set_underline",get_underline:"get_underline",set_italic:"set_italic",get_italic:"get_italic",set_bold:"set_bold",get_bold:"get_bold",set_border:"set_border",get_border:"get_border",set_vAlign:"set_vAlign",get_vAlign:"get_vAlign",
set_hAlign:"set_hAlign",get_hAlign:"get_hAlign",set_color:"set_color",get_color:"get_color",set_fontSize:"set_fontSize",get_fontSize:"get_fontSize",set_fontName:"set_fontName",get_fontName:"get_fontName",set_text:"set_text",get_text:"get_text",get_textBounds:"get_textBounds",get_isVerticalAutoSize:"get_isVerticalAutoSize",get_isHorizontalAutoSize:"get_isHorizontalAutoSize"})});e.text.TextFieldAutoSize=function(){};h["starling.text.TextFieldAutoSize"]=e.text.TextFieldAutoSize;e.text.TextFieldAutoSize.__name__=
["starling","text","TextFieldAutoSize"];e.text.TextFieldAutoSize.prototype={TextFieldAutoSize:function(){throw new e.errors.AbstractClassError;},__class__:e.text.TextFieldAutoSize};e.textures={};e.textures.AtfData=function(a){if(!e.textures.AtfData.isAtfData(a))throw new c.errors.ArgumentError("Invalid ATF data");a.position=255==a[6]?12:6;switch(a.readUnsignedByte()){case 0:case 1:this.mFormat="bgra";break;case 2:case 3:this.mFormat="compressed";break;case 4:case 5:this.mFormat="compressedAlpha";
break;default:throw new c.errors.Error("Invalid ATF format");}this.mWidth=k["int"](Math.pow(2,a.readUnsignedByte()));this.mHeight=k["int"](Math.pow(2,a.readUnsignedByte()));this.mNumTextures=a.readUnsignedByte();this.mData=a;if(0!=a[5]&&255==a[6]){var b=a[5]>>1&127;this.mNumTextures=1==(a[5]&1)?1:b}};h["starling.textures.AtfData"]=e.textures.AtfData;e.textures.AtfData.__name__=["starling","textures","AtfData"];e.textures.AtfData.isAtfData=function(a){if(3>a.length)return!1;for(var b="",c=0;3>c;)var d=
c++,b=b+String.fromCharCode(a[d]);return"ATF"==b};e.textures.AtfData.prototype={get_format:function(){return this.mFormat},get_width:function(){return this.mWidth},get_height:function(){return this.mHeight},get_numTextures:function(){return this.mNumTextures},get_data:function(){return this.mData},__class__:e.textures.AtfData,__properties__:{get_data:"get_data",get_numTextures:"get_numTextures",get_height:"get_height",get_width:"get_width",get_format:"get_format"}};e.textures.Texture=function(){};
h["starling.textures.Texture"]=e.textures.Texture;e.textures.Texture.__name__=["starling","textures","Texture"];e.textures.Texture.fromData=function(a,b){var d=null;s.Boot.__instanceof(a,c.display.Bitmap)&&(a=s.Boot.__cast(a,c.display.Bitmap).bitmapData);null==b&&(b=new e.textures.TextureOptions);if(s.Boot.__instanceof(a,aa))d=e.textures.Texture.fromEmbeddedAsset(s.Boot.__cast(a,aa),b.get_mipMapping(),b.get_optimizeForRenderToTexture(),b.get_scale(),b.get_format(),b.get_repeat());else if(s.Boot.__instanceof(a,
c.display.BitmapData))d=e.textures.Texture.fromBitmapData(s.Boot.__cast(a,c.display.BitmapData),b.get_mipMapping(),b.get_optimizeForRenderToTexture(),b.get_scale(),b.get_format(),b.get_repeat());else if(s.Boot.__instanceof(a,c.utils.ByteArray))d=e.textures.Texture.fromAtfData(s.Boot.__cast(a,c.utils.ByteArray),b.get_scale(),b.get_mipMapping(),b.get_onReady(),b.get_repeat());else throw new c.errors.ArgumentError("Unsupported 'data' type: "+B.getClassName(a));return d};e.textures.Texture.fromEmbeddedAsset=
function(a,b,d,h,i,j){null==j&&(j=!1);null==i&&(i="bgra");null==h&&(h=1);null==d&&(d=!1);null==b&&(b=!0);var g,d=B.createEmptyInstance(a);if(s.Boot.__instanceof(d,c.display.Bitmap))g=e.textures.Texture.fromBitmap(s.Boot.__cast(d,c.display.Bitmap),b,!1,h,i,j),g.get_root().set_onRestore(function(){g.get_root().uploadBitmap(B.createInstance(a,[]))});else if(s.Boot.__instanceof(d,c.utils.ByteArray))g=e.textures.Texture.fromAtfData(s.Boot.__cast(d,c.utils.ByteArray),h,b,null,j),g.get_root().set_onRestore(function(){g.get_root().uploadAtfData(B.createInstance(a,
[]))});else throw new c.errors.ArgumentError("Invalid asset type: "+B.getClassName(d));d=null;return g};e.textures.Texture.fromBitmap=function(a,b,c,d,i,j){null==j&&(j=!1);null==i&&(i="bgra");null==d&&(d=1);null==c&&(c=!1);null==b&&(b=!0);return e.textures.Texture.fromBitmapData(a.bitmapData,b,c,d,i,j)};e.textures.Texture.fromBitmapData=function(a,b,c,d,i,j){null==j&&(j=!1);null==i&&(i="bgra");null==d&&(d=1);null==c&&(c=!1);null==b&&(b=!0);var g=e.textures.Texture.empty(a.width/d,a.height/d,!1,b,
c,d,i,j);g.get_root().uploadBitmapData(a);g.get_root().set_onRestore(function(){g.get_root().uploadBitmapData(a)});return g};e.textures.Texture.fromAtfData=function(a,b,c,d,i){null==i&&(i=!1);null==c&&(c=!0);null==b&&(b=1);var j=e.core.Starling.get_current().get_context();if(null==j)throw new e.errors.MissingContextError;var g=new e.textures.AtfData(a),j=j.createTexture(g.get_width(),g.get_height(),e.utils.TextureUtils.ToContext3DTextureFormat(g.get_format()),!1),h=new e.textures.ConcreteTexture(j,
g.get_format(),g.get_width(),g.get_height(),c&&1<g.get_numTextures(),!1,!1,b,i);h.uploadAtfData(a,0,d);h.set_onRestore(function(){h.uploadAtfData(a,0)});return h};e.textures.Texture.fromColor=function(a,b,c,d,i,j){null==j&&(j="bgra");null==i&&(i=-1);null==d&&(d=!1);null==c&&(c=-1);var g=e.textures.Texture.empty(a,b,!0,!1,d,i,j);g.get_root().clear(c,e.utils.Color.getAlpha(c)/255);g.get_root().set_onRestore(function(){g.get_root().clear(c,e.utils.Color.getAlpha(c)/255)});return g};e.textures.Texture.empty=
function(a,b,d,h,i,j,g,k){null==k&&(k=!1);null==g&&(g="bgra");null==j&&(j=-1);null==i&&(i=!1);null==h&&(h=!0);null==d&&(d=!0);0>=j&&(j=e.core.Starling.get_current().get_contentScaleFactor());var l,m,n;n=e.core.Starling.get_current().get_context();if(null==n)throw new e.errors.MissingContextError;l=a*j|0;m=b*j|0;var q=e.utils.PowerOfTwo.getNextPowerOfTwo(l),s=e.utils.PowerOfTwo.getNextPowerOfTwo(m),t=l==q&&m==s,u=!h&&!k&&"baselineConstrained"!=e.core.Starling.get_current().get_profile()&&"compressed"!=
g;u?n=n.createRectangleTexture(l,m,e.utils.TextureUtils.ToContext3DTextureFormat(g),i):(l=q,m=s,n=n.createTexture(l,m,e.utils.TextureUtils.ToContext3DTextureFormat(g),i));d=new e.textures.ConcreteTexture(n,g,l,m,h,d,i,j,k);d.set_onRestore(r(d,d.clear));return t||u?d:new e.textures.SubTexture(d,new c.geom.Rectangle(0,0,a,b),!0)};e.textures.Texture.fromTexture=function(a,b,c,d){null==d&&(d=!1);return new e.textures.SubTexture(a,b,!1,c,d)};e.textures.Texture.prototype={dispose:function(){},adjustVertexData:function(){},
adjustTexCoords:function(){},get_frame:function(){return null},get_repeat:function(){return!1},get_width:function(){return 0},get_height:function(){return 0},get_nativeWidth:function(){return 0},get_nativeHeight:function(){return 0},get_scale:function(){return 1},get_base:function(){return null},get_root:function(){return null},get_format:function(){return"bgra"},get_mipMapping:function(){return!1},get_premultipliedAlpha:function(){return!1},__class__:e.textures.Texture,__properties__:{get_premultipliedAlpha:"get_premultipliedAlpha",
get_mipMapping:"get_mipMapping",get_format:"get_format",get_root:"get_root",get_base:"get_base",get_scale:"get_scale",get_nativeHeight:"get_nativeHeight",get_nativeWidth:"get_nativeWidth",get_height:"get_height",get_width:"get_width",get_repeat:"get_repeat",get_frame:"get_frame"}};e.textures.ConcreteTexture=function(a,b,c,d,i,h,g,k,l){null==l&&(l=!1);null==k&&(k=1);null==g&&(g=!1);e.textures.Texture.call(this);this.mScale=0>=k?1:k;this.mBase=a;this.mFormat=b;this.mWidth=c;this.mHeight=d;this.mMipMapping=
i;this.mPremultipliedAlpha=h;this.mOptimizedForRenderTexture=g;this.mRepeat=l;this.mOnRestore=null;this.mDataUploaded=!1};h["starling.textures.ConcreteTexture"]=e.textures.ConcreteTexture;e.textures.ConcreteTexture.__name__=["starling","textures","ConcreteTexture"];e.textures.ConcreteTexture.__super__=e.textures.Texture;e.textures.ConcreteTexture.prototype=q(e.textures.Texture.prototype,{dispose:function(){null!=this.mBase&&this.mBase.dispose();this.set_onRestore(null);e.textures.Texture.prototype.dispose.call(this)},
uploadBitmap:function(a){this.uploadBitmapData(a.bitmapData)},uploadBitmapData:function(a){var b=null;if(a.width!=this.mWidth||a.height!=this.mHeight)b=new c.display.BitmapData(this.mWidth,this.mHeight,!0,0),b.copyPixels(a,a.rect,e.textures.ConcreteTexture.sOrigin),a=b;if(s.Boot.__instanceof(this.mBase,c.display3D.textures.Texture)){var d;d=s.Boot.__cast(this.mBase,c.display3D.textures.Texture);d.uploadFromBitmapData(a);if(this.mMipMapping&&1<a.width&&1<a.height){for(var h=a.width>>1,i=a.height>>
1,j=1,g=new c.display.BitmapData(h,i,!0,0),k=new c.geom.Matrix(0.5,0,0,0.5),l=new c.geom.Rectangle;1<=h||1<=i;)l.width=h,l.height=i,g.fillRect(l,0),g.draw(a,k,null,null,null,!0),d.uploadFromBitmapData(g,j++),k.scale(0.5,0.5),h>>=1,i>>=1;g.dispose()}}else s.Boot.__instanceof(this.mBase,c.display3D.textures.RectangleTexture)&&s.Boot.__cast(this.mBase,c.display3D.textures.RectangleTexture).uploadFromBitmapData(a);null!=b&&b.dispose();this.mDataUploaded=!0},uploadAtfData:function(a,b,d){null==b&&(b=0);
var e=null!=d,i;i=s.Boot.__cast(this.mBase,c.display3D.textures.Texture);var h,g=null;h=g=function(){i.removeEventListener("textureReady",g)};if(null==i)throw new c.errors.Error("This texture type does not support ATF data");E.isFunction(d)&&i.addEventListener("textureReady",h);i.uploadCompressedTextureFromByteArray(a,b,e);this.mDataUploaded=!0},onContextCreated:function(){this.createBase();this.mOnRestore();this.mDataUploaded||this.clear()},createBase:function(){var a=e.core.Starling.get_current().get_context();
s.Boot.__instanceof(this.mBase,c.display3D.textures.Texture)?this.mBase=a.createTexture(this.mWidth,this.mHeight,e.utils.TextureUtils.ToContext3DTextureFormat(this.mFormat),this.mOptimizedForRenderTexture):s.Boot.__instanceof(this.mBase,c.display3D.textures.RectangleTexture)&&(this.mBase=a.createRectangleTexture(this.mWidth,this.mHeight,e.utils.TextureUtils.ToContext3DTextureFormat(this.mFormat),this.mOptimizedForRenderTexture));this.mDataUploaded=!1},clear:function(a,b){null==b&&(b=0);null==a&&(a=
0);var d=e.core.Starling.get_current().get_context();if(null==d)throw new e.errors.MissingContextError;this.mPremultipliedAlpha&&1>b&&(a=e.utils.Color.rgb(k["int"](e.utils.Color.getRed(a)*b),k["int"](e.utils.Color.getGreen(a)*b),k["int"](e.utils.Color.getBlue(a)*b)));d.setRenderToTexture(this.mBase);try{e.core.RenderSupport._clear(a,b)}catch(h){if(!s.Boot.__instanceof(h,c.errors.Error))throw h;}d.setRenderToBackBuffer();this.mDataUploaded=!0},get_optimizedForRenderTexture:function(){return this.mOptimizedForRenderTexture},
get_onRestore:function(){return this.mOnRestore},set_onRestore:function(a){e.core.Starling.get_current().removeEventListener("context3DCreate",r(this,this.onContextCreated));e.core.Starling.get_handleLostContext()&&null!=a?(this.mOnRestore=a,e.core.Starling.get_current().addEventListener("context3DCreate",r(this,this.onContextCreated))):this.mOnRestore=null;return this.mOnRestore},get_base:function(){return this.mBase},get_root:function(){return this},get_format:function(){return this.mFormat},get_width:function(){return this.mWidth/
this.mScale},get_height:function(){return this.mHeight/this.mScale},get_nativeWidth:function(){return this.mWidth},get_nativeHeight:function(){return this.mHeight},get_scale:function(){return this.mScale},get_mipMapping:function(){return this.mMipMapping},get_premultipliedAlpha:function(){return this.mPremultipliedAlpha},get_repeat:function(){return this.mRepeat},__class__:e.textures.ConcreteTexture,__properties__:q(e.textures.Texture.prototype.__properties__,{set_onRestore:"set_onRestore",get_onRestore:"get_onRestore",
get_optimizedForRenderTexture:"get_optimizedForRenderTexture"})});e.textures.SubTexture=function(a,b,d,h,i){null==i&&(i=!1);null==d&&(d=!1);e.textures.Texture.call(this);null==b&&(b=new c.geom.Rectangle(0,0,a.get_width(),a.get_height()));this.mParent=a;this.mFrame=null!=h?h.clone():null;this.mOwnsParent=d;this.mWidth=(this.mRotated=i)?b.height:b.width;this.mHeight=i?b.width:b.height;this.mTransformationMatrix=new c.geom.Matrix;i&&(this.mTransformationMatrix.translate(0,-1),this.mTransformationMatrix.rotate(Math.PI/
2));this.mTransformationMatrix.scale(b.width/this.mParent.get_width(),b.height/this.mParent.get_height());this.mTransformationMatrix.translate(b.x/this.mParent.get_width(),b.y/this.mParent.get_height())};h["starling.textures.SubTexture"]=e.textures.SubTexture;e.textures.SubTexture.__name__=["starling","textures","SubTexture"];e.textures.SubTexture.__super__=e.textures.Texture;e.textures.SubTexture.prototype=q(e.textures.Texture.prototype,{dispose:function(){this.mOwnsParent&&this.mParent.dispose();
e.textures.Texture.prototype.dispose.call(this)},adjustVertexData:function(a,b,d){this.adjustTexCoords(a.get_rawData(),8*b+6,6,d);if(null!=this.mFrame){if(4!=d)throw new c.errors.ArgumentError("Textures with a frame can only be used on quads");var d=this.mFrame.width+this.mFrame.x-this.mWidth,e=this.mFrame.height+this.mFrame.y-this.mHeight;a.translateVertex(b,-this.mFrame.x,-this.mFrame.y);a.translateVertex(b+1,-d,-this.mFrame.y);a.translateVertex(b+2,-this.mFrame.x,-e);a.translateVertex(b+3,-d,-e)}},
adjustTexCoords:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);0>d&&(d=(a.length-b-2)/(c+2)+1|0);var d=b+d*(2+c),i=this;for(e.textures.SubTexture.sMatrix.identity();null!=i;)e.textures.SubTexture.sMatrix.concat(i.mTransformationMatrix),i=k.is(i.get_parent(),e.textures.SubTexture)?s.Boot.__cast(i.get_parent(),e.textures.SubTexture):null;for(var h=b;h<d;)b=a[h],i=a[h+1|0],e.utils.MatrixUtil.transformCoords(e.textures.SubTexture.sMatrix,b,i,e.textures.SubTexture.sTexCoords),a[h]=e.textures.SubTexture.sTexCoords.x,
a[h+1|0]=e.textures.SubTexture.sTexCoords.y,h+=2+c},get_parent:function(){return this.mParent},get_ownsParent:function(){return this.mOwnsParent},get_rotated:function(){return this.mRotated},get_clipping:function(){var a=new c.geom.Point,b=new c.geom.Point;e.utils.MatrixUtil.transformCoords(this.mTransformationMatrix,0,0,a);e.utils.MatrixUtil.transformCoords(this.mTransformationMatrix,1,1,b);a=new c.geom.Rectangle(a.x,a.y,b.x-a.x,b.y-a.y);e.utils.RectangleUtil.normalize(a);return a},get_transformationMatrix:function(){return this.mTransformationMatrix},
get_base:function(){return this.mParent.get_base()},get_root:function(){return this.mParent.get_root()},get_format:function(){return this.mParent.get_format()},get_width:function(){return this.mWidth},get_height:function(){return this.mHeight},get_nativeWidth:function(){return this.mWidth*this.get_scale()},get_nativeHeight:function(){return this.mHeight*this.get_scale()},get_mipMapping:function(){return this.mParent.get_mipMapping()},get_premultipliedAlpha:function(){return this.mParent.get_premultipliedAlpha()},
get_scale:function(){return this.mParent.get_scale()},get_repeat:function(){return this.mParent.get_repeat()},get_frame:function(){return this.mFrame},__class__:e.textures.SubTexture,__properties__:q(e.textures.Texture.prototype.__properties__,{get_transformationMatrix:"get_transformationMatrix",get_clipping:"get_clipping",get_rotated:"get_rotated",get_ownsParent:"get_ownsParent",get_parent:"get_parent"})});e.textures.RenderTexture=function(a,b,d,h){null==h&&(h=-1);null==d&&(d=!0);0>=h&&(h=e.core.Starling.get_current().get_contentScaleFactor());
var i=a,j=b;this.get_supportsNonPotDimensions()||(i=e.utils.PowerOfTwo.getNextPowerOfTwo(a*h|0)/h,j=e.utils.PowerOfTwo.getNextPowerOfTwo(b*h|0)/h);this.mActiveTexture=e.textures.Texture.empty(i,j,!0,!1,!0,h);this.mActiveTexture.get_root().set_onRestore((W=this.mActiveTexture.get_root(),r(W,W.clear)));e.textures.SubTexture.call(this,this.mActiveTexture,new c.geom.Rectangle(0,0,a,b),!0,null,!1);a=this.mActiveTexture.get_root().get_width();b=this.mActiveTexture.get_root().get_height();this.mSupport=
new e.core.RenderSupport;this.mSupport.setOrthographicProjection(0,0,a,b);d&&(this.mBufferTexture=e.textures.Texture.empty(i,j,!0,!1,!0,h),this.mBufferTexture.get_root().set_onRestore((W=this.mBufferTexture.get_root(),r(W,W.clear))),this.mHelperImage=new e.display.Image(this.mBufferTexture),this.mHelperImage.set_smoothing("none"))};h["starling.textures.RenderTexture"]=e.textures.RenderTexture;e.textures.RenderTexture.__name__=["starling","textures","RenderTexture"];e.textures.RenderTexture.__super__=
e.textures.SubTexture;e.textures.RenderTexture.prototype=q(e.textures.SubTexture.prototype,{dispose:function(){this.mSupport.dispose();this.mActiveTexture.dispose();this.get_isPersistent()&&(this.mBufferTexture.dispose(),this.mHelperImage.dispose());e.textures.SubTexture.prototype.dispose.call(this)},draw:function(a,b,c,d){null==d&&(d=0);null==c&&(c=1);null!=a&&(this.mDrawing?this.render(a,b,c):this.renderBundled(r(this,this.render),a,b,c,d))},drawBundled:function(a,b){null==b&&(b=0);this.renderBundled(a,
null,null,1,b)},render:function(a,b,c){null==c&&(c=1);this.mSupport.loadIdentity();this.mSupport.set_blendMode(a.get_blendMode());null!=b?this.mSupport.prependMatrix(b):this.mSupport.transformMatrix(a);a.render(this.mSupport,c)},renderBundled:function(a,b,c,d,i){null==i&&(i=0);null==d&&(d=1);if(null==e.core.Starling.get_current().get_context())throw new e.errors.MissingContextError;if(this.get_isPersistent()){var h=this.mActiveTexture;this.mActiveTexture=this.mBufferTexture;this.mBufferTexture=h;
this.mHelperImage.set_texture(this.mBufferTexture)}e.textures.RenderTexture.sClipRect.setTo(0,0,this.mActiveTexture.get_width(),this.mActiveTexture.get_height());this.mSupport.pushClipRect(e.textures.RenderTexture.sClipRect);this.mSupport.setRenderTarget(this.mActiveTexture,i);this.mSupport.clear();this.get_isPersistent()&&this.mBufferReady?this.mHelperImage.render(this.mSupport,1):this.mBufferReady=!0;this.mDrawing=!0;a(b,c,d);this.mDrawing=!1;this.mSupport.finishQuadBatch();this.mSupport.nextFrame();
this.mSupport.set_renderTarget(null);this.mSupport.popClipRect()},clear:function(a,b){null==b&&(b=0);null==a&&(a=0);if(null==e.core.Starling.get_current().get_context())throw new e.errors.MissingContextError;this.mSupport.set_renderTarget(this.mActiveTexture);this.mSupport.clear(a,b);this.mSupport.set_renderTarget(null)},get_supportsNonPotDimensions:function(){return!0},get_isPersistent:function(){return null!=this.mBufferTexture},get_base:function(){return this.mActiveTexture.get_base()},get_root:function(){return this.mActiveTexture.get_root()},
__class__:e.textures.RenderTexture,__properties__:q(e.textures.SubTexture.prototype.__properties__,{get_isPersistent:"get_isPersistent",get_supportsNonPotDimensions:"get_supportsNonPotDimensions"})});e.textures.TextureAtlas=function(a,b){this.mTextureInfos=new m.ds.StringMap;this.mAtlasTexture=a;null!=b&&this.parseAtlasXml(b)};h["starling.textures.TextureAtlas"]=e.textures.TextureAtlas;e.textures.TextureAtlas.__name__=["starling","textures","TextureAtlas"];e.textures.TextureAtlas.parseBool=function(a){return null!=
a?"true"==a.toLowerCase():!1};e.textures.TextureAtlas.prototype={dispose:function(){this.mAtlasTexture.dispose()},parseAtlasXml:function(a){for(var b=this.mAtlasTexture.get_scale(),a=a.elementsNamed("SubTexture");a.hasNext();){var d=a.next(),h=d.get("name"),i=k.parseFloat(d.get("x"))/b,j=k.parseFloat(d.get("y"))/b,g=k.parseFloat(d.get("width"))/b,l=k.parseFloat(d.get("height"))/b,m=k.parseFloat(d.get("frameX"))/b,q=k.parseFloat(d.get("frameY"))/b,n=k.parseFloat(d.get("frameWidth"))/b,r=k.parseFloat(d.get("frameHeight"))/
b,d=e.textures.TextureAtlas.parseBool(d.get("rotated")),i=new c.geom.Rectangle(i,j,g,l),m=0<n&&0<r?new c.geom.Rectangle(m,q,n,r):null;this.addRegion(h,i,m,d)}},getTexture:function(a){a=this.mTextureInfos.get(a);return null==a?null:e.textures.Texture.fromTexture(this.mAtlasTexture,a.region,a.frame,a.rotated)},getTextures:function(a,b){null==a&&(a="");null==b&&(b=[]);for(var c=0,d=this.getNames(a,e.textures.TextureAtlas.sNames);c<d.length;){var i=d[c];++c;b.push(this.getTexture(i))}e.textures.TextureAtlas.sNames=
[];return b},getNames:function(a,b){null==a&&(a="");null==b&&(b=[]);for(var c=this.mTextureInfos.keys();c.hasNext();){var d=c.next();0==d.indexOf(a)&&b.push(d)}b.sort(r(this,this.compare));return b},getRegion:function(a){a=this.mTextureInfos.get(a);return null!=a?a.region:null},getFrame:function(a){a=this.mTextureInfos.get(a);return null!=a?a.frame:null},getRotation:function(a){a=this.mTextureInfos.get(a);return null!=a?a.rotated:!1},addRegion:function(a,b,c,d){null==d&&(d=!1);b=new e.textures.TextureInfo(b,
c,d);this.mTextureInfos.set(a,b);b},removeRegion:function(a){this.mTextureInfos.remove(a)},get_texture:function(){return this.mAtlasTexture},compare:function(a,b){return a<b?-1:a>b?1:0},__class__:e.textures.TextureAtlas,__properties__:{get_texture:"get_texture"}};e.textures.TextureInfo=function(a,b,c){this.region=a;this.frame=b;this.rotated=c};h["starling.textures.TextureInfo"]=e.textures.TextureInfo;e.textures.TextureInfo.__name__=["starling","textures","TextureInfo"];e.textures.TextureInfo.prototype=
{__class__:e.textures.TextureInfo};e.textures.TextureOptions=function(a,b,c,d){null==d&&(d=!1);null==c&&(c="bgra");null==b&&(b=!1);null==a&&(a=1);this.mRepeat=!1;this.mOnReady=null;this.mOptimizeForRenderToTexture=!1;this.mScale=a;this.mFormat=c;this.mMipMapping=b;this.mRepeat=d};h["starling.textures.TextureOptions"]=e.textures.TextureOptions;e.textures.TextureOptions.__name__=["starling","textures","TextureOptions"];e.textures.TextureOptions.prototype={clone:function(){var a=new e.textures.TextureOptions(this.mScale,
this.mMipMapping,this.mFormat,this.mRepeat);a.mOptimizeForRenderToTexture=this.mOptimizeForRenderToTexture;a.mOnReady=this.mOnReady;return a},get_scale:function(){return this.mScale},set_scale:function(a){return this.mScale=0<a?a:e.core.Starling.get_current().get_contentScaleFactor()},get_format:function(){return this.mFormat},set_format:function(a){return this.mFormat=a},get_mipMapping:function(){return this.mMipMapping},set_mipMapping:function(a){return this.mMipMapping=a},get_optimizeForRenderToTexture:function(){return this.mOptimizeForRenderToTexture},
set_optimizeForRenderToTexture:function(a){return this.mOptimizeForRenderToTexture=a},get_repeat:function(){return this.mRepeat},set_repeat:function(a){return this.mRepeat=a},get_onReady:function(){return this.mOnReady},set_onReady:function(a){return this.mOnReady=a},__class__:e.textures.TextureOptions,__properties__:{set_onReady:"set_onReady",get_onReady:"get_onReady",set_repeat:"set_repeat",get_repeat:"get_repeat",set_optimizeForRenderToTexture:"set_optimizeForRenderToTexture",get_optimizeForRenderToTexture:"get_optimizeForRenderToTexture",
set_mipMapping:"set_mipMapping",get_mipMapping:"get_mipMapping",set_format:"set_format",get_format:"get_format",set_scale:"set_scale",get_scale:"get_scale"}};e.textures.TextureSmoothing=function(){};h["starling.textures.TextureSmoothing"]=e.textures.TextureSmoothing;e.textures.TextureSmoothing.__name__=["starling","textures","TextureSmoothing"];e.textures.TextureSmoothing.isValid=function(a){return"none"==a||"bilinear"==a||"trilinear"==a};e.textures.TextureSmoothing.prototype={TextureSmoothing:function(){throw new e.errors.AbstractClassError;
},__class__:e.textures.TextureSmoothing};e.utils={};e.utils.AssetManager=function(a,b){null==b&&(b=!1);null==a&&(a=1);this.mDefaultTextureOptions=new e.textures.TextureOptions(a,b);this.mTextures=new m.ds.StringMap;this.mAtlases=new m.ds.StringMap;this.mSounds=new m.ds.StringMap;this.mXmls=new m.ds.StringMap;this.mObjects=new m.ds.StringMap;this.mByteArrays=new m.ds.StringMap;this.mQueue=[]};h["starling.utils.AssetManager"]=e.utils.AssetManager;e.utils.AssetManager.__name__=["starling","utils","AssetManager"];
e.utils.AssetManager.__super__=e.events.EventDispatcher;e.utils.AssetManager.prototype=q(e.events.EventDispatcher.prototype,{dispose:function(){for(var a=this.mTextures.iterator();a.hasNext();)a.next().dispose();for(a=this.mAtlases.iterator();a.hasNext();)a.next().dispose();for(a=this.mByteArrays.iterator();a.hasNext();)a.next().clear()},getTexture:function(a){if(this.mTextures.exists(a))return this.mTextures.get(a);for(var b=this.mAtlases.iterator();b.hasNext();){var c=b.next().getTexture(a);if(null!=
c)return c}return null},getTextures:function(a,b){null==a&&(a="");null==b&&(b=[]);for(var c=0,d=this.getTextureNames(a,e.utils.AssetManager.sNames);c<d.length;){var i=d[c];++c;b.push(this.getTexture(i))}e.utils.AssetManager.sNames=[];return b},getTextureNames:function(a,b){null==a&&(a="");for(var b=this.getDictionaryKeys(this.mTextures,a,b),c=this.mAtlases.iterator();c.hasNext();)c.next().getNames(a,b);b.sort(r(this,this.compare));return b},getTextureAtlas:function(a){return s.Boot.__cast(this.mAtlases.get(a),
e.textures.TextureAtlas)},getSound:function(a){return this.mSounds.get(a)},getSoundNames:function(a,b){null==a&&(a="");return this.getDictionaryKeys(this.mSounds,a,b)},playSound:function(a,b,c,d){null==c&&(c=0);null==b&&(b=0);return this.mSounds.exists(a)?this.getSound(a).play(b,c,d):null},getXml:function(a){return this.mXmls.get(a)},getXmlNames:function(a,b){null==a&&(a="");return this.getDictionaryKeys(this.mXmls,a,b)},getObject:function(a){return this.mObjects.get(a)},getObjectNames:function(a,
b){null==a&&(a="");return this.getDictionaryKeys(this.mObjects,a,b)},getByteArray:function(a){return this.mByteArrays.get(a)},getByteArrayNames:function(a,b){null==a&&(a="");return this.getDictionaryKeys(this.mByteArrays,a,b)},addTexture:function(a,b){this.log("Adding texture '"+a+"'");this.mTextures.exists(a)&&(this.log("Warning: name was already in use; the previous texture will be replaced."),this.mTextures.get(a).dispose());this.mTextures.set(a,b);b},addTextureAtlas:function(a,b){this.log("Adding texture atlas '"+
a+"'");this.mAtlases.exists(a)&&(this.log("Warning: name was already in use; the previous atlas will be replaced."),this.mAtlases.get(a).dispose());this.mAtlases.set(a,b);b},addSound:function(a,b){this.log("Adding sound '"+a+"'");this.mSounds.exists(a)&&this.log("Warning: name was already in use; the previous sound will be replaced.");this.mSounds.set(a,b);b},addXml:function(a,b){this.log("Adding XML '"+a+"'");this.mXmls.exists(a)&&this.log("Warning: name was already in use; the previous XML will be replaced.");
this.mXmls.set(a,b);b},addObject:function(a,b){this.log("Adding object '"+a+"'");this.mObjects.exists(a)&&this.log("Warning: name was already in use; the previous object will be replaced.");this.mObjects.set(a,b);b},addByteArray:function(a,b){this.log("Adding byte array '"+a+"'");this.mByteArrays.exists(a)&&(this.log("Warning: name was already in use; the previous byte array will be replaced."),this.mByteArrays.get(a).clear());this.mByteArrays.set(a,b);b},removeTexture:function(a,b){null==b&&(b=!0);
this.log("Removing texture '"+a+"'");b&&this.mTextures.exists(a)&&this.mTextures.get(a).dispose();this.mTextures.remove(a)},removeTextureAtlas:function(a,b){null==b&&(b=!0);this.log("Removing texture atlas '"+a+"'");b&&this.mAtlases.exists(a)&&this.mAtlases.get(a).dispose();this.mAtlases.remove(a)},removeSound:function(a){this.log("Removing sound '"+a+"'");this.mSounds.remove(a)},removeXml:function(a){this.log("Removing xml '"+a+"'");this.mXmls.remove(a)},removeObject:function(a){this.log("Removing object '"+
a+"'");this.mObjects.remove(a)},removeByteArray:function(a,b){null==b&&(b=!0);this.log("Removing byte array '"+a+"'");b&&this.mByteArrays.exists(a)&&this.mByteArrays.get(a).clear();this.mByteArrays.remove(a)},purgeQueue:function(){this.mIsLoading=!1;this.mQueue=[];this.dispatchEventWith("cancel")},purge:function(){this.log("Purging all assets, emptying queue");this.purgeQueue();this.dispose();this.mTextures=new m.ds.StringMap;this.mAtlases=new m.ds.StringMap;this.mSounds=new m.ds.StringMap;this.mXmls=
new m.ds.StringMap;this.mObjects=new m.ds.StringMap;this.mByteArrays=new m.ds.StringMap},enqueue:function(a){for(var b=0;b<a.length;){var c=a[b];++b;c instanceof Array&&null==c.__enum__?this.enqueue(c):"string"==typeof c?this.enqueueWithName(c):this.log("Ignoring unsupported asset type: "+B.getClassName(c))}},enqueueWithName:function(a,b,c){null==b&&(b=this.getName(a));c=null==c?this.mDefaultTextureOptions:c.clone();this.log("Enqueuing '"+b+"'");this.mQueue.push({name:b,asset:a,options:c});return b},
loadQueue:function(a){var b=this;this.mStarling=e.core.Starling.get_current();if(null==this.mStarling||null==this.mStarling.get_context())throw new c.errors.Error("The Starling instance needs to be ready before textures can be loaded.");if(this.mIsLoading)throw new c.errors.Error("The queue is already being processed");var d=[],h=this.mQueue.length,i=0;this.mIsLoading=!0;var j=null,g=null,k=null,l=function(){i=0!=b.mQueue.length?1-b.mQueue.length/h:1;0!=b.mQueue.length?j():(g(),b.mIsLoading=!1);null!=
a&&a(i)},j=function(){var a=b.mQueue.shift();b.processRawAsset(a.name,a.asset,a.options,d,k,l)},g=function(){d.sort(function(a){return"TextureAtlas"==a.get_nodeName().split(":").pop()?-1:1});for(var a=0;a<d.length;){var g=d[a];++a;var i,h;i=g.get_nodeName().split(":").pop();if("TextureAtlas"==i)i=b.getName(g.get("imagePath").toString()),h=b.getTexture(i),null!=h?(b.addTextureAtlas(i,new e.textures.TextureAtlas(h,g)),b.mKeepAtlasXmls&&b.addXml(i,g)):b.log("Cannot create atlas: texture '"+i+"' is missing.");
else if("font"==i)i=b.getName(g.elementsNamed("pages").next().elementsNamed("page").next().get("file")),h=b.getTexture(i),null!=h?(b.log("Adding bitmap font '"+i+"'"),e.text.TextField.registerBitmapFont(new e.text.BitmapFont(h,g),i),b.mKeepFontXmls&&b.addXml(i,g)):b.log("Cannot create bitmap font: texture '"+i+"' is missing.");else throw new c.errors.Error("XML contents not recognized: "+i);}},k=function(b){a(i+0.99*1/h*Math.min(1,b))};l()},processRawAsset:function(a,b,d,h,i,j){var g=this,k=!1,l=
null,m,n=null;m=n=function(i){var m;g.mStarling.makeCurrent();if(!k)if(null==i)j();else if(s.Boot.__instanceof(i,c.media.Sound))g.addSound(a,s.Boot.__cast(i,c.media.Sound)),j();else if(s.Boot.__instanceof(i,y)){var i=s.Boot.__cast(i,y).firstElement(),q=i.get_nodeName().split(":").pop();"TextureAtlas"==q||"font"==q?h.push(i):g.addXml(a,i);j()}else{if(e.core.Starling.get_handleLostContext()&&"Disposed"==g.mStarling.get_context().driverInfo){g.log("Context lost while processing assets, retrying ...");
n(i);return}s.Boot.__instanceof(i,c.display.Bitmap)?(m=e.textures.Texture.fromData(i,d),m.get_root().set_onRestore(function(){g.mNumLostTextures++;g.loadRawAsset(b,null,function(a){try{m.get_root().uploadBitmap(s.Boot.__cast(a,c.display.Bitmap))}catch(b){if(s.Boot.__instanceof(b,c.errors.Error))g.log("Texture restoration failed: "+b.message);else throw b;}a.bitmapData.dispose();g.mNumRestoredTextures++;g.mNumLostTextures==g.mNumRestoredTextures&&g.dispatchEventWith("texturesRestored")})}),i.bitmapData.dispose(),
g.addTexture(a,m),j()):s.Boot.__instanceof(i,c.utils.ByteArray)?(i=s.Boot.__cast(i,c.utils.ByteArray),e.textures.AtfData.isAtfData(i)?(d.set_onReady(j),m=e.textures.Texture.fromData(i,d),m.get_root().set_onRestore(function(){g.mNumLostTextures++;g.loadRawAsset(b,null,function(a){try{m.get_root().uploadAtfData(s.Boot.__cast(a,c.utils.ByteArray),0)}catch(b){if(s.Boot.__instanceof(b,c.errors.Error))g.log("Texture restoration failed: "+b.message);else throw b;}a.clear();g.mNumRestoredTextures++;g.mNumLostTextures==
g.mNumRestoredTextures&&g.dispatchEventWith("texturesRestored")})}),i.clear(),g.addTexture(a,m)):g.byteArrayStartsWith(i,"{")||g.byteArrayStartsWith(i,"[")?(g.addObject(a,JSON.parse(i.readUTFBytes(i.length))),i.clear(),j()):g.byteArrayStartsWith(i,"<")?(n(y.parse(i.toString())),i.clear()):(g.addByteArray(a,i),j())):(g.log("Ignoring unsupported asset type: "+B.getClassName(i)),j())}i=i=null;g.removeEventListener("cancel",l)};l=function(){k=!0};this.addEventListener("cancel",l);this.loadRawAsset(b,
function(a){k||i(a)},m)},loadRawAsset:function(a,b,d){var e=this,i=null,h=null,g=null,k=null,l=null,m=function(a){e.log("IO error: "+a.text);k(null)},n=function(a){null==i&&(a=e.getHttpHeader(a.responseHeaders,"Content-Type"),null!=a&&null!=(new H("(audio|image)/","")).split(a)&&(i=a.split("/").pop()))},q=function(a){null!=b&&b(a.bytesLoaded/a.bytesTotal)},r,t=null;r=t=function(){var a=e.transformData(s.Boot.__cast(h.data,c.utils.ByteArray),g),b;h.removeEventListener(c.events.IOErrorEvent.IO_ERROR,
m);h.removeEventListener("httpResponseStatus",n);h.removeEventListener(c.events.ProgressEvent.PROGRESS,q);h.removeEventListener("complete",t);null!=i&&(i=i.toLowerCase());switch(i){case "mpeg":case "mp3":b=new c.media.Sound;b.loadCompressedDataFromByteArray(a,a.length);a.clear();k(b);break;case "jpg":case "jpeg":case "png":case "gif":b=new c.display.Loader;b.contentLoaderInfo.addEventListener("complete",l);b.loadBytes(a);break;default:k(a)}};l=function(a){h.data.clear();a.target.removeEventListener("complete",
l);k(a.target.content)};k=function(a){d(a)};s.Boot.__instanceof(a,aa)?B.createInstance(a,[]):"string"==typeof a&&(g=s.Boot.__cast(a,String),i=this.getExtensionFromUrl(g),h=new c.net.URLLoader,h.set_dataFormat(c.net.URLLoaderDataFormat.BINARY),h.addEventListener(c.events.IOErrorEvent.IO_ERROR,m),h.addEventListener("httpResponseStatus",n),h.addEventListener(c.events.ProgressEvent.PROGRESS,q),h.addEventListener("complete",r),h.load(new c.net.URLRequest(g)))},getName:function(a){var b;if("string"==typeof a){b=
s.Boot.__cast(a,String);b=(new H("%20","g")).replace(b," ");b=this.getBasenameFromUrl(b);if(null!=b)return b;throw new c.errors.ArgumentError("Could not extract name from String '"+k.string(a)+"'");}b=B.getClassName(a);throw new c.errors.ArgumentError("Cannot extract names for objects of type '"+b+"'");},transformData:function(a){return a},log:function(a){this.mVerbose&&m.Log.trace("[AssetManager]",{fileName:"AssetManager.hx",lineNumber:918,className:"starling.utils.AssetManager",methodName:"log",
customParams:[a]})},byteArrayStartsWith:function(a,b){var c=0,d=a.length,e=w.cca(b,0);if(4<=d&&0==a.__get(0)&&0==a.__get(1)&&254==a.__get(2)&&255==a.__get(3)||255==a.__get(0)&&254==a.__get(1)&&0==a.__get(2)&&0==a.__get(3))c=4;else if(3<=d&&239==a.__get(0)&&187==a.__get(1)&&191==a.__get(2))c=3;else if(2<=d&&254==a.__get(0)&&255==a.__get(1)||255==a.__get(0)&&254==a.__get(1))c=2;for(;c<d;){var h=c++,h=a.__get(h);if(!(0==h||10==h||13==h||32==h))return h==e}return!1},getDictionaryKeys:function(a,b,c){null==
b&&(b="");null==c&&(c=[]);for(a=a.keys();a.hasNext();){var d=a.next();0==d.indexOf(b)&&c.push(d)}c.sort(r(this,this.compare));return c},getHttpHeader:function(a,b){if(null!=a)for(var c=0;c<a.length;){var d=a[c];++c;if(d.name==b)return d.value}return null},getBasenameFromUrl:function(a){return e.utils.AssetManager.NAME_REGEX.match(a)?e.utils.AssetManager.NAME_REGEX.matched(1):null},getExtensionFromUrl:function(a){return e.utils.AssetManager.NAME_REGEX.match(a)?e.utils.AssetManager.NAME_REGEX.matched(2):
null},compare:function(a,b){return a<b?-1:a>b?1:0},get_queue:function(){return this.mQueue},get_numQueuedAssets:function(){return this.mQueue.length},get_verbose:function(){return this.mVerbose},set_verbose:function(a){return this.mVerbose=a},get_useMipMaps:function(){return this.mDefaultTextureOptions.get_mipMapping()},set_useMipMaps:function(a){return this.mDefaultTextureOptions.set_mipMapping(a)},get_scaleFactor:function(){return this.mDefaultTextureOptions.get_scale()},set_scaleFactor:function(a){return this.mDefaultTextureOptions.set_scale(a)},
get_checkPolicyFile:function(){return this.mCheckPolicyFile},set_checkPolicyFile:function(a){return this.mCheckPolicyFile=a},get_keepAtlasXmls:function(){return this.mKeepAtlasXmls},set_keepAtlasXmls:function(a){return this.mKeepAtlasXmls=a},get_keepFontXmls:function(){return this.mKeepFontXmls},set_keepFontXmls:function(a){return this.mKeepFontXmls=a},__class__:e.utils.AssetManager,__properties__:{set_keepFontXmls:"set_keepFontXmls",get_keepFontXmls:"get_keepFontXmls",set_keepAtlasXmls:"set_keepAtlasXmls",
get_keepAtlasXmls:"get_keepAtlasXmls",set_checkPolicyFile:"set_checkPolicyFile",get_checkPolicyFile:"get_checkPolicyFile",set_scaleFactor:"set_scaleFactor",get_scaleFactor:"get_scaleFactor",set_useMipMaps:"set_useMipMaps",get_useMipMaps:"get_useMipMaps",set_verbose:"set_verbose",get_verbose:"get_verbose",get_numQueuedAssets:"get_numQueuedAssets",get_queue:"get_queue"}});e.utils.Color=function(){};h["starling.utils.Color"]=e.utils.Color;e.utils.Color.__name__=["starling","utils","Color"];e.utils.Color.getAlpha=
function(a){return a>>24&255};e.utils.Color.getRed=function(a){return a>>16&255};e.utils.Color.getGreen=function(a){return a>>8&255};e.utils.Color.getBlue=function(a){return a&255};e.utils.Color.rgb=function(a,b,c){return a<<16|b<<8|c};e.utils.Color.argb=function(a,b,c,d){return a<<24|b<<16|c<<8|d};e.utils.Color.prototype={Color:function(){throw new e.errors.AbstractClassError;},__class__:e.utils.Color};e.utils.Execute=function(){};h["starling.utils.Execute"]=e.utils.Execute;e.utils.Execute.__name__=
["starling","utils","Execute"];e.utils.Execute.execute=function(a,b){if(null!=a){for(var c=a.length,d=0;d<c;){var e=d++;b[e]=null}a.apply(null,b.slice(0,c))}};e.utils.HAlign=function(){};h["starling.utils.HAlign"]=e.utils.HAlign;e.utils.HAlign.__name__=["starling","utils","HAlign"];e.utils.HAlign.isValid=function(a){return"left"==a||"center"==a||"right"==a};e.utils.HAlign.prototype={HAlign:function(){throw new e.errors.AbstractClassError;},__class__:e.utils.HAlign};e.utils.MathUtil=function(){};h["starling.utils.MathUtil"]=
e.utils.MathUtil;e.utils.MathUtil.__name__=["starling","utils","MathUtil"];e.utils.MathUtil.min=function(a){if(0==a.length)return 0;for(var b=a[0],c=1,d=a.length;c<d;){var e=c++;a[e]<b&&(b=a[e])}return b};e.utils.MathUtil.deg2rad=function(a){return a/180*Math.PI};e.utils.MatrixUtil=function(){};h["starling.utils.MatrixUtil"]=e.utils.MatrixUtil;e.utils.MatrixUtil.__name__=["starling","utils","MatrixUtil"];e.utils.MatrixUtil.convertTo3D=function(a,b){null==b&&(b=new c.geom.Matrix3D);e.utils.MatrixUtil.sRawData[0]=
a.a;e.utils.MatrixUtil.sRawData[1]=a.b;e.utils.MatrixUtil.sRawData[4]=a.c;e.utils.MatrixUtil.sRawData[5]=a.d;e.utils.MatrixUtil.sRawData[12]=a.tx;e.utils.MatrixUtil.sRawData[13]=a.ty;b.copyRawDataFrom(function(){var a=e.utils.MatrixUtil.sRawData,b=new c.VectorData;b.length=a.length;b.fixed=!0;var d;d=Array(a.length);for(var h=0,g=a.length;h<g;){var k=h++;d[k]=a[k]}b.data=d;return b}(this));return b};e.utils.MatrixUtil.transformCoords=function(a,b,d,e){null==e&&(e=new c.geom.Point);e.x=a.a*b+a.c*d+
a.tx;e.y=a.d*d+a.b*b+a.ty;return e};e.utils.MatrixUtil.skew=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=Math.sin(c),c=Math.cos(c);a.setTo(a.a*c-a.b*d,a.a*e+a.b*b,a.c*c-a.d*d,a.c*e+a.d*b,a.tx*c-a.ty*d,a.tx*e+a.ty*b)};e.utils.MatrixUtil.prependMatrix=function(a,b){a.setTo(a.a*b.a+a.c*b.b,a.b*b.a+a.d*b.b,a.a*b.c+a.c*b.d,a.b*b.c+a.d*b.d,a.tx+a.a*b.tx+a.c*b.ty,a.ty+a.b*b.tx+a.d*b.ty)};e.utils.MatrixUtil.prependTranslation=function(a,b,c){a.tx+=a.a*b+a.c*c;a.ty+=a.b*b+a.d*c};e.utils.MatrixUtil.prependScale=
function(a,b,c){a.setTo(a.a*b,a.b*b,a.c*c,a.d*c,a.tx,a.ty)};e.utils.MatrixUtil.prependRotation=function(a,b){var c=Math.sin(b),d=Math.cos(b);a.setTo(a.a*d+a.c*c,a.b*d+a.d*c,a.c*d-a.a*c,a.d*d-a.b*c,a.tx,a.ty)};e.utils.MatrixUtil.prependSkew=function(a,b,c){var d=Math.sin(b),b=Math.cos(b),e=Math.sin(c),c=Math.cos(c);a.setTo(a.a*c+a.c*e,a.b*c+a.d*e,a.c*b-a.a*d,a.d*b-a.b*d,a.tx,a.ty)};e.utils.MatrixUtil.prototype={MatrixUtil:function(){throw new e.errors.AbstractClassError;},__class__:e.utils.MatrixUtil};
e.utils.Max=function(){};h["starling.utils.Max"]=e.utils.Max;e.utils.Max.__name__=["starling","utils","Max"];e.utils.PowerOfTwo=function(){};h["starling.utils.PowerOfTwo"]=e.utils.PowerOfTwo;e.utils.PowerOfTwo.__name__=["starling","utils","PowerOfTwo"];e.utils.PowerOfTwo.getNextPowerOfTwo=function(a){if(0<a&&0==(a&a-1))return a;for(var b=1;b<a;)b<<=1;return b};e.utils.RectangleUtil=function(){throw new e.errors.AbstractClassError;};h["starling.utils.RectangleUtil"]=e.utils.RectangleUtil;e.utils.RectangleUtil.__name__=
["starling","utils","RectangleUtil"];e.utils.RectangleUtil.intersect=function(a,b,d){null==d&&(d=new c.geom.Rectangle);var e;e=a.x>b.x?a.x:b.x;var i;i=a.get_right()<b.get_right()?a.get_right():b.get_right();var h;h=a.y>b.y?a.y:b.y;a=a.get_bottom()<b.get_bottom()?a.get_bottom():b.get_bottom();e>i||h>a?d.setEmpty():d.setTo(e,h,i-e,a-h);return d};e.utils.RectangleUtil.fit=function(a,b,d,h,i){null==h&&(h=!1);null==d&&(d="showAll");if(!e.utils.ScaleMode.isValid(d))throw new c.errors.ArgumentError("Invalid scaleMode: "+
d);null==i&&(i=new c.geom.Rectangle);var j=a.width,a=a.height,g=b.width/j,k=b.height/a,l=1;"showAll"==d?(l=g<k?g:k,h&&(l=e.utils.RectangleUtil.nextSuitableScaleFactor(l,!1))):"noBorder"==d&&(l=g>k?g:k,h&&(l=e.utils.RectangleUtil.nextSuitableScaleFactor(l,!0)));j*=l;a*=l;i.setTo(b.x+(b.width-j)/2,b.y+(b.height-a)/2,j,a);return i};e.utils.RectangleUtil.nextSuitableScaleFactor=function(a,b){var c=1;if(b){if(0.5<=a)return Math.ceil(a);for(;1/(c+1)>a;)++c}else{if(1<=a)return Math.floor(a);for(;1/c>a;)++c}return 1/
c};e.utils.RectangleUtil.normalize=function(a){0>a.width&&(a.width=-a.width,a.x-=a.width);0>a.height&&(a.height=-a.height,a.y-=a.height)};e.utils.RectangleUtil.getBounds=function(a,b,d){null==d&&(d=new c.geom.Rectangle);for(var h=1.79E308,i=-1.79E308,j=1.79E308,g=-1.79E308,k=0;4>k;){var l=k++;e.utils.MatrixUtil.transformCoords(b,e.utils.RectangleUtil.sPositions[l].x*a.width,e.utils.RectangleUtil.sPositions[l].y*a.height,e.utils.RectangleUtil.sHelperPoint);h>e.utils.RectangleUtil.sHelperPoint.x&&(h=
e.utils.RectangleUtil.sHelperPoint.x);i<e.utils.RectangleUtil.sHelperPoint.x&&(i=e.utils.RectangleUtil.sHelperPoint.x);j>e.utils.RectangleUtil.sHelperPoint.y&&(j=e.utils.RectangleUtil.sHelperPoint.y);g<e.utils.RectangleUtil.sHelperPoint.y&&(g=e.utils.RectangleUtil.sHelperPoint.y)}d.setTo(h,j,i-h,g-j);return d};e.utils.RectangleUtil.prototype={__class__:e.utils.RectangleUtil};e.utils.ScaleMode=function(){};h["starling.utils.ScaleMode"]=e.utils.ScaleMode;e.utils.ScaleMode.__name__=["starling","utils",
"ScaleMode"];e.utils.ScaleMode.isValid=function(a){return"none"==a||"noBorder"==a||"showAll"==a};e.utils.ScaleMode.prototype={ScaleMode:function(){throw new e.errors.AbstractClassError;},__class__:e.utils.ScaleMode};e.utils.StringUtil=function(){};h["starling.utils.StringUtil"]=e.utils.StringUtil;e.utils.StringUtil.__name__=["starling","utils","StringUtil"];e.utils.StringUtil.formatString=function(a,b){for(var c=0,d=b.length;c<d;)var e=c++,a=(new H("\\{"+e+"\\}","g")).replace(a,b[e]);return a};e.utils.SystemUtil=
function(){};h["starling.utils.SystemUtil"]=e.utils.SystemUtil;e.utils.SystemUtil.__name__=["starling","utils","SystemUtil"];e.utils.SystemUtil.__properties__={get_platform:"get_platform",get_isDesktop:"get_isDesktop",get_isAIR:"get_isAIR",get_isApplicationActive:"get_isApplicationActive"};e.utils.SystemUtil.sAIR=null;e.utils.SystemUtil.initialize=function(){if(!e.utils.SystemUtil.sInitialized){e.utils.SystemUtil.sInitialized=!0;try{c.Lib.current.addEventListener(c.events.Event.ACTIVATE,e.utils.SystemUtil.onActivate,
!1,0,!0),c.Lib.current.addEventListener(c.events.Event.DEACTIVATE,e.utils.SystemUtil.onDeactivate,!1,0,!0),e.utils.SystemUtil.sAIR=!0}catch(a){if(s.Boot.__instanceof(a,c.errors.Error))e.utils.SystemUtil.sAIR=!1;else throw a;}}};e.utils.SystemUtil.onActivate=function(){e.utils.SystemUtil.sApplicationActive=!0;for(var a=0,b=e.utils.SystemUtil.sWaitingCalls;a<b.length;){var c=b[a];++a;c[0].apply(null,[c[1]])}e.utils.SystemUtil.sWaitingCalls=[]};e.utils.SystemUtil.onDeactivate=function(){e.utils.SystemUtil.sApplicationActive=
!1};e.utils.SystemUtil.executeWhenApplicationIsActive=function(a,b){e.utils.SystemUtil.initialize();e.utils.SystemUtil.sApplicationActive?a(b):e.utils.SystemUtil.sWaitingCalls.push([a,b])};e.utils.SystemUtil.get_isApplicationActive=function(){e.utils.SystemUtil.initialize();return e.utils.SystemUtil.sApplicationActive};e.utils.SystemUtil.get_isAIR=function(){e.utils.SystemUtil.initialize();return e.utils.SystemUtil.sAIR};e.utils.SystemUtil.get_isDesktop=function(){e.utils.SystemUtil.initialize();
return!0};e.utils.SystemUtil.get_platform=function(){e.utils.SystemUtil.initialize();return""};e.utils.SystemUtil.prototype={SystemUtil:function(){throw new e.errors.AbstractClassError;},__class__:e.utils.SystemUtil};e.utils.TextureUtils=function(){};h["starling.utils.TextureUtils"]=e.utils.TextureUtils;e.utils.TextureUtils.__name__=["starling","utils","TextureUtils"];e.utils.TextureUtils.ToContext3DTextureFormat=function(a){switch(a){case "bgra":return c.display3D.Context3DTextureFormat.BGRA;case "compressed":return c.display3D.Context3DTextureFormat.COMPRESSED;
case "compressedAlpha":return c.display3D.Context3DTextureFormat.COMPRESSED_ALPHA;default:return c.display3D.Context3DTextureFormat.BGRA}};e.utils.TextureUtils.ProgramTypeToString=function(a){switch(a[1]){case 1:return"fragment";case 0:return"vertex"}};e.utils.VAlign=function(){};h["starling.utils.VAlign"]=e.utils.VAlign;e.utils.VAlign.__name__=["starling","utils","VAlign"];e.utils.VAlign.isValid=function(a){return"top"==a||"center"==a||"bottom"==a};e.utils.VAlign.prototype={VAlign:function(){throw new e.errors.AbstractClassError;
},__class__:e.utils.VAlign};e.utils.VertexData=function(a,b){null==b&&(b=!1);this.mRawData=new Float32Array(0);this.mPremultipliedAlpha=b;this.mNumVertices=0;this.set_numVertices(a)};h["starling.utils.VertexData"]=e.utils.VertexData;e.utils.VertexData.__name__=["starling","utils","VertexData"];e.utils.VertexData.prototype={clone:function(a,b){null==b&&(b=-1);null==a&&(a=0);if(0>b||a+b>this.mNumVertices)b=this.mNumVertices-a;var c=new e.utils.VertexData(0,this.mPremultipliedAlpha);c.mNumVertices=b;
c.mRawData=new Float32Array(this.mRawData);return c},copyTo:function(a,b,c,d){null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.copyTransformedTo(a,b,null,c,d)},copyTransformedTo:function(a,b,c,d,e){null==e&&(e=-1);null==d&&(d=0);null==b&&(b=0);if(0>e||d+e>this.mNumVertices)e=this.mNumVertices-d;var a=a.mRawData,b=8*b,h=8*d,g=8*(d+e);if(null!=c)for(;h<g;)d=this.mRawData[h++],e=this.mRawData[h++],a[b++]=c.a*d+c.c*e+c.tx,a[b++]=c.d*e+c.b*d+c.ty,a[b++]=this.mRawData[h++],a[b++]=this.mRawData[h++],a[b++]=
this.mRawData[h++],a[b++]=this.mRawData[h++],a[b++]=this.mRawData[h++],a[b++]=this.mRawData[h++];else for(;h<g;)a[b++]=this.mRawData[h++]},append:function(a){for(var b=this.mRawData.length,c=a.mRawData,d=c.length,e=0;e<d;){var h=e++;this.mRawData[b++]=c[h]}this.mNumVertices+=a.get_numVertices()},setPosition:function(a,b,c){a*=8;this.mRawData[a]=b;this.mRawData[a+1]=c},getPosition:function(a,b){var c=8*a;b.x=this.mRawData[c];b.y=this.mRawData[c+1]},setColorAndAlpha:function(a,b,c){0.001>c?c=0.001:
1<c&&(c=1);var a=8*a+2,d;d=this.mPremultipliedAlpha?c:1;var e=b>>16&255;this.mRawData[a]=(0>e?4294967296+e:e+0)/255*d;e=b>>8&255;this.mRawData[a+1]=(0>e?4294967296+e:e+0)/255*d;b&=255;this.mRawData[a+2]=(0>b?4294967296+b:b+0)/255*d;this.mRawData[a+3]=c},setColor:function(a,b){var c=8*a+2,d;d=this.mPremultipliedAlpha?this.mRawData[c+3]:1;var e=b>>16&255;this.mRawData[c]=(0>e?4294967296+e:e+0)/255*d;e=b>>8&255;this.mRawData[c+1]=(0>e?4294967296+e:e+0)/255*d;e=b&255;this.mRawData[c+2]=(0>e?4294967296+
e:e+0)/255*d},getColor:function(a){var a=8*a+2,b;b=this.mPremultipliedAlpha?this.mRawData[a+3]:1;return 0==b?0:(255*(this.mRawData[a]/b)|0)<<16|(255*(this.mRawData[a+1]/b)|0)<<8|255*(this.mRawData[a+2]/b)|0},setAlpha:function(a,b){this.mPremultipliedAlpha?this.setColorAndAlpha(a,this.getColor(a),b):this.mRawData[8*a+5|0]=b},getAlpha:function(a){return this.mRawData[8*a+5]},setTexCoords:function(a,b,c){a=8*a+6;this.mRawData[a]=b;this.mRawData[a+1]=c},getTexCoords:function(a,b){var c=8*a+6;b.x=this.mRawData[c];
b.y=this.mRawData[c+1]},translateVertex:function(a,b,c){a*=8;this.mRawData[a]+=b;this.mRawData[a+1]+=c},transformVertex:function(a,b,c){null==c&&(c=1);for(var d,e=8*a,h=0;h<c;)h++,a=this.mRawData[e],d=this.mRawData[e+1],this.mRawData[e]=b.a*a+b.c*d+b.tx,this.mRawData[e+1]=b.d*d+b.b*a+b.ty,e+=8},setUniformColor:function(a){for(var b=0,c=this.mNumVertices;b<c;){var d=b++;this.setColor(d,a)}},setUniformAlpha:function(a){for(var b=0,c=this.mNumVertices;b<c;){var d=b++;this.setAlpha(d,a)}},scaleAlpha:function(a,
b,c){null==c&&(c=1);if(1!=b){if(0>c||a+c>this.mNumVertices)c=this.mNumVertices-a;if(this.mPremultipliedAlpha)for(var d=0;d<c;){var e=d++;this.setAlpha(a+e,this.getAlpha(a+e)*b)}else{a=8*a+5;for(d=0;d<c;)e=d++,this.mRawData[a+8*e|0]*=b}}},getBounds:function(a,b,d,h){null==d&&(d=-1);null==b&&(b=0);null==h&&(h=new c.geom.Rectangle);if(0>d||b+d>this.mNumVertices)d=this.mNumVertices-b;if(0==d)null==a?h.setEmpty():(e.utils.MatrixUtil.transformCoords(a,0,0,e.utils.VertexData.sHelperPoint),h.setTo(e.utils.VertexData.sHelperPoint.x,
e.utils.VertexData.sHelperPoint.y,0,0));else{var i=1.79E308,j=-1.79E308,g=1.79E308,k=-1.79E308,b=8*b,l,m;if(null==a)for(a=0;a<d;)a++,l=this.mRawData[b],m=this.mRawData[b+1],b+=8,i>l&&(i=l),j<l&&(j=l),g>m&&(g=m),k<m&&(k=m);else for(var n=0;n<d;)if(n++,l=this.mRawData[b],m=this.mRawData[b+1],b+=8,e.utils.MatrixUtil.transformCoords(a,l,m,e.utils.VertexData.sHelperPoint),i>e.utils.VertexData.sHelperPoint.x&&(i=e.utils.VertexData.sHelperPoint.x),j<e.utils.VertexData.sHelperPoint.x&&(j=e.utils.VertexData.sHelperPoint.x),
g>e.utils.VertexData.sHelperPoint.y&&(g=e.utils.VertexData.sHelperPoint.y),k<e.utils.VertexData.sHelperPoint.y)k=e.utils.VertexData.sHelperPoint.y;h.setTo(i,g,j-i,k-g)}return h},toString:function(){for(var a="[VertexData \n",b=new c.geom.Point,d=new c.geom.Point,e=0,h=this.get_numVertices();e<h;){var j=e++;this.getPosition(j,b);this.getTexCoords(j,d);a+="  [Vertex "+j+": x="+(null==b.x?"null":""+b.x)+", y="+(null==b.y?"null":""+b.y)+", rgb="+C.hex(this.getColor(j))+", a="+k.string(this.getAlpha(j))+
", u="+(null==d.x?"null":""+d.x)+", v="+(null==d.y?"null":""+d.y)+"]"+(j==this.get_numVertices()-1?"\n":",\n")}return a+"]"},get_tinted:function(){for(var a=2,b=0,c=this.mNumVertices;b<c;){b++;for(var d=0;4>d;){var e=d++;if(1!=this.mRawData[a+e])return!0}a+=8}return!1},setPremultipliedAlpha:function(a,b){null==b&&(b=!0);if(a!=this.mPremultipliedAlpha){if(b)for(var c=8*this.mNumVertices,d=2;d<c;){var e=this.mRawData[d+3],h;h=this.mPremultipliedAlpha?e:1;e=a?e:1;0!=h&&(this.mRawData[d]=this.mRawData[d]/
h*e,this.mRawData[d+1]=this.mRawData[d+1]/h*e,this.mRawData[d+2]=this.mRawData[d+2]/h*e);d+=8}this.mPremultipliedAlpha=a}},get_premultipliedAlpha:function(){return this.mPremultipliedAlpha},set_premultipliedAlpha:function(a){this.setPremultipliedAlpha(a);return this.mPremultipliedAlpha},get_numVertices:function(){return this.mNumVertices},set_numVertices:function(a){var b=null;8*a>this.mRawData.length?(b=new Float32Array(8*a),b.set(this.mRawData)):b=new Float32Array(this.mRawData.buffer,0,8*a);this.mRawData=
b;for(var b=8*a,c=8*this.mNumVertices+5;c<b;)this.mRawData[c]=1,c+=8;return this.mNumVertices=a},get_rawData:function(){return this.mRawData},__class__:e.utils.VertexData,__properties__:{get_rawData:"get_rawData",set_numVertices:"set_numVertices",get_numVertices:"get_numVertices",set_premultipliedAlpha:"set_premultipliedAlpha",get_premultipliedAlpha:"get_premultipliedAlpha",get_tinted:"get_tinted"}};var I={ProgressBar:function(a,b){e.display.Sprite.call(this);this.init(a,b)}};h["utils.ProgressBar"]=
I.ProgressBar;I.ProgressBar.__name__=["utils","ProgressBar"];I.ProgressBar.__super__=e.display.Sprite;I.ProgressBar.prototype=q(e.display.Sprite.prototype,{init:function(a,b){var d=e.core.Starling.get_current().get_contentScaleFactor(),h=0.2*b,i=2*h*d,j=new c.display.Shape;j.get_graphics().beginFill(0,0.5);j.get_graphics().drawRoundRect(0,0,a*d,b*d,i,i);j.get_graphics().endFill();i=new c.display.BitmapData(a*d|0,b*d|0,!0,0);i.draw(j);d=e.textures.Texture.fromBitmapData(i,!1,!1,d);this.mBackground=
new e.display.Image(d);this.addChild(this.mBackground);this.mBar=new e.display.Quad(a-2*h,b-2*h,15658734);this.mBar.setVertexColor(2,11184810);this.mBar.setVertexColor(3,11184810);this.mBar.set_x(h);this.mBar.set_y(h);this.mBar.set_scaleX(0);this.addChild(this.mBar)},get_ratio:function(){return this.mBar.get_scaleX()},set_ratio:function(a){return this.mBar.set_scaleX(Math.max(0,Math.min(1,a)))},__class__:I.ProgressBar,__properties__:q(e.display.Sprite.prototype.__properties__,{set_ratio:"set_ratio",
get_ratio:"get_ratio"})});I.RoundButton=function(a,b,c){null==b&&(b="");e.display.Button.call(this,a,b,c)};h["utils.RoundButton"]=I.RoundButton;I.RoundButton.__name__=["utils","RoundButton"];I.RoundButton.__super__=e.display.Button;I.RoundButton.prototype=q(e.display.Button.prototype,{hitTest:function(a,b){null==b&&(b=!1);if(b&&(!this.get_visible()||!this.get_touchable()))return null;var c=this.get_bounds(),d=c.height/2;return Math.pow(a.x-c.width/2,2)+Math.pow(a.y-d,2)<Math.pow(c.width/2-8,2)?this:
null},__class__:I.RoundButton});I.TouchSheet=function(a){e.display.Sprite.call(this);this.addEventListener("touch",r(this,this.onTouch));this.set_useHandCursor(!0);null!=a&&(a.set_x(k["int"](a.get_width()/-2)),a.set_y(k["int"](a.get_height()/-2)),this.addChild(a))};h["utils.TouchSheet"]=I.TouchSheet;I.TouchSheet.__name__=["utils","TouchSheet"];I.TouchSheet.__super__=e.display.Sprite;I.TouchSheet.prototype=q(e.display.Sprite.prototype,{onTouch:function(a){var b=a.getTouches(this,"moved");if(1==b.length)b=
b[0].getMovement(this.get_parent()),this.set_x(this.get_x()+b.x),this.set_y(this.get_y()+b.y);else if(2==b.length){var c=b[0],d=b[1],b=c.getLocation(this.get_parent()),e=c.getPreviousLocation(this.get_parent()),h=d.getLocation(this.get_parent()),g=d.getPreviousLocation(this.get_parent()),k=b.subtract(h),e=e.subtract(g),g=Math.atan2(k.y,k.x),l=Math.atan2(e.y,e.x),g=g-l,c=c.getPreviousLocation(this),d=d.getPreviousLocation(this);this.set_pivotX(0.5*(c.x+d.x));this.set_pivotY(0.5*(c.y+d.y));this.set_x(0.5*
(b.x+h.x));this.set_y(0.5*(b.y+h.y));this.set_rotation(this.get_rotation()+g);b=k.get_length()/e.get_length();this.set_scaleX(this.get_scaleX()*b);this.set_scaleY(this.get_scaleY()*b)}a=a.getTouch(this,"ended");null!=a&&2==a.get_tapCount()&&this.get_parent().addChild(this)},dispose:function(){this.removeEventListener("touch",r(this,this.onTouch));e.display.Sprite.prototype.dispose.call(this)},__class__:I.TouchSheet});var W,da=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=
Number.POSITIVE_INFINITY;h.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};Array.prototype.indexOf&&(w.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});String.prototype.__class__=h.String=String;String.__name__=["String"];h.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=h.Date=Date;Date.__name__=["Date"];var ca=h.Int={__name__:["Int"]},ea=h.Dynamic={__name__:["Dynamic"]},Z=h.Float=Number;Z.__name__=["Float"];var K=
h.Bool=Boolean;K.__ename__=["Bool"];var aa=h.Class={__name__:["Class"]},fa={};y.Element="element";y.PCData="pcdata";y.CData="cdata";y.Comment="comment";y.DocType="doctype";y.ProcessingInstruction="processingInstruction";y.Document="document";null!=window.createjs&&(createjs.Sound.alternateExtensions=["ogg","mp3","wav"]);c.ui.Multitouch.maxTouchPoints=2;c.ui.Multitouch.supportedGestures=null;c.ui.Multitouch.supportsGestureEvents=!1;x.images=new m.ds.StringMap;x.urlLoaders=new m.ds.StringMap;x.assetsLoaded=
0;x.total=0;c.display.DisplayObject.__instanceCount=0;c.display.DisplayObject.__worldRenderDirty=0;c.display.DisplayObject.__worldTransformDirty=0;J.GameWidth=320;J.GameHeight=480;J.CenterX=160;J.CenterY=240;J.DefaultFont="assets/fonts/Ubuntu-R.woff";e.events.EventDispatcher.sBubbleChains=[];c.geom.Matrix.__identity=new c.geom.Matrix;e.display.DisplayObject.TWO_PI=2*Math.PI;e.display.DisplayObject.sAncestors=[];e.display.DisplayObject.sHelperRect=new c.geom.Rectangle;e.display.DisplayObject.sHelperMatrix=
new c.geom.Matrix;e.display.DisplayObjectContainer.sHelperMatrix=new c.geom.Matrix;e.display.DisplayObjectContainer.sHelperPoint=new c.geom.Point;e.display.DisplayObjectContainer.sBroadcastListeners=[];e.display.DisplayObjectContainer.sSortBuffer=[];e.display.Sprite.sHelperMatrix=new c.geom.Matrix;e.display.Sprite.sHelperPoint=new c.geom.Point;e.display.Sprite.sHelperRect=new c.geom.Rectangle;l.Context3D.enableErrorChecking=!1;l.Context3D.resources=[];l.Context3D.driverInfo="Call getter function instead";
l.Context3D.maxvertexconstants=128;l.Context3D.maxfragconstants=28;l.Context3D.maxtemp=8;l.Context3D.maxstreams=8;l.Context3D.maxtextures=8;l.Context3D.defaultsampler=new l.Sampler;d.Away3D.WEBSITE_URL="http://www.away3d.com";d.Away3D.MAJOR_VERSION=4;d.Away3D.MINOR_VERSION=1;d.Away3D.REVISION=5;d.library.assets.NamedAssetBase.DEFAULT_NAMESPACE="default";d.core.managers.AGALProgram3DCache._currentId=0;c.events.Event.ACTIVATE="activate";c.events.Event.ADDED="added";c.events.Event.ADDED_TO_STAGE="addedToStage";
c.events.Event.CANCEL="cancel";c.events.Event.CHANGE="change";c.events.Event.CLOSE="close";c.events.Event.COMPLETE="complete";c.events.Event.CONNECT="connect";c.events.Event.CONTEXT3D_CREATE="context3DCreate";c.events.Event.DEACTIVATE="deactivate";c.events.Event.ENTER_FRAME="enterFrame";c.events.Event.ID3="id3";c.events.Event.INIT="init";c.events.Event.MOUSE_LEAVE="mouseLeave";c.events.Event.OPEN="open";c.events.Event.REMOVED="removed";c.events.Event.REMOVED_FROM_STAGE="removedFromStage";c.events.Event.RENDER=
"render";c.events.Event.RESIZE="resize";c.events.Event.SCROLL="scroll";c.events.Event.SELECT="select";c.events.Event.TAB_CHILDREN_CHANGE="tabChildrenChange";c.events.Event.TAB_ENABLED_CHANGE="tabEnabledChange";c.events.Event.TAB_INDEX_CHANGE="tabIndexChange";c.events.Event.UNLOAD="unload";c.events.Event.SOUND_COMPLETE="soundComplete";d.events.MouseEvent3D.MOUSE_OVER="mouseOver3d";d.events.MouseEvent3D.MOUSE_OUT="mouseOut3d";d.events.MouseEvent3D.MOUSE_UP="mouseUp3d";d.events.MouseEvent3D.MOUSE_DOWN=
"mouseDown3d";d.events.MouseEvent3D.MOUSE_MOVE="mouseMove3d";d.events.MouseEvent3D.CLICK="click3d";d.events.MouseEvent3D.DOUBLE_CLICK="doubleClick3d";d.events.MouseEvent3D.MOUSE_WHEEL="mouseWheel3d";d.core.managers.Mouse3DManager._viewCount=0;d.core.managers.Mouse3DManager._queuedEvents=[];d.core.managers.Mouse3DManager._mouseUp=new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_UP);d.core.managers.Mouse3DManager._mouseClick=new d.events.MouseEvent3D(d.events.MouseEvent3D.CLICK);d.core.managers.Mouse3DManager._mouseOut=
new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_OUT);d.core.managers.Mouse3DManager._mouseDown=new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_DOWN);d.core.managers.Mouse3DManager._mouseMove=new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_MOVE);d.core.managers.Mouse3DManager._mouseOver=new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_OVER);d.core.managers.Mouse3DManager._mouseWheel=new d.events.MouseEvent3D(d.events.MouseEvent3D.MOUSE_WHEEL);d.core.managers.Mouse3DManager._mouseDoubleClick=
new d.events.MouseEvent3D(d.events.MouseEvent3D.DOUBLE_CLICK);d.core.managers.Mouse3DManager._previousCollidingView=-1;d.core.managers.Mouse3DManager._collidingView=-1;d.core.managers.Stage3DManager._numStageProxies=0;d.core.managers.Stage3DProxy._frameEventDriver=new c.display.Shape;d.core.managers.Touch3DManager._collidingObjectFromTouchId=new m.ds.IntMap;d.core.managers.Touch3DManager._previousCollidingObjectFromTouchId=new m.ds.IntMap;d.core.managers.Touch3DManager._queuedEvents=[];d.core.math.MathConsts.RADIANS_TO_DEGREES=
180/Math.PI;d.core.math.MathConsts.DEGREES_TO_RADIANS=Math.PI/180;d.core.math.Plane3D.ALIGN_ANY=0;d.core.math.Plane3D.ALIGN_XY_AXIS=1;d.core.math.Plane3D.ALIGN_YZ_AXIS=2;d.core.math.Plane3D.ALIGN_XZ_AXIS=3;d.core.math.PlaneClassification.BACK=0;d.core.math.PlaneClassification.FRONT=1;d.core.math.PlaneClassification.IN=0;d.core.math.PlaneClassification.OUT=1;d.core.math.PlaneClassification.INTERSECT=2;d.core.traverse.PartitionTraverser._collectionMark=0;d.core.pick.ShaderPicker.MOUSE_SCISSOR_RECT=
new c.geom.Rectangle(0,0,1,1);d.core.pick.PickingType.SHADER=new d.core.pick.ShaderPicker;d.core.pick.PickingType.RAYCAST_FIRST_ENCOUNTERED=new d.core.pick.RaycastPicker(!1);d.core.pick.PickingType.RAYCAST_BEST_HIT=new d.core.pick.RaycastPicker(!0);d.core.render.DefaultRenderer.RTT_PASSES=1;d.core.render.DefaultRenderer.SCREEN_PASSES=2;d.core.render.DefaultRenderer.ALL_PASSES=3;d.debug.Debug.active=!1;d.debug.Debug.warningsAsErrors=!1;c.errors.Error.DEFAULT_TO_STRING="Error";d.events.Asset3DEvent.ASSET_COMPLETE=
"assetComplete";d.events.Asset3DEvent.ENTITY_COMPLETE="entityComplete";d.events.Asset3DEvent.SKYBOX_COMPLETE="skyboxComplete";d.events.Asset3DEvent.CAMERA_COMPLETE="cameraComplete";d.events.Asset3DEvent.MESH_COMPLETE="meshComplete";d.events.Asset3DEvent.GEOMETRY_COMPLETE="geometryComplete";d.events.Asset3DEvent.SKELETON_COMPLETE="skeletonComplete";d.events.Asset3DEvent.SKELETON_POSE_COMPLETE="skeletonPoseComplete";d.events.Asset3DEvent.CONTAINER_COMPLETE="containerComplete";d.events.Asset3DEvent.TEXTURE_COMPLETE=
"textureComplete";d.events.Asset3DEvent.TEXTURE_PROJECTOR_COMPLETE="textureProjectorComplete";d.events.Asset3DEvent.MATERIAL_COMPLETE="materialComplete";d.events.Asset3DEvent.ANIMATOR_COMPLETE="animatorComplete";d.events.Asset3DEvent.ANIMATION_SET_COMPLETE="animationSetComplete";d.events.Asset3DEvent.ANIMATION_STATE_COMPLETE="animationStateComplete";d.events.Asset3DEvent.ANIMATION_NODE_COMPLETE="animationNodeComplete";d.events.Asset3DEvent.STATE_TRANSITION_COMPLETE="stateTransitionComplete";d.events.Asset3DEvent.SEGMENT_SET_COMPLETE=
"segmentSetComplete";d.events.Asset3DEvent.LIGHT_COMPLETE="lightComplete";d.events.Asset3DEvent.LIGHTPICKER_COMPLETE="lightPickerComplete";d.events.Asset3DEvent.EFFECTMETHOD_COMPLETE="effectMethodComplete";d.events.Asset3DEvent.SHADOWMAPMETHOD_COMPLETE="shadowMapMethodComplete";d.events.Asset3DEvent.ASSET_RENAME="assetRename";d.events.Asset3DEvent.ASSET_CONFLICT_RESOLVED="assetConflictResolved";d.events.Asset3DEvent.TEXTURE_SIZE_ERROR="textureSizeError";d.events.CameraEvent.LENS_CHANGED="lensChanged";
d.events.GeometryEvent.SUB_GEOMETRY_ADDED="SubGeometryAdded";d.events.GeometryEvent.SUB_GEOMETRY_REMOVED="SubGeometryRemoved";d.events.GeometryEvent.BOUNDS_INVALID="BoundsInvalid";d.events.LensEvent.MATRIX_CHANGED="matrixChanged";d.events.LightEvent.CASTS_SHADOW_CHANGE="castsShadowChange";d.events.Object3DEvent.VISIBLITY_UPDATED="visiblityUpdated";d.events.Object3DEvent.SCENETRANSFORM_CHANGED="scenetransformChanged";d.events.Object3DEvent.SCENE_CHANGED="sceneChanged";d.events.Object3DEvent.POSITION_CHANGED=
"positionChanged";d.events.Object3DEvent.ROTATION_CHANGED="rotationChanged";d.events.Object3DEvent.SCALE_CHANGED="scaleChanged";d.events.Scene3DEvent.ADDED_TO_SCENE="addedToScene";d.events.Scene3DEvent.REMOVED_FROM_SCENE="removedFromScene";d.events.Scene3DEvent.PARTITION_CHANGED="partitionChanged";d.events.ShadingMethodEvent.SHADER_INVALIDATED="ShaderInvalidated";d.events.Stage3DEvent.CONTEXT3D_CREATED="Context3DCreated";d.events.Stage3DEvent.CONTEXT3D_DISPOSED="Context3DDisposed";d.events.Stage3DEvent.CONTEXT3D_RECREATED=
"Context3DRecreated";d.events.Stage3DEvent.VIEWPORT_UPDATED="ViewportUpdated";d.events.TouchEvent3D.TOUCH_END="touchEnd3d";d.events.TouchEvent3D.TOUCH_BEGIN="touchBegin3d";d.events.TouchEvent3D.TOUCH_MOVE="touchMove3d";d.events.TouchEvent3D.TOUCH_OUT="touchOut3d";d.events.TouchEvent3D.TOUCH_OVER="touchOver3d";d.library.assets.Asset3DType.ENTITY="entity";d.library.assets.Asset3DType.SKYBOX="skybox";d.library.assets.Asset3DType.CAMERA="camera";d.library.assets.Asset3DType.SEGMENT_SET="segmentSet";d.library.assets.Asset3DType.MESH=
"mesh";d.library.assets.Asset3DType.GEOMETRY="geometry";d.library.assets.Asset3DType.SKELETON="skeleton";d.library.assets.Asset3DType.SKELETON_POSE="skeletonPose";d.library.assets.Asset3DType.CONTAINER="container";d.library.assets.Asset3DType.TEXTURE="texture";d.library.assets.Asset3DType.TEXTURE_PROJECTOR="textureProjector";d.library.assets.Asset3DType.MATERIAL="material";d.library.assets.Asset3DType.ANIMATION_SET="animationSet";d.library.assets.Asset3DType.ANIMATION_STATE="animationState";d.library.assets.Asset3DType.ANIMATION_NODE=
"animationNode";d.library.assets.Asset3DType.ANIMATOR="animator";d.library.assets.Asset3DType.STATE_TRANSITION="stateTransition";d.library.assets.Asset3DType.LIGHT="light";d.library.assets.Asset3DType.LIGHT_PICKER="lightPicker";d.library.assets.Asset3DType.SHADOW_MAP_METHOD="shadowMapMethod";d.library.assets.Asset3DType.EFFECTS_METHOD="effectsMethod";d.materials.LightSources.LIGHTS=1;d.materials.LightSources.PROBES=2;d.materials.LightSources.ALL=3;d.materials.MaterialBase.MATERIAL_ID_COUNT=0;d.materials.compilation.RegisterPool._regPool=
new m.ds.StringMap;d.materials.compilation.RegisterPool._regCompsPool=new m.ds.StringMap;d.materials.compilation.ShaderRegisterElement.COMPONENTS=["x","y","z","w"];d.materials.passes.MaterialPassBase._previousUsedStreams=[0,0,0,0,0,0,0,0];d.materials.passes.MaterialPassBase._previousUsedTexs=[0,0,0,0,0,0,0,0];d.materials.passes.SegmentPass.ONE_VECTOR=[1,1,1,1];d.materials.passes.SegmentPass.FRONT_VECTOR=[0,0,-1,0];d.materials.utils.MipmapGenerator._matrix=new c.geom.Matrix;d.materials.utils.MipmapGenerator._rect=
new c.geom.Rectangle;d.textures.BitmapTexture._mipMaps=[];d.textures.BitmapTexture._mipMapUses=[];d.tools.utils.TextureUtils.MAX_SIZE=4096;v._InflateImpl.Window.SIZE=32768;v._InflateImpl.Window.BUFSIZE=65536;v.InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];v.InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];v.InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,
9,9,10,10,11,11,12,12,13,13,-1,-1];v.InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];v.InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];v.InflateImpl.FIXED_HUFFMAN=null;m.Unserializer.DEFAULT_RESOLVER=B;m.Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";m.Unserializer.CODES=null;m.ds.ObjectMap.count=0;J=m.xml.Parser;F=new m.ds.StringMap;
F.set("lt","<");F.set("gt",">");F.set("amp","&");F.set("quot",'"');F.set("apos","'");F.set("nbsp",String.fromCharCode(160));J.escapes=F;c.Assets.cache=new c.AssetCache;c.Assets.libraries=new m.ds.StringMap;c.Assets.dispatcher=new c.events.EventDispatcher;c.Assets.initialized=!1;c.Lib.__sentWarnings=new m.ds.StringMap;c.Lib.__startTime=m.Timer.stamp();c.display.BitmapData.__base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";c.display.BitmapDataChannel.ALPHA=8;c.display.BitmapDataChannel.BLUE=
4;c.display.BitmapDataChannel.GREEN=2;c.display.BitmapDataChannel.RED=1;c.display._CapsStyle.CapsStyle_Impl_.NONE="butt";c.display._CapsStyle.CapsStyle_Impl_.ROUND="round";c.display._CapsStyle.CapsStyle_Impl_.SQUARE="square";c.display.Graphics.TILE_SCALE=1;c.display.Graphics.TILE_ROTATION=2;c.display.Graphics.TILE_RGB=4;c.display.Graphics.TILE_ALPHA=8;c.display.Graphics.TILE_TRANS_2x2=16;c.display.Graphics.TILE_BLEND_NORMAL=0;c.display.Graphics.TILE_BLEND_ADD=65536;c.display._JointStyle.JointStyle_Impl_.MITER=
"miter";c.display._JointStyle.JointStyle_Impl_.ROUND="round";c.display._JointStyle.JointStyle_Impl_.BEVEL="bevel";c.display.OpenGLView.CONTEXT_LOST="glcontextlost";c.display.OpenGLView.CONTEXT_RESTORED="glcontextrestored";c.display._StageQuality.StageQuality_Impl_.BEST="best";c.display._StageQuality.StageQuality_Impl_.HIGH="high";c.display._StageQuality.StageQuality_Impl_.MEDIUM="medium";c.display._StageQuality.StageQuality_Impl_.LOW="low";c.display.Tilesheet.TILE_SCALE=1;c.display.Tilesheet.TILE_ROTATION=
2;c.display.Tilesheet.TILE_RGB=4;c.display.Tilesheet.TILE_ALPHA=8;c.display.Tilesheet.TILE_TRANS_2x2=16;c.display.Tilesheet.TILE_BLEND_NORMAL=0;c.display.Tilesheet.TILE_BLEND_ADD=65536;c.display.Tilesheet.TILE_BLEND_MULTIPLY=131072;c.display.Tilesheet.TILE_BLEND_SCREEN=262144;c.display3D.Context3D.MAX_SAMPLERS=8;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.DESTINATION_ALPHA=772;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.DESTINATION_COLOR=774;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ONE=
1;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ONE_MINUS_DESTINATION_ALPHA=773;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ONE_MINUS_DESTINATION_COLOR=775;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ONE_MINUS_SOURCE_ALPHA=771;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ONE_MINUS_SOURCE_COLOR=769;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.SOURCE_ALPHA=770;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.SOURCE_COLOR=
768;c.display3D._Context3DBlendFactor.Context3DBlendFactor_Impl_.ZERO=0;c.display3D.Context3DClearMask.ALL=17664;c.display3D.Context3DClearMask.COLOR=16384;c.display3D.Context3DClearMask.DEPTH=256;c.display3D.Context3DClearMask.STENCIL=1024;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.ALWAYS=519;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.EQUAL=514;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.GREATER=516;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.GREATER_EQUAL=
518;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.LESS=513;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.LESS_EQUAL=515;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.NEVER=512;c.display3D._Context3DCompareMode.Context3DCompareMode_Impl_.NOT_EQUAL=517;c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.BACK=1028;c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.FRONT=1029;c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.FRONT_AND_BACK=
1032;c.display3D._Context3DTriangleFace.Context3DTriangleFace_Impl_.NONE=0;c.display3D.OpenFLStage3D.stage3Ds=[];c.events.TextEvent.LINK="link";c.events.TextEvent.TEXT_INPUT="textInput";c.events.ErrorEvent.ERROR="error";c.events._EventPhase.EventPhase_Impl_.CAPTURING_PHASE=0;c.events._EventPhase.EventPhase_Impl_.AT_TARGET=1;c.events._EventPhase.EventPhase_Impl_.BUBBLING_PHASE=2;c.events.FocusEvent.FOCUS_IN="focusIn";c.events.FocusEvent.FOCUS_OUT="focusOut";c.events.FocusEvent.KEY_FOCUS_CHANGE="keyFocusChange";
c.events.FocusEvent.MOUSE_FOCUS_CHANGE="mouseFocusChange";c.events.HTTPStatusEvent.HTTP_RESPONSE_STATUS="httpResponseStatus";c.events.HTTPStatusEvent.HTTP_STATUS="httpStatus";c.events.IOErrorEvent.IO_ERROR="ioError";c.events.KeyboardEvent.KEY_DOWN="keyDown";c.events.KeyboardEvent.KEY_UP="keyUp";c.events.MouseEvent.CLICK="click";c.events.MouseEvent.DOUBLE_CLICK="doubleClick";c.events.MouseEvent.MIDDLE_CLICK="middleClick";c.events.MouseEvent.MIDDLE_MOUSE_DOWN="middleMouseDown";c.events.MouseEvent.MIDDLE_MOUSE_UP=
"middleMouseUp";c.events.MouseEvent.MOUSE_DOWN="mouseDown";c.events.MouseEvent.MOUSE_MOVE="mouseMove";c.events.MouseEvent.MOUSE_OUT="mouseOut";c.events.MouseEvent.MOUSE_OVER="mouseOver";c.events.MouseEvent.MOUSE_UP="mouseUp";c.events.MouseEvent.MOUSE_WHEEL="mouseWheel";c.events.MouseEvent.RIGHT_CLICK="rightClick";c.events.MouseEvent.RIGHT_MOUSE_DOWN="rightMouseDown";c.events.MouseEvent.RIGHT_MOUSE_UP="rightMouseUp";c.events.MouseEvent.ROLL_OUT="rollOut";c.events.MouseEvent.ROLL_OVER="rollOver";c.events.ProgressEvent.PROGRESS=
"progress";c.events.ProgressEvent.SOCKET_DATA="socketData";c.events.SecurityErrorEvent.SECURITY_ERROR="securityError";c.events.TouchEvent.TOUCH_BEGIN="touchBegin";c.events.TouchEvent.TOUCH_END="touchEnd";c.events.TouchEvent.TOUCH_MOVE="touchMove";c.events.TouchEvent.TOUCH_OUT="touchOut";c.events.TouchEvent.TOUCH_OVER="touchOver";c.events.TouchEvent.TOUCH_ROLL_OUT="touchRollOut";c.events.TouchEvent.TOUCH_ROLL_OVER="touchRollOver";c.events.TouchEvent.TOUCH_TAP="touchTap";c.gl.GL.DEPTH_BUFFER_BIT=256;
c.gl.GL.STENCIL_BUFFER_BIT=1024;c.gl.GL.COLOR_BUFFER_BIT=16384;c.gl.GL.POINTS=0;c.gl.GL.LINES=1;c.gl.GL.LINE_LOOP=2;c.gl.GL.LINE_STRIP=3;c.gl.GL.TRIANGLES=4;c.gl.GL.TRIANGLE_STRIP=5;c.gl.GL.TRIANGLE_FAN=6;c.gl.GL.ZERO=0;c.gl.GL.ONE=1;c.gl.GL.SRC_COLOR=768;c.gl.GL.ONE_MINUS_SRC_COLOR=769;c.gl.GL.SRC_ALPHA=770;c.gl.GL.ONE_MINUS_SRC_ALPHA=771;c.gl.GL.DST_ALPHA=772;c.gl.GL.ONE_MINUS_DST_ALPHA=773;c.gl.GL.DST_COLOR=774;c.gl.GL.ONE_MINUS_DST_COLOR=775;c.gl.GL.SRC_ALPHA_SATURATE=776;c.gl.GL.FUNC_ADD=32774;
c.gl.GL.BLEND_EQUATION=32777;c.gl.GL.BLEND_EQUATION_RGB=32777;c.gl.GL.BLEND_EQUATION_ALPHA=34877;c.gl.GL.FUNC_SUBTRACT=32778;c.gl.GL.FUNC_REVERSE_SUBTRACT=32779;c.gl.GL.BLEND_DST_RGB=32968;c.gl.GL.BLEND_SRC_RGB=32969;c.gl.GL.BLEND_DST_ALPHA=32970;c.gl.GL.BLEND_SRC_ALPHA=32971;c.gl.GL.CONSTANT_COLOR=32769;c.gl.GL.ONE_MINUS_CONSTANT_COLOR=32770;c.gl.GL.CONSTANT_ALPHA=32771;c.gl.GL.ONE_MINUS_CONSTANT_ALPHA=32772;c.gl.GL.BLEND_COLOR=32773;c.gl.GL.ARRAY_BUFFER=34962;c.gl.GL.ELEMENT_ARRAY_BUFFER=34963;
c.gl.GL.ARRAY_BUFFER_BINDING=34964;c.gl.GL.ELEMENT_ARRAY_BUFFER_BINDING=34965;c.gl.GL.STREAM_DRAW=35040;c.gl.GL.STATIC_DRAW=35044;c.gl.GL.DYNAMIC_DRAW=35048;c.gl.GL.BUFFER_SIZE=34660;c.gl.GL.BUFFER_USAGE=34661;c.gl.GL.CURRENT_VERTEX_ATTRIB=34342;c.gl.GL.FRONT=1028;c.gl.GL.BACK=1029;c.gl.GL.FRONT_AND_BACK=1032;c.gl.GL.CULL_FACE=2884;c.gl.GL.BLEND=3042;c.gl.GL.DITHER=3024;c.gl.GL.STENCIL_TEST=2960;c.gl.GL.DEPTH_TEST=2929;c.gl.GL.SCISSOR_TEST=3089;c.gl.GL.POLYGON_OFFSET_FILL=32823;c.gl.GL.SAMPLE_ALPHA_TO_COVERAGE=
32926;c.gl.GL.SAMPLE_COVERAGE=32928;c.gl.GL.NO_ERROR=0;c.gl.GL.INVALID_ENUM=1280;c.gl.GL.INVALID_VALUE=1281;c.gl.GL.INVALID_OPERATION=1282;c.gl.GL.OUT_OF_MEMORY=1285;c.gl.GL.CW=2304;c.gl.GL.CCW=2305;c.gl.GL.LINE_WIDTH=2849;c.gl.GL.ALIASED_POINT_SIZE_RANGE=33901;c.gl.GL.ALIASED_LINE_WIDTH_RANGE=33902;c.gl.GL.CULL_FACE_MODE=2885;c.gl.GL.FRONT_FACE=2886;c.gl.GL.DEPTH_RANGE=2928;c.gl.GL.DEPTH_WRITEMASK=2930;c.gl.GL.DEPTH_CLEAR_VALUE=2931;c.gl.GL.DEPTH_FUNC=2932;c.gl.GL.STENCIL_CLEAR_VALUE=2961;c.gl.GL.STENCIL_FUNC=
2962;c.gl.GL.STENCIL_FAIL=2964;c.gl.GL.STENCIL_PASS_DEPTH_FAIL=2965;c.gl.GL.STENCIL_PASS_DEPTH_PASS=2966;c.gl.GL.STENCIL_REF=2967;c.gl.GL.STENCIL_VALUE_MASK=2963;c.gl.GL.STENCIL_WRITEMASK=2968;c.gl.GL.STENCIL_BACK_FUNC=34816;c.gl.GL.STENCIL_BACK_FAIL=34817;c.gl.GL.STENCIL_BACK_PASS_DEPTH_FAIL=34818;c.gl.GL.STENCIL_BACK_PASS_DEPTH_PASS=34819;c.gl.GL.STENCIL_BACK_REF=36003;c.gl.GL.STENCIL_BACK_VALUE_MASK=36004;c.gl.GL.STENCIL_BACK_WRITEMASK=36005;c.gl.GL.VIEWPORT=2978;c.gl.GL.SCISSOR_BOX=3088;c.gl.GL.COLOR_CLEAR_VALUE=
3106;c.gl.GL.COLOR_WRITEMASK=3107;c.gl.GL.UNPACK_ALIGNMENT=3317;c.gl.GL.PACK_ALIGNMENT=3333;c.gl.GL.MAX_TEXTURE_SIZE=3379;c.gl.GL.MAX_VIEWPORT_DIMS=3386;c.gl.GL.SUBPIXEL_BITS=3408;c.gl.GL.RED_BITS=3410;c.gl.GL.GREEN_BITS=3411;c.gl.GL.BLUE_BITS=3412;c.gl.GL.ALPHA_BITS=3413;c.gl.GL.DEPTH_BITS=3414;c.gl.GL.STENCIL_BITS=3415;c.gl.GL.POLYGON_OFFSET_UNITS=10752;c.gl.GL.POLYGON_OFFSET_FACTOR=32824;c.gl.GL.TEXTURE_BINDING_2D=32873;c.gl.GL.SAMPLE_BUFFERS=32936;c.gl.GL.SAMPLES=32937;c.gl.GL.SAMPLE_COVERAGE_VALUE=
32938;c.gl.GL.SAMPLE_COVERAGE_INVERT=32939;c.gl.GL.COMPRESSED_TEXTURE_FORMATS=34467;c.gl.GL.DONT_CARE=4352;c.gl.GL.FASTEST=4353;c.gl.GL.NICEST=4354;c.gl.GL.GENERATE_MIPMAP_HINT=33170;c.gl.GL.BYTE=5120;c.gl.GL.UNSIGNED_BYTE=5121;c.gl.GL.SHORT=5122;c.gl.GL.UNSIGNED_SHORT=5123;c.gl.GL.INT=5124;c.gl.GL.UNSIGNED_INT=5125;c.gl.GL.FLOAT=5126;c.gl.GL.DEPTH_COMPONENT=6402;c.gl.GL.ALPHA=6406;c.gl.GL.RGB=6407;c.gl.GL.RGBA=6408;c.gl.GL.LUMINANCE=6409;c.gl.GL.LUMINANCE_ALPHA=6410;c.gl.GL.UNSIGNED_SHORT_4_4_4_4=
32819;c.gl.GL.UNSIGNED_SHORT_5_5_5_1=32820;c.gl.GL.UNSIGNED_SHORT_5_6_5=33635;c.gl.GL.FRAGMENT_SHADER=35632;c.gl.GL.VERTEX_SHADER=35633;c.gl.GL.MAX_VERTEX_ATTRIBS=34921;c.gl.GL.MAX_VERTEX_UNIFORM_VECTORS=36347;c.gl.GL.MAX_VARYING_VECTORS=36348;c.gl.GL.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661;c.gl.GL.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660;c.gl.GL.MAX_TEXTURE_IMAGE_UNITS=34930;c.gl.GL.MAX_FRAGMENT_UNIFORM_VECTORS=36349;c.gl.GL.SHADER_TYPE=35663;c.gl.GL.DELETE_STATUS=35712;c.gl.GL.LINK_STATUS=35714;c.gl.GL.VALIDATE_STATUS=
35715;c.gl.GL.ATTACHED_SHADERS=35717;c.gl.GL.ACTIVE_UNIFORMS=35718;c.gl.GL.ACTIVE_ATTRIBUTES=35721;c.gl.GL.SHADING_LANGUAGE_VERSION=35724;c.gl.GL.CURRENT_PROGRAM=35725;c.gl.GL.NEVER=512;c.gl.GL.LESS=513;c.gl.GL.EQUAL=514;c.gl.GL.LEQUAL=515;c.gl.GL.GREATER=516;c.gl.GL.NOTEQUAL=517;c.gl.GL.GEQUAL=518;c.gl.GL.ALWAYS=519;c.gl.GL.KEEP=7680;c.gl.GL.REPLACE=7681;c.gl.GL.INCR=7682;c.gl.GL.DECR=7683;c.gl.GL.INVERT=5386;c.gl.GL.INCR_WRAP=34055;c.gl.GL.DECR_WRAP=34056;c.gl.GL.VENDOR=7936;c.gl.GL.RENDERER=7937;
c.gl.GL.VERSION=7938;c.gl.GL.NEAREST=9728;c.gl.GL.LINEAR=9729;c.gl.GL.NEAREST_MIPMAP_NEAREST=9984;c.gl.GL.LINEAR_MIPMAP_NEAREST=9985;c.gl.GL.NEAREST_MIPMAP_LINEAR=9986;c.gl.GL.LINEAR_MIPMAP_LINEAR=9987;c.gl.GL.TEXTURE_MAG_FILTER=10240;c.gl.GL.TEXTURE_MIN_FILTER=10241;c.gl.GL.TEXTURE_WRAP_S=10242;c.gl.GL.TEXTURE_WRAP_T=10243;c.gl.GL.TEXTURE_2D=3553;c.gl.GL.TEXTURE=5890;c.gl.GL.TEXTURE_CUBE_MAP=34067;c.gl.GL.TEXTURE_BINDING_CUBE_MAP=34068;c.gl.GL.TEXTURE_CUBE_MAP_POSITIVE_X=34069;c.gl.GL.TEXTURE_CUBE_MAP_NEGATIVE_X=
34070;c.gl.GL.TEXTURE_CUBE_MAP_POSITIVE_Y=34071;c.gl.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072;c.gl.GL.TEXTURE_CUBE_MAP_POSITIVE_Z=34073;c.gl.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074;c.gl.GL.MAX_CUBE_MAP_TEXTURE_SIZE=34076;c.gl.GL.TEXTURE0=33984;c.gl.GL.TEXTURE1=33985;c.gl.GL.TEXTURE2=33986;c.gl.GL.TEXTURE3=33987;c.gl.GL.TEXTURE4=33988;c.gl.GL.TEXTURE5=33989;c.gl.GL.TEXTURE6=33990;c.gl.GL.TEXTURE7=33991;c.gl.GL.TEXTURE8=33992;c.gl.GL.TEXTURE9=33993;c.gl.GL.TEXTURE10=33994;c.gl.GL.TEXTURE11=33995;c.gl.GL.TEXTURE12=
33996;c.gl.GL.TEXTURE13=33997;c.gl.GL.TEXTURE14=33998;c.gl.GL.TEXTURE15=33999;c.gl.GL.TEXTURE16=34E3;c.gl.GL.TEXTURE17=34001;c.gl.GL.TEXTURE18=34002;c.gl.GL.TEXTURE19=34003;c.gl.GL.TEXTURE20=34004;c.gl.GL.TEXTURE21=34005;c.gl.GL.TEXTURE22=34006;c.gl.GL.TEXTURE23=34007;c.gl.GL.TEXTURE24=34008;c.gl.GL.TEXTURE25=34009;c.gl.GL.TEXTURE26=34010;c.gl.GL.TEXTURE27=34011;c.gl.GL.TEXTURE28=34012;c.gl.GL.TEXTURE29=34013;c.gl.GL.TEXTURE30=34014;c.gl.GL.TEXTURE31=34015;c.gl.GL.ACTIVE_TEXTURE=34016;c.gl.GL.REPEAT=
10497;c.gl.GL.CLAMP_TO_EDGE=33071;c.gl.GL.MIRRORED_REPEAT=33648;c.gl.GL.FLOAT_VEC2=35664;c.gl.GL.FLOAT_VEC3=35665;c.gl.GL.FLOAT_VEC4=35666;c.gl.GL.INT_VEC2=35667;c.gl.GL.INT_VEC3=35668;c.gl.GL.INT_VEC4=35669;c.gl.GL.BOOL=35670;c.gl.GL.BOOL_VEC2=35671;c.gl.GL.BOOL_VEC3=35672;c.gl.GL.BOOL_VEC4=35673;c.gl.GL.FLOAT_MAT2=35674;c.gl.GL.FLOAT_MAT3=35675;c.gl.GL.FLOAT_MAT4=35676;c.gl.GL.SAMPLER_2D=35678;c.gl.GL.SAMPLER_CUBE=35680;c.gl.GL.VERTEX_ATTRIB_ARRAY_ENABLED=34338;c.gl.GL.VERTEX_ATTRIB_ARRAY_SIZE=
34339;c.gl.GL.VERTEX_ATTRIB_ARRAY_STRIDE=34340;c.gl.GL.VERTEX_ATTRIB_ARRAY_TYPE=34341;c.gl.GL.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922;c.gl.GL.VERTEX_ATTRIB_ARRAY_POINTER=34373;c.gl.GL.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975;c.gl.GL.VERTEX_PROGRAM_POINT_SIZE=34370;c.gl.GL.POINT_SPRITE=34913;c.gl.GL.COMPILE_STATUS=35713;c.gl.GL.LOW_FLOAT=36336;c.gl.GL.MEDIUM_FLOAT=36337;c.gl.GL.HIGH_FLOAT=36338;c.gl.GL.LOW_INT=36339;c.gl.GL.MEDIUM_INT=36340;c.gl.GL.HIGH_INT=36341;c.gl.GL.FRAMEBUFFER=36160;c.gl.GL.RENDERBUFFER=
36161;c.gl.GL.RGBA4=32854;c.gl.GL.RGB5_A1=32855;c.gl.GL.RGB565=36194;c.gl.GL.DEPTH_COMPONENT16=33189;c.gl.GL.STENCIL_INDEX=6401;c.gl.GL.STENCIL_INDEX8=36168;c.gl.GL.DEPTH_STENCIL=34041;c.gl.GL.RENDERBUFFER_WIDTH=36162;c.gl.GL.RENDERBUFFER_HEIGHT=36163;c.gl.GL.RENDERBUFFER_INTERNAL_FORMAT=36164;c.gl.GL.RENDERBUFFER_RED_SIZE=36176;c.gl.GL.RENDERBUFFER_GREEN_SIZE=36177;c.gl.GL.RENDERBUFFER_BLUE_SIZE=36178;c.gl.GL.RENDERBUFFER_ALPHA_SIZE=36179;c.gl.GL.RENDERBUFFER_DEPTH_SIZE=36180;c.gl.GL.RENDERBUFFER_STENCIL_SIZE=
36181;c.gl.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048;c.gl.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049;c.gl.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050;c.gl.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051;c.gl.GL.COLOR_ATTACHMENT0=36064;c.gl.GL.DEPTH_ATTACHMENT=36096;c.gl.GL.STENCIL_ATTACHMENT=36128;c.gl.GL.DEPTH_STENCIL_ATTACHMENT=33306;c.gl.GL.NONE=0;c.gl.GL.FRAMEBUFFER_COMPLETE=36053;c.gl.GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054;c.gl.GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055;
c.gl.GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057;c.gl.GL.FRAMEBUFFER_UNSUPPORTED=36061;c.gl.GL.FRAMEBUFFER_BINDING=36006;c.gl.GL.RENDERBUFFER_BINDING=36007;c.gl.GL.MAX_RENDERBUFFER_SIZE=34024;c.gl.GL.INVALID_FRAMEBUFFER_OPERATION=1286;c.gl.GL.UNPACK_FLIP_Y_WEBGL=37440;c.gl.GL.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;c.gl.GL.CONTEXT_LOST_WEBGL=37442;c.gl.GL.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443;c.gl.GL.BROWSER_DEFAULT_WEBGL=37444;c.media.Sound.__registeredSounds=new m.ds.StringMap;c.net.URLRequestMethod.DELETE=
"DELETE";c.net.URLRequestMethod.GET="GET";c.net.URLRequestMethod.HEAD="HEAD";c.net.URLRequestMethod.OPTIONS="OPTIONS";c.net.URLRequestMethod.POST="POST";c.net.URLRequestMethod.PUT="PUT";c.system.ApplicationDomain.currentDomain=new c.system.ApplicationDomain(null);c.system.Capabilities.hasAccessibility=!1;c.system.SecurityDomain.currentDomain=new c.system.SecurityDomain;c.system.System.useCodePage=!1;c.text._AntiAliasType.AntiAliasType_Impl_.ADVANCED="advanced";c.text._AntiAliasType.AntiAliasType_Impl_.NORMAL=
"normal";c.ui._KeyLocation.KeyLocation_Impl_.STANDARD=0;c.ui._KeyLocation.KeyLocation_Impl_.LEFT=1;c.ui._KeyLocation.KeyLocation_Impl_.RIGHT=2;c.ui._KeyLocation.KeyLocation_Impl_.NUM_PAD=3;c.ui.Keyboard.NUMBER_0=48;c.ui.Keyboard.NUMBER_1=49;c.ui.Keyboard.NUMBER_2=50;c.ui.Keyboard.NUMBER_3=51;c.ui.Keyboard.NUMBER_4=52;c.ui.Keyboard.NUMBER_5=53;c.ui.Keyboard.NUMBER_6=54;c.ui.Keyboard.NUMBER_7=55;c.ui.Keyboard.NUMBER_8=56;c.ui.Keyboard.NUMBER_9=57;c.ui.Keyboard.A=65;c.ui.Keyboard.B=66;c.ui.Keyboard.C=
67;c.ui.Keyboard.D=68;c.ui.Keyboard.E=69;c.ui.Keyboard.F=70;c.ui.Keyboard.G=71;c.ui.Keyboard.H=72;c.ui.Keyboard.I=73;c.ui.Keyboard.J=74;c.ui.Keyboard.K=75;c.ui.Keyboard.L=76;c.ui.Keyboard.M=77;c.ui.Keyboard.N=78;c.ui.Keyboard.O=79;c.ui.Keyboard.P=80;c.ui.Keyboard.Q=81;c.ui.Keyboard.R=82;c.ui.Keyboard.S=83;c.ui.Keyboard.T=84;c.ui.Keyboard.U=85;c.ui.Keyboard.V=86;c.ui.Keyboard.W=87;c.ui.Keyboard.X=88;c.ui.Keyboard.Y=89;c.ui.Keyboard.Z=90;c.ui.Keyboard.NUMPAD_0=96;c.ui.Keyboard.NUMPAD_1=97;c.ui.Keyboard.NUMPAD_2=
98;c.ui.Keyboard.NUMPAD_3=99;c.ui.Keyboard.NUMPAD_4=100;c.ui.Keyboard.NUMPAD_5=101;c.ui.Keyboard.NUMPAD_6=102;c.ui.Keyboard.NUMPAD_7=103;c.ui.Keyboard.NUMPAD_8=104;c.ui.Keyboard.NUMPAD_9=105;c.ui.Keyboard.NUMPAD_MULTIPLY=106;c.ui.Keyboard.NUMPAD_ADD=107;c.ui.Keyboard.NUMPAD_ENTER=108;c.ui.Keyboard.NUMPAD_SUBTRACT=109;c.ui.Keyboard.NUMPAD_DECIMAL=110;c.ui.Keyboard.NUMPAD_DIVIDE=111;c.ui.Keyboard.F1=112;c.ui.Keyboard.F2=113;c.ui.Keyboard.F3=114;c.ui.Keyboard.F4=115;c.ui.Keyboard.F5=116;c.ui.Keyboard.F6=
117;c.ui.Keyboard.F7=118;c.ui.Keyboard.F8=119;c.ui.Keyboard.F9=120;c.ui.Keyboard.F10=121;c.ui.Keyboard.F11=122;c.ui.Keyboard.F12=123;c.ui.Keyboard.F13=124;c.ui.Keyboard.F14=125;c.ui.Keyboard.F15=126;c.ui.Keyboard.BACKSPACE=8;c.ui.Keyboard.TAB=9;c.ui.Keyboard.ALTERNATE=18;c.ui.Keyboard.ENTER=13;c.ui.Keyboard.COMMAND=15;c.ui.Keyboard.SHIFT=16;c.ui.Keyboard.CONTROL=17;c.ui.Keyboard.CAPS_LOCK=20;c.ui.Keyboard.NUMPAD=21;c.ui.Keyboard.ESCAPE=27;c.ui.Keyboard.SPACE=32;c.ui.Keyboard.PAGE_UP=33;c.ui.Keyboard.PAGE_DOWN=
34;c.ui.Keyboard.END=35;c.ui.Keyboard.HOME=36;c.ui.Keyboard.LEFT=37;c.ui.Keyboard.RIGHT=39;c.ui.Keyboard.UP=38;c.ui.Keyboard.DOWN=40;c.ui.Keyboard.INSERT=45;c.ui.Keyboard.DELETE=46;c.ui.Keyboard.NUMLOCK=144;c.ui.Keyboard.BREAK=19;c.ui.Keyboard.SEMICOLON=186;c.ui.Keyboard.EQUAL=187;c.ui.Keyboard.COMMA=188;c.ui.Keyboard.MINUS=189;c.ui.Keyboard.PERIOD=190;c.ui.Keyboard.SLASH=191;c.ui.Keyboard.BACKQUOTE=192;c.ui.Keyboard.LEFTBRACKET=219;c.ui.Keyboard.BACKSLASH=220;c.ui.Keyboard.RIGHTBRACKET=221;c.ui.Keyboard.QUOTE=
222;c.ui.Keyboard.DOM_VK_CANCEL=3;c.ui.Keyboard.DOM_VK_HELP=6;c.ui.Keyboard.DOM_VK_BACK_SPACE=8;c.ui.Keyboard.DOM_VK_TAB=9;c.ui.Keyboard.DOM_VK_CLEAR=12;c.ui.Keyboard.DOM_VK_RETURN=13;c.ui.Keyboard.DOM_VK_ENTER=14;c.ui.Keyboard.DOM_VK_SHIFT=16;c.ui.Keyboard.DOM_VK_CONTROL=17;c.ui.Keyboard.DOM_VK_ALT=18;c.ui.Keyboard.DOM_VK_PAUSE=19;c.ui.Keyboard.DOM_VK_CAPS_LOCK=20;c.ui.Keyboard.DOM_VK_ESCAPE=27;c.ui.Keyboard.DOM_VK_SPACE=32;c.ui.Keyboard.DOM_VK_PAGE_UP=33;c.ui.Keyboard.DOM_VK_PAGE_DOWN=34;c.ui.Keyboard.DOM_VK_END=
35;c.ui.Keyboard.DOM_VK_HOME=36;c.ui.Keyboard.DOM_VK_LEFT=37;c.ui.Keyboard.DOM_VK_UP=38;c.ui.Keyboard.DOM_VK_RIGHT=39;c.ui.Keyboard.DOM_VK_DOWN=40;c.ui.Keyboard.DOM_VK_PRINTSCREEN=44;c.ui.Keyboard.DOM_VK_INSERT=45;c.ui.Keyboard.DOM_VK_DELETE=46;c.ui.Keyboard.DOM_VK_0=48;c.ui.Keyboard.DOM_VK_1=49;c.ui.Keyboard.DOM_VK_2=50;c.ui.Keyboard.DOM_VK_3=51;c.ui.Keyboard.DOM_VK_4=52;c.ui.Keyboard.DOM_VK_5=53;c.ui.Keyboard.DOM_VK_6=54;c.ui.Keyboard.DOM_VK_7=55;c.ui.Keyboard.DOM_VK_8=56;c.ui.Keyboard.DOM_VK_9=
57;c.ui.Keyboard.DOM_VK_SEMICOLON=59;c.ui.Keyboard.DOM_VK_EQUALS=61;c.ui.Keyboard.DOM_VK_A=65;c.ui.Keyboard.DOM_VK_B=66;c.ui.Keyboard.DOM_VK_C=67;c.ui.Keyboard.DOM_VK_D=68;c.ui.Keyboard.DOM_VK_E=69;c.ui.Keyboard.DOM_VK_F=70;c.ui.Keyboard.DOM_VK_G=71;c.ui.Keyboard.DOM_VK_H=72;c.ui.Keyboard.DOM_VK_I=73;c.ui.Keyboard.DOM_VK_J=74;c.ui.Keyboard.DOM_VK_K=75;c.ui.Keyboard.DOM_VK_L=76;c.ui.Keyboard.DOM_VK_M=77;c.ui.Keyboard.DOM_VK_N=78;c.ui.Keyboard.DOM_VK_O=79;c.ui.Keyboard.DOM_VK_P=80;c.ui.Keyboard.DOM_VK_Q=
81;c.ui.Keyboard.DOM_VK_R=82;c.ui.Keyboard.DOM_VK_S=83;c.ui.Keyboard.DOM_VK_T=84;c.ui.Keyboard.DOM_VK_U=85;c.ui.Keyboard.DOM_VK_V=86;c.ui.Keyboard.DOM_VK_W=87;c.ui.Keyboard.DOM_VK_X=88;c.ui.Keyboard.DOM_VK_Y=89;c.ui.Keyboard.DOM_VK_Z=90;c.ui.Keyboard.DOM_VK_CONTEXT_MENU=93;c.ui.Keyboard.DOM_VK_NUMPAD0=96;c.ui.Keyboard.DOM_VK_NUMPAD1=97;c.ui.Keyboard.DOM_VK_NUMPAD2=98;c.ui.Keyboard.DOM_VK_NUMPAD3=99;c.ui.Keyboard.DOM_VK_NUMPAD4=100;c.ui.Keyboard.DOM_VK_NUMPAD5=101;c.ui.Keyboard.DOM_VK_NUMPAD6=102;
c.ui.Keyboard.DOM_VK_NUMPAD7=103;c.ui.Keyboard.DOM_VK_NUMPAD8=104;c.ui.Keyboard.DOM_VK_NUMPAD9=105;c.ui.Keyboard.DOM_VK_MULTIPLY=106;c.ui.Keyboard.DOM_VK_ADD=107;c.ui.Keyboard.DOM_VK_SEPARATOR=108;c.ui.Keyboard.DOM_VK_SUBTRACT=109;c.ui.Keyboard.DOM_VK_DECIMAL=110;c.ui.Keyboard.DOM_VK_DIVIDE=111;c.ui.Keyboard.DOM_VK_F1=112;c.ui.Keyboard.DOM_VK_F2=113;c.ui.Keyboard.DOM_VK_F3=114;c.ui.Keyboard.DOM_VK_F4=115;c.ui.Keyboard.DOM_VK_F5=116;c.ui.Keyboard.DOM_VK_F6=117;c.ui.Keyboard.DOM_VK_F7=118;c.ui.Keyboard.DOM_VK_F8=
119;c.ui.Keyboard.DOM_VK_F9=120;c.ui.Keyboard.DOM_VK_F10=121;c.ui.Keyboard.DOM_VK_F11=122;c.ui.Keyboard.DOM_VK_F12=123;c.ui.Keyboard.DOM_VK_F13=124;c.ui.Keyboard.DOM_VK_F14=125;c.ui.Keyboard.DOM_VK_F15=126;c.ui.Keyboard.DOM_VK_F16=127;c.ui.Keyboard.DOM_VK_F17=128;c.ui.Keyboard.DOM_VK_F18=129;c.ui.Keyboard.DOM_VK_F19=130;c.ui.Keyboard.DOM_VK_F20=131;c.ui.Keyboard.DOM_VK_F21=132;c.ui.Keyboard.DOM_VK_F22=133;c.ui.Keyboard.DOM_VK_F23=134;c.ui.Keyboard.DOM_VK_F24=135;c.ui.Keyboard.DOM_VK_NUM_LOCK=144;
c.ui.Keyboard.DOM_VK_SCROLL_LOCK=145;c.ui.Keyboard.DOM_VK_COMMA=188;c.ui.Keyboard.DOM_VK_PERIOD=190;c.ui.Keyboard.DOM_VK_SLASH=191;c.ui.Keyboard.DOM_VK_BACK_QUOTE=192;c.ui.Keyboard.DOM_VK_OPEN_BRACKET=219;c.ui.Keyboard.DOM_VK_BACK_SLASH=220;c.ui.Keyboard.DOM_VK_CLOSE_BRACKET=221;c.ui.Keyboard.DOM_VK_QUOTE=222;c.ui.Keyboard.DOM_VK_META=224;c.ui.Keyboard.DOM_VK_KANA=21;c.ui.Keyboard.DOM_VK_HANGUL=21;c.ui.Keyboard.DOM_VK_JUNJA=23;c.ui.Keyboard.DOM_VK_FINAL=24;c.ui.Keyboard.DOM_VK_HANJA=25;c.ui.Keyboard.DOM_VK_KANJI=
25;c.ui.Keyboard.DOM_VK_CONVERT=28;c.ui.Keyboard.DOM_VK_NONCONVERT=29;c.ui.Keyboard.DOM_VK_ACEPT=30;c.ui.Keyboard.DOM_VK_MODECHANGE=31;c.ui.Keyboard.DOM_VK_SELECT=41;c.ui.Keyboard.DOM_VK_PRINT=42;c.ui.Keyboard.DOM_VK_EXECUTE=43;c.ui.Keyboard.DOM_VK_SLEEP=95;c.utils.Endian.BIG_ENDIAN="bigEndian";c.utils.Endian.LITTLE_ENDIAN="littleEndian";e.animation.DelayedCall.sPool=[];e.animation.Transitions.LINEAR="linear";e.animation.Transitions.EASE_IN="easeIn";e.animation.Transitions.EASE_OUT="easeOut";e.animation.Transitions.EASE_IN_OUT=
"easeInOut";e.animation.Transitions.EASE_OUT_IN="easeOutIn";e.animation.Transitions.EASE_IN_BACK="easeInBack";e.animation.Transitions.EASE_OUT_BACK="easeOutBack";e.animation.Transitions.EASE_IN_OUT_BACK="easeInOutBack";e.animation.Transitions.EASE_OUT_IN_BACK="easeOutInBack";e.animation.Transitions.EASE_IN_ELASTIC="easeInElastic";e.animation.Transitions.EASE_OUT_ELASTIC="easeOutElastic";e.animation.Transitions.EASE_IN_OUT_ELASTIC="easeInOutElastic";e.animation.Transitions.EASE_OUT_IN_ELASTIC="easeOutInElastic";
e.animation.Transitions.EASE_IN_BOUNCE="easeInBounce";e.animation.Transitions.EASE_OUT_BOUNCE="easeOutBounce";e.animation.Transitions.EASE_IN_OUT_BOUNCE="easeInOutBounce";e.animation.Transitions.EASE_OUT_IN_BOUNCE="easeOutInBounce";e.animation.Tween.sTweenPool=[];e.core.RenderSupport.sPoint=new c.geom.Point;e.core.RenderSupport.sClipRect=new c.geom.Rectangle;e.core.RenderSupport.sBufferRect=new c.geom.Rectangle;e.core.RenderSupport.sScissorRect=new c.geom.Rectangle;e.core.Starling.VERSION="1.5.1";
e.core.Starling.PROGRAM_DATA_NAME="Starling.programs";e.core.Starling.sContextData=new m.ds.ObjectMap;e.core.Starling.sPrograms=new m.ds.ObjectMap;e.core.Starling.sBitmapFonts=new m.ds.ObjectMap;e.core.Starling.sAll=[];e.core.StatsDisplay.UPDATE_INTERVAL=0.5;J=e.display.BlendMode;F=new m.ds.StringMap;F.set("none",[1,0]);F.set("normal",[770,771]);F.set("add",[770,772]);F.set("multiply",[774,771]);F.set("screen",[770,1]);F.set("erase",[0,771]);F.set("below",[773,772]);var O=new m.ds.StringMap;O.set("none",
[1,0]);O.set("normal",[1,771]);O.set("add",[1,1]);O.set("multiply",[774,771]);O.set("screen",[1,769]);O.set("erase",[0,771]);O.set("below",[773,772]);J.sBlendFactors=[F,O];e.display.BlendMode.AUTO="auto";e.display.BlendMode.NONE="none";e.display.BlendMode.NORMAL="normal";e.display.BlendMode.ADD="add";e.display.BlendMode.MULTIPLY="multiply";e.display.BlendMode.SCREEN="screen";e.display.BlendMode.ERASE="erase";e.display.BlendMode.BELOW="below";e.display.Button.MAX_DRAG_DIST=50;e.display.Quad.sHelperPoint=
new c.geom.Point;e.display.Quad.sHelperMatrix=new c.geom.Matrix;e.display.QuadBatch.MAX_NUM_QUADS=16383;e.display.QuadBatch.QUAD_PROGRAM_NAME="QB_q";e.display.QuadBatch.sHelperMatrix=new c.geom.Matrix;e.display.QuadBatch.sRenderAlpha=[1,1,1,1];e.display.QuadBatch.sRenderMatrix=new c.geom.Matrix3D;e.display.QuadBatch.sProgramNameCache=new m.ds.IntMap;e.events.Event.ADDED="added";e.events.Event.ADDED_TO_STAGE="addedToStage";e.events.Event.ENTER_FRAME="enterFrame";e.events.Event.REMOVED="removed";e.events.Event.REMOVED_FROM_STAGE=
"removedFromStage";e.events.Event.TRIGGERED="triggered";e.events.Event.FLATTEN="flatten";e.events.Event.RESIZE="resize";e.events.Event.COMPLETE="complete";e.events.Event.CONTEXT3D_CREATE="context3DCreate";e.events.Event.ROOT_CREATED="rootCreated";e.events.Event.REMOVE_FROM_JUGGLER="removeFromJuggler";e.events.Event.TEXTURES_RESTORED="texturesRestored";e.events.Event.CHANGE="change";e.events.Event.CANCEL="cancel";e.events.Event.SCROLL="scroll";e.events.Event.OPEN="open";e.events.Event.CLOSE="close";
e.events.Event.SELECT="select";e.events.Event.sEventPool=[];e.events.EnterFrameEvent.ENTER_FRAME="enterFrame";e.events.KeyboardEvent.KEY_UP="keyUp";e.events.KeyboardEvent.KEY_DOWN="keyDown";e.events.ResizeEvent.RESIZE="resize";e.events.Touch.sHelperMatrix=new c.geom.Matrix;e.events.TouchEvent.TOUCH="touch";e.events.TouchEvent.sTouches=[];e.events.TouchPhase.HOVER="hover";e.events.TouchPhase.BEGAN="began";e.events.TouchPhase.MOVED="moved";e.events.TouchPhase.STATIONARY="stationary";e.events.TouchPhase.ENDED=
"ended";e.events.TouchProcessor.sUpdatedTouches=[];e.events.TouchProcessor.sHoveringTouchData=[];e.events.TouchProcessor.sHelperPoint=new c.geom.Point;e.filters.FragmentFilter.MIN_TEXTURE_SIZE=64;e.filters.FragmentFilter.PMA=!1;e.filters.FragmentFilter.STD_VERTEX_SHADER="m44 op, va0, vc0 \nmov v0, va1      \n";e.filters.FragmentFilter.STD_FRAGMENT_SHADER="tex oc, v0, fs0 <2d, clamp, linear, mipnone>";e.filters.FragmentFilter.sBounds=new c.geom.Rectangle;e.filters.FragmentFilter.sBoundsPot=new c.geom.Rectangle;
e.filters.FragmentFilter.sStageBounds=new c.geom.Rectangle;e.filters.FragmentFilter.sTransformationMatrix=new c.geom.Matrix;e.filters.BlurFilter.NORMAL_PROGRAM_NAME="BF_n";e.filters.BlurFilter.TINTED_PROGRAM_NAME="BF_t";e.filters.BlurFilter.MAX_SIGMA=2;e.filters.ColorMatrixFilter.PROGRAM_NAME="CMF";e.filters.ColorMatrixFilter.MIN_COLOR=[0,0,0,1E-4];e.filters.ColorMatrixFilter.IDENTITY=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];e.filters.ColorMatrixFilter.LUMA_R=0.299;e.filters.ColorMatrixFilter.LUMA_G=
0.587;e.filters.ColorMatrixFilter.LUMA_B=0.114;e.filters.ColorMatrixFilter.sTmpMatrix1=[];e.filters.ColorMatrixFilter.sTmpMatrix2=[];e.filters.DisplacementMapFilter.sOneHalf=[0.5,0.5,0.5,0.5];e.filters.DisplacementMapFilter.sMapTexCoords=new Float32Array([0,0,1,0,0,1,1,1]);e.filters.DisplacementMapFilter.sMatrix=new c.geom.Matrix3D;e.filters.DisplacementMapFilter.sMatrixData=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];e.filters.FragmentFilterMode.BELOW="below";e.filters.FragmentFilterMode.REPLACE="replace";
e.filters.FragmentFilterMode.ABOVE="above";e.text.BitmapFont.NATIVE_SIZE=-1;e.text.BitmapFont.MINI="mini";e.text.BitmapFont.CHAR_SPACE=32;e.text.BitmapFont.CHAR_TAB=9;e.text.BitmapFont.CHAR_NEWLINE=10;e.text.BitmapFont.CHAR_CARRIAGE_RETURN=13;e.text.MiniBitmapFont.BITMAP_WIDTH=128;e.text.MiniBitmapFont.BITMAP_HEIGHT=64;e.text.MiniBitmapFont.BITMAP_DATA=[2027613533,-881927360,202148514,-2028041698,-88080844,-8114179,2034947,-1092263897,352977282,-1337209332,-1181314416,-2136898414,1468709156,-2026903579,
-1515657153,2101025806,-878458241,-79172757,-692798458,1038056207,1932393374,-1112681669,-1208165062,1741291262,2017257123,-899686453,984074419,-1245274149,-308890273,1055013549,1806563255,1754714962,1577746187,1124058786,-406208038,-1812738253,-1378383630,-551901968,866060213,1695195001,-1893385228,-1181619395,-1678445700,1053798161,2093370968,-65941613,560451479,854767518,-1684725974,-15925948,-113394816,-263722323,587139110,1081376765,962217926,783603325,-689440871,-192965380,289204733,-1659827041,
-840985601,-807112923,2132197241,-1130192222,-37326968,770238970,144664537,707141570,-1360534225,871272893,512964596,808491899,481894297,-1198984815,-696603140,1710636358,-1390950977,1751040139,596966466,1363963692,465815609,315567311,-4301137,-208944745,179721458,-2073232326,-352742308,1519355876,-1002643514,-361540066,-980767403,-558739948,-448928871,603088884,-1617618069,-1087897969,-739691329,-1231913013,-1230390083,-882923117,693642210,-14453347,762928717,1802215333,-520117622,-73811966,970959395,
557220237,2107226136,-785144314,-891682508,-29147277,898597576,991077243,2091615904,-960250408,633599866,-76187187,-2078966920,834870947,2118009742,1362731961,236280636,1274945142,1458729366,797960805,-1005597576,2103717340,-348561293,-1618444407,1624104606,1156993903,-1108796892,-2040468225,1204911924,1314218830,-987880904,-1470691337,-455101617,2073394964,1873329433,1754205930,1528429545,1631106062,-2031694831,-74470249,-772073531,-653590993,707451487,-842470509,1390653868,-1674411503,1027328684,
-875283820,-632773593,765701986,-486688164,786403271,-470531459,713234896,-33110897,-823036565,-301474417,1447960461,1398434593,1914230187,-1896324011,-138592832,-435628089,-1074267235,-921718534,-1108936862,1315917060,-1485114815,-286413393,-189355343,1599499652,-781109705,877854499,-96707841,-646407219,-1456931877,-1039373106,-1829388839,-31462095,534904657,-1405705698,1358214576,1069250354,-424956739,-1666070713,-846356418,442343309,1024736866,-279848163,-1044100017,1513359261,-1852877700,1944476762,
735490552,426990058,-60861185,1204305707,-963972031,-1896317928,-73919173,1724669255,-493851587,-805638506,-398564363,-598030357,-1457984001,-638216903,-945242784,-484551009,-639969688,-10512193,-2000027733,-87269364,642748805,-1817985657,-1975547398,572956615,-461728356,964924880,2081600351,-722508880,2056247513,1951368808,2133449703,-1511238668,512866577,913279200,1678129016,-806388305,-921014367,-1731970345,-628908371,1664169178,1943591935,750675303,154399903,-1723376406,852654952,-177659530,1971649621,
-114771476,1222535348,-11014081,-1414305060,-1577556316,1175907705,1157322027,505963121,-1663426680,-633739640,-703163943,-1670840475,1948662907,-698902193,1147387734,256773959,1173572460,-1933009825,-84091220,-1214786676,-830166086,-473313037,1465302035,-1443781839,-1151701152,-501786882,-926134193,-20296584,-821148188,-807397964,773123355,1618635668,-1724791106,2075248691,1740805534,288646743,1837597401,603556968,-1112430424,673184603,-1206210243,-1397912892,-1102315980,-1409631494,1057233368,1118437241,
-112840833,-1184502521,-981775682,-1933980022,735505357,-1302335871,-1934038485,-107132769,279183208,1586420003,1174008423,-231979707,1162167621,1162167621,1162167621,1162167621,1174119799,787274608];e.text.MiniBitmapFont.XML_DATA=y.createElement('\r\n      <font>\r\n      <info face="mini" size="8" bold="0" italic="0" smooth="0"/>\r\n      <common lineHeight="8" base="7" scaleW="128" scaleH="64" pages="1" packed="0"/>\r\n      <chars count="191">\r\n        <char id="195" x="1" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6"/>\r\n        <char id="209" x="7" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6"/>\r\n        <char id="213" x="13" y="1" width="5" height="9" xoffset="0" yoffset="-2" xadvance="6"/>\r\n        <char id="253" x="19" y="1" width="4" height="9" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="255" x="24" y="1" width="4" height="9" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="192" x="29" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="193" x="35" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="194" x="41" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="197" x="47" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="200" x="53" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="201" x="59" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="202" x="65" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="210" x="71" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="211" x="77" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="212" x="83" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="217" x="89" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="218" x="95" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="219" x="101" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="221" x="107" y="1" width="5" height="8" xoffset="0" yoffset="-1" xadvance="6"/>\r\n        <char id="206" x="113" y="1" width="3" height="8" xoffset="-1" yoffset="-1" xadvance="2"/>\r\n        <char id="204" x="117" y="1" width="2" height="8" xoffset="-1" yoffset="-1" xadvance="2"/>\r\n        <char id="205" x="120" y="1" width="2" height="8" xoffset="0" yoffset="-1" xadvance="2"/>\r\n        <char id="36"  x="1" y="11" width="5" height="7" xoffset="0" yoffset="1" xadvance="6"/>\r\n        <char id="196" x="7" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6"/>\r\n        <char id="199" x="13" y="11" width="5" height="7" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="203" x="19" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6"/>\r\n        <char id="214" x="25" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6"/>\r\n        <char id="220" x="31" y="11" width="5" height="7" xoffset="0" yoffset="0" xadvance="6"/>\r\n        <char id="224" x="37" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="225" x="42" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="226" x="47" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="227" x="52" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="232" x="57" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="233" x="62" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="234" x="67" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="235" x="72" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="241" x="77" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="242" x="82" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="243" x="87" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="244" x="92" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="245" x="97" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="249" x="102" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="250" x="107" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="251" x="112" y="11" width="4" height="7" xoffset="0" yoffset="0" xadvance="5"/>\r\n        <char id="254" x="117" y="11" width="4" height="7" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="123" x="122" y="11" width="3" height="7" xoffset="0" yoffset="1" xadvance="4"/>\r\n        <char id="125" x="1" y="19" width="3" height="7" xoffset="0" yoffset="1" xadvance="4"/>\r\n        <char id="167" x="5" y="19" width="3" height="7" xoffset="0" yoffset="1" xadvance="4"/>\r\n        <char id="207" x="9" y="19" width="3" height="7" xoffset="-1" yoffset="0" xadvance="2"/>\r\n        <char id="106" x="13" y="19" width="2" height="7" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="40" x="16" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3"/>\r\n        <char id="41" x="19" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3"/>\r\n        <char id="91" x="22" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3"/>\r\n        <char id="93" x="25" y="19" width="2" height="7" xoffset="0" yoffset="1" xadvance="3"/>\r\n        <char id="124" x="28" y="19" width="1" height="7" xoffset="1" yoffset="1" xadvance="4"/>\r\n        <char id="81" x="30" y="19" width="5" height="6" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="163" x="36" y="19" width="5" height="6" xoffset="0" yoffset="1" xadvance="6"/>\r\n        <char id="177" x="42" y="19" width="5" height="6" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="181" x="48" y="19" width="5" height="6" xoffset="0" yoffset="3" xadvance="6"/>\r\n        <char id="103" x="54" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="112" x="59" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="113" x="64" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="121" x="69" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="162" x="74" y="19" width="4" height="6" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="228" x="79" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5"/>\r\n        <char id="229" x="84" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5"/>\r\n        <char id="231" x="89" y="19" width="4" height="6" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="240" x="94" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5"/>\r\n        <char id="246" x="99" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5"/>\r\n        <char id="252" x="104" y="19" width="4" height="6" xoffset="0" yoffset="1" xadvance="5"/>\r\n        <char id="238" x="109" y="19" width="3" height="6" xoffset="-1" yoffset="1" xadvance="2"/>\r\n        <char id="59" x="113" y="19" width="2" height="6" xoffset="0" yoffset="3" xadvance="4"/>\r\n        <char id="236" x="116" y="19" width="2" height="6" xoffset="-1" yoffset="1" xadvance="2"/>\r\n        <char id="237" x="119" y="19" width="2" height="6" xoffset="0" yoffset="1" xadvance="2"/>\r\n        <char id="198" x="1" y="27" width="9" height="5" xoffset="0" yoffset="2" xadvance="10"/>\r\n        <char id="190" x="11" y="27" width="8" height="5" xoffset="0" yoffset="2" xadvance="9"/>\r\n        <char id="87" x="20" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8"/>\r\n        <char id="188" x="28" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8"/>\r\n        <char id="189" x="36" y="27" width="7" height="5" xoffset="0" yoffset="2" xadvance="8"/>\r\n        <char id="38" x="44" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7"/>\r\n        <char id="164" x="51" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7"/>\r\n        <char id="208" x="58" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7"/>\r\n        <char id="8364" x="65" y="27" width="6" height="5" xoffset="0" yoffset="2" xadvance="7"/>\r\n        <char id="65" x="72" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="66" x="78" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="67" x="84" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="68" x="90" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="69" x="96" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="70" x="102" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="71" x="108" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="72" x="114" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="75" x="120" y="27" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="77" x="1" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="78" x="7" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="79" x="13" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="80" x="19" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="82" x="25" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="83" x="31" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="84" x="37" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="85" x="43" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="86" x="49" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="88" x="55" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="89" x="61" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="90" x="67" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="50" x="73" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="51" x="79" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="52" x="85" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="53" x="91" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="54" x="97" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="56" x="103" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="57" x="109" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="48" x="115" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="47" x="121" y="33" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="64" x="1" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="92" x="7" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="37" x="13" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="43" x="19" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="35" x="25" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="42" x="31" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="165" x="37" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="169" x="43" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="174" x="49" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="182" x="55" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="216" x="61" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="247" x="67" y="39" width="5" height="5" xoffset="0" yoffset="2" xadvance="6"/>\r\n        <char id="74" x="73" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="76" x="78" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="98" x="83" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="100" x="88" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="104" x="93" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="107" x="98" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="55" x="103" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="63" x="108" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="191" x="113" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="222" x="118" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="223" x="123" y="39" width="4" height="5" xoffset="0" yoffset="2" xadvance="5"/>\r\n        <char id="116" x="1" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="60" x="5" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="62" x="9" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="170" x="13" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="186" x="17" y="45" width="3" height="5" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="239" x="21" y="45" width="3" height="5" xoffset="-1" yoffset="2" xadvance="2"/>\r\n        <char id="102" x="25" y="45" width="2" height="5" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="49" x="28" y="45" width="2" height="5" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="73" x="31" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="105" x="33" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="108" x="35" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="33" x="37" y="45" width="1" height="5" xoffset="1" yoffset="2" xadvance="3"/>\r\n        <char id="161" x="39" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="166" x="41" y="45" width="1" height="5" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="109" x="43" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8"/>\r\n        <char id="119" x="51" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8"/>\r\n        <char id="230" x="59" y="45" width="7" height="4" xoffset="0" yoffset="3" xadvance="8"/>\r\n        <char id="97" x="67" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="99" x="72" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="101" x="77" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="110" x="82" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="111" x="87" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="115" x="92" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="117" x="97" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="118" x="102" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="120" x="107" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="122" x="112" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="215" x="117" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="248" x="122" y="45" width="4" height="4" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="114" x="1" y="51" width="3" height="4" xoffset="0" yoffset="3" xadvance="4"/>\r\n        <char id="178" x="5" y="51" width="3" height="4" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="179" x="9" y="51" width="3" height="4" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="185" x="13" y="51" width="1" height="4" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="61" x="15" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6"/>\r\n        <char id="171" x="21" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6"/>\r\n        <char id="172" x="27" y="51" width="5" height="3" xoffset="0" yoffset="4" xadvance="6"/>\r\n        <char id="187" x="33" y="51" width="5" height="3" xoffset="0" yoffset="3" xadvance="6"/>\r\n        <char id="176" x="39" y="51" width="3" height="3" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="44" x="43" y="51" width="2" height="3" xoffset="0" yoffset="6" xadvance="3"/>\r\n        <char id="58" x="46" y="51" width="1" height="3" xoffset="1" yoffset="3" xadvance="4"/>\r\n        <char id="94" x="48" y="51" width="4" height="2" xoffset="-1" yoffset="2" xadvance="4"/>\r\n        <char id="126" x="53" y="51" width="4" height="2" xoffset="0" yoffset="3" xadvance="5"/>\r\n        <char id="34" x="58" y="51" width="3" height="2" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="96" x="62" y="51" width="2" height="2" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="180" x="65" y="51" width="2" height="2" xoffset="0" yoffset="2" xadvance="3"/>\r\n        <char id="184" x="68" y="51" width="2" height="2" xoffset="0" yoffset="7" xadvance="3"/>\r\n        <char id="39" x="71" y="51" width="1" height="2" xoffset="0" yoffset="2" xadvance="2"/>\r\n        <char id="95" x="73" y="51" width="5" height="1" xoffset="0" yoffset="7" xadvance="6"/>\r\n        <char id="45" x="79" y="51" width="4" height="1" xoffset="0" yoffset="4" xadvance="5"/>\r\n        <char id="173" x="84" y="51" width="4" height="1" xoffset="0" yoffset="4" xadvance="5"/>\r\n        <char id="168" x="89" y="51" width="3" height="1" xoffset="1" yoffset="2" xadvance="5"/>\r\n        <char id="175" x="93" y="51" width="3" height="1" xoffset="0" yoffset="2" xadvance="4"/>\r\n        <char id="46" x="97" y="51" width="1" height="1" xoffset="0" yoffset="6" xadvance="2"/>\r\n        <char id="183" x="99" y="51" width="1" height="1" xoffset="0" yoffset="4" xadvance="2"/>\r\n        <char id="32" x="6" y="56" width="0" height="0" xoffset="0" yoffset="127" xadvance="3"/>\r\n      </chars>\r\n    </font>\r\n    ');
e.text.TextField.BITMAP_FONT_DATA_NAME="starling.display.TextField.BitmapFonts";e.text.TextField.sDefaultTextureFormat="bgra";e.text.TextField.sHelperMatrix=new c.geom.Matrix;e.text.TextField.sNativeTextField=new c.text.TextField;e.text.TextFieldAutoSize.NONE="none";e.text.TextFieldAutoSize.HORIZONTAL="horizontal";e.text.TextFieldAutoSize.VERTICAL="vertical";e.text.TextFieldAutoSize.BOTH_DIRECTIONS="bothDirections";e.textures.ConcreteTexture.sOrigin=new c.geom.Point;e.textures.SubTexture.sTexCoords=
new c.geom.Point;e.textures.SubTexture.sMatrix=new c.geom.Matrix;e.textures.RenderTexture.CONTEXT_POT_SUPPORT_KEY="RenderTexture.supportsNonPotDimensions";e.textures.RenderTexture.PMA=!0;e.textures.RenderTexture.sClipRect=new c.geom.Rectangle;e.textures.TextureAtlas.sNames=[];e.textures.TextureSmoothing.NONE="none";e.textures.TextureSmoothing.BILINEAR="bilinear";e.textures.TextureSmoothing.TRILINEAR="trilinear";e.utils.AssetManager.HTTP_RESPONSE_STATUS="httpResponseStatus";e.utils.AssetManager.sNames=
[];e.utils.AssetManager.NAME_REGEX=new H("([^\\?/\\\\]+?)(?:\\.([\\w\\-]+))?(?:\\?.*)?$","");e.utils.Color.WHITE=16777215;e.utils.Color.SILVER=12632256;e.utils.Color.GRAY=8421504;e.utils.Color.BLACK=0;e.utils.Color.RED=16711680;e.utils.Color.MAROON=8388608;e.utils.Color.YELLOW=16776960;e.utils.Color.OLIVE=8421376;e.utils.Color.LIME=65280;e.utils.Color.GREEN=32768;e.utils.Color.AQUA=65535;e.utils.Color.TEAL=32896;e.utils.Color.BLUE=255;e.utils.Color.NAVY=128;e.utils.Color.FUCHSIA=16711935;e.utils.Color.PURPLE=
8388736;e.utils.HAlign.LEFT="left";e.utils.HAlign.CENTER="center";e.utils.HAlign.RIGHT="right";e.utils.MatrixUtil.sRawData=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];e.utils.Max.MAX_VALUE=1.79E308;e.utils.Max.MIN_VALUE=4.9E-324;e.utils.Max.INT_MAX_VALUE=2147483647;e.utils.Max.INT_MIN_VALUE=-2147483647;e.utils.Max.UINT_MAX_VALUE=-1;e.utils.RectangleUtil.sHelperPoint=new c.geom.Point;e.utils.RectangleUtil.sPositions=[new c.geom.Point(0,0),new c.geom.Point(1,0),new c.geom.Point(0,1),new c.geom.Point(1,1)];e.utils.RectangleUtil.MAX_VALUE=
1.79E308;e.utils.RectangleUtil.MIN_VALUE=4.9E-324;e.utils.ScaleMode.NONE="none";e.utils.ScaleMode.NO_BORDER="noBorder";e.utils.ScaleMode.SHOW_ALL="showAll";e.utils.SystemUtil.sInitialized=!1;e.utils.SystemUtil.sApplicationActive=!0;e.utils.SystemUtil.sWaitingCalls=[];e.utils.VAlign.TOP="top";e.utils.VAlign.CENTER="center";e.utils.VAlign.BOTTOM="bottom";e.utils.VertexData.ELEMENTS_PER_VERTEX=8;e.utils.VertexData.POSITION_OFFSET=0;e.utils.VertexData.COLOR_OFFSET=2;e.utils.VertexData.TEXCOORD_OFFSET=
6;e.utils.VertexData.sHelperPoint=new c.geom.Point;x.main()})("undefined"!=typeof window?window:exports);
